jQuery.fn.datepicker.dates.pl={days:["niedziela","poniedziałek","wtorek","środa","czwartek","piątek","sobota"],daysShort:["niedz.","pon.","wt.","śr.","czw.","piąt.","sob."],daysMin:["ndz.","pn.","wt.","śr.","czw.","pt.","sob."],months:["styczeń","luty","marzec","kwiecień","maj","czerwiec","lipiec","sierpień","wrzesień","październik","listopad","grudzień"],monthsShort:["sty.","lut.","mar.","kwi.","maj","cze.","lip.","sie.","wrz.","paź.","lis.","gru."],today:"dzisiaj",weekStart:1,clear:"wyczyść",format:"dd.mm.yyyy"},function(o,t){o.SecureForm={options:{storeCard:!1,form:"#card-form",payButtons:".pay-button",recurringCheckbox:"#recurring",secureForm:{profile:"widthGt300",profiles:{widthLt270:{cardIcon:!1,style:{basic:{fontSize:"14px"}}},widthLt300:{cardIcon:!0,style:{basic:{fontSize:"14px"}}},widthGt300:{cardIcon:!0,style:{basic:{fontSize:"17px"}}}},elementFormNumber:"#payu-card-number",elementFormDate:"#payu-card-date",elementFormCvv:"#payu-card-cvv",element:"#secure-form",elementCvv:"#secure-form-cvv",config:{cardIcon:!0,placeholder:{number:"",cvv:""},style:{basic:{fontSize:"17px"}},lang:"pl"}},cvvUrl:""},init:function(){o.SecureForm.loadUserCards(),o.SecureForm.renderPayButtons(),cvv&&o.SecureForm.showCvvConfirmation(cvvUrl),o.SecureForm.inputsBind(),o.SecureForm.submitButtonsBind(),o.SecureForm.renderSecureForm(),o.SecureForm.formBind()},submitButtonsBind:function(){$(this.options.form).on("click",this.options.payButtons,function(){$(o.SecureForm.options.payButtons).removeAttr("clicked"),$(this).attr("clicked","true")})},renderSecureForm:function(){this.options.secureForm.profile=this.calculateProfile(),this.options.secureForm.config=Object.assign({},this.options.secureForm.config,this.options.secureForm.profiles[this.options.secureForm.profile]),this.payu=PayU(merchantId,{dev:devSecureForm}),this.secureForms=this.payu.secureForms(),this.secureFormNumber=this.secureForms.add("number",this.options.secureForm.config),this.secureFormNumber.render(this.options.secureForm.elementFormNumber),this.secureFormDate=this.secureForms.add("date",this.options.secureForm.config),this.secureFormDate.render(this.options.secureForm.elementFormDate),this.secureFormCvv=this.secureForms.add("cvv",this.options.secureForm.config),this.secureFormCvv.render(this.options.secureForm.elementFormCvv),t.addEventListener("resize",this.secureFormResize)},calculateProfile:function(){return t.innerWidth<=270?"widthLt270":t.innerWidth<=300?"widthLt300":"widthGt300"},secureFormResize:function(){var e=o.SecureForm.calculateProfile();e!==o.SecureForm.options.secureForm.profile&&(o.SecureForm.options.secureForm.profile=e,o.SecureForm.secureFormNumber.update(o.SecureForm.options.secureForm.profiles[o.SecureForm.options.secureForm.profile]),o.SecureForm.secureFormDate.update(o.SecureForm.options.secureForm.profiles[o.SecureForm.options.secureForm.profile]),o.SecureForm.secureFormCvv.update(o.SecureForm.options.secureForm.profiles[o.SecureForm.options.secureForm.profile]))},formBind:function(){$(this.options.form).submit(function(e){if(e.preventDefault(),o.SecureForm.validateForm(o.SecureForm.options.form)){var t=$(this).find(".user-cards input:checked"),r=t.hasClass("card-new");$(this).find(".cvv-confirmation").length?o.SecureForm.submitCvv():t.length&&!r?o.SecureForm.payWithSelectedCard(t.val()):o.SecureForm.cardTokenize($(o.SecureForm.options.payButtons+"[clicked=true]").data("storeCard"))}})},payWithSelectedCard:function(e){blockUI(),o.SecureForm.payByToken(e)},cardTokenize:function(e){blockUI();try{this.payu.tokenize(e?"MULTI":"SINGLE").then(function(e){if("SUCCESS"===e.status)o.SecureForm.payByToken(e.body.token);else{var t="Wystąpił błąd przy zapisie karty:<br>";e.error.messages.forEach(function(e){t+="<strong>"+e.message+"<strong><br>"}),o.SecureForm.showError(t)}})}catch(e){o.SecureForm.showError(e.message)}},payByToken:function(e){$.ajax({url:$(o.SecureForm.options.form).attr("action"),type:"POST",data:{paymentToken:e,recurringRequested:$("#recurring").is(":checked"),recurringDayOfMonth:$("#recurringDay").val()},success:function(e){1===e.success?(t.removeEventListener("resize",o.SecureForm.secureFormResize),o.SecureForm.checkCvvRedirect(e)?(o.SecureForm.options.cvvUrl=e.data,o.SecureForm.showCvvConfirmation()):o.SecureForm.check3dsRedirect(e)?o.SecureForm.redirectTo3ds(e.data):o.SecureForm.redirectToUrl(e.redirectUrl)):o.SecureForm.showError(e.message?e.message:unexpectedError)},error:function(e,t,r){e.hasOwnProperty("responseJSON")&&e.responseJSON.hasOwnProperty("message")&&o.SecureForm.showError(e.responseJSON.message)}})},showCvvConfirmation:function(){var e=$("#cvv-confirmation").html();$(".conditions").remove(),$(".card-data-wrapper").html(Mustache.render(e)),this.payuCvv=PayU(merchantId,{dev:devSecureForm}),this.secureFormsCvv=this.payuCvv.secureForms(),this.secureFormCvv=this.secureFormsCvv.add("cvv",this.options.secureForm.config),this.secureFormCvv.render(this.options.secureForm.elementCvv),$.unblockUI()},submitCvv:function(){blockUI();try{this.payuCvv.sendCvv(this.payuCvv.extractRefReqId(o.SecureForm.options.cvvUrl)).then(function(e){o.SecureForm.redirectToUrl()})}catch(e){o.SecureForm.showError(e.message)}},validateForm:function(e){return $(e).valid()},showError:function(e){showErrorMessage(e,".messages",!0),$.unblockUI()},redirectToUrl:function(e){void 0===e&&(e="/ok"),t.location.href=e},redirectTo3ds:function(e){t.location.replace(e)},checkCvvRedirect:function(e){return!("PAYMENT_ON_SITE_WITH_CVV"!==e.paymentIntegrationMethod||null==e.data)},check3dsRedirect:function(e){return!("PAYMENT_ON_SITE_WITH_3DS_REDIRECT"!==e.paymentIntegrationMethod||null==e.data)},loadUserCards:function(){var e=$.parseJSON($("#storedCards").html());void 0!==e&&null!=e&&"null"!==e&&""!==e&&o.SecureForm.renderUserCards(e)},inputsBind:function(){$(o.SecureForm.options.recurringCheckbox).on("change",function(e){$(this).is(":checked")?($("#recurringDay").addClass("required"),$(".recurring-wrapper").slideDown()):($("#recurringDay").removeClass("required"),$(".recurring-wrapper").slideUp()),o.SecureForm.renderPayButtons()})},renderPayButtons:function(){var e=o.SecureForm.renderPayButtonsTemplate(o.SecureForm.getRenderPayButtonsData());$(".card-actions").remove(),$(".cf-submit-wrapper").append(e)},getRenderPayButtonsData:function(){var e=o.SecureForm.isNewCardSelected()&&o.SecureForm.isUserLogged()||!o.SecureForm.isUserLogged()&&emailConfirmed;return{storeCardEnabled:e,showInfo:e,recurringSelected:$(o.SecureForm.options.recurringCheckbox).is(":checked")}},renderPayButtonsTemplate:function(e){var t=$("#pay-buttons-template").html();return Mustache.render(t,e)},renderUserCards:function(e){var t=$("#user-cards-template").html(),r={cards:null};r.cards=e,$.each(r.cards,function(e,t){t.brand=t.cardBrand.toLowerCase(),t.cardNumber=t.cardNumberMasked.match(/.{4}/g).join(" "),t.expirationMonth=("0"+t.cardExpirationMonth).slice(-2),t.expirationYear=t.cardExpirationYear.toString().slice(-2)});var n=Mustache.render(t,r);$(".card-data-container").prepend(n),o.SecureForm.styleCardForm()},isNewCardSelected:function(){return"new"==$("input[name=card]:checked").val()},isUserLogged:function(){return userLogged},styleCardForm:function(){var e=$(".new-card");$(".user-cards input:radio").first().click(),$(".user-cards :radio").on("change",function(){e.stop(!0),$(this).hasClass("card-new")?e.slideDown(function(){$(this).attr("style","display:block;"),$("body, html").stop().animate({scrollTop:$(this).offset().top})}):e.slideUp(),o.SecureForm.renderPayButtons()}),$(".card-new:checked").length&&e.show()}}}(window.Payment=window.Payment||{},window);var cardTypes={visa:/^4/,maestro:/^(06|5[0678]|6\d)/,mastercard:/^5[1-5]/},cardLength={visa:[13,16],maestro:[13,16,17,18,19],mastercard:[16]};function doesCardNumberMatchPattern(e,t,r){return e.test(r)&&-1!=$.inArray(r.length,t)}function isCardTypeSupported(e){return!0}function isCardTypeSupportedForRecurring(e){return!("maestro"===e)}function isMobile(){return new RegExp(/iPhone|iPod|iPad|Android|BlackBerry|Windows Phone/i).test(navigator.userAgent)}function blockUI(){$.blockUI({message:$(".blockUI-wrapper"),fadeIn:250,fadeOut:250})}function hideMessages(){$(".messages").children().remove()}function showErrorMessage(e,t,r){$(t).find(".alert").length&&$(t).find(".alert").remove();var n=$('<div class="row alert alert-danger alert-main"></div>');$(t).prepend(n.html($('<div class="container-fluid"></div>').html(e))),r&&$(window).scrollTo("body",{duration:500})}jQuery.validator.addMethod("cardValidity",function(e,t){e=e.replace(/\D+/g,"");var n=0,o=[[0,2,4,6,8,1,3,5,7,9],[0,1,2,3,4,5,6,7,8,9]];e.replace(/[\d]/g,function(e,t,r){n+=o[r.length-t&1][parseInt(e,10)]});var r=n%10==0&&0<n;return r||addGoogleAnalyticsEvent("cardForm_cardNumber","error","invalid_number"),r}),jQuery.validator.addMethod("cardTypes",function(r,e){r=r.replace(/\D+/g,"");var n=!1;return $.each(cardTypes,function(e,t){doesCardNumberMatchPattern(t,cardLength[e],r)&&isCardTypeSupported(e)&&(n=!0)}),n||addGoogleAnalyticsEvent("cardForm_cardNumber","error","invalid_type"),n}),jQuery.validator.addMethod("month",function(e,t){var r=1<=+e&&+e<=12;return r||addGoogleAnalyticsEvent("cardForm_cardDateMonth","error","invalid"),r}),jQuery.validator.addMethod("year",function(e,t){2==e.length&&(e="20"+e);var r=(new Date).getFullYear(),n=4==e.length&&r<=+e&&+e<=r+15;return n||addGoogleAnalyticsEvent("cardForm_cardDateYear","error","invalid"),n}),jQuery.validator.addMethod("pastdate",function(e,t){var r=$("#cardform_cardDateYear").val(),n=$("#cardform_cardDateMonth").val();2==r.length&&(r="20"+r);var o=+(new Date).getFullYear(),i=(new Date).getMonth()+1;return!(r&&n&&(r<o||r==o&&n<i))||(addGoogleAnalyticsEvent("cardForm_cardDate","error","past_date"),!1)}),jQuery.validator.addMethod("cvv",function(e,t){if($(".card-types > .maestro").hasClass("is-active"))return!0;var r=0<=+e&&+e<=999&&3==e.length;return r||0==e.length||addGoogleAnalyticsEvent("cardForm_cardCvv","error","invalid"),r}),jQuery.validator.addMethod("checkboxRequired",function(e,t){return t.checked}),jQuery.validator.addClassRules({"valid-card-number":{required:!0,cardValidity:!0,cardTypes:!0},"valid-card-expiry-month":{required:!0,month:!0,pastdate:!0},"valid-card-expiry-year":{required:!0,year:!0,pastdate:!0},"valid-card-cvv":{cvv:!0},"valid-card-regulations":{checkboxRequired:!0},"valid-firstname":{required:!0},"valid-lastname":{required:!0},"valid-email":{required:!0,emailValidation:!0}}),$(function(){var t;if($(".accordion").length)return t=$(".accordion > dd").hide(),$(".accordion > dt > a").on("click",function(e){if(e.preventDefault(),t.slideUp(),!$(this).parent().next().is(":visible"))return $(this).parent().next().slideDown()})}),$(function(){return $("input.focus-on-me").length&&$("input.focus-on-me").focus(),$("#checkbox-select-all").change(function(){return $(this).is(":checked")?$(".checkbox-wrapper input").each(function(){return $(this).prop("checked",!0)}):$(".checkbox-wrapper input").each(function(){return $(this).prop("checked",!1)})}),$(".checkbox-wrapper input").change(function(){var e,t;if(e=$(".checkbox-wrapper input").length,t=0,$(".checkbox-wrapper input").each(function(){if($(this).is(":checked"))return t++}),t!==e&&$("#checkbox-select-all").is(":checked"))return $("#checkbox-select-all").prop("checked",!1)}),$("#remindMe").change(function(){return $(this).is(":checked")?($(".remind-me-wrapper").slideDown(),$("#remindMeDays").addClass("required")):($(".remind-me-wrapper").slideUp(),$("#remindMeDays").removeClass("required"))})}),$(function(){var e;return e=function(){return 200<=$(window).scrollTop()?$("html").addClass("collapsed"):$("html").removeClass("collapsed")},$(window).off("DOMContentLoaded load resize scroll touchmove",e),$(window).on("DOMContentLoaded load resize scroll touchmove",e),$(".home-full").off("DOMContentLoaded load resize scroll touchmove",e),$(".home-full").on("DOMContentLoaded load resize scroll touchmove",e),e(),$("body").on("click",".payu-navbar .nav a",function(e){return $(".payu-navbar .navbar-toggle").click()})}),$(function(){return $(".btn-login.facebook").on("click",function(){return addGoogleAnalyticsPageView("/login/facebook/")}),$(".btn-login.payuaccount").on("click",function(){return addGoogleAnalyticsPageView("/login/")}),$(".login-box-forget").on("click",function(){return addGoogleAnalyticsEvent("loginForm_forget","click","blank")}),$(".register").on("click",function(){return addGoogleAnalyticsEvent("loginForm_register","click","blank")}),$(".logout").on("click",function(){return addGoogleAnalyticsPageView("/logout/")})}),$(function(){return $("body").on("click",".payu-method",function(e){var t;return e.preventDefault(),(t=$(".payu-method.active")).find("input:radio").prop("checked",!1),t.find("input:checkbox").prop("checked",!1),t.removeClass("active"),$(this).addClass("active"),$(this).find("input:radio").prop("checked","checked"),$(this).find("input:checkbox").prop("checked","checked"),$(window).scrollTo($(".payment-method-sections").next(),{duration:500})})}),$(function(){var e,t;return e=function(e){var t;if((t=$("#dialog-"+e)).length)return t.addClass("in"),addGoogleAnalyticsPageView("/modal/mobile/"+e+"/")},-1<(t=navigator.userAgent.toLowerCase()).indexOf("android")&&e("android"),/ipad|iphone|ipod/.test(t)&&!window.MSStream&&e("ios"),$(".app-link-apple").on("click",function(){return addGoogleAnalyticsEvent("modal","click","ios")}),$(".app-link-google").on("click",function(){return addGoogleAnalyticsEvent("modal","click","android")})}),"function"!=typeof Object.assign&&(Object.assign=function(e,t){"use strict";if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var r=Object(e),n=1;n<arguments.length;n++){var o=arguments[n];if(null!=o)for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(r[i]=o[i])}return r}),$(function(){$(".phone-mask").mask("000 000 000"),$("#amount").autoNumeric("init",{aSep:"",aDec:",",aSign:""}),$(".dropdown-toggle").dropdown(),$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},timeout:3e4}),$("#allAgreements").on("change",function(){return $(this).is(":checked")?$(".checkbox input").each(function(){return $(this).prop("checked",!0)}):$(".checkbox input").each(function(){return $(this).prop("checked",!1)})}),$(".datepicker").datepicker({format:"yyyy-mm-dd",autoclose:!0,language:"pl-PL"}),$(".datepicker-before-now").datepicker({format:"yyyy-mm-dd",autoclose:!0,language:"pl-PL",endDate:new Date}),$(".summary-payment-form").on("submit",function(e){e.preventDefault();var t=$(this),r=t.find("button");r.prop("disabled","disabled"),$.ajax({url:t.attr("action"),type:"POST",data:t.serialize()+$(".payu-reminder").serialize(),beforeSend:function(){r.addClass("action-in-process")},complete:function(){r.removeClass("action-in-process")},success:function(e){"undefined"!=typeof topupRange&&addGoogleCustomerVar("dimension2",topupRange),"undefined"!=typeof paymentMethodCode&&addGoogleCustomerVar("dimension3",paymentMethodCode),"undefined"!=typeof topupOperator&&addGoogleCustomerVar("dimension4",topupOperator),"undefined"!=typeof topupByLink&&addGoogleCustomerVar("dimension5",topupByLink),e.durationTime&&sendGoogleAnalyticsTiming("Payment flow","T4",e.durationTime),addGoogleAnalyticsPageView("/confirm/");var t=window.self!==window.top;if("OPEN_PAYU"===e.paymentIntegrationMethod)t?window.top.location=e.data:window.location=e.data;else{var r=$(e.data);t&&r.attr("target","_blank"),$(r).appendTo($("body")).submit()}},error:function(e){r.prop("disabled",!1),showErrorMessage($.parseJSON(e.responseText).message,".section-topup-summary .messages",!0)}})})}),$("#answer").on("focusout",function(){$("#contestAnswer").val($(this).val()),$("#emailMarketing").addClass("required")}),$("#contestEmailMarketing").change(function(){$(this).is(":checked")?$("#emailMarketing").prop("checked",!0).closest(".checkbox-wrapper").addClass("hidden"):$("#emailMarketing").removeAttr("checked").closest(".checkbox-wrapper")}),$(".doladowania-l3 #checkPhone").on("click",function(){$(".phone-topup-form.phone-check-form").valid()&&fbq("track","Lead")}),$(".doladowania-l3 #topupSubmit").on("click",function(){$(".step2 .phone-topup-form").valid()&&fbq("track","AddPaymentInfo")}),$(".summary-payment-form .btn-primary").on("click",function(){fbq("track","CompleteRegistration")}),$(".doladowania-l3 .goto").on("click",function(e){e.preventDefault(),$("body, html").stop().animate({scrollTop:$($(this).attr("href")).offset().top})}),function(e,t){"undefined"!=typeof module&&module.exports?module.exports=t():"function"==typeof define&&define.amd?define(t):e.Fingerprint=t()}(this,function(){"use strict";function e(e){var a,t;a=Array.prototype.forEach,t=Array.prototype.map,this.each=function(e,t,r){if(null!==e)if(a&&e.forEach===a)e.forEach(t,r);else if(e.length===+e.length){for(var n=0,o=e.length;n<o;n++)if(t.call(r,e[n],n,e)==={})return}else for(var i in e)if(e.hasOwnProperty(i)&&t.call(r,e[i],i,e)==={})return},this.map=function(e,n,o){var i=[];return null==e?i:t&&e.map===t?e.map(n,o):(this.each(e,function(e,t,r){i[i.length]=n.call(o,e,t,r)}),i)},"object"==typeof e?(this.hasher=e.hasher,this.screen_resolution=e.screen_resolution,this.canvas=e.canvas,this.ie_activex=e.ie_activex):"function"==typeof e&&(this.hasher=e)}return e.prototype={get:function(){var e=[];e.push(navigator.userAgent),e.push(navigator.language),e.push(screen.colorDepth),!this.screen_resolution||void 0!==this.getScreenResolution()&&e.push(this.getScreenResolution().join("x"));return e.push((new Date).getTimezoneOffset()),e.push(this.hasSessionStorage()),e.push(this.hasLocalStorage()),e.push(!!window.indexedDB),document.body?e.push(typeof document.body.addBehavior):e.push("undefined"),e.push(typeof window.openDatabase),e.push(navigator.cpuClass),e.push(navigator.platform),e.push(navigator.doNotTrack),e.push(this.getPluginsString()),this.canvas&&this.isCanvasSupported()&&e.push(this.getCanvasFingerprint()),this.hasher?this.hasher(e.join("###"),31):this.murmurhash3_32_gc(e.join("###"),31)},murmurhash3_32_gc:function(e,t){var r,n,o,i,a,s,c,u;for(r=3&e.length,n=e.length-r,o=t,a=3432918353,s=461845907,u=0;u<n;)c=255&e.charCodeAt(u)|(255&e.charCodeAt(++u))<<8|(255&e.charCodeAt(++u))<<16|(255&e.charCodeAt(++u))<<24,++u,o=27492+(65535&(i=5*(65535&(o=(o^=c=(65535&(c=(c=(65535&c)*a+(((c>>>16)*a&65535)<<16)&4294967295)<<15|c>>>17))*s+(((c>>>16)*s&65535)<<16)&4294967295)<<13|o>>>19))+((5*(o>>>16)&65535)<<16)&4294967295))+((58964+(i>>>16)&65535)<<16);switch(c=0,r){case 3:c^=(255&e.charCodeAt(u+2))<<16;case 2:c^=(255&e.charCodeAt(u+1))<<8;case 1:o^=c=(65535&(c=(c=(65535&(c^=255&e.charCodeAt(u)))*a+(((c>>>16)*a&65535)<<16)&4294967295)<<15|c>>>17))*s+(((c>>>16)*s&65535)<<16)&4294967295}return o^=e.length,o=2246822507*(65535&(o^=o>>>16))+((2246822507*(o>>>16)&65535)<<16)&4294967295,o=3266489909*(65535&(o^=o>>>13))+((3266489909*(o>>>16)&65535)<<16)&4294967295,(o^=o>>>16)>>>0},hasLocalStorage:function(){try{return!!window.localStorage}catch(e){return!0}},hasSessionStorage:function(){try{return!!window.sessionStorage}catch(e){return!0}},isCanvasSupported:function(){var e=document.createElement("canvas");return!(!e.getContext||!e.getContext("2d"))},isIE:function(){return"Microsoft Internet Explorer"===navigator.appName||!("Netscape"!==navigator.appName||!/Trident/.test(navigator.userAgent))},getPluginsString:function(){return this.isIE()&&this.ie_activex?this.getIEPluginsString():this.getRegularPluginsString()},getRegularPluginsString:function(){return this.map(navigator.plugins,function(e){var t=this.map(e,function(e){return[e.type,e.suffixes].join("~")}).join(",");return[e.name,e.description,t].join("::")},this).join(";")},getIEPluginsString:function(){if(window.ActiveXObject){return this.map(["ShockwaveFlash.ShockwaveFlash","AcroPDF.PDF","PDF.PdfCtrl","QuickTime.QuickTime","rmocx.RealPlayer G2 Control","rmocx.RealPlayer G2 Control.1","RealPlayer.RealPlayer(tm) ActiveX Control (32-bit)","RealVideo.RealVideo(tm) ActiveX Control (32-bit)","RealPlayer","SWCtl.SWCtl","WMPlayer.OCX","AgControl.AgControl","Skype.Detection"],function(e){try{return new ActiveXObject(e),e}catch(e){return null}}).join(";")}return""},getScreenResolution:function(){return[screen.height,screen.width]},getCanvasFingerprint:function(){var e=document.createElement("canvas"),t=e.getContext("2d"),r="http://valve.github.io";return t.textBaseline="top",t.font="14px 'Arial'",t.textBaseline="alphabetic",t.fillStyle="#f60",t.fillRect(125,1,62,20),t.fillStyle="#069",t.fillText(r,2,15),t.fillStyle="rgba(102, 204, 0, 0.7)",t.fillText(r,4,17),e.toDataURL()}},e});var CryptoJS=CryptoJS||function(s){function r(){}var e={},t=e.lib={},n=t.Base={extend:function(e){r.prototype=this;var t=new r;return e&&t.mixIn(e),t.hasOwnProperty("init")||(t.init=function(){t.$super.init.apply(this,arguments)}),(t.init.prototype=t).$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},c=t.WordArray=n.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:4*e.length},toString:function(e){return(e||i).stringify(this)},concat:function(e){var t=this.words,r=e.words,n=this.sigBytes;if(e=e.sigBytes,this.clamp(),n%4)for(var o=0;o<e;o++)t[n+o>>>2]|=(r[o>>>2]>>>24-o%4*8&255)<<24-(n+o)%4*8;else if(65535<r.length)for(o=0;o<e;o+=4)t[n+o>>>2]=r[o>>>2];else t.push.apply(t,r);return this.sigBytes+=e,this},clamp:function(){var e=this.words,t=this.sigBytes;e[t>>>2]&=4294967295<<32-t%4*8,e.length=s.ceil(t/4)},clone:function(){var e=n.clone.call(this);return e.words=this.words.slice(0),e},random:function(e){for(var t=[],r=0;r<e;r+=4)t.push(4294967296*s.random()|0);return new c.init(t,e)}}),o=e.enc={},i=o.Hex={stringify:function(e){var t=e.words;e=e.sigBytes;for(var r=[],n=0;n<e;n++){var o=t[n>>>2]>>>24-n%4*8&255;r.push((o>>>4).toString(16)),r.push((15&o).toString(16))}return r.join("")},parse:function(e){for(var t=e.length,r=[],n=0;n<t;n+=2)r[n>>>3]|=parseInt(e.substr(n,2),16)<<24-n%8*4;return new c.init(r,t/2)}},a=o.Latin1={stringify:function(e){var t=e.words;e=e.sigBytes;for(var r=[],n=0;n<e;n++)r.push(String.fromCharCode(t[n>>>2]>>>24-n%4*8&255));return r.join("")},parse:function(e){for(var t=e.length,r=[],n=0;n<t;n++)r[n>>>2]|=(255&e.charCodeAt(n))<<24-n%4*8;return new c.init(r,t)}},u=o.Utf8={stringify:function(e){try{return decodeURIComponent(escape(a.stringify(e)))}catch(e){throw Error("Malformed UTF-8 data")}},parse:function(e){return a.parse(unescape(encodeURIComponent(e)))}},d=t.BufferedBlockAlgorithm=n.extend({reset:function(){this._data=new c.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=u.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(e){var t=this._data,r=t.words,n=t.sigBytes,o=this.blockSize,i=n/(4*o);if(e=(i=e?s.ceil(i):s.max((0|i)-this._minBufferSize,0))*o,n=s.min(4*e,n),e){for(var a=0;a<e;a+=o)this._doProcessBlock(r,a);a=r.splice(0,e),t.sigBytes-=n}return new c.init(a,n)},clone:function(){var e=n.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0});t.Hasher=d.extend({cfg:n.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){d.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(r){return function(e,t){return new r.init(t).finalize(e)}},_createHmacHelper:function(r){return function(e,t){return new l.HMAC.init(r,t).finalize(e)}}});var l=e.algo={};return e}(Math);function setCustomVars(){addGoogleCustomerVar("dimension1",Payment.Pay.isUserLogged()?"Logged":"Guest")}function addGoogleAnalyticsPageView(e){try{setCustomVars(),ga("send","pageview",{page:e})}catch(e){}}function addGoogleAnalyticsPageViewSync(e,t){try{setCustomVars(),ga("send","pageview",{page:e,hitCallback:t})}catch(e){t()}}function addGoogleAnalyticsEvent(e,t,r){try{setCustomVars(),ga("send","event",e,t,r)}catch(e){}}function sendGoogleAnalyticsTiming(e,t,r){try{setCustomVars(),ga("send","timing",e,t,r)}catch(e){}}function addGoogleCustomerVar(e,t){try{ga("set",e,t)}catch(e){}}!function(o){function e(e){return 4294967296*(e-(0|e))|0}for(var t=CryptoJS,r=(i=t.lib).WordArray,n=i.Hasher,i=t.algo,a=[],f=[],s=2,c=0;c<64;){var u;e:{u=s;for(var d=o.sqrt(u),l=2;l<=d;l++)if(!(u%l)){u=!1;break e}u=!0}u&&(c<8&&(a[c]=e(o.pow(s,.5))),f[c]=e(o.pow(s,1/3)),c++),s++}var m=[];i=i.SHA256=n.extend({_doReset:function(){this._hash=new r.init(a.slice(0))},_doProcessBlock:function(e,t){for(var r=this._hash.words,n=r[0],o=r[1],i=r[2],a=r[3],s=r[4],c=r[5],u=r[6],d=r[7],l=0;l<64;l++){if(l<16)m[l]=0|e[t+l];else{var p=m[l-15],h=m[l-2];m[l]=((p<<25|p>>>7)^(p<<14|p>>>18)^p>>>3)+m[l-7]+((h<<15|h>>>17)^(h<<13|h>>>19)^h>>>10)+m[l-16]}p=d+((s<<26|s>>>6)^(s<<21|s>>>11)^(s<<7|s>>>25))+(s&c^~s&u)+f[l]+m[l],h=((n<<30|n>>>2)^(n<<19|n>>>13)^(n<<10|n>>>22))+(n&o^n&i^o&i),d=u,u=c,c=s,s=a+p|0,a=i,i=o,o=n,n=p+h|0}r[0]=r[0]+n|0,r[1]=r[1]+o|0,r[2]=r[2]+i|0,r[3]=r[3]+a|0,r[4]=r[4]+s|0,r[5]=r[5]+c|0,r[6]=r[6]+u|0,r[7]=r[7]+d|0},_doFinalize:function(){var e=this._data,t=e.words,r=8*this._nDataBytes,n=8*e.sigBytes;return t[n>>>5]|=128<<24-n%32,t[14+(64+n>>>9<<4)]=o.floor(r/4294967296),t[15+(64+n>>>9<<4)]=r,e.sigBytes=4*t.length,this._process(),this._hash},clone:function(){var e=n.clone.call(this);return e._hash=this._hash.clone(),e}});t.SHA256=n._createHelper(i),t.HmacSHA256=n._createHmacHelper(i)}(Math),function(e,t){"undefined"!=typeof module&&module.exports?module.exports=t():"function"==typeof define&&define.amd?define(t):e.DeviceFingerprint=t()}(this,function(){"use strict";({cookieName:"deviceFingerprint",init:function(){var e=new Fingerprint({screen_resolution:!0}).get(),t=CryptoJS.SHA256(e.toString());this.setCookie(this.cookieName,t,365)},setCookie:function(e,t,r){var n,o;try{(n=new Date).setDate(n.getDate()+r),o=escape(t)+(null===r?"":"; expires="+n.toUTCString())+"; path=/",document.cookie=e+"="+o}catch(e){return glbOnError}}}).init()});var monthlySelectOption=$("#invoiceFrequency").find('option[value="MONTHLY"]');$(".invoice-form #tin").on("change focusout",function(){$(this).valid()?monthlySelectOption.removeAttr("disabled"):($("#invoiceFrequency").val(""),monthlySelectOption.attr("disabled","disabled"))}),$(".invoice-form #invoiceAddress_country").on("change",function(){$(".invoice-form #tin").trigger("change")});var PhonebookManager=function(){var t=null,r=null;return{render:function(e){t=$(e.wrapper),r=e.model,this.renderModal()},renderItems:function(){var e=$("#user-phonebook-template").html();return Mustache.render(e,{phones:r})},renderModal:function(){t.find(".modal-body").html(this.renderItems()),t.modal({keyboard:!1,backdrop:"static"}),this.changeLabel(),this.removeEntry()},changeLabel:function(){t.find(".contact .change").on("click",function(e){e.preventDefault(),addGoogleAnalyticsEvent("phonebookManager","click","changeLabel");var t=$(this).closest("tr").find(".contact.name"),r=($(this).find("span").text(),t.find(":input"));t.hasClass("editable")?(t.removeClass("editable").find("span").show(),r.attr("type","hidden")):(t.addClass("editable"),t.find("span").hide(),r.attr("type","text").focus())})},removeEntry:function(){t.find(".contact .remove").on("click",function(e){e.preventDefault(),addGoogleAnalyticsEvent("phonebookManager","click","removeEntry"),$(this).closest("tr").fadeOut().remove()})},save:function(){$.ajax({url:"/user/phones",type:"POST",dataType:"json",data:JSON.stringify($(".phonebook :input").serializeArray()),async:!1,success:function(t){PhonebookManager.renderList(t),$(".modal.in").modal("hide"),$(e.target).unbind("click")},error:function(e,t){}})},renderList:function(e){$("select#phone option").each(function(){var e=$(this).val();"0"!==e&&"-1"!==e&&$(this).remove()});var t=$('select#phone option[value="-1"]');e.phoneBookEntries.map(function(e){t.before($("<option />").val(e.msisdn).text(void 0!==e.alias?e.alias:e.msisdn))})}}}();function validatePolishNip(e){if(0===e.length)return!0;if(10!==e.length)return!1;for(var t=[6,5,7,2,3,4,5,6,7],r=0,n=0;n<9;n++)r+=t[n]*e[n];var o=r%11;return(10==o?0:o)===parseInt(e[9])}function validatePolishPostalCode(e){return/^[0-9][0-9]-[0-9]{3}$/.test(e)}$(".phonebook.manager").on("click",function(e){e.preventDefault(),addGoogleAnalyticsEvent("phonebookManager","click","open"),$.ajax({url:"/user/phones",type:"GET",dataType:"json",async:!1,success:function(e){PhonebookManager.render({wrapper:"#contactsModal",model:e})},error:function(e,t){}})}),$("#contactsModal").find(".btn-primary").on("click",function(e){e.preventDefault(),addGoogleAnalyticsEvent("phonebookManager","click","save"),PhonebookManager.save()}),$(function(){var n={options:{form:"form.phone-topup-form",formId:"topup"},Lock:!1,IsWidget:!1,renderAmountField:function(e){var t=$("#amount").val();void 0!==t&&t.replace(/\s+/g,""),$("#amount").remove();var r=$('label[for="amount"]');if(r.find("span").remove(),"LIST"==e.type){for(var n=[],o=0,i=$('<select name="amount" id="amount2" class="form-control required"></select>'),a=0;a<e.amountsInCents.length;a++)o=e.amountsInCents[a]/100,n.push(o),i.append($("<option></option>").attr("value",o).text(o+" zł"));r.after(i),t&&-1!=jQuery.inArray(parseInt(t),n)&&$("#amount").val(t)}else{var s=e.fromInCents/100,c=e.toInCents/100;r.append(' <span class="grey">('+s+" - "+c+" zł)</span>"),r.after('<input type="text" id="amount" class="form-control required" value="" name="amount" pattern="\\d*" >'),$("#amount").val(t)}},renderPaymentMethods:function(e){var t=$("#payment-methods-template").html(),r=Mustache.render(t,e);$(".payment-method-list").html(r)},sortAndFilterPbls:function(e){if(!e.payByLink)return e;var t,r=10,n={blik:1,jp:2,ap:3,vc:100,ma:101};try{t=window.ApplePaySession&&window.ApplePaySession.canMakePayments()}catch(e){t=!1}return e.payByLink.forEach(function(e){e.sortKey=n[e.type]?n[e.type]:r++}),e.payByLink=e.payByLink.sort(function(e,t){return e.sortKey-t.sortKey}).filter(function(e){return"jp"!==e.type||"jp"===e.type&&t}),e},bindPhones:function(){var r=$("#newPhoneNumber");$("select#phone").on("change",function(){var e=$(this).val();-1==e?($(".additional-phone").show(),$(".primary-phone").hide(),r.addClass("required")):(r.removeClass("required"),n.TryLockAndExecute(function(){n.CheckMsisdn(e)}))}),$("#addNewPhoneNumber").on("click",function(e){if(e.preventDefault(),r.valid()&&r.val()){var t=r.val().replace(/\s+/g,"");$('#phone option[value="0"]').after('<option value="'+t+'">'+r.val()+"</option>"),$('#phone option[value="'+t+'"]:first').prop("selected",!0),n.TryLockAndExecute(function(){n.CheckMsisdn(t)})}})},CheckMsisdn:function(t){t=t.replace(/\s+/g,""),$.ajax({url:"/phone",type:"POST",data:{msisdn:t},dataType:"json",success:function(e){$("#phone2").val(t),$("#operator").val(e.operatorId),n.showTopupFields(!0),n.renderAmountField(e.topupAmount),n.renderPaymentMethods(n.sortAndFilterPbls(e.paymentTypes)),hideMessages(),n.Unlock(),$(".section-header").slideUp()},error:function(e,t){var r="Nie udało się zweryfikować numeru telefonu. Spróbuj ponownie później.";"422"===e.status&&(r=e.responseJSON.message),showErrorMessage(r,".messages",!0),n.Unlock()}})},TryLockAndExecute:function(e){this.Lock||(this.Lock=!0,blockUI(),e())},Unlock:function(){$.unblockUI(),this.Lock=!1},showTopupFields:function(e){e?$(".step2").removeClass("step-invisible"):$(".step2").not(".dont-hide").addClass("step-invisible")},Init:function(){var e=$(n.options.form);if(self!=top&&($("body").addClass("in-iframe"),e.attr("target","_blank"),this.IsWidget=!0),$(".phone-check-form").on("submit",function(e){e.preventDefault(),$(this).valid()&&n.TryLockAndExecute(function(){n.CheckMsisdn($("#phone").val())})}),$(".topup-change").on("click",function(){addGoogleAnalyticsEvent("changeSettings","click","blank")}),e.length){n.renderPaymentMethods($.parseJSON($("#paymentMethodsList").html())),this.IsWidget&&e.attr("target","_blank");var t=$("input.operator",e).val();if(t){for(var r=0;r<dpfOperatorsList.length;r++)if(dpfOperatorsList[r].operatorId==t){n.renderAmountField(dpfOperatorsList[r].topupAmount);break}n.showTopupFields(!0)}else n.showTopupFields(!1)}n.bindPhones()}};n.Init(),$(".phone-topup-form :input").on("focus focusout",function(e){addGoogleAnalyticsEvent("topUpForm_"+e.target.name,e.type,"")}),$(".phone-topup-form :checkbox").on("change",function(e){addGoogleAnalyticsEvent("topUpForm_"+e.target.name,e.type,"checkbox"==e.target.type?e.target.checked.toString():e.target.value)}),$(".phone-mask-check").mask("000 000 000",{onComplete:function(e){n.TryLockAndExecute(function(){n.CheckMsisdn(e)})},onChange:function(e){6!==e.length&&n.showTopupFields(!1)}})}),jQuery.validator.addMethod("counterNumber",function(e,t,r){var n=e.replace(/[\ \-]/gi,"");return this.optional(t)||/^\d+$/.test(n)&&n.length==r}),jQuery.validator.addMethod("phone",function(e,t,r){var n=e.replace(/[\ \-]/gi,"");return this.optional(t)||/^\d+$/.test(n)&&n.length==r}),jQuery.validator.addMethod("tin",function(e,t){var r=e.replace(/[\ \-]/gi,"");return!("PL"===$("#invoiceAddress_country").val()&&!validatePolishNip(r))&&r.length<=20}),jQuery.validator.addMethod("postCode",function(e,t,r){return!("PL"===$("#invoiceAddress_country").val()&&!validatePolishPostalCode(e))&&(this.optional(t)||e.length<=r)}),jQuery.validator.addMethod("acceptanceRequired",function(e,t){return t.checked}),jQuery.validator.methods.email=function(e,t){return this.optional(t)||/^\s*[\w\-\+_]+(\.[\w\-\+_]+)*\@[\w\-\+_]+\.[\w\-\+_]+(\.[\w\-\+_]+)*\s*$/.test(e)},jQuery.validator.addClassRules({"counter-number":{counterNumber:16},"topup-amount":{range:[5,500]},"amount-zone1":{max:100},"amount-zone2":{max:100},phone:{phone:9},tin:{tin:!0},postcode:{postCode:10},"acceptance-required":{acceptanceRequired:!0}}),$(function(){$(".validate-form").each(function(){$(this).validate({onkeyup:!1,ignore:"",errorElement:"div",errorClass:"validation-error",errorPlacement:function(e,t){"checkbox"===$(t).attr("type")?e.appendTo($(t).closest(".checkbox-wrapper")):e.appendTo($(t).closest(".form-group"))},highlight:function(e){"checkbox"===$(e).attr("type")?$(e).addClass("invalid").closest(".checkbox-wrapper").addClass("has-error"):$(e).addClass("invalid").closest(".form-group").addClass("has-error")},unhighlight:function(e){if($(e).removeClass("invalid"),!$(e).siblings(".invalid").length){"checkbox"===$(e).attr("type")?$(e).closest(".checkbox-wrapper").removeClass("has-error"):$(e).closest(".form-group").removeClass("has-error");var t=$(this).attr("aria-describedby");void 0!==t&&!1!==attr&&$("#"+t).text("")}},success:function(e){$(e).siblings(".invalid").length||$(e).remove()}})})}),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(e.WHATWGFetch={})}(this,function(s){var c="undefined"!=typeof self?self:this,u={searchParams:"URLSearchParams"in c,iterable:"Symbol"in c&&"iterator"in Symbol,blob:"FileReader"in c&&"Blob"in c&&function(){try{return new Blob,!0}catch(e){return!1}}(),formData:"FormData"in c,arrayBuffer:"ArrayBuffer"in c};if(u.arrayBuffer)var t=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],r=ArrayBuffer.isView||function(e){return e&&-1<t.indexOf(Object.prototype.toString.call(e))};function n(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(e)||""===e)throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function o(e){return"string"!=typeof e&&(e=String(e)),e}function e(t){var e={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return u.iterable&&(e[Symbol.iterator]=function(){return e}),e}function d(t){this.map={},t instanceof d?t.forEach(function(e,t){this.append(t,e)},this):Array.isArray(t)?t.forEach(function(e){this.append(e[0],e[1])},this):t&&Object.getOwnPropertyNames(t).forEach(function(e){this.append(e,t[e])},this)}function i(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function a(r){return new Promise(function(e,t){r.onload=function(){e(r.result)},r.onerror=function(){t(r.error)}})}function l(e){var t=new FileReader,r=a(t);return t.readAsArrayBuffer(e),r}function p(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function h(){return this.bodyUsed=!1,this._initBody=function(e){var t;this.bodyUsed=this.bodyUsed,(this._bodyInit=e)?"string"==typeof e?this._bodyText=e:u.blob&&Blob.prototype.isPrototypeOf(e)?this._bodyBlob=e:u.formData&&FormData.prototype.isPrototypeOf(e)?this._bodyFormData=e:u.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)?this._bodyText=e.toString():u.arrayBuffer&&u.blob&&((t=e)&&DataView.prototype.isPrototypeOf(t))?(this._bodyArrayBuffer=p(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):u.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(e)||r(e))?this._bodyArrayBuffer=p(e):this._bodyText=e=Object.prototype.toString.call(e):this._bodyText="",this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):u.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},u.blob&&(this.blob=function(){var e=i(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?i(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(l)}),this.text=function(){var e,t,r,n=i(this);if(n)return n;if(this._bodyBlob)return e=this._bodyBlob,t=new FileReader,r=a(t),t.readAsText(e),r;if(this._bodyArrayBuffer)return Promise.resolve(function(e){for(var t=new Uint8Array(e),r=new Array(t.length),n=0;n<t.length;n++)r[n]=String.fromCharCode(t[n]);return r.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},u.formData&&(this.formData=function(){return this.text().then(y)}),this.json=function(){return this.text().then(JSON.parse)},this}d.prototype.append=function(e,t){e=n(e),t=o(t);var r=this.map[e];this.map[e]=r?r+", "+t:t},d.prototype.delete=function(e){delete this.map[n(e)]},d.prototype.get=function(e){return e=n(e),this.has(e)?this.map[e]:null},d.prototype.has=function(e){return this.map.hasOwnProperty(n(e))},d.prototype.set=function(e,t){this.map[n(e)]=o(t)},d.prototype.forEach=function(e,t){for(var r in this.map)this.map.hasOwnProperty(r)&&e.call(t,this.map[r],r,this)},d.prototype.keys=function(){var r=[];return this.forEach(function(e,t){r.push(t)}),e(r)},d.prototype.values=function(){var t=[];return this.forEach(function(e){t.push(e)}),e(t)},d.prototype.entries=function(){var r=[];return this.forEach(function(e,t){r.push([t,e])}),e(r)},u.iterable&&(d.prototype[Symbol.iterator]=d.prototype.entries);var f=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function m(e,t){var r,n,o=(t=t||{}).body;if(e instanceof m){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new d(e.headers)),this.method=e.method,this.mode=e.mode,this.signal=e.signal,o||null==e._bodyInit||(o=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"same-origin",!t.headers&&this.headers||(this.headers=new d(t.headers)),this.method=(r=t.method||this.method||"GET",n=r.toUpperCase(),-1<f.indexOf(n)?n:r),this.mode=t.mode||this.mode||null,this.signal=t.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&o)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(o),!("GET"!==this.method&&"HEAD"!==this.method||"no-store"!==t.cache&&"no-cache"!==t.cache)){var i=/([?&])_=[^&]*/;if(i.test(this.url))this.url=this.url.replace(i,"$1_="+(new Date).getTime());else{this.url+=(/\?/.test(this.url)?"&":"?")+"_="+(new Date).getTime()}}}function y(e){var o=new FormData;return e.trim().split("&").forEach(function(e){if(e){var t=e.split("="),r=t.shift().replace(/\+/g," "),n=t.join("=").replace(/\+/g," ");o.append(decodeURIComponent(r),decodeURIComponent(n))}}),o}function v(e,t){t=t||{},this.type="default",this.status=void 0===t.status?200:t.status,this.ok=200<=this.status&&this.status<300,this.statusText="statusText"in t?t.statusText:"",this.headers=new d(t.headers),this.url=t.url||"",this._initBody(e)}m.prototype.clone=function(){return new m(this,{body:this._bodyInit})},h.call(m.prototype),h.call(v.prototype),v.prototype.clone=function(){return new v(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new d(this.headers),url:this.url})},v.error=function(){var e=new v(null,{status:0,statusText:""});return e.type="error",e};var g=[301,302,303,307,308];function b(o,a){return new Promise(function(n,e){var t=new m(o,a);if(t.signal&&t.signal.aborted)return e(new s.DOMException("Aborted","AbortError"));var i=new XMLHttpRequest;function r(){i.abort()}i.onload=function(){var e,o,t={status:i.status,statusText:i.statusText,headers:(e=i.getAllResponseHeaders()||"",o=new d,e.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach(function(e){var t=e.split(":"),r=t.shift().trim();if(r){var n=t.join(":").trim();o.append(r,n)}}),o)};t.url="responseURL"in i?i.responseURL:t.headers.get("X-Request-URL");var r="response"in i?i.response:i.responseText;setTimeout(function(){n(new v(r,t))},0)},i.onerror=function(){setTimeout(function(){e(new TypeError("Network request failed"))},0)},i.ontimeout=function(){setTimeout(function(){e(new TypeError("Network request failed"))},0)},i.onabort=function(){setTimeout(function(){e(new s.DOMException("Aborted","AbortError"))},0)},i.open(t.method,function(t){try{return""===t&&c.location.href?c.location.href:t}catch(e){return t}}(t.url),!0),"include"===t.credentials?i.withCredentials=!0:"omit"===t.credentials&&(i.withCredentials=!1),"responseType"in i&&(u.blob?i.responseType="blob":u.arrayBuffer&&t.headers.get("Content-Type")&&-1!==t.headers.get("Content-Type").indexOf("application/octet-stream")&&(i.responseType="arraybuffer")),t.headers.forEach(function(e,t){i.setRequestHeader(t,e)}),t.signal&&(t.signal.addEventListener("abort",r),i.onreadystatechange=function(){4===i.readyState&&t.signal.removeEventListener("abort",r)}),i.send(void 0===t._bodyInit?null:t._bodyInit)})}v.redirect=function(e,t){if(-1===g.indexOf(t))throw new RangeError("Invalid status code");return new v(null,{status:t,headers:{location:e}})},s.DOMException=c.DOMException,"function"!=typeof s.DOMException&&(s.DOMException=function(e,t){this.message=e,this.name=t;var r=Error(e);this.stack=r.stack},s.DOMException.prototype=Object.create(Error.prototype),s.DOMException.prototype.constructor=s.DOMException),b.polyfill=!0,c.fetch||(c.fetch=b,c.Headers=d,c.Request=m,c.Response=v),s.Headers=d,s.Request=m,s.Response=v,s.fetch=b,Object.defineProperty(s,"__esModule",{value:!0})});