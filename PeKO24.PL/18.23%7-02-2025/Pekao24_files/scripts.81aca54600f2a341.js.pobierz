!function(t,C){"object"==typeof exports&&"object"==typeof module?module.exports=C():"function"==typeof define&&define.amd?define("pdfjs-dist/build/pdf",[],C):"object"==typeof exports?exports["pdfjs-dist/build/pdf"]=C():t["pdfjs-dist/build/pdf"]=t.pdfjsLib=C()}(this,function(){return function(J){var t={};function C(e){if(t[e])return t[e].exports;var y=t[e]={i:e,l:!1,exports:{}};return J[e].call(y.exports,y,y.exports,C),y.l=!0,y.exports}return C.m=J,C.c=t,C.d=function(e,y,F){C.o(e,y)||Object.defineProperty(e,y,{enumerable:!0,get:F})},C.r=function(e){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},C.t=function(e,y){if(1&y&&(e=C(e)),8&y||4&y&&"object"==typeof e&&e&&e.__esModule)return e;var F=Object.create(null);if(C.r(F),Object.defineProperty(F,"default",{enumerable:!0,value:e}),2&y&&"string"!=typeof e)for(var N in e)C.d(F,N,function(j){return e[j]}.bind(null,N));return F},C.n=function(e){var y=e&&e.__esModule?function(){return e.default}:function(){return e};return C.d(y,"a",y),y},C.o=function(e,y){return Object.prototype.hasOwnProperty.call(e,y)},C.p="",C(C.s=0)}([function(J,t,C){"use strict";var F=C(1),N=C(3),j=C(16),x=C(17),_=C(4),h=C(18);const v=C(10),O=C(6);{const{isNodeJS:l}=C(7);if(l){const A=C(19).PDFNodeStream;N.setPDFNetworkStreamFactory(p=>new A(p))}else{const A=C(22).PDFNetworkStream;let p;_.isFetchSupported()&&(p=C(23).PDFFetchStream),N.setPDFNetworkStreamFactory(b=>p&&_.isValidFetchUrl(b.url)?new p(b):new A(b))}}t.build=N.build,t.version=N.version,t.getDocument=N.getDocument,t.LoopbackPort=N.LoopbackPort,t.PDFDataRangeTransport=N.PDFDataRangeTransport,t.PDFWorker=N.PDFWorker,t.renderTextLayer=j.renderTextLayer,t.AnnotationLayer=x.AnnotationLayer,t.createPromiseCapability=F.createPromiseCapability,t.PasswordResponses=F.PasswordResponses,t.InvalidPDFException=F.InvalidPDFException,t.MissingPDFException=F.MissingPDFException,t.SVGGraphics=h.SVGGraphics,t.NativeImageDecoding=F.NativeImageDecoding,t.CMapCompressionType=F.CMapCompressionType,t.PermissionFlag=F.PermissionFlag,t.UnexpectedResponseException=F.UnexpectedResponseException,t.OPS=F.OPS,t.VerbosityLevel=F.VerbosityLevel,t.UNSUPPORTED_FEATURES=F.UNSUPPORTED_FEATURES,t.createValidAbsoluteUrl=F.createValidAbsoluteUrl,t.createObjectURL=F.createObjectURL,t.removeNullCharacters=F.removeNullCharacters,t.shadow=F.shadow,t.Util=F.Util,t.RenderingCancelledException=_.RenderingCancelledException,t.getFilenameFromUrl=_.getFilenameFromUrl,t.LinkTarget=_.LinkTarget,t.addLinkAttributes=_.addLinkAttributes,t.loadScript=_.loadScript,t.PDFDateString=_.PDFDateString,t.GlobalWorkerOptions=v.GlobalWorkerOptions,t.apiCompatibilityParams=O.apiCompatibilityParams},function(J,t,C){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.arrayByteLength=V,t.arraysToBytes=function K(z){const U=z.length;if(1===U&&z[0]instanceof Uint8Array)return z[0];let W=0;for(let ie=0;ie<U;ie++)W+=V(z[ie]);let Z=0;const re=new Uint8Array(W);for(let ie=0;ie<U;ie++){let ae=z[ie];ae instanceof Uint8Array||(ae="string"==typeof ae?$(ae):new Uint8Array(ae));const fe=ae.byteLength;re.set(ae,Z),Z+=fe}return re},t.assert=D,t.bytesToString=function Y(z){D(null!==z&&"object"==typeof z&&void 0!==z.length,"Invalid argument for bytesToString");const U=z.length,W=8192;if(U<W)return String.fromCharCode.apply(null,z);const Z=[];for(let re=0;re<U;re+=W){const ie=Math.min(re+W,U),ae=z.subarray(re,ie);Z.push(String.fromCharCode.apply(null,ae))}return Z.join("")},t.createPromiseCapability=function Se(){const z=Object.create(null);let U=!1;return Object.defineProperty(z,"settled",{get:()=>U}),z.promise=new Promise(function(W,Z){z.resolve=function(re){U=!0,W(re)},z.reject=function(re){U=!0,Z(re)}}),z},t.getVerbosityLevel=function R(){return u},t.info=function P(z){u>=S.INFOS&&console.log(`Info: ${z}`)},t.isArrayBuffer=function ve(z){return"object"==typeof z&&null!==z&&void 0!==z.byteLength},t.isArrayEqual=function ye(z,U){return z.length===U.length&&z.every(function(W,Z){return W===U[Z]})},t.isBool=function ge(z){return"boolean"==typeof z},t.isEmptyObj=function be(z){for(const U in z)return!1;return!0},t.isNum=function ue(z){return"number"==typeof z},t.isString=function me(z){return"string"==typeof z},t.isSameOrigin=function H(z,U){let W;try{if(W=new URL(z),!W.origin||"null"===W.origin)return!1}catch{return!1}const Z=new URL(U,W);return W.origin===Z.origin},t.createValidAbsoluteUrl=function n(z,U){if(!z)return null;try{const W=U?new URL(z,U):new URL(z);if(function L(z){if(!z)return!1;switch(z.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}(W))return W}catch{}return null},t.removeNullCharacters=function X(z){return"string"!=typeof z?(q("The argument for removeNullCharacters must be a string."),z):z.replace(B,"")},t.setVerbosityLevel=function c(z){Number.isInteger(z)&&(u=z)},t.shadow=m,t.string32=function ee(z){return String.fromCharCode(z>>24&255,z>>16&255,z>>8&255,255&z)},t.stringToBytes=$,t.stringToPDFString=function se(z){const U=z.length,W=[];if("\xfe"===z[0]&&"\xff"===z[1])for(let Z=2;Z<U;Z+=2)W.push(String.fromCharCode(z.charCodeAt(Z)<<8|z.charCodeAt(Z+1)));else if("\xff"===z[0]&&"\xfe"===z[1])for(let Z=2;Z<U;Z+=2)W.push(String.fromCharCode(z.charCodeAt(Z+1)<<8|z.charCodeAt(Z)));else for(let Z=0;Z<U;++Z){const re=le[z.charCodeAt(Z)];W.push(re?String.fromCharCode(re):z.charAt(Z))}return W.join("")},t.stringToUTF8String=function de(z){return decodeURIComponent(escape(z))},t.utf8StringToString=function _e(z){return unescape(encodeURIComponent(z))},t.warn=q,t.unreachable=w,t.IsEvalSupportedCached=t.IsLittleEndianCached=t.createObjectURL=t.FormatError=t.Util=t.UnknownErrorException=t.UnexpectedResponseException=t.TextRenderingMode=t.StreamType=t.PermissionFlag=t.PasswordResponses=t.PasswordException=t.NativeImageDecoding=t.MissingPDFException=t.InvalidPDFException=t.AbortException=t.CMapCompressionType=t.ImageKind=t.FontType=t.AnnotationType=t.AnnotationStateModelType=t.AnnotationReviewState=t.AnnotationReplyType=t.AnnotationMarkedState=t.AnnotationFlag=t.AnnotationFieldFlag=t.AnnotationBorderStyleType=t.UNSUPPORTED_FEATURES=t.VerbosityLevel=t.OPS=t.IDENTITY_MATRIX=t.FONT_IDENTITY_MATRIX=t.BaseException=void 0,C(2),t.IDENTITY_MATRIX=[1,0,0,1,0,0],t.FONT_IDENTITY_MATRIX=[.001,0,0,.001,0,0],t.NativeImageDecoding={NONE:"none",DECODE:"decode",DISPLAY:"display"},t.PermissionFlag={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},t.TextRenderingMode={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},t.ImageKind={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},t.AnnotationType={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},t.AnnotationStateModelType={MARKED:"Marked",REVIEW:"Review"},t.AnnotationMarkedState={MARKED:"Marked",UNMARKED:"Unmarked"},t.AnnotationReviewState={ACCEPTED:"Accepted",REJECTED:"Rejected",CANCELLED:"Cancelled",COMPLETED:"Completed",NONE:"None"},t.AnnotationReplyType={GROUP:"Group",REPLY:"R"},t.AnnotationFlag={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512},t.AnnotationFieldFlag={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864},t.AnnotationBorderStyleType={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},t.StreamType={UNKNOWN:"UNKNOWN",FLATE:"FLATE",LZW:"LZW",DCT:"DCT",JPX:"JPX",JBIG:"JBIG",A85:"A85",AHX:"AHX",CCF:"CCF",RLX:"RLX"},t.FontType={UNKNOWN:"UNKNOWN",TYPE1:"TYPE1",TYPE1C:"TYPE1C",CIDFONTTYPE0:"CIDFONTTYPE0",CIDFONTTYPE0C:"CIDFONTTYPE0C",TRUETYPE:"TRUETYPE",CIDFONTTYPE2:"CIDFONTTYPE2",TYPE3:"TYPE3",OPENTYPE:"OPENTYPE",TYPE0:"TYPE0",MMTYPE1:"MMTYPE1"};const S={ERRORS:0,WARNINGS:1,INFOS:5};t.VerbosityLevel=S,t.CMapCompressionType={NONE:0,BINARY:1,STREAM:2},t.OPS={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotations:78,endAnnotations:79,beginAnnotation:80,endAnnotation:81,paintJpegXObject:82,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91},t.UNSUPPORTED_FEATURES={unknown:"unknown",forms:"forms",javaScript:"javaScript",smask:"smask",shadingPattern:"shadingPattern",font:"font"},t.PasswordResponses={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let u=S.WARNINGS;function q(z){u>=S.WARNINGS&&console.log(`Warning: ${z}`)}function w(z){throw new Error(z)}function D(z,U){z||w(U)}function m(z,U,W){return Object.defineProperty(z,U,{value:W,enumerable:!0,configurable:!0,writable:!1}),W}const d=function(){function U(W){this.constructor===U&&w("Cannot initialize BaseException."),this.message=W,this.name=this.constructor.name}return U.prototype=new Error,U.constructor=U,U}();t.BaseException=d,t.PasswordException=class o extends d{constructor(U,W){super(U),this.code=W}},t.UnknownErrorException=class i extends d{constructor(U,W){super(U),this.details=W}},t.InvalidPDFException=class g extends d{},t.MissingPDFException=class k extends d{},t.UnexpectedResponseException=class E extends d{constructor(U,W){super(U),this.status=W}},t.FormatError=class I extends d{},t.AbortException=class G extends d{};const B=/\x00/g;function $(z){D("string"==typeof z,"Invalid argument for stringToBytes");const U=z.length,W=new Uint8Array(U);for(let Z=0;Z<U;++Z)W[Z]=255&z.charCodeAt(Z);return W}function V(z){return void 0!==z.length?z.length:(D(void 0!==z.byteLength),z.byteLength)}t.IsLittleEndianCached={get value(){return m(this,"value",function Q(){const z=new Uint8Array(4);return z[0]=1,1===new Uint32Array(z.buffer,0,1)[0]}())}},t.IsEvalSupportedCached={get value(){return m(this,"value",function ne(){try{return new Function(""),!0}catch{return!1}}())}};const ce=["rgb(",0,",",0,",",0,")"];class oe{static makeCssRgb(U,W,Z){return ce[1]=U,ce[3]=W,ce[5]=Z,ce.join("")}static transform(U,W){return[U[0]*W[0]+U[2]*W[1],U[1]*W[0]+U[3]*W[1],U[0]*W[2]+U[2]*W[3],U[1]*W[2]+U[3]*W[3],U[0]*W[4]+U[2]*W[5]+U[4],U[1]*W[4]+U[3]*W[5]+U[5]]}static applyTransform(U,W){return[U[0]*W[0]+U[1]*W[2]+W[4],U[0]*W[1]+U[1]*W[3]+W[5]]}static applyInverseTransform(U,W){const Z=W[0]*W[3]-W[1]*W[2];return[(U[0]*W[3]-U[1]*W[2]+W[2]*W[5]-W[4]*W[3])/Z,(-U[0]*W[1]+U[1]*W[0]+W[4]*W[1]-W[5]*W[0])/Z]}static getAxialAlignedBoundingBox(U,W){const Z=oe.applyTransform(U,W),re=oe.applyTransform(U.slice(2,4),W),ie=oe.applyTransform([U[0],U[3]],W),ae=oe.applyTransform([U[2],U[1]],W);return[Math.min(Z[0],re[0],ie[0],ae[0]),Math.min(Z[1],re[1],ie[1],ae[1]),Math.max(Z[0],re[0],ie[0],ae[0]),Math.max(Z[1],re[1],ie[1],ae[1])]}static inverseTransform(U){const W=U[0]*U[3]-U[1]*U[2];return[U[3]/W,-U[1]/W,-U[2]/W,U[0]/W,(U[2]*U[5]-U[4]*U[3])/W,(U[4]*U[1]-U[5]*U[0])/W]}static apply3dTransform(U,W){return[U[0]*W[0]+U[1]*W[1]+U[2]*W[2],U[3]*W[0]+U[4]*W[1]+U[5]*W[2],U[6]*W[0]+U[7]*W[1]+U[8]*W[2]]}static singularValueDecompose2dScale(U){const W=[U[0],U[2],U[1],U[3]],Z=U[0]*W[0]+U[1]*W[2],ae=U[2]*W[1]+U[3]*W[3],fe=(Z+ae)/2,Ae=Math.sqrt((Z+ae)*(Z+ae)-4*(Z*ae-(U[2]*W[0]+U[3]*W[2])*(U[0]*W[1]+U[1]*W[3])))/2,Te=fe-Ae||1;return[Math.sqrt(fe+Ae||1),Math.sqrt(Te)]}static normalizeRect(U){const W=U.slice(0);return U[0]>U[2]&&(W[0]=U[2],W[2]=U[0]),U[1]>U[3]&&(W[1]=U[3],W[3]=U[1]),W}static intersect(U,W){function Z(fe,Ae){return fe-Ae}const re=[U[0],U[2],W[0],W[2]].sort(Z),ie=[U[1],U[3],W[1],W[3]].sort(Z),ae=[];return U=oe.normalizeRect(U),W=oe.normalizeRect(W),re[0]===U[0]&&re[1]===W[0]||re[0]===W[0]&&re[1]===U[0]?(ae[0]=re[1],ae[2]=re[2],ie[0]===U[1]&&ie[1]===W[1]||ie[0]===W[1]&&ie[1]===U[1]?(ae[1]=ie[1],ae[3]=ie[2],ae):null):null}}t.Util=oe;const le=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];t.createObjectURL=function(){const U="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";return function(Z,re,ie=!1){if(!ie&&URL.createObjectURL){const fe=new Blob([Z],{type:re});return URL.createObjectURL(fe)}let ae=`data:${re};base64,`;for(let fe=0,Ae=Z.length;fe<Ae;fe+=3){const Ce=255&Z[fe],Te=255&Z[fe+1],xe=255&Z[fe+2];ae+=U[Ce>>2]+U[(3&Ce)<<4|Te>>4]+U[fe+1<Ae?(15&Te)<<2|xe>>6:64]+U[fe+2<Ae?63&xe:64]}return ae}}()},function(J,t,C){},function(module,exports,__w_pdfjs_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getDocument=getDocument,exports.setPDFNetworkStreamFactory=setPDFNetworkStreamFactory,exports.build=exports.version=exports.PDFPageProxy=exports.PDFDocumentProxy=exports.PDFWorker=exports.PDFDataRangeTransport=exports.LoopbackPort=void 0;var _util=__w_pdfjs_require__(1),_display_utils=__w_pdfjs_require__(4),_font_loader=__w_pdfjs_require__(5),_api_compatibility=__w_pdfjs_require__(6),_canvas=__w_pdfjs_require__(8),_worker_options=__w_pdfjs_require__(10),_is_node=__w_pdfjs_require__(7),_message_handler=__w_pdfjs_require__(11),_metadata=__w_pdfjs_require__(12),_transport_stream=__w_pdfjs_require__(14),_webgl=__w_pdfjs_require__(15);const DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100;let createPDFNetworkStream;function setPDFNetworkStreamFactory(J){createPDFNetworkStream=J}function getDocument(J){const t=new PDFDocumentLoadingTask;let C;if("string"==typeof J)C={url:J};else if((0,_util.isArrayBuffer)(J))C={data:J};else if(J instanceof PDFDataRangeTransport)C={range:J};else{if("object"!=typeof J)throw new Error("Invalid parameter in getDocument, need either Uint8Array, string or a parameter object");if(!J.url&&!J.data&&!J.range)throw new Error("Invalid parameter object: need either .data, .range or .url");C=J}const e=Object.create(null);let y=null,F=null;for(const x in C)if("url"===x&&typeof window<"u")e[x]=new URL(C[x],window.location).href;else if("range"!==x)if("worker"!==x)if("data"!==x||C[x]instanceof Uint8Array)e[x]=C[x];else{const _=C[x];if("string"==typeof _)e[x]=(0,_util.stringToBytes)(_);else if("object"!=typeof _||null===_||isNaN(_.length)){if(!(0,_util.isArrayBuffer)(_))throw new Error("Invalid PDF binary data: either typed array, string or array-like object is expected in the data property.");e[x]=new Uint8Array(_)}else e[x]=new Uint8Array(_)}else F=C[x];else y=C[x];e.rangeChunkSize=e.rangeChunkSize||DEFAULT_RANGE_CHUNK_SIZE,e.CMapReaderFactory=e.CMapReaderFactory||_display_utils.DOMCMapReaderFactory,e.ignoreErrors=!0!==e.stopAtErrors,e.pdfBug=!0===e.pdfBug;const N=Object.values(_util.NativeImageDecoding);if((void 0===e.nativeImageDecoderSupport||!N.includes(e.nativeImageDecoderSupport))&&(e.nativeImageDecoderSupport=_api_compatibility.apiCompatibilityParams.nativeImageDecoderSupport||_util.NativeImageDecoding.DECODE),Number.isInteger(e.maxImageSize)||(e.maxImageSize=-1),"boolean"!=typeof e.isEvalSupported&&(e.isEvalSupported=!0),"boolean"!=typeof e.disableFontFace&&(e.disableFontFace=_api_compatibility.apiCompatibilityParams.disableFontFace||!1),"boolean"!=typeof e.disableRange&&(e.disableRange=!1),"boolean"!=typeof e.disableStream&&(e.disableStream=!1),"boolean"!=typeof e.disableAutoFetch&&(e.disableAutoFetch=!1),"boolean"!=typeof e.disableCreateObjectURL&&(e.disableCreateObjectURL=_api_compatibility.apiCompatibilityParams.disableCreateObjectURL||!1),(0,_util.setVerbosityLevel)(e.verbosity),!F){const x={verbosity:e.verbosity,port:_worker_options.GlobalWorkerOptions.workerPort};F=x.port?PDFWorker.fromPort(x):new PDFWorker(x),t._worker=F}const j=t.docId;return F.promise.then(function(){if(t.destroyed)throw new Error("Loading aborted");return _fetchDocument(F,e,y,j).then(function(x){if(t.destroyed)throw new Error("Loading aborted");let _;y?_=new _transport_stream.PDFDataTransportStream({length:e.length,initialData:e.initialData,progressiveDone:e.progressiveDone,disableRange:e.disableRange,disableStream:e.disableStream},y):e.data||(_=createPDFNetworkStream({url:e.url,length:e.length,httpHeaders:e.httpHeaders,withCredentials:e.withCredentials,rangeChunkSize:e.rangeChunkSize,disableRange:e.disableRange,disableStream:e.disableStream}));const h=new _message_handler.MessageHandler(j,x,F.port);h.postMessageTransfers=F.postMessageTransfers;const v=new WorkerTransport(h,t,_,e);t._transport=v,h.send("Ready",null)})}).catch(t._capability.reject),t}function _fetchDocument(J,t,C,e){return J.destroyed?Promise.reject(new Error("Worker was destroyed")):(C&&(t.length=C.length,t.initialData=C.initialData,t.progressiveDone=C.progressiveDone),J.messageHandler.sendWithPromise("GetDocRequest",{docId:e,apiVersion:"2.4.456",source:{data:t.data,url:t.url,password:t.password,disableAutoFetch:t.disableAutoFetch,rangeChunkSize:t.rangeChunkSize,length:t.length},maxImageSize:t.maxImageSize,disableFontFace:t.disableFontFace,disableCreateObjectURL:t.disableCreateObjectURL,postMessageTransfers:J.postMessageTransfers,docBaseUrl:t.docBaseUrl,nativeImageDecoderSupport:t.nativeImageDecoderSupport,ignoreErrors:t.ignoreErrors,isEvalSupported:t.isEvalSupported}).then(function(y){if(J.destroyed)throw new Error("Worker was destroyed");return y}))}const PDFDocumentLoadingTask=function(){let t=0;return class C{constructor(){this._capability=(0,_util.createPromiseCapability)(),this._transport=null,this._worker=null,this.docId="d"+t++,this.destroyed=!1,this.onPassword=null,this.onProgress=null,this.onUnsupportedFeature=null}get promise(){return this._capability.promise}destroy(){return this.destroyed=!0,(this._transport?this._transport.destroy():Promise.resolve()).then(()=>{this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)})}then(y,F){throw new Error("Removed API method: PDFDocumentLoadingTask.then, use the `promise` getter instead.")}}}();class PDFDataRangeTransport{constructor(t,C,e=!1){this.length=t,this.initialData=C,this.progressiveDone=e,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=(0,_util.createPromiseCapability)()}addRangeListener(t){this._rangeListeners.push(t)}addProgressListener(t){this._progressListeners.push(t)}addProgressiveReadListener(t){this._progressiveReadListeners.push(t)}addProgressiveDoneListener(t){this._progressiveDoneListeners.push(t)}onDataRange(t,C){for(const e of this._rangeListeners)e(t,C)}onDataProgress(t,C){this._readyCapability.promise.then(()=>{for(const e of this._progressListeners)e(t,C)})}onDataProgressiveRead(t){this._readyCapability.promise.then(()=>{for(const C of this._progressiveReadListeners)C(t)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const t of this._progressiveDoneListeners)t()})}transportReady(){this._readyCapability.resolve()}requestDataRange(t,C){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}exports.PDFDataRangeTransport=PDFDataRangeTransport;class PDFDocumentProxy{constructor(t,C){this._pdfInfo=t,this._transport=C}get numPages(){return this._pdfInfo.numPages}get fingerprint(){return this._pdfInfo.fingerprint}getPage(t){return this._transport.getPage(t)}getPageIndex(t){return this._transport.getPageIndex(t)}getDestinations(){return this._transport.getDestinations()}getDestination(t){return this._transport.getDestination(t)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getOpenActionDestination(){return(0,_display_utils.deprecated)("getOpenActionDestination, use getOpenAction instead."),this.getOpenAction().then(function(t){return t&&t.dest?t.dest:null})}getAttachments(){return this._transport.getAttachments()}getJavaScript(){return this._transport.getJavaScript()}getOutline(){return this._transport.getOutline()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getData(){return this._transport.getData()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}getStats(){return this._transport.getStats()}cleanup(){return this._transport.startCleanup()}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}}exports.PDFDocumentProxy=PDFDocumentProxy;class PDFPageProxy{constructor(t,C,e,y=!1){this._pageIndex=t,this._pageInfo=C,this._transport=e,this._stats=y?new _display_utils.StatTimer:null,this._pdfBug=y,this.commonObjs=e.commonObjs,this.objs=new PDFObjects,this.cleanupAfterRender=!1,this.pendingCleanup=!1,this.intentStates=Object.create(null),this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:t,rotation:C=this.rotate,offsetX:e=0,offsetY:y=0,dontFlip:F=!1}={}){if(arguments.length>1||"number"==typeof arguments[0])throw new Error("PDFPageProxy.getViewport is called with obsolete arguments.");return new _display_utils.PageViewport({viewBox:this.view,scale:t,rotation:C,offsetX:e,offsetY:y,dontFlip:F})}getAnnotations({intent:t=null}={}){return(!this.annotationsPromise||this.annotationsIntent!==t)&&(this.annotationsPromise=this._transport.getAnnotations(this._pageIndex,t),this.annotationsIntent=t),this.annotationsPromise}render({canvasContext:t,viewport:C,intent:e="display",enableWebGL:y=!1,renderInteractiveForms:F=!1,transform:N=null,imageLayer:j=null,canvasFactory:x=null,background:_=null}){this._stats&&this._stats.time("Overall");const h="print"===e?"print":"display";this.pendingCleanup=!1,this.intentStates[h]||(this.intentStates[h]=Object.create(null));const v=this.intentStates[h];v.streamReaderCancelTimeout&&(clearTimeout(v.streamReaderCancelTimeout),v.streamReaderCancelTimeout=null);const O=x||new _display_utils.DOMCanvasFactory,l=new _webgl.WebGLContext({enable:y});v.displayReadyCapability||(v.displayReadyCapability=(0,_util.createPromiseCapability)(),v.operatorList={fnArray:[],argsArray:[],lastChunk:!1},this._stats&&this._stats.time("Page Request"),this._pumpOperatorList({pageIndex:this._pageIndex,intent:h,renderInteractiveForms:!0===F}));const A=T=>{const M=v.renderTasks.indexOf(p);M>=0&&v.renderTasks.splice(M,1),(this.cleanupAfterRender||"print"===h)&&(this.pendingCleanup=!0),this._tryCleanup(),T?(p.capability.reject(T),this._abortOperatorList({intentState:v,reason:T})):p.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"))},p=new InternalRenderTask({callback:A,params:{canvasContext:t,viewport:C,transform:N,imageLayer:j,background:_},objs:this.objs,commonObjs:this.commonObjs,operatorList:v.operatorList,pageIndex:this._pageIndex,canvasFactory:O,webGLContext:l,useRequestAnimationFrame:"print"!==h,pdfBug:this._pdfBug});v.renderTasks||(v.renderTasks=[]),v.renderTasks.push(p);const b=p.task;return v.displayReadyCapability.promise.then(T=>{this.pendingCleanup?A():(this._stats&&this._stats.time("Rendering"),p.initializeGraphics(T),p.operatorListChanged())}).catch(A),b}getOperatorList(){const C="oplist";this.intentStates[C]||(this.intentStates[C]=Object.create(null));const e=this.intentStates[C];let y;return e.opListReadCapability||(y={},y.operatorListChanged=function t(){if(e.operatorList.lastChunk){e.opListReadCapability.resolve(e.operatorList);const F=e.renderTasks.indexOf(y);F>=0&&e.renderTasks.splice(F,1)}},e.opListReadCapability=(0,_util.createPromiseCapability)(),e.renderTasks=[],e.renderTasks.push(y),e.operatorList={fnArray:[],argsArray:[],lastChunk:!1},this._stats&&this._stats.time("Page Request"),this._pumpOperatorList({pageIndex:this._pageIndex,intent:C})),e.opListReadCapability.promise}streamTextContent({normalizeWhitespace:t=!1,disableCombineTextItems:C=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,normalizeWhitespace:!0===t,combineTextItems:!0!==C},{highWaterMark:100,size:y=>y.items.length})}getTextContent(t={}){const C=this.streamTextContent(t);return new Promise(function(e,y){const N=C.getReader(),j={items:[],styles:Object.create(null)};!function F(){N.read().then(function({value:x,done:_}){_?e(j):(Object.assign(j.styles,x.styles),j.items.push(...x.items),F())},y)}()})}_destroy(){this.destroyed=!0,this._transport.pageCache[this._pageIndex]=null;const t=[];return Object.keys(this.intentStates).forEach(C=>{const e=this.intentStates[C];this._abortOperatorList({intentState:e,reason:new Error("Page was destroyed."),force:!0}),"oplist"!==C&&e.renderTasks.forEach(function(y){const F=y.capability.promise.catch(function(){});t.push(F),y.cancel()})}),this.objs.clear(),this.annotationsPromise=null,this.pendingCleanup=!1,Promise.all(t)}cleanup(t=!1){return this.pendingCleanup=!0,this._tryCleanup(t)}_tryCleanup(t=!1){return!(!this.pendingCleanup||Object.keys(this.intentStates).some(C=>{const e=this.intentStates[C];return 0!==e.renderTasks.length||!e.operatorList.lastChunk})||(Object.keys(this.intentStates).forEach(C=>{delete this.intentStates[C]}),this.objs.clear(),this.annotationsPromise=null,t&&this._stats&&(this._stats=new _display_utils.StatTimer),this.pendingCleanup=!1,0))}_startRenderPage(t,C){const e=this.intentStates[C];e&&(this._stats&&this._stats.timeEnd("Page Request"),e.displayReadyCapability&&e.displayReadyCapability.resolve(t))}_renderPageChunk(t,C){for(let e=0,y=t.length;e<y;e++)C.operatorList.fnArray.push(t.fnArray[e]),C.operatorList.argsArray.push(t.argsArray[e]);C.operatorList.lastChunk=t.lastChunk;for(let e=0;e<C.renderTasks.length;e++)C.renderTasks[e].operatorListChanged();t.lastChunk&&this._tryCleanup()}_pumpOperatorList(t){(0,_util.assert)(t.intent,'PDFPageProxy._pumpOperatorList: Expected "intent" argument.');const e=this._transport.messageHandler.sendWithStream("GetOperatorList",t).getReader(),y=this.intentStates[t.intent];y.streamReader=e;const F=()=>{e.read().then(({value:N,done:j})=>{j?y.streamReader=null:this._transport.destroyed||(this._renderPageChunk(N,y),F())},N=>{if(y.streamReader=null,!this._transport.destroyed){if(y.operatorList){y.operatorList.lastChunk=!0;for(let j=0;j<y.renderTasks.length;j++)y.renderTasks[j].operatorListChanged();this._tryCleanup()}if(y.displayReadyCapability)y.displayReadyCapability.reject(N);else{if(!y.opListReadCapability)throw N;y.opListReadCapability.reject(N)}}})};F()}_abortOperatorList({intentState:t,reason:C,force:e=!1}){if((0,_util.assert)(C instanceof Error||"object"==typeof C&&null!==C,'PDFPageProxy._abortOperatorList: Expected "reason" argument.'),t.streamReader){if(!e){if(0!==t.renderTasks.length)return;if(C instanceof _display_utils.RenderingCancelledException)return void(t.streamReaderCancelTimeout=setTimeout(()=>{this._abortOperatorList({intentState:t,reason:C,force:!0}),t.streamReaderCancelTimeout=null},RENDERING_CANCELLED_TIMEOUT))}t.streamReader.cancel(new _util.AbortException(C&&C.message)),t.streamReader=null,!this._transport.destroyed&&(Object.keys(this.intentStates).some(y=>this.intentStates[y]===t&&(delete this.intentStates[y],!0)),this.cleanup())}}get stats(){return this._stats}}exports.PDFPageProxy=PDFPageProxy;class LoopbackPort{constructor(t=!0){this._listeners=[],this._defer=t,this._deferred=Promise.resolve(void 0)}postMessage(t,C){if(!this._defer)return void this._listeners.forEach(N=>{N.call(this,{data:t})});const y=new WeakMap,F={data:function e(N){if("object"!=typeof N||null===N)return N;if(y.has(N))return y.get(N);let j,x;if((j=N.buffer)&&(0,_util.isArrayBuffer)(j))return x=C&&C.includes(j)?new N.constructor(j,N.byteOffset,N.byteLength):new N.constructor(N),y.set(N,x),x;x=Array.isArray(N)?[]:{},y.set(N,x);for(const _ in N){let h,v=N;for(;!(h=Object.getOwnPropertyDescriptor(v,_));)v=Object.getPrototypeOf(v);if(!(typeof h.value>"u")){if("function"==typeof h.value){if(N.hasOwnProperty&&N.hasOwnProperty(_))throw new Error(`LoopbackPort.postMessage - cannot clone: ${N[_]}`);continue}x[_]=e(h.value)}}return x}(t)};this._deferred.then(()=>{this._listeners.forEach(N=>{N.call(this,F)})})}addEventListener(t,C){this._listeners.push(C)}removeEventListener(t,C){const e=this._listeners.indexOf(C);this._listeners.splice(e,1)}terminate(){this._listeners.length=0}}exports.LoopbackPort=LoopbackPort;const PDFWorker=function PDFWorkerClosure(){const pdfWorkerPorts=new WeakMap;let isWorkerDisabled=!1,fallbackWorkerSrc,nextFakeWorkerId=0,fakeWorkerCapability;if(_is_node.isNodeJS&&"function"==typeof require)isWorkerDisabled=!0,fallbackWorkerSrc="./pdf.worker.js";else if("object"==typeof document&&"currentScript"in document){const J=document.currentScript&&document.currentScript.src;J&&(fallbackWorkerSrc=J.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}function getWorkerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(typeof fallbackWorkerSrc<"u")return _is_node.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}function getMainThreadWorkerMessageHandler(){let J;try{J=globalThis.pdfjsWorker&&globalThis.pdfjsWorker.WorkerMessageHandler}catch{}return J||null}function setupFakeWorkerGlobal(){if(fakeWorkerCapability)return fakeWorkerCapability.promise;fakeWorkerCapability=(0,_util.createPromiseCapability)();const loader=async function(){const mainWorkerMessageHandler=getMainThreadWorkerMessageHandler();if(mainWorkerMessageHandler)return mainWorkerMessageHandler;if(_is_node.isNodeJS&&"function"==typeof require){const worker=eval("require")(getWorkerSrc());return worker.WorkerMessageHandler}return await(0,_display_utils.loadScript)(getWorkerSrc()),window.pdfjsWorker.WorkerMessageHandler};return loader().then(fakeWorkerCapability.resolve,fakeWorkerCapability.reject),fakeWorkerCapability.promise}function createCDNWrapper(J){return URL.createObjectURL(new Blob(["importScripts('"+J+"');"]))}class PDFWorker{constructor({name:t=null,port:C=null,verbosity:e=(0,_util.getVerbosityLevel)()}={}){if(C&&pdfWorkerPorts.has(C))throw new Error("Cannot use more than one PDFWorker per port");if(this.name=t,this.destroyed=!1,this.postMessageTransfers=!0,this.verbosity=e,this._readyCapability=(0,_util.createPromiseCapability)(),this._port=null,this._webWorker=null,this._messageHandler=null,C)return pdfWorkerPorts.set(C,this),void this._initializeFromPort(C);this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(t){this._port=t,this._messageHandler=new _message_handler.MessageHandler("main","worker",t),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve()}_initialize(){if(typeof Worker<"u"&&!isWorkerDisabled&&!getMainThreadWorkerMessageHandler()){let t=getWorkerSrc();try{(0,_util.isSameOrigin)(window.location.href,t)||(t=createCDNWrapper(new URL(t,window.location).href));const C=new Worker(t),e=new _message_handler.MessageHandler("main","worker",C),y=()=>{C.removeEventListener("error",F),e.destroy(),C.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},F=()=>{this._webWorker||y()};C.addEventListener("error",F),e.on("test",j=>{C.removeEventListener("error",F),this.destroyed?y():j?(this._messageHandler=e,this._port=C,this._webWorker=C,j.supportTransfers||(this.postMessageTransfers=!1),this._readyCapability.resolve(),e.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),e.destroy(),C.terminate())}),e.on("ready",j=>{if(C.removeEventListener("error",F),this.destroyed)y();else try{N()}catch{this._setupFakeWorker()}});const N=()=>{const j=new Uint8Array([this.postMessageTransfers?255:0]);try{e.send("test",j,[j.buffer])}catch{(0,_util.warn)("Cannot use postMessage transfers."),j[0]=0,e.send("test",j)}};return void N()}catch{(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),isWorkerDisabled=!0),setupFakeWorkerGlobal().then(t=>{if(this.destroyed)return void this._readyCapability.reject(new Error("Worker was destroyed"));const C=new LoopbackPort;this._port=C;const e="fake"+nextFakeWorkerId++,y=new _message_handler.MessageHandler(e+"_worker",e,C);t.setup(y,C);const F=new _message_handler.MessageHandler(e,e+"_worker",C);this._messageHandler=F,this._readyCapability.resolve(),F.send("configure",{verbosity:this.verbosity})}).catch(t=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${t.message}".`))})}destroy(){this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),pdfWorkerPorts.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(t){if(!t||!t.port)throw new Error("PDFWorker.fromPort - invalid method signature.");return pdfWorkerPorts.has(t.port)?pdfWorkerPorts.get(t.port):new PDFWorker(t)}static getWorkerSrc(){return getWorkerSrc()}}return PDFWorker}();exports.PDFWorker=PDFWorker;class WorkerTransport{constructor(t,C,e,y){this.messageHandler=t,this.loadingTask=C,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({docId:C.docId,onUnsupportedFeature:this._onUnsupportedFeature.bind(this)}),this._params=y,this.CMapReaderFactory=new y.CMapReaderFactory({baseUrl:y.cMapUrl,isCompressed:y.cMapPacked}),this.destroyed=!1,this.destroyCapability=null,this._passwordCapability=null,this._networkStream=e,this._fullReader=null,this._lastProgress=null,this.pageCache=[],this.pagePromises=[],this.downloadInfoCapability=(0,_util.createPromiseCapability)(),this.setupMessageHandler()}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=(0,_util.createPromiseCapability)(),this._passwordCapability&&this._passwordCapability.reject(new Error("Worker was destroyed during onPassword callback"));const t=[];this.pageCache.forEach(function(e){e&&t.push(e._destroy())}),this.pageCache.length=0,this.pagePromises.length=0;const C=this.messageHandler.sendWithPromise("Terminate",null);return t.push(C),Promise.all(t).then(()=>{this.fontLoader.clear(),this._networkStream&&this._networkStream.cancelAllRequests(new _util.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:t,loadingTask:C}=this;t.on("GetReader",(e,y)=>{(0,_util.assert)(this._networkStream),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=F=>{this._lastProgress={loaded:F.loaded,total:F.total}},y.onPull=()=>{this._fullReader.read().then(function({value:F,done:N}){N?y.close():((0,_util.assert)((0,_util.isArrayBuffer)(F)),y.enqueue(new Uint8Array(F),1,[F]))}).catch(F=>{y.error(F)})},y.onCancel=F=>{this._fullReader.cancel(F)}}),t.on("ReaderHeadersReady",e=>{const y=(0,_util.createPromiseCapability)(),F=this._fullReader;return F.headersReady.then(()=>{(!F.isStreamingSupported||!F.isRangeSupported)&&(this._lastProgress&&C.onProgress&&C.onProgress(this._lastProgress),F.onProgress=N=>{C.onProgress&&C.onProgress({loaded:N.loaded,total:N.total})}),y.resolve({isStreamingSupported:F.isStreamingSupported,isRangeSupported:F.isRangeSupported,contentLength:F.contentLength})},y.reject),y.promise}),t.on("GetRangeReader",(e,y)=>{(0,_util.assert)(this._networkStream);const F=this._networkStream.getRangeReader(e.begin,e.end);F?(y.onPull=()=>{F.read().then(function({value:N,done:j}){j?y.close():((0,_util.assert)((0,_util.isArrayBuffer)(N)),y.enqueue(new Uint8Array(N),1,[N]))}).catch(N=>{y.error(N)})},y.onCancel=N=>{F.cancel(N)}):y.close()}),t.on("GetDoc",({pdfInfo:e})=>{this._numPages=e.numPages,C._capability.resolve(new PDFDocumentProxy(e,this))}),t.on("DocException",function(e){let y;switch(e.name){case"PasswordException":y=new _util.PasswordException(e.message,e.code);break;case"InvalidPDFException":y=new _util.InvalidPDFException(e.message);break;case"MissingPDFException":y=new _util.MissingPDFException(e.message);break;case"UnexpectedResponseException":y=new _util.UnexpectedResponseException(e.message,e.status);break;case"UnknownErrorException":y=new _util.UnknownErrorException(e.message,e.details)}C._capability.reject(y)}),t.on("PasswordRequest",e=>{if(this._passwordCapability=(0,_util.createPromiseCapability)(),C.onPassword){const y=F=>{this._passwordCapability.resolve({password:F})};try{C.onPassword(y,e.code)}catch(F){this._passwordCapability.reject(F)}}else this._passwordCapability.reject(new _util.PasswordException(e.message,e.code));return this._passwordCapability.promise}),t.on("DataLoaded",e=>{C.onProgress&&C.onProgress({loaded:e.length,total:e.length}),this.downloadInfoCapability.resolve(e)}),t.on("StartRenderPage",e=>{this.destroyed||this.pageCache[e.pageIndex]._startRenderPage(e.transparency,e.intent)}),t.on("commonobj",e=>{if(this.destroyed)return;const[y,F,N]=e;if(!this.commonObjs.has(y))switch(F){case"Font":const j=this._params;if("error"in N){const h=N.error;(0,_util.warn)(`Error during font loading: ${h}`),this.commonObjs.resolve(y,h);break}let x=null;j.pdfBug&&globalThis.FontInspector&&globalThis.FontInspector.enabled&&(x={registerFont(h,v){globalThis.FontInspector.fontAdded(h,v)}});const _=new _font_loader.FontFaceObject(N,{isEvalSupported:j.isEvalSupported,disableFontFace:j.disableFontFace,ignoreErrors:j.ignoreErrors,onUnsupportedFeature:this._onUnsupportedFeature.bind(this),fontRegistry:x});this.fontLoader.bind(_).then(()=>{this.commonObjs.resolve(y,_)},h=>{t.sendWithPromise("FontFallback",{id:y}).finally(()=>{this.commonObjs.resolve(y,_)})});break;case"FontPath":case"FontType3Res":this.commonObjs.resolve(y,N);break;default:throw new Error(`Got unknown common object type ${F}`)}}),t.on("obj",e=>{if(this.destroyed)return;const[y,F,N,j]=e,x=this.pageCache[F];if(!x.objs.has(y))switch(N){case"JpegStream":return new Promise((h,v)=>{const O=new Image;O.onload=function(){h(O)},O.onerror=function(){v(new Error("Error during JPEG image loading")),(0,_display_utils.releaseImageResources)(O)},O.src=j}).then(h=>{x.objs.resolve(y,h)});case"Image":x.objs.resolve(y,j),j&&"data"in j&&j.data.length>8e6&&(x.cleanupAfterRender=!0);break;default:throw new Error(`Got unknown object type ${N}`)}}),t.on("DocProgress",e=>{this.destroyed||C.onProgress&&C.onProgress({loaded:e.loaded,total:e.total})}),t.on("UnsupportedFeature",this._onUnsupportedFeature.bind(this)),t.on("JpegDecode",e=>{if(this.destroyed)return Promise.reject(new Error("Worker was destroyed"));if(typeof document>"u")return Promise.reject(new Error('"document" is not defined.'));const[y,F]=e;return 3!==F&&1!==F?Promise.reject(new Error("Only 3 components or 1 component can be returned")):new Promise(function(N,j){const x=new Image;x.onload=function(){const{width:_,height:h}=x,v=_*h,O=4*v,l=new Uint8ClampedArray(v*F);let A=document.createElement("canvas");A.width=_,A.height=h;let p=A.getContext("2d");p.drawImage(x,0,0);const b=p.getImageData(0,0,_,h).data;if(3===F)for(let T=0,M=0;T<O;T+=4,M+=3)l[M]=b[T],l[M+1]=b[T+1],l[M+2]=b[T+2];else if(1===F)for(let T=0,M=0;T<O;T+=4,M++)l[M]=b[T];N({data:l,width:_,height:h}),(0,_display_utils.releaseImageResources)(x),A.width=0,A.height=0,A=null,p=null},x.onerror=function(){j(new Error("JpegDecode failed to load image")),(0,_display_utils.releaseImageResources)(x)},x.src=y})}),t.on("FetchBuiltInCMap",(e,y)=>{if(this.destroyed)return void y.error(new Error("Worker was destroyed"));let F=!1;y.onPull=()=>{F?y.close():(F=!0,this.CMapReaderFactory.fetch(e).then(function(N){y.enqueue(N,1,[N.cMapData.buffer])}).catch(function(N){y.error(N)}))}})}_onUnsupportedFeature({featureId:t}){this.destroyed||this.loadingTask.onUnsupportedFeature&&this.loadingTask.onUnsupportedFeature(t)}getData(){return this.messageHandler.sendWithPromise("GetData",null)}getPage(t){if(!Number.isInteger(t)||t<=0||t>this._numPages)return Promise.reject(new Error("Invalid page request"));const C=t-1;if(C in this.pagePromises)return this.pagePromises[C];const e=this.messageHandler.sendWithPromise("GetPage",{pageIndex:C}).then(y=>{if(this.destroyed)throw new Error("Transport destroyed");const F=new PDFPageProxy(C,y,this,this._params.pdfBug);return this.pageCache[C]=F,F});return this.pagePromises[C]=e,e}getPageIndex(t){return this.messageHandler.sendWithPromise("GetPageIndex",{ref:t}).catch(function(C){return Promise.reject(new Error(C))})}getAnnotations(t,C){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:t,intent:C})}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(t){return"string"!=typeof t?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:t})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getJavaScript(){return this.messageHandler.sendWithPromise("GetJavaScript",null)}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){return this.messageHandler.sendWithPromise("GetMetadata",null).then(t=>({info:t[0],metadata:t[1]?new _metadata.Metadata(t[1]):null,contentDispositionFilename:this._fullReader?this._fullReader.filename:null}))}getStats(){return this.messageHandler.sendWithPromise("GetStats",null)}startCleanup(){return this.messageHandler.sendWithPromise("Cleanup",null).then(()=>{for(let t=0,C=this.pageCache.length;t<C;t++){const e=this.pageCache[t];if(e&&!e.cleanup())throw new Error(`startCleanup: Page ${t+1} is currently rendering.`)}this.commonObjs.clear(),this.fontLoader.clear()})}get loadingParams(){const t=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:t.disableAutoFetch,disableCreateObjectURL:t.disableCreateObjectURL,disableFontFace:t.disableFontFace,nativeImageDecoderSupport:t.nativeImageDecoderSupport})}}class PDFObjects{constructor(){this._objs=Object.create(null)}_ensureObj(t){return this._objs[t]?this._objs[t]:this._objs[t]={capability:(0,_util.createPromiseCapability)(),data:null,resolved:!1}}get(t,C=null){if(C)return this._ensureObj(t).capability.promise.then(C),null;const e=this._objs[t];if(!e||!e.resolved)throw new Error(`Requesting object that isn't resolved yet ${t}.`);return e.data}has(t){const C=this._objs[t];return!!C&&C.resolved}resolve(t,C){const e=this._ensureObj(t);e.resolved=!0,e.data=C,e.capability.resolve(C)}clear(){for(const t in this._objs){const{data:C}=this._objs[t];typeof Image<"u"&&C instanceof Image&&(0,_display_utils.releaseImageResources)(C)}this._objs=Object.create(null)}}class RenderTask{constructor(t){this._internalRenderTask=t,this.onContinue=null}get promise(){return this._internalRenderTask.capability.promise}cancel(){this._internalRenderTask.cancel()}then(t,C){throw new Error("Removed API method: RenderTask.then, use the `promise` getter instead.")}}const InternalRenderTask=function J(){const t=new WeakSet;return class C{constructor({callback:y,params:F,objs:N,commonObjs:j,operatorList:x,pageIndex:_,canvasFactory:h,webGLContext:v,useRequestAnimationFrame:O=!1,pdfBug:l=!1}){this.callback=y,this.params=F,this.objs=N,this.commonObjs=j,this.operatorListIdx=null,this.operatorList=x,this._pageIndex=_,this.canvasFactory=h,this.webGLContext=v,this._pdfBug=l,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=!0===O&&typeof window<"u",this.cancelled=!1,this.capability=(0,_util.createPromiseCapability)(),this.task=new RenderTask(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=F.canvasContext.canvas}initializeGraphics(y=!1){if(this.cancelled)return;if(this._canvas){if(t.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");t.add(this._canvas)}this._pdfBug&&globalThis.StepperManager&&globalThis.StepperManager.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:F,viewport:N,transform:j,imageLayer:x,background:_}=this.params;this.gfx=new _canvas.CanvasGraphics(F,this.commonObjs,this.objs,this.canvasFactory,this.webGLContext,x),this.gfx.beginDrawing({transform:j,viewport:N,transparency:y,background:_}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback&&this.graphicsReadyCallback()}cancel(y=null){this.running=!1,this.cancelled=!0,this.gfx&&this.gfx.endDrawing(),this._canvas&&t.delete(this._canvas),this.callback(y||new _display_utils.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,"canvas"))}operatorListChanged(){this.graphicsReady?(this.stepper&&this.stepper.updateOperatorList(this.operatorList),!this.running&&this._continue()):this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound)}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=>{this._nextBound().catch(this.cancel.bind(this))}):Promise.resolve().then(this._nextBound).catch(this.cancel.bind(this))}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),this._canvas&&t.delete(this._canvas),this.callback())))}}}(),version="2.4.456";exports.version=version;const build="228a591c";exports.build=build},function(J,t,C){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addLinkAttributes=function O(s,{url:a,target:u,rel:c,enabled:R=!0}={}){(0,e.assert)(a&&"string"==typeof a,'addLinkAttributes: A valid "url" parameter must provided.');const P=(0,e.removeNullCharacters)(a);R?s.href=s.title=P:(s.href="",s.title=`Disabled: ${P}`,s.onclick=()=>!1);let q="";switch(u){case v.NONE:break;case v.SELF:q="_self";break;case v.BLANK:q="_blank";break;case v.PARENT:q="_parent";break;case v.TOP:q="_top"}s.target=q,s.rel="string"==typeof c?c:y},t.getFilenameFromUrl=function l(s){const a=s.indexOf("#"),u=s.indexOf("?"),c=Math.min(a>0?a:s.length,u>0?u:s.length);return s.substring(s.lastIndexOf("/",c)+1,c)},t.isFetchSupported=p,t.isValidFetchUrl=b,t.loadScript=function T(s){return new Promise((a,u)=>{const c=document.createElement("script");c.src=s,c.onload=a,c.onerror=function(){u(new Error(`Cannot load script at: ${c.src}`))},(document.head||document.documentElement).appendChild(c)})},t.deprecated=function M(s){console.log("Deprecated API usage: "+s)},t.releaseImageResources=function S(s){(0,e.assert)(s instanceof Image,"Invalid `img` parameter.");const a=s.src;"string"==typeof a&&a.startsWith("blob:")&&URL.revokeObjectURL&&URL.revokeObjectURL(a),s.removeAttribute("src")},t.PDFDateString=t.StatTimer=t.DOMSVGFactory=t.DOMCMapReaderFactory=t.DOMCanvasFactory=t.DEFAULT_LINK_REL=t.LinkTarget=t.RenderingCancelledException=t.PageViewport=void 0;var e=C(1);const y="noopener noreferrer nofollow";t.DEFAULT_LINK_REL=y;const F="http://www.w3.org/2000/svg";t.DOMCanvasFactory=class N{create(a,u){if(a<=0||u<=0)throw new Error("Invalid canvas size");const c=document.createElement("canvas"),R=c.getContext("2d");return c.width=a,c.height=u,{canvas:c,context:R}}reset(a,u,c){if(!a.canvas)throw new Error("Canvas is not specified");if(u<=0||c<=0)throw new Error("Invalid canvas size");a.canvas.width=u,a.canvas.height=c}destroy(a){if(!a.canvas)throw new Error("Canvas is not specified");a.canvas.width=0,a.canvas.height=0,a.canvas=null,a.context=null}},t.DOMCMapReaderFactory=class j{constructor({baseUrl:a=null,isCompressed:u=!1}){this.baseUrl=a,this.isCompressed=u}async fetch({name:a}){if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!a)throw new Error("CMap name must be specified.");const u=this.baseUrl+a+(this.isCompressed?".bcmap":""),c=this.isCompressed?e.CMapCompressionType.BINARY:e.CMapCompressionType.NONE;return p()&&b(u,document.baseURI)?fetch(u).then(async R=>{if(!R.ok)throw new Error(R.statusText);let P;return P=this.isCompressed?new Uint8Array(await R.arrayBuffer()):(0,e.stringToBytes)(await R.text()),{cMapData:P,compressionType:c}}).catch(R=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${u}`)}):new Promise((R,P)=>{const q=new XMLHttpRequest;q.open("GET",u,!0),this.isCompressed&&(q.responseType="arraybuffer"),q.onreadystatechange=()=>{if(q.readyState===XMLHttpRequest.DONE){if(200===q.status||0===q.status){let w;if(this.isCompressed&&q.response?w=new Uint8Array(q.response):!this.isCompressed&&q.responseText&&(w=(0,e.stringToBytes)(q.responseText)),w)return void R({cMapData:w,compressionType:c})}P(new Error(q.statusText))}},q.send(null)}).catch(R=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${u}`)})}},t.DOMSVGFactory=class x{create(a,u){(0,e.assert)(a>0&&u>0,"Invalid SVG dimensions");const c=document.createElementNS(F,"svg:svg");return c.setAttribute("version","1.1"),c.setAttribute("width",a+"px"),c.setAttribute("height",u+"px"),c.setAttribute("preserveAspectRatio","none"),c.setAttribute("viewBox","0 0 "+a+" "+u),c}createElement(a){return(0,e.assert)("string"==typeof a,"Invalid SVG element type"),document.createElementNS(F,a)}};class _{constructor({viewBox:a,scale:u,rotation:c,offsetX:R=0,offsetY:P=0,dontFlip:q=!1}){this.viewBox=a,this.scale=u,this.rotation=c,this.offsetX=R,this.offsetY=P;const w=(a[2]+a[0])/2,D=(a[3]+a[1])/2;let H,L,n,m,d,o,i,g;switch(c=(c%=360)<0?c+360:c){case 180:H=-1,L=0,n=0,m=1;break;case 90:H=0,L=1,n=1,m=0;break;case 270:H=0,L=-1,n=-1,m=0;break;default:H=1,L=0,n=0,m=-1}q&&(n=-n,m=-m),0===H?(d=Math.abs(D-a[1])*u+R,o=Math.abs(w-a[0])*u+P,i=Math.abs(a[3]-a[1])*u,g=Math.abs(a[2]-a[0])*u):(d=Math.abs(w-a[0])*u+R,o=Math.abs(D-a[1])*u+P,i=Math.abs(a[2]-a[0])*u,g=Math.abs(a[3]-a[1])*u),this.transform=[H*u,L*u,n*u,m*u,d-H*u*w-n*u*D,o-L*u*w-m*u*D],this.width=i,this.height=g}clone({scale:a=this.scale,rotation:u=this.rotation,offsetX:c=this.offsetX,offsetY:R=this.offsetY,dontFlip:P=!1}={}){return new _({viewBox:this.viewBox.slice(),scale:a,rotation:u,offsetX:c,offsetY:R,dontFlip:P})}convertToViewportPoint(a,u){return e.Util.applyTransform([a,u],this.transform)}convertToViewportRectangle(a){const u=e.Util.applyTransform([a[0],a[1]],this.transform),c=e.Util.applyTransform([a[2],a[3]],this.transform);return[u[0],u[1],c[0],c[1]]}convertToPdfPoint(a,u){return e.Util.applyInverseTransform([a,u],this.transform)}}t.PageViewport=_,t.RenderingCancelledException=class h extends e.BaseException{constructor(a,u){super(a),this.type=u}};const v={NONE:0,SELF:1,BLANK:2,PARENT:3,TOP:4};function p(){return typeof fetch<"u"&&typeof Response<"u"&&"body"in Response.prototype&&typeof ReadableStream<"u"}function b(s,a){try{const{protocol:u}=a?new URL(s,a):new URL(s);return"http:"===u||"https:"===u}catch{return!1}}let f;t.LinkTarget=v,t.StatTimer=class A{constructor(){this.started=Object.create(null),this.times=[]}time(a){a in this.started&&(0,e.warn)(`Timer is already running for ${a}`),this.started[a]=Date.now()}timeEnd(a){a in this.started||(0,e.warn)(`Timer has not been started for ${a}`),this.times.push({name:a,start:this.started[a],end:Date.now()}),delete this.started[a]}toString(){const a=[];let u=0;for(const c of this.times){const R=c.name;R.length>u&&(u=R.length)}for(const c of this.times){const R=c.end-c.start;a.push(`${c.name.padEnd(u)} ${R}ms\n`)}return a.join("")}},t.PDFDateString=class r{static toDateObject(a){if(!a||!(0,e.isString)(a))return null;f||(f=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const u=f.exec(a);if(!u)return null;const c=parseInt(u[1],10);let R=parseInt(u[2],10);R=R>=1&&R<=12?R-1:0;let P=parseInt(u[3],10);P=P>=1&&P<=31?P:1;let q=parseInt(u[4],10);q=q>=0&&q<=23?q:0;let w=parseInt(u[5],10);w=w>=0&&w<=59?w:0;let D=parseInt(u[6],10);D=D>=0&&D<=59?D:0;const H=u[7]||"Z";let L=parseInt(u[8],10);L=L>=0&&L<=23?L:0;let n=parseInt(u[9],10)||0;return n=n>=0&&n<=59?n:0,"-"===H?(q+=L,w+=n):"+"===H&&(q-=L,w-=n),new Date(Date.UTC(c,R,P,q,w,D))}}},function(J,t,C){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FontLoader=t.FontFaceObject=void 0;var e=C(1);class y{constructor({docId:x,onUnsupportedFeature:_}){this.constructor===y&&(0,e.unreachable)("Cannot initialize BaseFontLoader."),this.docId=x,this._onUnsupportedFeature=_,this.nativeFontFaces=[],this.styleElement=null}addNativeFontFace(x){this.nativeFontFaces.push(x),document.fonts.add(x)}insertRule(x){let _=this.styleElement;_||(_=this.styleElement=document.createElement("style"),_.id=`PDFJS_FONT_STYLE_TAG_${this.docId}`,document.documentElement.getElementsByTagName("head")[0].appendChild(_));const h=_.sheet;h.insertRule(x,h.cssRules.length)}clear(){this.nativeFontFaces.forEach(function(x){document.fonts.delete(x)}),this.nativeFontFaces.length=0,this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async bind(x){if(x.attached||x.missingFile)return;if(x.attached=!0,this.isFontLoadingAPISupported){const h=x.createNativeFontFace();if(h){this.addNativeFontFace(h);try{await h.loaded}catch(v){throw this._onUnsupportedFeature({featureId:e.UNSUPPORTED_FEATURES.font}),(0,e.warn)(`Failed to load font '${h.family}': '${v}'.`),x.disableFontFace=!0,v}}return}const _=x.createFontFaceRule();if(_){if(this.insertRule(_),this.isSyncFontLoadingSupported)return;await new Promise(h=>{const v=this._queueLoadingCallback(h);this._prepareFontLoadEvent([_],[x],v)})}}_queueLoadingCallback(x){(0,e.unreachable)("Abstract method `_queueLoadingCallback`.")}get isFontLoadingAPISupported(){const x=typeof document<"u"&&!!document.fonts;return(0,e.shadow)(this,"isFontLoadingAPISupported",x)}get isSyncFontLoadingSupported(){(0,e.unreachable)("Abstract method `isSyncFontLoadingSupported`.")}get _loadTestFont(){(0,e.unreachable)("Abstract method `_loadTestFont`.")}_prepareFontLoadEvent(x,_,h){(0,e.unreachable)("Abstract method `_prepareFontLoadEvent`.")}}let F;t.FontLoader=F,t.FontLoader=F=class extends y{constructor(x){super(x),this.loadingContext={requests:[],nextRequestId:0},this.loadTestFontId=0}get isSyncFontLoadingSupported(){let x=!1;if(typeof navigator>"u")x=!0;else{const _=/Mozilla\/5.0.*?rv:(\d+).*? Gecko/.exec(navigator.userAgent);_&&_[1]>=14&&(x=!0)}return(0,e.shadow)(this,"isSyncFontLoadingSupported",x)}_queueLoadingCallback(x){const h=this.loadingContext,v={id:"pdfjs-font-loading-"+h.nextRequestId++,done:!1,complete:function _(){for((0,e.assert)(!v.done,"completeRequest() cannot be called twice."),v.done=!0;h.requests.length>0&&h.requests[0].done;){const O=h.requests.shift();setTimeout(O.callback,0)}},callback:x};return h.requests.push(v),v}get _loadTestFont(){return(0,e.shadow)(this,"_loadTestFont",atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA=="))}_prepareFontLoadEvent(x,_,h){function v(w,D){return w.charCodeAt(D)<<24|w.charCodeAt(D+1)<<16|w.charCodeAt(D+2)<<8|255&w.charCodeAt(D+3)}function O(w,D,H,L){return w.substring(0,D)+L+w.substring(D+H)}let l,A;const p=document.createElement("canvas");p.width=1,p.height=1;const b=p.getContext("2d");let T=0;const S=`lt${Date.now()}${this.loadTestFontId++}`;let f=this._loadTestFont;f=O(f,976,S.length,S);const a=1482184792;let u=v(f,16);for(l=0,A=S.length-3;l<A;l+=4)u=u-a+v(S,l)|0;l<S.length&&(u=u-a+v(S+"XXX",l)|0),f=O(f,16,4,(0,e.string32)(u));const c=`url(data:font/opentype;base64,${btoa(f)});`;this.insertRule(`@font-face {font-family:"${S}";src:${c}}`);const P=[];for(l=0,A=_.length;l<A;l++)P.push(_[l].loadedName);P.push(S);const q=document.createElement("div");for(q.style.visibility="hidden",q.style.width=q.style.height="10px",q.style.position="absolute",q.style.top=q.style.left="0px",l=0,A=P.length;l<A;++l){const w=document.createElement("span");w.textContent="Hi",w.style.fontFamily=P[l],q.appendChild(w)}document.body.appendChild(q),function M(w,D){if(T++,T>30)return(0,e.warn)("Load test font never loaded."),void D();b.font="30px "+w,b.fillText(".",0,20),b.getImageData(0,0,1,1).data[3]>0?D():setTimeout(M.bind(null,w,D))}(S,function(){document.body.removeChild(q),h.complete()})}},t.FontFaceObject=class N{constructor(x,{isEvalSupported:_=!0,disableFontFace:h=!1,ignoreErrors:v=!1,onUnsupportedFeature:O=null,fontRegistry:l=null}){this.compiledGlyphs=Object.create(null);for(const A in x)this[A]=x[A];this.isEvalSupported=!1!==_,this.disableFontFace=!0===h,this.ignoreErrors=!0===v,this._onUnsupportedFeature=O,this.fontRegistry=l}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;const x=new FontFace(this.loadedName,this.data,{});return this.fontRegistry&&this.fontRegistry.registerFont(this),x}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;const x=(0,e.bytesToString)(new Uint8Array(this.data)),_=`url(data:${this.mimetype};base64,${btoa(x)});`,h=`@font-face {font-family:"${this.loadedName}";src:${_}}`;return this.fontRegistry&&this.fontRegistry.registerFont(this,_),h}getPathGenerator(x,_){if(void 0!==this.compiledGlyphs[_])return this.compiledGlyphs[_];let h,v;try{h=x.get(this.loadedName+"_path_"+_)}catch(O){if(!this.ignoreErrors)throw O;return this._onUnsupportedFeature&&this._onUnsupportedFeature({featureId:e.UNSUPPORTED_FEATURES.font}),(0,e.warn)(`getPathGenerator - ignoring character: "${O}".`),this.compiledGlyphs[_]=function(l,A){}}if(this.isEvalSupported&&e.IsEvalSupportedCached.value){let O,l="";for(let A=0,p=h.length;A<p;A++)v=h[A],O=void 0!==v.args?v.args.join(","):"",l+="c."+v.cmd+"("+O+");\n";return this.compiledGlyphs[_]=new Function("c","size",l)}return this.compiledGlyphs[_]=function(O,l){for(let A=0,p=h.length;A<p;A++)v=h[A],"scale"===v.cmd&&(v.args=[l,-l]),O[v.cmd].apply(O,v.args)}}}},function(J,t,C){"use strict";const e=Object.create(null);{const{isNodeJS:y}=C(7),F=typeof navigator<"u"&&navigator.userAgent||"",N=/Trident/.test(F),j=/CriOS/.test(F);(N||j)&&(e.disableCreateObjectURL=!0),y&&(e.disableFontFace=!0,e.nativeImageDecoderSupport="none")}t.apiCompatibilityParams=Object.freeze(e)},function(J,t,C){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isNodeJS=void 0;const e="object"==typeof process&&process+""=="[object process]"&&!process.versions.nw&&!process.versions.electron;t.isNodeJS=e},function(J,t,C){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CanvasGraphics=void 0;var e=C(1),y=C(9),j=4096,x=.65,v=16;function O(T){T.mozCurrentTransform||(T._originalSave=T.save,T._originalRestore=T.restore,T._originalRotate=T.rotate,T._originalScale=T.scale,T._originalTranslate=T.translate,T._originalTransform=T.transform,T._originalSetTransform=T.setTransform,T._transformMatrix=T._transformMatrix||[1,0,0,1,0,0],T._transformStack=[],Object.defineProperty(T,"mozCurrentTransform",{get:function(){return this._transformMatrix}}),Object.defineProperty(T,"mozCurrentTransformInverse",{get:function(){var S=this._transformMatrix,f=S[0],r=S[1],s=S[2],a=S[3],u=S[4],c=S[5],R=f*a-r*s,P=r*s-f*a;return[a/R,r/P,s/P,f/R,(a*u-s*c)/P,(r*u-f*c)/R]}}),T.save=function(){var S=this._transformMatrix;this._transformStack.push(S),this._transformMatrix=S.slice(0,6),this._originalSave()},T.restore=function(){var S=this._transformStack.pop();S&&(this._transformMatrix=S,this._originalRestore())},T.translate=function(S,f){var r=this._transformMatrix;r[4]=r[0]*S+r[2]*f+r[4],r[5]=r[1]*S+r[3]*f+r[5],this._originalTranslate(S,f)},T.scale=function(S,f){var r=this._transformMatrix;r[0]=r[0]*S,r[1]=r[1]*S,r[2]=r[2]*f,r[3]=r[3]*f,this._originalScale(S,f)},T.transform=function(S,f,r,s,a,u){var c=this._transformMatrix;this._transformMatrix=[c[0]*S+c[2]*f,c[1]*S+c[3]*f,c[0]*r+c[2]*s,c[1]*r+c[3]*s,c[0]*a+c[2]*u+c[4],c[1]*a+c[3]*u+c[5]],T._originalTransform(S,f,r,s,a,u)},T.setTransform=function(S,f,r,s,a,u){this._transformMatrix=[S,f,r,s,a,u],T._originalSetTransform(S,f,r,s,a,u)},T.rotate=function(S){var f=Math.cos(S),r=Math.sin(S),s=this._transformMatrix;this._transformMatrix=[s[0]*f+s[2]*r,s[1]*f+s[3]*r,s[0]*-r+s[2]*f,s[1]*-r+s[3]*f,s[4],s[5]],this._originalRotate(S)})}var l=function(){function M(S){this.canvasFactory=S,this.cache=Object.create(null)}return M.prototype={getCanvas:function(f,r,s,a){var u;return void 0!==this.cache[f]?(this.canvasFactory.reset(u=this.cache[f],r,s),u.context.setTransform(1,0,0,1,0,0)):(u=this.canvasFactory.create(r,s),this.cache[f]=u),a&&O(u.context),u},clear(){for(var S in this.cache)this.canvasFactory.destroy(this.cache[S]),delete this.cache[S]}},M}(),p=function(){function M(){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=e.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=e.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=e.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.resumeSMaskCtx=null}return M.prototype={clone:function(){return Object.create(this)},setCurrentPoint:function(f,r){this.x=f,this.y=r}},M}(),b=function(){function f(d,o,i,g,k,E){this.ctx=d,this.current=new p,this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=o,this.objs=i,this.canvasFactory=g,this.webGLContext=k,this.imageLayer=E,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.cachedCanvases=new l(this.canvasFactory),d&&O(d),this._cachedGetSinglePixelWidth=null}function r(d,o){if(typeof ImageData<"u"&&o instanceof ImageData)d.putImageData(o,0,0);else{var X,V,K,ee,Q,i=o.height,g=o.width,k=i%v,E=(i-k)/v,I=0===k?E:E+1,G=d.createImageData(g,v),B=0,Y=o.data,$=G.data;if(o.kind===e.ImageKind.GRAYSCALE_1BPP){var te=Y.byteLength,ne=new Uint32Array($.buffer,0,$.byteLength>>2),he=ne.length,ce=g+7>>3,oe=4294967295,le=e.IsLittleEndianCached.value?4278190080:255;for(V=0;V<I;V++){for(ee=V<E?v:k,X=0,K=0;K<ee;K++){for(var se=te-B,de=0,_e=se>ce?g:8*se-7,be=-8&_e,ge=0,ue=0;de<be;de+=8)ue=Y[B++],ne[X++]=128&ue?oe:le,ne[X++]=64&ue?oe:le,ne[X++]=32&ue?oe:le,ne[X++]=16&ue?oe:le,ne[X++]=8&ue?oe:le,ne[X++]=4&ue?oe:le,ne[X++]=2&ue?oe:le,ne[X++]=1&ue?oe:le;for(;de<_e;de++)0===ge&&(ue=Y[B++],ge=128),ne[X++]=ue&ge?oe:le,ge>>=1}for(;X<he;)ne[X++]=0;d.putImageData(G,0,V*v)}}else if(o.kind===e.ImageKind.RGBA_32BPP){for(K=0,Q=g*v*4,V=0;V<E;V++)$.set(Y.subarray(B,B+Q)),B+=Q,d.putImageData(G,0,K),K+=v;V<I&&($.set(Y.subarray(B,B+(Q=g*k*4))),d.putImageData(G,0,K))}else{if(o.kind!==e.ImageKind.RGB_24BPP)throw new Error(`bad image kind: ${o.kind}`);for(Q=g*(ee=v),V=0;V<I;V++){for(V>=E&&(Q=g*(ee=k)),X=0,K=Q;K--;)$[X++]=Y[B++],$[X++]=Y[B++],$[X++]=Y[B++],$[X++]=255;d.putImageData(G,0,V*v)}}}}function s(d,o){for(var i=o.height,g=o.width,k=i%v,E=(i-k)/v,I=0===k?E:E+1,G=d.createImageData(g,v),B=0,X=o.data,Y=G.data,$=0;$<I;$++){for(var V=$<E?v:k,K=3,ee=0;ee<V;ee++)for(var Q=0,te=0;te<g;te++){if(!Q){var ne=X[B++];Q=128}Y[K]=ne&Q?0:255,K+=4,Q>>=1}d.putImageData(G,0,$*v)}}function a(d,o){for(var i=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font"],g=0,k=i.length;g<k;g++){var E=i[g];void 0!==d[E]&&(o[E]=d[E])}void 0!==d.setLineDash&&(o.setLineDash(d.getLineDash()),o.lineDashOffset=d.lineDashOffset)}function u(d){d.strokeStyle="#000000",d.fillStyle="#000000",d.fillRule="nonzero",d.globalAlpha=1,d.lineWidth=1,d.lineCap="butt",d.lineJoin="miter",d.miterLimit=10,d.globalCompositeOperation="source-over",d.font="10px sans-serif",void 0!==d.setLineDash&&(d.setLineDash([]),d.lineDashOffset=0)}function c(d,o,i,g){for(var k=d.length,E=3;E<k;E+=4){var I=d[E];if(0===I)d[E-3]=o,d[E-2]=i,d[E-1]=g;else if(I<255){var G=255-I;d[E-3]=d[E-3]*I+o*G>>8,d[E-2]=d[E-2]*I+i*G>>8,d[E-1]=d[E-1]*I+g*G>>8}}}function R(d,o,i){for(var g=d.length,E=3;E<g;E+=4)o[E]=o[E]*(i?i[d[E]]:d[E])*.00392156862745098|0}function P(d,o,i){for(var g=d.length,k=3;k<g;k+=4){var E=77*d[k-3]+152*d[k-2]+28*d[k-1];o[k]=i?o[k]*i[E>>8]>>8:o[k]*E>>16}}function w(d,o,i,g){var k=o.canvas,E=o.context;d.setTransform(o.scaleX,0,0,o.scaleY,o.offsetX,o.offsetY);var I=o.backdrop||null;if(!o.transferMap&&g.isEnabled){const G=g.composeSMask({layer:i.canvas,mask:k,properties:{subtype:o.subtype,backdrop:I}});return d.setTransform(1,0,0,1,0,0),void d.drawImage(G,o.offsetX,o.offsetY)}(function q(d,o,i,g,k,E,I){var $,G=!!E,B=G?E[0]:0,X=G?E[1]:0,Y=G?E[2]:0;$="Luminosity"===k?P:R;for(var K=Math.min(g,Math.ceil(1048576/i)),ee=0;ee<g;ee+=K){var Q=Math.min(K,g-ee),te=d.getImageData(0,ee,i,Q),ne=o.getImageData(0,ee,i,Q);G&&c(te.data,B,X,Y),$(te.data,ne.data,I),d.putImageData(ne,0,ee)}})(E,i,k.width,k.height,o.subtype,I,o.transferMap),d.drawImage(k,0,0)}var D=["butt","round","square"],H=["miter","round","bevel"],L={},n={};for(var m in f.prototype={beginDrawing({transform:d,viewport:o,transparency:i=!1,background:g=null}){var k=this.ctx.canvas.width,E=this.ctx.canvas.height;if(this.ctx.save(),this.ctx.fillStyle=g||"rgb(255, 255, 255)",this.ctx.fillRect(0,0,k,E),this.ctx.restore(),i){var I=this.cachedCanvases.getCanvas("transparent",k,E,!0);this.compositeCtx=this.ctx,this.transparentCanvas=I.canvas,this.ctx=I.context,this.ctx.save(),this.ctx.transform.apply(this.ctx,this.compositeCtx.mozCurrentTransform)}this.ctx.save(),u(this.ctx),d&&this.ctx.transform.apply(this.ctx,d),this.ctx.transform.apply(this.ctx,o.transform),this.baseTransform=this.ctx.mozCurrentTransform.slice(),this.imageLayer&&this.imageLayer.beginLayout()},executeOperatorList:function(o,i,g,k){var E=o.argsArray,I=o.fnArray,G=i||0,B=E.length;if(B===G)return G;for(var ee,X=B-G>10&&"function"==typeof g,Y=X?Date.now()+15:0,$=0,V=this.commonObjs,K=this.objs;;){if(void 0!==k&&G===k.nextBreakPoint)return k.breakIt(G,g),G;if((ee=I[G])!==e.OPS.dependency)this[ee].apply(this,E[G]);else for(const Q of E[G]){const te=Q.startsWith("g_")?V:K;if(!te.has(Q))return te.get(Q,g),G}if(++G===B)return G;if(X&&++$>10){if(Date.now()>Y)return g(),G;$=0}}},endDrawing:function(){null!==this.current.activeSMask&&this.endSMaskGroup(),this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null),this.cachedCanvases.clear(),this.webGLContext.clear(),this.imageLayer&&this.imageLayer.endLayout()},setLineWidth:function(o){this.current.lineWidth=o,this.ctx.lineWidth=o},setLineCap:function(o){this.ctx.lineCap=D[o]},setLineJoin:function(o){this.ctx.lineJoin=H[o]},setMiterLimit:function(o){this.ctx.miterLimit=o},setDash:function(o,i){var g=this.ctx;void 0!==g.setLineDash&&(g.setLineDash(o),g.lineDashOffset=i)},setRenderingIntent(d){},setFlatness(d){},setGState:function(o){for(var i=0,g=o.length;i<g;i++){var k=o[i],I=k[1];switch(k[0]){case"LW":this.setLineWidth(I);break;case"LC":this.setLineCap(I);break;case"LJ":this.setLineJoin(I);break;case"ML":this.setMiterLimit(I);break;case"D":this.setDash(I[0],I[1]);break;case"RI":this.setRenderingIntent(I);break;case"FL":this.setFlatness(I);break;case"Font":this.setFont(I[0],I[1]);break;case"CA":this.current.strokeAlpha=k[1];break;case"ca":this.current.fillAlpha=k[1],this.ctx.globalAlpha=k[1];break;case"BM":this.ctx.globalCompositeOperation=I;break;case"SMask":this.current.activeSMask&&(this.stateStack.length>0&&this.stateStack[this.stateStack.length-1].activeSMask===this.current.activeSMask?this.suspendSMaskGroup():this.endSMaskGroup()),this.current.activeSMask=I?this.tempSMask:null,this.current.activeSMask&&this.beginSMaskGroup(),this.tempSMask=null}}},beginSMaskGroup:function(){var o=this.current.activeSMask,E=this.cachedCanvases.getCanvas("smaskGroupAt"+this.groupLevel,o.canvas.width,o.canvas.height,!0),I=this.ctx,G=I.mozCurrentTransform;this.ctx.save();var B=E.context;B.scale(1/o.scaleX,1/o.scaleY),B.translate(-o.offsetX,-o.offsetY),B.transform.apply(B,G),o.startTransformInverse=B.mozCurrentTransformInverse,a(I,B),this.ctx=B,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(I),this.groupLevel++},suspendSMaskGroup:function(){var o=this.ctx;this.groupLevel--,this.ctx=this.groupStack.pop(),w(this.ctx,this.current.activeSMask,o,this.webGLContext),this.ctx.restore(),this.ctx.save(),a(o,this.ctx),this.current.resumeSMaskCtx=o;var i=e.Util.transform(this.current.activeSMask.startTransformInverse,o.mozCurrentTransform);this.ctx.transform.apply(this.ctx,i),o.save(),o.setTransform(1,0,0,1,0,0),o.clearRect(0,0,o.canvas.width,o.canvas.height),o.restore()},resumeSMaskGroup:function(){var i=this.ctx;this.ctx=this.current.resumeSMaskCtx,this.groupStack.push(i),this.groupLevel++},endSMaskGroup:function(){var o=this.ctx;this.groupLevel--,this.ctx=this.groupStack.pop(),w(this.ctx,this.current.activeSMask,o,this.webGLContext),this.ctx.restore(),a(o,this.ctx);var i=e.Util.transform(this.current.activeSMask.startTransformInverse,o.mozCurrentTransform);this.ctx.transform.apply(this.ctx,i)},save:function(){this.ctx.save();var o=this.current;this.stateStack.push(o),this.current=o.clone(),this.current.resumeSMaskCtx=null},restore:function(){this.current.resumeSMaskCtx&&this.resumeSMaskGroup(),null!==this.current.activeSMask&&(0===this.stateStack.length||this.stateStack[this.stateStack.length-1].activeSMask!==this.current.activeSMask)&&this.endSMaskGroup(),0!==this.stateStack.length&&(this.current=this.stateStack.pop(),this.ctx.restore(),this.pendingClip=null,this._cachedGetSinglePixelWidth=null)},transform:function(o,i,g,k,E,I){this.ctx.transform(o,i,g,k,E,I),this._cachedGetSinglePixelWidth=null},constructPath:function(o,i){for(var g=this.ctx,k=this.current,E=k.x,I=k.y,G=0,B=0,X=o.length;G<X;G++)switch(0|o[G]){case e.OPS.rectangle:E=i[B++],I=i[B++];var Y=i[B++],$=i[B++];0===Y&&(Y=this.getSinglePixelWidth()),0===$&&($=this.getSinglePixelWidth());var V=E+Y,K=I+$;this.ctx.moveTo(E,I),this.ctx.lineTo(V,I),this.ctx.lineTo(V,K),this.ctx.lineTo(E,K),this.ctx.lineTo(E,I),this.ctx.closePath();break;case e.OPS.moveTo:E=i[B++],I=i[B++],g.moveTo(E,I);break;case e.OPS.lineTo:E=i[B++],I=i[B++],g.lineTo(E,I);break;case e.OPS.curveTo:g.bezierCurveTo(i[B],i[B+1],i[B+2],i[B+3],E=i[B+4],I=i[B+5]),B+=6;break;case e.OPS.curveTo2:g.bezierCurveTo(E,I,i[B],i[B+1],i[B+2],i[B+3]),E=i[B+2],I=i[B+3],B+=4;break;case e.OPS.curveTo3:g.bezierCurveTo(i[B],i[B+1],E=i[B+2],I=i[B+3],E,I),B+=4;break;case e.OPS.closePath:g.closePath()}k.setCurrentPoint(E,I)},closePath:function(){this.ctx.closePath()},stroke:function(o){o=!(typeof o<"u")||o;var i=this.ctx,g=this.current.strokeColor;if(i.globalAlpha=this.current.strokeAlpha,g&&g.hasOwnProperty("type")&&"Pattern"===g.type){i.save();const E=e.Util.singularValueDecompose2dScale(i.mozCurrentTransform)[0];i.strokeStyle=g.getPattern(i,this),i.lineWidth=Math.max(this.getSinglePixelWidth()*x,this.current.lineWidth*E),i.stroke(),i.restore()}else i.lineWidth=Math.max(this.getSinglePixelWidth()*x,this.current.lineWidth),i.stroke();o&&this.consumePath(),i.globalAlpha=this.current.fillAlpha},closeStroke:function(){this.closePath(),this.stroke()},fill:function(o){o=!(typeof o<"u")||o;var i=this.ctx,g=this.current.fillColor,E=!1;this.current.patternFill&&(i.save(),this.baseTransform&&i.setTransform.apply(i,this.baseTransform),i.fillStyle=g.getPattern(i,this),E=!0),this.pendingEOFill?(i.fill("evenodd"),this.pendingEOFill=!1):i.fill(),E&&i.restore(),o&&this.consumePath()},eoFill:function(){this.pendingEOFill=!0,this.fill()},fillStroke:function(){this.fill(!1),this.stroke(!1),this.consumePath()},eoFillStroke:function(){this.pendingEOFill=!0,this.fillStroke()},closeFillStroke:function(){this.closePath(),this.fillStroke()},closeEOFillStroke:function(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()},endPath:function(){this.consumePath()},clip:function(){this.pendingClip=L},eoClip:function(){this.pendingClip=n},beginText:function(){this.current.textMatrix=e.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0},endText:function(){var o=this.pendingTextPaths,i=this.ctx;if(void 0!==o){i.save(),i.beginPath();for(var g=0;g<o.length;g++){var k=o[g];i.setTransform.apply(i,k.transform),i.translate(k.x,k.y),k.addToPath(i,k.fontSize)}i.restore(),i.clip(),i.beginPath(),delete this.pendingTextPaths}else i.beginPath()},setCharSpacing:function(o){this.current.charSpacing=o},setWordSpacing:function(o){this.current.wordSpacing=o},setHScale:function(o){this.current.textHScale=o/100},setLeading:function(o){this.current.leading=-o},setFont:function(o,i){var g=this.commonObjs.get(o),k=this.current;if(!g)throw new Error(`Can't find font for ${o}`);if(k.fontMatrix=g.fontMatrix?g.fontMatrix:e.FONT_IDENTITY_MATRIX,(0===k.fontMatrix[0]||0===k.fontMatrix[3])&&(0,e.warn)("Invalid font matrix for font "+o),i<0?(i=-i,k.fontDirection=-1):k.fontDirection=1,this.current.font=g,this.current.fontSize=i,g.isType3Font)return;let I="normal";g.black?I="900":g.bold&&(I="bold");var G=g.italic?"italic":"normal",B=`"${g.loadedName||"sans-serif"}", ${g.fallbackName}`;let X=i;i<16?X=16:i>100&&(X=100),this.current.fontSizeScale=i/X,this.ctx.font=`${G} ${I} ${X}px ${B}`},setTextRenderingMode:function(o){this.current.textRenderingMode=o},setTextRise:function(o){this.current.textRise=o},moveText:function(o,i){this.current.x=this.current.lineX+=o,this.current.y=this.current.lineY+=i},setLeadingMoveText:function(o,i){this.setLeading(-i),this.moveText(o,i)},setTextMatrix:function(o,i,g,k,E,I){this.current.textMatrix=[o,i,g,k,E,I],this.current.textMatrixScale=Math.sqrt(o*o+i*i),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0},nextLine:function(){this.moveText(0,this.current.leading)},paintChar(d,o,i,g){var k=this.ctx,E=this.current,I=E.font,G=E.textRenderingMode,B=E.fontSize/E.fontSizeScale,X=G&e.TextRenderingMode.FILL_STROKE_MASK,Y=!!(G&e.TextRenderingMode.ADD_TO_PATH_FLAG);const $=E.patternFill&&I.data;var V;(I.disableFontFace||Y||$)&&(V=I.getPathGenerator(this.commonObjs,d)),I.disableFontFace||$?(k.save(),k.translate(o,i),k.beginPath(),V(k,B),g&&k.setTransform.apply(k,g),(X===e.TextRenderingMode.FILL||X===e.TextRenderingMode.FILL_STROKE)&&k.fill(),(X===e.TextRenderingMode.STROKE||X===e.TextRenderingMode.FILL_STROKE)&&k.stroke(),k.restore()):((X===e.TextRenderingMode.FILL||X===e.TextRenderingMode.FILL_STROKE)&&k.fillText(d,o,i),(X===e.TextRenderingMode.STROKE||X===e.TextRenderingMode.FILL_STROKE)&&k.strokeText(d,o,i)),Y&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:k.mozCurrentTransform,x:o,y:i,fontSize:B,addToPath:V})},get isFontSubpixelAAEnabled(){const{context:d}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);d.scale(1.5,1),d.fillText("I",0,10);for(var o=d.getImageData(0,0,10,10).data,i=!1,g=3;g<o.length;g+=4)if(o[g]>0&&o[g]<255){i=!0;break}return(0,e.shadow)(this,"isFontSubpixelAAEnabled",i)},showText:function(o){var i=this.current,g=i.font;if(g.isType3Font)return this.showType3Text(o);var k=i.fontSize;if(0===k)return;var E=this.ctx,I=i.fontSizeScale,G=i.charSpacing,B=i.wordSpacing,X=i.fontDirection,Y=i.textHScale*X,$=o.length,V=g.vertical,K=V?1:-1,ee=g.defaultVMetrics,Q=k*i.fontMatrix[0],te=i.textRenderingMode===e.TextRenderingMode.FILL&&!g.disableFontFace&&!i.patternFill;let ne;if(E.save(),i.patternFill){E.save();const ae=i.fillColor.getPattern(E,this);ne=E.mozCurrentTransform,E.restore(),E.fillStyle=ae}E.transform.apply(E,i.textMatrix),E.translate(i.x,i.y+i.textRise),E.scale(Y,X>0?-1:1);var he=i.lineWidth,ce=i.textMatrixScale;if(0===ce||0===he){var oe=i.textRenderingMode&e.TextRenderingMode.FILL_STROKE_MASK;(oe===e.TextRenderingMode.STROKE||oe===e.TextRenderingMode.FILL_STROKE)&&(this._cachedGetSinglePixelWidth=null,he=this.getSinglePixelWidth()*x)}else he/=ce;1!==I&&(E.scale(I,I),he/=I),E.lineWidth=he;var se,le=0;for(se=0;se<$;++se){var de=o[se];if((0,e.isNum)(de))le+=K*de*k/1e3;else{var me,ve,z,U,_e=!1,be=(de.isSpace?B:0)+G,ge=de.fontChar,ue=de.accent,pe=de.width;if(V?(z=de.vmetric||ee,U=de.vmetric?z[1]:.5*pe,pe=z?-z[0]:pe,me=(U=-U*Q)/I,ve=(le+z[2]*Q)/I):(me=le/I,ve=0),g.remeasure&&pe>0){var Z=1e3*E.measureText(ge).width/k*I;if(pe<Z&&this.isFontSubpixelAAEnabled){var re=pe/Z;_e=!0,E.save(),E.scale(re,1),me/=re}else pe!==Z&&(me+=(pe-Z)/2e3*k/I)}(de.isInFont||g.missingFile)&&(te&&!ue?E.fillText(ge,me,ve):(this.paintChar(ge,me,ve,ne),ue&&this.paintChar(ue.fontChar,me+ue.offset.x/I,ve-ue.offset.y/I,ne))),le+=V?pe*Q-be*X:pe*Q+be*X,_e&&E.restore()}}V?i.y-=le:i.x+=le*Y,E.restore()},showType3Text:function(o){var ee,Q,te,ne,i=this.ctx,g=this.current,k=g.font,E=g.fontSize,I=g.fontDirection,G=k.vertical?1:-1,B=g.charSpacing,X=g.wordSpacing,Y=g.textHScale*I,$=g.fontMatrix||e.FONT_IDENTITY_MATRIX,V=o.length;if(g.textRenderingMode!==e.TextRenderingMode.INVISIBLE&&0!==E){for(this._cachedGetSinglePixelWidth=null,i.save(),i.transform.apply(i,g.textMatrix),i.translate(g.x,g.y),i.scale(Y,I),ee=0;ee<V;++ee)if((0,e.isNum)(Q=o[ee]))this.ctx.translate(ne=G*Q*E/1e3,0),g.x+=ne*Y;else{var he=(Q.isSpace?X:0)+B,ce=k.charProcOperatorList[Q.operatorListId];if(ce){this.processingType3=Q,this.save(),i.scale(E,E),i.transform.apply(i,$),this.executeOperatorList(ce),this.restore();var oe=e.Util.applyTransform([Q.width,0],$);i.translate(te=oe[0]*E+he,0),g.x+=te*Y}else(0,e.warn)(`Type3 character "${Q.operatorListId}" is not available.`)}i.restore(),this.processingType3=null}},setCharWidth:function(o,i){},setCharWidthAndBounds:function(o,i,g,k,E,I){this.ctx.rect(g,k,E-g,I-k),this.clip(),this.endPath()},getColorN_Pattern:function(o){var i;if("TilingPattern"===o[0]){var g=o[1],k=this.baseTransform||this.ctx.mozCurrentTransform.slice();i=new y.TilingPattern(o,g,this.ctx,{createCanvasGraphics:I=>new f(I,this.commonObjs,this.objs,this.canvasFactory,this.webGLContext)},k)}else i=(0,y.getShadingPatternFromIR)(o);return i},setStrokeColorN:function(){this.current.strokeColor=this.getColorN_Pattern(arguments)},setFillColorN:function(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0},setStrokeRGBColor:function(o,i,g){var k=e.Util.makeCssRgb(o,i,g);this.ctx.strokeStyle=k,this.current.strokeColor=k},setFillRGBColor:function(o,i,g){var k=e.Util.makeCssRgb(o,i,g);this.ctx.fillStyle=k,this.current.fillColor=k,this.current.patternFill=!1},shadingFill:function(o){var i=this.ctx;this.save();var g=(0,y.getShadingPatternFromIR)(o);i.fillStyle=g.getPattern(i,this,!0);var k=i.mozCurrentTransformInverse;if(k){var E=i.canvas,I=E.width,G=E.height,B=e.Util.applyTransform([0,0],k),X=e.Util.applyTransform([0,G],k),Y=e.Util.applyTransform([I,0],k),$=e.Util.applyTransform([I,G],k),V=Math.min(B[0],X[0],Y[0],$[0]),K=Math.min(B[1],X[1],Y[1],$[1]),ee=Math.max(B[0],X[0],Y[0],$[0]),Q=Math.max(B[1],X[1],Y[1],$[1]);this.ctx.fillRect(V,K,ee-V,Q-K)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.restore()},beginInlineImage:function(){(0,e.unreachable)("Should not call beginInlineImage")},beginImageData:function(){(0,e.unreachable)("Should not call beginImageData")},paintFormXObjectBegin:function(o,i){this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(o)&&6===o.length&&this.transform.apply(this,o),this.baseTransform=this.ctx.mozCurrentTransform,i&&(this.ctx.rect(i[0],i[1],i[2]-i[0],i[3]-i[1]),this.clip(),this.endPath())},paintFormXObjectEnd:function(){this.restore(),this.baseTransform=this.baseTransformStack.pop()},beginGroup:function(o){this.save();var i=this.ctx;o.isolated||(0,e.info)("TODO: Support non-isolated groups."),o.knockout&&(0,e.warn)("Knockout groups not supported.");var g=i.mozCurrentTransform;if(o.matrix&&i.transform.apply(i,o.matrix),!o.bbox)throw new Error("Bounding box is required.");var k=e.Util.getAxialAlignedBoundingBox(o.bbox,i.mozCurrentTransform);k=e.Util.intersect(k,[0,0,i.canvas.width,i.canvas.height])||[0,0,0,0];var I=Math.floor(k[0]),G=Math.floor(k[1]),B=Math.max(Math.ceil(k[2])-I,1),X=Math.max(Math.ceil(k[3])-G,1),Y=1,$=1;B>j&&(Y=B/j,B=j),X>j&&($=X/j,X=j);var V="groupAt"+this.groupLevel;o.smask&&(V+="_smask_"+this.smaskCounter++%2);var K=this.cachedCanvases.getCanvas(V,B,X,!0),ee=K.context;ee.scale(1/Y,1/$),ee.translate(-I,-G),ee.transform.apply(ee,g),o.smask?this.smaskStack.push({canvas:K.canvas,context:ee,offsetX:I,offsetY:G,scaleX:Y,scaleY:$,subtype:o.smask.subtype,backdrop:o.smask.backdrop,transferMap:o.smask.transferMap||null,startTransformInverse:null}):(i.setTransform(1,0,0,1,0,0),i.translate(I,G),i.scale(Y,$)),a(i,ee),this.ctx=ee,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(i),this.groupLevel++,this.current.activeSMask=null},endGroup:function(o){this.groupLevel--;var i=this.ctx;this.ctx=this.groupStack.pop(),void 0!==this.ctx.imageSmoothingEnabled?this.ctx.imageSmoothingEnabled=!1:this.ctx.mozImageSmoothingEnabled=!1,o.smask?this.tempSMask=this.smaskStack.pop():this.ctx.drawImage(i.canvas,0,0),this.restore()},beginAnnotations:function(){this.save(),this.baseTransform&&this.ctx.setTransform.apply(this.ctx,this.baseTransform)},endAnnotations:function(){this.restore()},beginAnnotation:function(o,i,g){this.save(),u(this.ctx),this.current=new p,Array.isArray(o)&&4===o.length&&(this.ctx.rect(o[0],o[1],o[2]-o[0],o[3]-o[1]),this.clip(),this.endPath()),this.transform.apply(this,i),this.transform.apply(this,g)},endAnnotation:function(){this.restore()},paintJpegXObject:function(o,i,g){const k=this.processingType3?this.commonObjs.get(o):this.objs.get(o);if(k){this.save();var E=this.ctx;if(E.scale(1/i,-1/g),E.drawImage(k,0,0,k.width,k.height,0,-g,i,g),this.imageLayer){var I=E.mozCurrentTransformInverse,G=this.getCanvasPosition(0,0);this.imageLayer.appendImage({objId:o,left:G[0],top:G[1],width:i/I[0],height:g/I[3]})}this.restore()}else(0,e.warn)("Dependent image isn't ready yet")},paintImageMaskXObject:function(o){var i=this.ctx,g=o.width,k=o.height,E=this.current.fillColor,I=this.current.patternFill,G=this.processingType3;if(G&&void 0===G.compiled&&(G.compiled=g<=1e3&&k<=1e3?function A(T){var r,s,a,H,S=T.width,f=T.height,u=S+1,c=new Uint8Array(u*(f+1)),R=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),P=S+7&-8,q=T.data,w=new Uint8Array(P*f),D=0;for(r=0,H=q.length;r<H;r++)for(var L=128,n=q[r];L>0;)w[D++]=n&L?0:255,L>>=1;var m=0;for(0!==w[D=0]&&(c[0]=1,++m),s=1;s<S;s++)w[D]!==w[D+1]&&(c[s]=w[D]?2:1,++m),D++;for(0!==w[D]&&(c[s]=2,++m),r=1;r<f;r++){a=r*u,w[(D=r*P)-P]!==w[D]&&(c[a]=w[D]?1:8,++m);var d=(w[D]?4:0)+(w[D-P]?8:0);for(s=1;s<S;s++)R[d=(d>>2)+(w[D+1]?4:0)+(w[D-P+1]?8:0)]&&(c[a+s]=R[d],++m),D++;if(w[D-P]!==w[D]&&(c[a+s]=w[D]?2:4,++m),m>1e3)return null}for(a=r*u,0!==w[D=P*(f-1)]&&(c[a]=8,++m),s=1;s<S;s++)w[D]!==w[D+1]&&(c[a+s]=w[D]?4:8,++m),D++;if(0!==w[D]&&(c[a+s]=4,++m),m>1e3)return null;var o=new Int32Array([0,u,-1,0,-u,0,0,0,1]),i=[];for(r=0;m&&r<=f;r++){for(var g=r*u,k=g+S;g<k&&!c[g];)g++;if(g!==k){var B,E=[g%u,r],I=c[g],G=g;do{var X=o[I];do{g+=X}while(!c[g]);5!==(B=c[g])&&10!==B?(I=B,c[g]=0):c[g]&=(I=B&51*I>>4)>>2|I<<2,E.push(g%u),E.push(g/u|0),c[g]||--m}while(G!==g);i.push(E),--r}}return function($){$.save(),$.scale(1/S,-1/f),$.translate(0,-f),$.beginPath();for(var V=0,K=i.length;V<K;V++){var ee=i[V];$.moveTo(ee[0],ee[1]);for(var Q=2,te=ee.length;Q<te;Q+=2)$.lineTo(ee[Q],ee[Q+1])}$.fill(),$.beginPath(),$.restore()}}({data:o.data,width:g,height:k}):null),G&&G.compiled)G.compiled(i);else{var B=this.cachedCanvases.getCanvas("maskCanvas",g,k),X=B.context;X.save(),s(X,o),X.globalCompositeOperation="source-in",X.fillStyle=I?E.getPattern(X,this):E,X.fillRect(0,0,g,k),X.restore(),this.paintInlineImageXObject(B.canvas)}},paintImageMaskXObjectRepeat:function(o,i,g,k){var E=o.width,I=o.height,G=this.current.fillColor,B=this.current.patternFill,X=this.cachedCanvases.getCanvas("maskCanvas",E,I),Y=X.context;Y.save(),s(Y,o),Y.globalCompositeOperation="source-in",Y.fillStyle=B?G.getPattern(Y,this):G,Y.fillRect(0,0,E,I),Y.restore();for(var $=this.ctx,V=0,K=k.length;V<K;V+=2)$.save(),$.transform(i,0,0,g,k[V],k[V+1]),$.scale(1,-1),$.drawImage(X.canvas,0,0,E,I,0,-1,1,1),$.restore()},paintImageMaskXObjectGroup:function(o){for(var i=this.ctx,g=this.current.fillColor,k=this.current.patternFill,E=0,I=o.length;E<I;E++){var G=o[E],B=G.width,X=G.height,Y=this.cachedCanvases.getCanvas("maskCanvas",B,X),$=Y.context;$.save(),s($,G),$.globalCompositeOperation="source-in",$.fillStyle=k?g.getPattern($,this):g,$.fillRect(0,0,B,X),$.restore(),i.save(),i.transform.apply(i,G.transform),i.scale(1,-1),i.drawImage(Y.canvas,0,0,B,X,0,-1,1,1),i.restore()}},paintImageXObject:function(o){const i=this.processingType3?this.commonObjs.get(o):this.objs.get(o);i?this.paintInlineImageXObject(i):(0,e.warn)("Dependent image isn't ready yet")},paintImageXObjectRepeat:function(o,i,g,k){const E=this.processingType3?this.commonObjs.get(o):this.objs.get(o);if(E){for(var I=E.width,G=E.height,B=[],X=0,Y=k.length;X<Y;X+=2)B.push({transform:[i,0,0,g,k[X],k[X+1]],x:0,y:0,w:I,h:G});this.paintInlineImageXObjectGroup(E,B)}else(0,e.warn)("Dependent image isn't ready yet")},paintInlineImageXObject:function(o){var i=o.width,g=o.height,k=this.ctx;this.save(),k.scale(1/i,-1/g);var V,K,E=k.mozCurrentTransformInverse,I=E[0],G=E[1],B=Math.max(Math.sqrt(I*I+G*G),1),X=E[2],Y=E[3],$=Math.max(Math.sqrt(X*X+Y*Y),1);if("function"==typeof HTMLElement&&o instanceof HTMLElement||!o.data)V=o;else{var ee=(K=this.cachedCanvases.getCanvas("inlineImage",i,g)).context;r(ee,o),V=K.canvas}for(var Q=i,te=g,ne="prescale1";B>2&&Q>1||$>2&&te>1;){var he=Q,ce=te;B>2&&Q>1&&(B/=Q/(he=Math.ceil(Q/2))),$>2&&te>1&&($/=te/(ce=Math.ceil(te/2))),(ee=(K=this.cachedCanvases.getCanvas(ne,he,ce)).context).clearRect(0,0,he,ce),ee.drawImage(V,0,0,Q,te,0,0,he,ce),V=K.canvas,Q=he,te=ce,ne="prescale1"===ne?"prescale2":"prescale1"}if(k.drawImage(V,0,0,Q,te,0,-g,i,g),this.imageLayer){var oe=this.getCanvasPosition(0,-g);this.imageLayer.appendImage({imgData:o,left:oe[0],top:oe[1],width:i/E[0],height:g/E[3]})}this.restore()},paintInlineImageXObjectGroup:function(o,i){var g=this.ctx,k=o.width,E=o.height,I=this.cachedCanvases.getCanvas("inlineImage",k,E);r(I.context,o);for(var B=0,X=i.length;B<X;B++){var Y=i[B];if(g.save(),g.transform.apply(g,Y.transform),g.scale(1,-1),g.drawImage(I.canvas,Y.x,Y.y,Y.w,Y.h,0,-1,1,1),this.imageLayer){var $=this.getCanvasPosition(Y.x,Y.y);this.imageLayer.appendImage({imgData:o,left:$[0],top:$[1],width:k,height:E})}g.restore()}},paintSolidColorImageMask:function(){this.ctx.fillRect(0,0,1,1)},paintXObject:function(){(0,e.warn)("Unsupported 'paintXObject' command.")},markPoint:function(o){},markPointProps:function(o,i){},beginMarkedContent:function(o){},beginMarkedContentProps:function(o,i){},endMarkedContent:function(){},beginCompat:function(){},endCompat:function(){},consumePath:function(){var o=this.ctx;this.pendingClip&&(this.pendingClip===n?o.clip("evenodd"):o.clip(),this.pendingClip=null),o.beginPath()},getSinglePixelWidth(d){if(null===this._cachedGetSinglePixelWidth){const o=this.ctx.mozCurrentTransformInverse;this._cachedGetSinglePixelWidth=Math.sqrt(Math.max(o[0]*o[0]+o[1]*o[1],o[2]*o[2]+o[3]*o[3]))}return this._cachedGetSinglePixelWidth},getCanvasPosition:function(o,i){var g=this.ctx.mozCurrentTransform;return[g[0]*o+g[2]*i+g[4],g[1]*o+g[3]*i+g[5]]}},e.OPS)f.prototype[e.OPS[m]]=f.prototype[m];return f}();t.CanvasGraphics=b},function(J,t,C){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getShadingPatternFromIR=function j(_){var h=y[_[0]];if(!h)throw new Error(`Unknown IR type: ${_[0]}`);return h.fromIR(_)},t.TilingPattern=void 0;var e=C(1),y={};function F(_,h){if(!h||typeof Path2D>"u")return;const v=h[2]-h[0],O=h[3]-h[1],l=new Path2D;l.rect(h[0],h[1],v,O),_.clip(l)}y.RadialAxial={fromIR:function(h){var v=h[1],O=h[2],l=h[3],A=h[4],p=h[5],b=h[6],T=h[7];return{type:"Pattern",getPattern:function(S){var f;F(S,O),"axial"===v?f=S.createLinearGradient(A[0],A[1],p[0],p[1]):"radial"===v&&(f=S.createRadialGradient(A[0],A[1],b,p[0],p[1],T));for(var r=0,s=l.length;r<s;++r){var a=l[r];f.addColorStop(a[0],a[1])}return f}}}};var N=function(){function h(l,A,p,b,T,M,S,f){var c,r=A.coords,s=A.colors,a=l.data,u=4*l.width;r[p+1]>r[b+1]&&(c=p,p=b,b=c,c=M,M=S,S=c),r[b+1]>r[T+1]&&(c=b,b=T,T=c,c=S,S=f,f=c),r[p+1]>r[b+1]&&(c=p,p=b,b=c,c=M,M=S,S=c);var R=(r[p]+A.offsetX)*A.scaleX,P=(r[p+1]+A.offsetY)*A.scaleY,q=(r[b]+A.offsetX)*A.scaleX,w=(r[b+1]+A.offsetY)*A.scaleY,D=(r[T]+A.offsetX)*A.scaleX,H=(r[T+1]+A.offsetY)*A.scaleY;if(!(P>=H))for(var B,X,Y,$,V,K,ee,Q,L=s[M],n=s[M+1],m=s[M+2],d=s[S],o=s[S+1],i=s[S+2],g=s[f],k=s[f+1],E=s[f+2],I=Math.round(P),G=Math.round(H),te=I;te<=G;te++){if(te<w){let se;se=te<P?0:P===w?1:(P-te)/(P-w),B=R-(R-q)*se,X=L-(L-d)*se,Y=n-(n-o)*se,$=m-(m-i)*se}else{let se;se=te>H?1:w===H?0:(w-te)/(w-H),B=q-(q-D)*se,X=d-(d-g)*se,Y=o-(o-k)*se,$=i-(i-E)*se}let le;le=te<P?0:te>H?1:(P-te)/(P-H),V=R-(R-D)*le,K=L-(L-g)*le,ee=n-(n-k)*le,Q=m-(m-E)*le;for(var ne=Math.round(Math.min(B,V)),he=Math.round(Math.max(B,V)),ce=u*te+4*ne,oe=ne;oe<=he;oe++){let se=(B-oe)/(B-V);se<0?se=0:se>1&&(se=1),a[ce++]=X-(X-K)*se|0,a[ce++]=Y-(Y-ee)*se|0,a[ce++]=$-($-Q)*se|0,a[ce++]=255}}}function v(l,A,p){var M,S,b=A.coords,T=A.colors;switch(A.type){case"lattice":var f=A.verticesPerRow,r=Math.floor(b.length/f)-1,s=f-1;for(M=0;M<r;M++)for(var a=M*f,u=0;u<s;u++,a++)h(l,p,b[a],b[a+1],b[a+f],T[a],T[a+1],T[a+f]),h(l,p,b[a+f+1],b[a+1],b[a+f],T[a+f+1],T[a+1],T[a+f]);break;case"triangles":for(M=0,S=b.length;M<S;M+=3)h(l,p,b[M],b[M+1],b[M+2],T[M],T[M+1],T[M+2]);break;default:throw new Error("illegal figure")}}return function O(l,A,p,b,T,M,S,f){var d,o,i,g,u=Math.floor(l[0]),c=Math.floor(l[1]),R=Math.ceil(l[2])-u,P=Math.ceil(l[3])-c,q=Math.min(Math.ceil(Math.abs(R*A[0]*1.1)),3e3),w=Math.min(Math.ceil(Math.abs(P*A[1]*1.1)),3e3),D=R/q,H=P/w,L={coords:p,colors:b,offsetX:-u,offsetY:-c,scaleX:1/D,scaleY:1/H},n=q+4,m=w+4;if(f.isEnabled)d=f.drawFigures({width:q,height:w,backgroundColor:M,figures:T,context:L}),(o=S.getCanvas("mesh",n,m,!1)).context.drawImage(d,2,2),d=o.canvas;else{var k=(o=S.getCanvas("mesh",n,m,!1)).context,E=k.createImageData(q,w);if(M){var I=E.data;for(i=0,g=I.length;i<g;i+=4)I[i]=M[0],I[i+1]=M[1],I[i+2]=M[2],I[i+3]=255}for(i=0;i<T.length;i++)v(E,T[i],L);k.putImageData(E,2,2),d=o.canvas}return{canvas:d,offsetX:u-2*D,offsetY:c-2*H,scaleX:D,scaleY:H}}}();y.Mesh={fromIR:function(h){var v=h[2],O=h[3],l=h[4],A=h[5],p=h[6],b=h[7],T=h[8];return{type:"Pattern",getPattern:function(S,f,r){var s;if(F(S,b),r)s=e.Util.singularValueDecompose2dScale(S.mozCurrentTransform);else if(s=e.Util.singularValueDecompose2dScale(f.baseTransform),p){var a=e.Util.singularValueDecompose2dScale(p);s=[s[0]*a[0],s[1]*a[1]]}var u=N(A,s,v,O,l,r?null:T,f.cachedCanvases,f.webGLContext);return r||(S.setTransform.apply(S,f.baseTransform),p&&S.transform.apply(S,p)),S.translate(u.offsetX,u.offsetY),S.scale(u.scaleX,u.scaleY),S.createPattern(u.canvas,"no-repeat")}}}},y.Dummy={fromIR:function(){return{type:"Pattern",getPattern:function(){return"hotpink"}}}};var x=function(){function O(l,A,p,b,T){this.operatorList=l[2],this.matrix=l[3]||[1,0,0,1,0,0],this.bbox=l[4],this.xstep=l[5],this.ystep=l[6],this.paintType=l[7],this.tilingType=l[8],this.color=A,this.canvasGraphicsFactory=b,this.baseTransform=T,this.type="Pattern",this.ctx=p}return O.prototype={createPatternCanvas:function(A){var p=this.operatorList,b=this.bbox,T=this.xstep,M=this.ystep,S=this.paintType,r=this.color,s=this.canvasGraphicsFactory;(0,e.info)("TilingType: "+this.tilingType);var a=b[0],u=b[1],c=b[2],R=b[3],P=e.Util.singularValueDecompose2dScale(this.matrix),q=e.Util.singularValueDecompose2dScale(this.baseTransform),w=[P[0]*q[0],P[1]*q[1]],D=this.getSizeAndScale(T,this.ctx.canvas.width,w[0]),H=this.getSizeAndScale(M,this.ctx.canvas.height,w[1]),L=A.cachedCanvases.getCanvas("pattern",D.size,H.size,!0),m=s.createCanvasGraphics(L.context);return m.groupLevel=A.groupLevel,this.setFillAndStrokeStyleToContext(m,S,r),m.transform(D.scale,0,0,H.scale,0,0),m.transform(1,0,0,1,-a,-u),this.clipBbox(m,b,a,u,c,R),m.executeOperatorList(p),this.ctx.transform(1,0,0,1,a,u),this.ctx.scale(1/D.scale,1/H.scale),L.canvas},getSizeAndScale:function(A,p,b){A=Math.abs(A);var T=Math.max(3e3,p),M=Math.ceil(A*b);return M>=T?M=T:b=M/A,{scale:b,size:M}},clipBbox:function(A,p,b,T,M,S){Array.isArray(p)&&4===p.length&&(A.ctx.rect(b,T,M-b,S-T),A.clip(),A.endPath())},setFillAndStrokeStyleToContext:function(A,p,b){const T=A.ctx,M=A.current;switch(p){case 1:var S=this.ctx;T.fillStyle=S.fillStyle,T.strokeStyle=S.strokeStyle,M.fillColor=S.fillStyle,M.strokeColor=S.strokeStyle;break;case 2:var f=e.Util.makeCssRgb(b[0],b[1],b[2]);T.fillStyle=f,T.strokeStyle=f,M.fillColor=f,M.strokeColor=f;break;default:throw new e.FormatError(`Unsupported paint type: ${p}`)}},getPattern:function(A,p){(A=this.ctx).setTransform.apply(A,this.baseTransform),A.transform.apply(A,this.matrix);var b=this.createPatternCanvas(p);return A.createPattern(b,"repeat")}},O}();t.TilingPattern=x},function(J,t,C){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GlobalWorkerOptions=void 0;const e=Object.create(null);t.GlobalWorkerOptions=e,e.workerPort=void 0===e.workerPort?null:e.workerPort,e.workerSrc=void 0===e.workerSrc?"":e.workerSrc},function(J,t,C){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MessageHandler=void 0;var e=C(1);function N(x){if("object"!=typeof x||null===x)return x;switch(x.name){case"AbortException":return new e.AbortException(x.message);case"MissingPDFException":return new e.MissingPDFException(x.message);case"UnexpectedResponseException":return new e.UnexpectedResponseException(x.message,x.status);case"UnknownErrorException":return new e.UnknownErrorException(x.message,x.details);default:return new e.UnknownErrorException(x.message,x.toString())}}t.MessageHandler=class j{constructor(_,h,v){this.sourceName=_,this.targetName=h,this.comObj=v,this.callbackId=1,this.streamId=1,this.postMessageTransfers=!0,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=O=>{const l=O.data;if(l.targetName!==this.sourceName)return;if(l.stream)return void this._processStreamMessage(l);if(l.callback){const p=l.callbackId,b=this.callbackCapabilities[p];if(!b)throw new Error(`Cannot resolve callback ${p}`);if(delete this.callbackCapabilities[p],1===l.callback)b.resolve(l.data);else{if(2!==l.callback)throw new Error("Unexpected callback case");b.reject(N(l.reason))}return}const A=this.actionHandler[l.action];if(!A)throw new Error(`Unknown action from worker: ${l.action}`);if(l.callbackId){const p=this.sourceName,b=l.sourceName;new Promise(function(T){T(A(l.data))}).then(function(T){v.postMessage({sourceName:p,targetName:b,callback:1,callbackId:l.callbackId,data:T})},function(T){v.postMessage({sourceName:p,targetName:b,callback:2,callbackId:l.callbackId,reason:N(T)})})}else l.streamId?this._createStreamSink(l):A(l.data)},v.addEventListener("message",this._onComObjOnMessage)}on(_,h){const v=this.actionHandler;if(v[_])throw new Error(`There is already an actionName called "${_}"`);v[_]=h}send(_,h,v){this._postMessage({sourceName:this.sourceName,targetName:this.targetName,action:_,data:h},v)}sendWithPromise(_,h,v){const O=this.callbackId++,l=(0,e.createPromiseCapability)();this.callbackCapabilities[O]=l;try{this._postMessage({sourceName:this.sourceName,targetName:this.targetName,action:_,callbackId:O,data:h},v)}catch(A){l.reject(A)}return l.promise}sendWithStream(_,h,v,O){const l=this.streamId++,A=this.sourceName,p=this.targetName,b=this.comObj;return new ReadableStream({start:T=>{const M=(0,e.createPromiseCapability)();return this.streamControllers[l]={controller:T,startCall:M,pullCall:null,cancelCall:null,isClosed:!1},this._postMessage({sourceName:A,targetName:p,action:_,streamId:l,data:h,desiredSize:T.desiredSize},O),M.promise},pull:T=>{const M=(0,e.createPromiseCapability)();return this.streamControllers[l].pullCall=M,b.postMessage({sourceName:A,targetName:p,stream:6,streamId:l,desiredSize:T.desiredSize}),M.promise},cancel:T=>{(0,e.assert)(T instanceof Error,"cancel must have a valid reason");const M=(0,e.createPromiseCapability)();return this.streamControllers[l].cancelCall=M,this.streamControllers[l].isClosed=!0,b.postMessage({sourceName:A,targetName:p,stream:1,streamId:l,reason:N(T)}),M.promise}},v)}_createStreamSink(_){const h=this,v=this.actionHandler[_.action],O=_.streamId,l=this.sourceName,A=_.sourceName,p=this.comObj,b={enqueue(T,M=1,S){if(this.isCancelled)return;const f=this.desiredSize;this.desiredSize-=M,f>0&&this.desiredSize<=0&&(this.sinkCapability=(0,e.createPromiseCapability)(),this.ready=this.sinkCapability.promise),h._postMessage({sourceName:l,targetName:A,stream:4,streamId:O,chunk:T},S)},close(){this.isCancelled||(this.isCancelled=!0,p.postMessage({sourceName:l,targetName:A,stream:3,streamId:O}),delete h.streamSinks[O])},error(T){(0,e.assert)(T instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,p.postMessage({sourceName:l,targetName:A,stream:5,streamId:O,reason:N(T)}))},sinkCapability:(0,e.createPromiseCapability)(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:_.desiredSize,ready:null};b.sinkCapability.resolve(),b.ready=b.sinkCapability.promise,this.streamSinks[O]=b,new Promise(function(T){T(v(_.data,b))}).then(function(){p.postMessage({sourceName:l,targetName:A,stream:8,streamId:O,success:!0})},function(T){p.postMessage({sourceName:l,targetName:A,stream:8,streamId:O,reason:N(T)})})}_processStreamMessage(_){const h=_.streamId,v=this.sourceName,O=_.sourceName,l=this.comObj;switch(_.stream){case 8:_.success?this.streamControllers[h].startCall.resolve():this.streamControllers[h].startCall.reject(N(_.reason));break;case 7:_.success?this.streamControllers[h].pullCall.resolve():this.streamControllers[h].pullCall.reject(N(_.reason));break;case 6:if(!this.streamSinks[h]){l.postMessage({sourceName:v,targetName:O,stream:7,streamId:h,success:!0});break}this.streamSinks[h].desiredSize<=0&&_.desiredSize>0&&this.streamSinks[h].sinkCapability.resolve(),this.streamSinks[h].desiredSize=_.desiredSize;const{onPull:A}=this.streamSinks[_.streamId];new Promise(function(b){b(A&&A())}).then(function(){l.postMessage({sourceName:v,targetName:O,stream:7,streamId:h,success:!0})},function(b){l.postMessage({sourceName:v,targetName:O,stream:7,streamId:h,reason:N(b)})});break;case 4:if((0,e.assert)(this.streamControllers[h],"enqueue should have stream controller"),this.streamControllers[h].isClosed)break;this.streamControllers[h].controller.enqueue(_.chunk);break;case 3:if((0,e.assert)(this.streamControllers[h],"close should have stream controller"),this.streamControllers[h].isClosed)break;this.streamControllers[h].isClosed=!0,this.streamControllers[h].controller.close(),this._deleteStreamController(h);break;case 5:(0,e.assert)(this.streamControllers[h],"error should have stream controller"),this.streamControllers[h].controller.error(N(_.reason)),this._deleteStreamController(h);break;case 2:_.success?this.streamControllers[h].cancelCall.resolve():this.streamControllers[h].cancelCall.reject(N(_.reason)),this._deleteStreamController(h);break;case 1:if(!this.streamSinks[h])break;const{onCancel:p}=this.streamSinks[_.streamId];new Promise(function(b){b(p&&p(N(_.reason)))}).then(function(){l.postMessage({sourceName:v,targetName:O,stream:2,streamId:h,success:!0})},function(b){l.postMessage({sourceName:v,targetName:O,stream:2,streamId:h,reason:N(b)})}),this.streamSinks[h].sinkCapability.reject(N(_.reason)),this.streamSinks[h].isCancelled=!0,delete this.streamSinks[h];break;default:throw new Error("Unexpected stream case")}}async _deleteStreamController(_){await Promise.allSettled([this.streamControllers[_].startCall,this.streamControllers[_].pullCall,this.streamControllers[_].cancelCall].map(function(h){return h&&h.promise})),delete this.streamControllers[_]}_postMessage(_,h){h&&this.postMessageTransfers?this.comObj.postMessage(_,h):this.comObj.postMessage(_)}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}},function(J,t,C){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Metadata=void 0;var e=C(1),y=C(13);t.Metadata=class F{constructor(j){(0,e.assert)("string"==typeof j,"Metadata: input is not a string"),j=this._repair(j);const _=(new y.SimpleXMLParser).parseFromString(j);this._metadataMap=new Map,_&&this._parse(_)}_repair(j){return j.replace(/^[^<]+/,"").replace(/>\\376\\377([^<]+)/g,function(x,_){const h=_.replace(/\\([0-3])([0-7])([0-7])/g,function(O,l,A,p){return String.fromCharCode(64*l+8*A+1*p)}).replace(/&(amp|apos|gt|lt|quot);/g,function(O,l){switch(l){case"amp":return"&";case"apos":return"'";case"gt":return">";case"lt":return"<";case"quot":return'"'}throw new Error(`_repair: ${l} isn't defined.`)});let v="";for(let O=0,l=h.length;O<l;O+=2){const A=256*h.charCodeAt(O)+h.charCodeAt(O+1);v+=A>=32&&A<127&&60!==A&&62!==A&&38!==A?String.fromCharCode(A):"&#x"+(65536+A).toString(16).substring(1)+";"}return">"+v})}_parse(j){let x=j.documentElement;if("rdf:rdf"!==x.nodeName.toLowerCase())for(x=x.firstChild;x&&"rdf:rdf"!==x.nodeName.toLowerCase();)x=x.nextSibling;const _=x?x.nodeName.toLowerCase():null;if(!x||"rdf:rdf"!==_||!x.hasChildNodes())return;const h=x.childNodes;for(let v=0,O=h.length;v<O;v++){const l=h[v];if("rdf:description"===l.nodeName.toLowerCase())for(let A=0,p=l.childNodes.length;A<p;A++)if("#text"!==l.childNodes[A].nodeName.toLowerCase()){const b=l.childNodes[A],T=b.nodeName.toLowerCase();this._metadataMap.set(T,b.textContent.trim())}}}get(j){return this._metadataMap.has(j)?this._metadataMap.get(j):null}getAll(){const j=Object.create(null);for(const[x,_]of this._metadataMap)j[x]=_;return j}has(j){return this._metadataMap.has(j)}}},function(J,t,C){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SimpleXMLParser=void 0;function y(_,h){const v=_[h];return" "===v||"\n"===v||"\r"===v||"\t"===v}class N{_resolveEntities(h){return h.replace(/&([^;]+);/g,(v,O)=>{if("#x"===O.substring(0,2))return String.fromCharCode(parseInt(O.substring(2),16));if("#"===O.substring(0,1))return String.fromCharCode(parseInt(O.substring(1),10));switch(O){case"lt":return"<";case"gt":return">";case"amp":return"&";case"quot":return'"'}return this.onResolveEntity(O)})}_parseContent(h,v){const O=[];let l=v;function A(){for(;l<h.length&&y(h,l);)++l}for(;l<h.length&&!y(h,l)&&">"!==h[l]&&"/"!==h[l];)++l;const p=h.substring(v,l);for(A();l<h.length&&">"!==h[l]&&"/"!==h[l]&&"?"!==h[l];){A();let b="",T="";for(;l<h.length&&!y(h,l)&&"="!==h[l];)b+=h[l],++l;if(A(),"="!==h[l])return null;++l,A();const M=h[l];if('"'!==M&&"'"!==M)return null;const S=h.indexOf(M,++l);if(S<0)return null;T=h.substring(l,S),O.push({name:b,value:this._resolveEntities(T)}),l=S+1,A()}return{name:p,attributes:O,parsed:l-v}}_parseProcessingInstruction(h,v){let O=v;for(;O<h.length&&!y(h,O)&&">"!==h[O]&&"/"!==h[O];)++O;const A=h.substring(v,O);!function l(){for(;O<h.length&&y(h,O);)++O}();const p=O;for(;O<h.length&&("?"!==h[O]||">"!==h[O+1]);)++O;return{name:A,value:h.substring(p,O),parsed:O-v}}parseXml(h){let v=0;for(;v<h.length;){let l=v;if("<"===h[v]){let p;switch(++l,h[l]){case"/":if(++l,p=h.indexOf(">",l),p<0)return void this.onError(-9);this.onEndElement(h.substring(l,p)),l=p+1;break;case"?":++l;const b=this._parseProcessingInstruction(h,l);if("?>"!==h.substring(l+b.parsed,l+b.parsed+2))return void this.onError(-3);this.onPi(b.name,b.value),l+=b.parsed+2;break;case"!":if("--"===h.substring(l+1,l+3)){if(p=h.indexOf("--\x3e",l+3),p<0)return void this.onError(-5);this.onComment(h.substring(l+3,p)),l=p+3}else if("[CDATA["===h.substring(l+1,l+8)){if(p=h.indexOf("]]>",l+8),p<0)return void this.onError(-2);this.onCdata(h.substring(l+8,p)),l=p+3}else{if("DOCTYPE"!==h.substring(l+1,l+8))return void this.onError(-6);{const S=h.indexOf("[",l+8);let f=!1;if(p=h.indexOf(">",l+8),p<0)return void this.onError(-4);if(S>0&&p>S){if(p=h.indexOf("]>",l+8),p<0)return void this.onError(-4);f=!0}const r=h.substring(l+8,p+(f?1:0));this.onDoctype(r),l=p+(f?2:1)}}break;default:const T=this._parseContent(h,l);if(null===T)return void this.onError(-6);let M=!1;if("/>"===h.substring(l+T.parsed,l+T.parsed+2))M=!0;else if(">"!==h.substring(l+T.parsed,l+T.parsed+1))return void this.onError(-9);this.onBeginElement(T.name,T.attributes,M),l+=T.parsed+(M?2:1)}}else{for(;l<h.length&&"<"!==h[l];)l++;const A=h.substring(v,l);this.onText(this._resolveEntities(A))}v=l}}onResolveEntity(h){return`&${h};`}onPi(h,v){}onComment(h){}onCdata(h){}onDoctype(h){}onText(h){}onBeginElement(h,v,O){}onEndElement(h){}onError(h){}}class j{constructor(h,v){this.nodeName=h,this.nodeValue=v,Object.defineProperty(this,"parentNode",{value:null,writable:!0})}get firstChild(){return this.childNodes&&this.childNodes[0]}get nextSibling(){const h=this.parentNode.childNodes;if(!h)return;const v=h.indexOf(this);return-1!==v?h[v+1]:void 0}get textContent(){return this.childNodes?this.childNodes.map(function(h){return h.textContent}).join(""):this.nodeValue||""}hasChildNodes(){return this.childNodes&&this.childNodes.length>0}}t.SimpleXMLParser=class x extends N{constructor(){super(),this._currentFragment=null,this._stack=null,this._errorCode=0}parseFromString(h){if(this._currentFragment=[],this._stack=[],this._errorCode=0,this.parseXml(h),0!==this._errorCode)return;const[v]=this._currentFragment;return v?{documentElement:v}:void 0}onResolveEntity(h){return"apos"===h?"'":super.onResolveEntity(h)}onText(h){if(function F(_){for(let h=0,v=_.length;h<v;h++)if(!y(_,h))return!1;return!0}(h))return;const v=new j("#text",h);this._currentFragment.push(v)}onCdata(h){const v=new j("#text",h);this._currentFragment.push(v)}onBeginElement(h,v,O){const l=new j(h);l.childNodes=[],this._currentFragment.push(l),!O&&(this._stack.push(this._currentFragment),this._currentFragment=l.childNodes)}onEndElement(h){this._currentFragment=this._stack.pop()||[];const v=this._currentFragment[this._currentFragment.length-1];if(v)for(let O=0,l=v.childNodes.length;O<l;O++)v.childNodes[O].parentNode=v}onError(h){this._errorCode=h}}},function(J,t,C){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PDFDataTransportStream=void 0;var e=C(1);t.PDFDataTransportStream=class y{constructor(x,_){(0,e.assert)(_),this._queuedChunks=[],this._progressiveDone=x.progressiveDone||!1;const h=x.initialData;if(h&&h.length>0){const v=new Uint8Array(h).buffer;this._queuedChunks.push(v)}this._pdfDataRangeTransport=_,this._isStreamingSupported=!x.disableStream,this._isRangeSupported=!x.disableRange,this._contentLength=x.length,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener((v,O)=>{this._onReceiveData({begin:v,chunk:O})}),this._pdfDataRangeTransport.addProgressListener((v,O)=>{this._onProgress({loaded:v,total:O})}),this._pdfDataRangeTransport.addProgressiveReadListener(v=>{this._onReceiveData({chunk:v})}),this._pdfDataRangeTransport.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),this._pdfDataRangeTransport.transportReady()}_onReceiveData(x){const _=new Uint8Array(x.chunk).buffer;if(void 0===x.begin)this._fullRequestReader?this._fullRequestReader._enqueue(_):this._queuedChunks.push(_);else{const h=this._rangeReaders.some(function(v){return v._begin===x.begin&&(v._enqueue(_),!0)});(0,e.assert)(h)}}get _progressiveDataLength(){return this._fullRequestReader?this._fullRequestReader._loaded:0}_onProgress(x){if(void 0===x.total){const _=this._rangeReaders[0];_&&_.onProgress&&_.onProgress({loaded:x.loaded})}else{const _=this._fullRequestReader;_&&_.onProgress&&_.onProgress({loaded:x.loaded,total:x.total})}}_onProgressiveDone(){this._fullRequestReader&&this._fullRequestReader.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(x){const _=this._rangeReaders.indexOf(x);_>=0&&this._rangeReaders.splice(_,1)}getFullReader(){(0,e.assert)(!this._fullRequestReader);const x=this._queuedChunks;return this._queuedChunks=null,new F(this,x,this._progressiveDone)}getRangeReader(x,_){if(_<=this._progressiveDataLength)return null;const h=new N(this,x,_);return this._pdfDataRangeTransport.requestDataRange(x,_),this._rangeReaders.push(h),h}cancelAllRequests(x){this._fullRequestReader&&this._fullRequestReader.cancel(x),this._rangeReaders.slice(0).forEach(function(h){h.cancel(x)}),this._pdfDataRangeTransport.abort()}};class F{constructor(x,_,h=!1){this._stream=x,this._done=h||!1,this._filename=null,this._queuedChunks=_||[],this._loaded=0;for(const v of this._queuedChunks)this._loaded+=v.byteLength;this._requests=[],this._headersReady=Promise.resolve(),x._fullRequestReader=this,this.onProgress=null}_enqueue(x){this._done||(this._requests.length>0?this._requests.shift().resolve({value:x,done:!1}):this._queuedChunks.push(x),this._loaded+=x.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const x=(0,e.createPromiseCapability)();return this._requests.push(x),x.promise}cancel(x){this._done=!0,this._requests.forEach(function(_){_.resolve({value:void 0,done:!0})}),this._requests=[]}progressiveDone(){this._done||(this._done=!0)}}class N{constructor(x,_,h){this._stream=x,this._begin=_,this._end=h,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(x){this._done||(0===this._requests.length?this._queuedChunk=x:(this._requests.shift().resolve({value:x,done:!1}),this._requests.forEach(function(h){h.resolve({value:void 0,done:!0})}),this._requests=[]),this._done=!0,this._stream._removeRangeReader(this))}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const _=this._queuedChunk;return this._queuedChunk=null,{value:_,done:!1}}if(this._done)return{value:void 0,done:!0};const x=(0,e.createPromiseCapability)();return this._requests.push(x),x.promise}cancel(x){this._done=!0,this._requests.forEach(function(_){_.resolve({value:void 0,done:!0})}),this._requests=[],this._stream._removeRangeReader(this)}}},function(J,t,C){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WebGLContext=void 0;var e=C(1);t.WebGLContext=class y{constructor({enable:j=!1}){this._enabled=!0===j}get isEnabled(){let j=this._enabled;return j&&(j=F.tryInitGL()),(0,e.shadow)(this,"isEnabled",j)}composeSMask({layer:j,mask:x,properties:_}){return F.composeSMask(j,x,_)}drawFigures({width:j,height:x,backgroundColor:_,figures:h,context:v}){return F.drawFigures(j,x,_,h,v)}clear(){F.cleanup()}};var F=function(){function j(c,R,P){var q=c.createShader(P);if(c.shaderSource(q,R),c.compileShader(q),!c.getShaderParameter(q,c.COMPILE_STATUS)){var D=c.getShaderInfoLog(q);throw new Error("Error during shader compilation: "+D)}return q}function x(c,R){return j(c,R,c.VERTEX_SHADER)}function _(c,R){return j(c,R,c.FRAGMENT_SHADER)}function h(c,R){for(var P=c.createProgram(),q=0,w=R.length;q<w;++q)c.attachShader(P,R[q]);if(c.linkProgram(P),!c.getProgramParameter(P,c.LINK_STATUS)){var H=c.getProgramInfoLog(P);throw new Error("Error during program linking: "+H)}return P}function v(c,R,P){c.activeTexture(P);var q=c.createTexture();return c.bindTexture(c.TEXTURE_2D,q),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,c.CLAMP_TO_EDGE),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,c.CLAMP_TO_EDGE),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,c.NEAREST),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,c.NEAREST),c.texImage2D(c.TEXTURE_2D,0,c.RGBA,c.RGBA,c.UNSIGNED_BYTE,R),q}var O,l;function A(){O||(l=document.createElement("canvas"),O=l.getContext("webgl",{premultipliedalpha:!1}))}var T=null,s=null;return{tryInitGL(){try{return A(),!!O}catch{}return!1},composeSMask:function S(c,R,P){var q=c.width,w=c.height;T||function M(){var c,R;A(),c=l,l=null,R=O,O=null;var w=h(R,[x(R,"  attribute vec2 a_position;                                      attribute vec2 a_texCoord;                                                                                                      uniform vec2 u_resolution;                                                                                                      varying vec2 v_texCoord;                                                                                                        void main() {                                                     vec2 clipSpace = (a_position / u_resolution) * 2.0 - 1.0;       gl_Position = vec4(clipSpace * vec2(1, -1), 0, 1);                                                                              v_texCoord = a_texCoord;                                      }                                                             "),_(R,"  precision mediump float;                                                                                                        uniform vec4 u_backdrop;                                        uniform int u_subtype;                                          uniform sampler2D u_image;                                      uniform sampler2D u_mask;                                                                                                       varying vec2 v_texCoord;                                                                                                        void main() {                                                     vec4 imageColor = texture2D(u_image, v_texCoord);               vec4 maskColor = texture2D(u_mask, v_texCoord);                 if (u_backdrop.a > 0.0) {                                         maskColor.rgb = maskColor.rgb * maskColor.a +                                   u_backdrop.rgb * (1.0 - maskColor.a);         }                                                               float lum;                                                      if (u_subtype == 0) {                                             lum = maskColor.a;                                            } else {                                                          lum = maskColor.r * 0.3 + maskColor.g * 0.59 +                        maskColor.b * 0.11;                                     }                                                               imageColor.a *= lum;                                            imageColor.rgb *= imageColor.a;                                 gl_FragColor = imageColor;                                    }                                                             ")]);R.useProgram(w);var D={};D.gl=R,D.canvas=c,D.resolutionLocation=R.getUniformLocation(w,"u_resolution"),D.positionLocation=R.getAttribLocation(w,"a_position"),D.backdropLocation=R.getUniformLocation(w,"u_backdrop"),D.subtypeLocation=R.getUniformLocation(w,"u_subtype");var H=R.getAttribLocation(w,"a_texCoord"),L=R.getUniformLocation(w,"u_image"),n=R.getUniformLocation(w,"u_mask"),m=R.createBuffer();R.bindBuffer(R.ARRAY_BUFFER,m),R.bufferData(R.ARRAY_BUFFER,new Float32Array([0,0,1,0,0,1,0,1,1,0,1,1]),R.STATIC_DRAW),R.enableVertexAttribArray(H),R.vertexAttribPointer(H,2,R.FLOAT,!1,0,0),R.uniform1i(L,0),R.uniform1i(n,1),T=D}();var D=T,H=D.canvas,L=D.gl;H.width=q,H.height=w,L.viewport(0,0,L.drawingBufferWidth,L.drawingBufferHeight),L.uniform2f(D.resolutionLocation,q,w),P.backdrop?L.uniform4f(D.resolutionLocation,P.backdrop[0],P.backdrop[1],P.backdrop[2],1):L.uniform4f(D.resolutionLocation,0,0,0,0),L.uniform1i(D.subtypeLocation,"Luminosity"===P.subtype?1:0);var n=v(L,c,L.TEXTURE0),m=v(L,R,L.TEXTURE1),d=L.createBuffer();return L.bindBuffer(L.ARRAY_BUFFER,d),L.bufferData(L.ARRAY_BUFFER,new Float32Array([0,0,q,0,0,w,0,w,q,0,q,w]),L.STATIC_DRAW),L.enableVertexAttribArray(D.positionLocation),L.vertexAttribPointer(D.positionLocation,2,L.FLOAT,!1,0,0),L.clearColor(0,0,0,0),L.enable(L.BLEND),L.blendFunc(L.ONE,L.ONE_MINUS_SRC_ALPHA),L.clear(L.COLOR_BUFFER_BIT),L.drawArrays(L.TRIANGLES,0,6),L.flush(),L.deleteTexture(n),L.deleteTexture(m),L.deleteBuffer(d),H},drawFigures:function u(c,R,P,q,w){s||function a(){var c,R;A(),c=l,l=null,R=O,O=null;var w=h(R,[x(R,"  attribute vec2 a_position;                                      attribute vec3 a_color;                                                                                                         uniform vec2 u_resolution;                                      uniform vec2 u_scale;                                           uniform vec2 u_offset;                                                                                                          varying vec4 v_color;                                                                                                           void main() {                                                     vec2 position = (a_position + u_offset) * u_scale;              vec2 clipSpace = (position / u_resolution) * 2.0 - 1.0;         gl_Position = vec4(clipSpace * vec2(1, -1), 0, 1);                                                                              v_color = vec4(a_color / 255.0, 1.0);                         }                                                             "),_(R,"  precision mediump float;                                                                                                        varying vec4 v_color;                                                                                                           void main() {                                                     gl_FragColor = v_color;                                       }                                                             ")]);R.useProgram(w);var D={};D.gl=R,D.canvas=c,D.resolutionLocation=R.getUniformLocation(w,"u_resolution"),D.scaleLocation=R.getUniformLocation(w,"u_scale"),D.offsetLocation=R.getUniformLocation(w,"u_offset"),D.positionLocation=R.getAttribLocation(w,"a_position"),D.colorLocation=R.getAttribLocation(w,"a_color"),s=D}();var D=s,H=D.canvas,L=D.gl;H.width=c,H.height=R,L.viewport(0,0,L.drawingBufferWidth,L.drawingBufferHeight),L.uniform2f(D.resolutionLocation,c,R);var m,d,o,n=0;for(m=0,d=q.length;m<d;m++)switch(q[m].type){case"lattice":n+=((o=q[m].coords.length/q[m].verticesPerRow|0)-1)*(q[m].verticesPerRow-1)*6;break;case"triangles":n+=q[m].coords.length}var i=new Float32Array(2*n),g=new Uint8Array(3*n),k=w.coords,E=w.colors,I=0,G=0;for(m=0,d=q.length;m<d;m++){var B=q[m],X=B.coords,Y=B.colors;switch(B.type){case"lattice":var $=B.verticesPerRow;o=X.length/$|0;for(var V=1;V<o;V++)for(var K=V*$+1,ee=1;ee<$;ee++,K++)i[I]=k[X[K-$-1]],i[I+1]=k[X[K-$-1]+1],i[I+2]=k[X[K-$]],i[I+3]=k[X[K-$]+1],i[I+4]=k[X[K-1]],i[I+5]=k[X[K-1]+1],g[G]=E[Y[K-$-1]],g[G+1]=E[Y[K-$-1]+1],g[G+2]=E[Y[K-$-1]+2],g[G+3]=E[Y[K-$]],g[G+4]=E[Y[K-$]+1],g[G+5]=E[Y[K-$]+2],g[G+6]=E[Y[K-1]],g[G+7]=E[Y[K-1]+1],g[G+8]=E[Y[K-1]+2],i[I+6]=i[I+2],i[I+7]=i[I+3],i[I+8]=i[I+4],i[I+9]=i[I+5],i[I+10]=k[X[K]],i[I+11]=k[X[K]+1],g[G+9]=g[G+3],g[G+10]=g[G+4],g[G+11]=g[G+5],g[G+12]=g[G+6],g[G+13]=g[G+7],g[G+14]=g[G+8],g[G+15]=E[Y[K]],g[G+16]=E[Y[K]+1],g[G+17]=E[Y[K]+2],I+=12,G+=18;break;case"triangles":for(var Q=0,te=X.length;Q<te;Q++)i[I]=k[X[Q]],i[I+1]=k[X[Q]+1],g[G]=E[Y[Q]],g[G+1]=E[Y[Q]+1],g[G+2]=E[Y[Q]+2],I+=2,G+=3}}P?L.clearColor(P[0]/255,P[1]/255,P[2]/255,1):L.clearColor(0,0,0,0),L.clear(L.COLOR_BUFFER_BIT);var ne=L.createBuffer();L.bindBuffer(L.ARRAY_BUFFER,ne),L.bufferData(L.ARRAY_BUFFER,i,L.STATIC_DRAW),L.enableVertexAttribArray(D.positionLocation),L.vertexAttribPointer(D.positionLocation,2,L.FLOAT,!1,0,0);var he=L.createBuffer();return L.bindBuffer(L.ARRAY_BUFFER,he),L.bufferData(L.ARRAY_BUFFER,g,L.STATIC_DRAW),L.enableVertexAttribArray(D.colorLocation),L.vertexAttribPointer(D.colorLocation,3,L.UNSIGNED_BYTE,!1,0,0),L.uniform2f(D.scaleLocation,w.scaleX,w.scaleY),L.uniform2f(D.offsetLocation,w.offsetX,w.offsetY),L.drawArrays(L.TRIANGLES,0,n),L.flush(),L.deleteBuffer(ne),L.deleteBuffer(he),H},cleanup(){T&&T.canvas&&(T.canvas.width=0,T.canvas.height=0),s&&s.canvas&&(s.canvas.width=0,s.canvas.height=0),T=null,s=null}}}()},function(J,t,C){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.renderTextLayer=void 0;var e=C(1),y=function(){var j=/\S/;function _(b,T,M){var S=document.createElement("span"),f={angle:0,canvasWidth:0,isWhitespace:!1,originalTransform:null,paddingBottom:0,paddingLeft:0,paddingRight:0,paddingTop:0,scale:1};if(b._textDivs.push(S),function x(b){return!j.test(b)}(T.str))return f.isWhitespace=!0,void b._textDivProperties.set(S,f);var r=e.Util.transform(b._viewport.transform,T.transform),s=Math.atan2(r[1],r[0]),a=M[T.fontName];a.vertical&&(s+=Math.PI/2);var u=Math.sqrt(r[2]*r[2]+r[3]*r[3]),c=u;let R,P;if(a.ascent?c*=a.ascent:a.descent&&(c*=1+a.descent),0===s?(R=r[4],P=r[5]-c):(R=r[4]+c*Math.sin(s),P=r[5]-c*Math.cos(s)),S.style.left=`${R}px`,S.style.top=`${P}px`,S.style.fontSize=`${u}px`,S.style.fontFamily=a.fontFamily,S.textContent=T.str,b._fontInspectorEnabled&&(S.dataset.fontName=T.fontName),0!==s&&(f.angle=s*(180/Math.PI)),T.str.length>1&&(f.canvasWidth=a.vertical?T.height*b._viewport.scale:T.width*b._viewport.scale),b._textDivProperties.set(S,f),b._textContentStream&&b._layoutText(S),b._enhanceTextSelection){var q=1,w=0;0!==s&&(q=Math.cos(s),w=Math.sin(s));var L,n,D=(a.vertical?T.height:T.width)*b._viewport.scale,H=u;n=0!==s?e.Util.getAxialAlignedBoundingBox([0,0,D,H],L=[q,w,-w,q,R,P]):[R,P,R+D,P+H],b._bounds.push({left:n[0],top:n[1],right:n[2],bottom:n[3],div:S,size:[D,H],m:L})}}function h(b){if(!b._canceled){var T=b._textDivs,M=b._capability,S=T.length;if(S>1e5)return b._renderingDone=!0,void M.resolve();if(!b._textContentStream)for(var f=0;f<S;f++)b._layoutText(T[f]);b._renderingDone=!0,M.resolve()}}function l(b,T){T.sort(function(f,r){return f.x1-r.x1||f.index-r.index});var S=[{start:-1/0,end:1/0,boundary:{x1:-1/0,y1:-1/0,x2:0,y2:1/0,index:-1,x1New:0,x2New:0}}];T.forEach(function(f){for(var r=0;r<S.length&&S[r].end<=f.y1;)r++;for(var s=S.length-1;s>=0&&S[s].start>=f.y2;)s--;var a,u,c,R,P=-1/0;for(c=r;c<=s;c++){var q;(q=(u=(a=S[c]).boundary).x2>f.x1?u.index>f.index?u.x1New:f.x1:void 0===u.x2New?(u.x2+f.x1)/2:u.x2New)>P&&(P=q)}for(f.x1New=P,c=r;c<=s;c++)void 0===(u=(a=S[c]).boundary).x2New?u.x2>f.x1?u.index>f.index&&(u.x2New=u.x2):u.x2New=P:u.x2New>P&&(u.x2New=Math.max(P,u.x2));var w=[],D=null;for(c=r;c<=s;c++){var H=(u=(a=S[c]).boundary).x2>f.x2?u:f;D===H?w[w.length-1].end=a.end:(w.push({start:a.start,end:a.end,boundary:H}),D=H)}for(S[r].start<f.y1&&(w[0].start=f.y1,w.unshift({start:S[r].start,end:f.y1,boundary:S[r].boundary})),f.y2<S[s].end&&(w[w.length-1].end=f.y2,w.push({start:f.y2,end:S[s].end,boundary:S[s].boundary})),c=r;c<=s;c++)if(void 0===(u=(a=S[c]).boundary).x2New){var L=!1;for(R=r-1;!L&&R>=0&&S[R].start>=u.y1;R--)L=S[R].boundary===u;for(R=s+1;!L&&R<S.length&&S[R].end<=u.y2;R++)L=S[R].boundary===u;for(R=0;!L&&R<w.length;R++)L=w[R].boundary===u;L||(u.x2New=P)}Array.prototype.splice.apply(S,[r,s-r+1].concat(w))}),S.forEach(function(f){var r=f.boundary;void 0===r.x2New&&(r.x2New=Math.max(b,r.x2))})}function A({textContent:b,textContentStream:T,container:M,viewport:S,textDivs:f,textContentItemsStr:r,enhanceTextSelection:s}){this._textContent=b,this._textContentStream=T,this._container=M,this._viewport=S,this._textDivs=f||[],this._textContentItemsStr=r||[],this._enhanceTextSelection=!!s,this._fontInspectorEnabled=!(!globalThis.FontInspector||!globalThis.FontInspector.enabled),this._reader=null,this._layoutTextLastFontSize=null,this._layoutTextLastFontFamily=null,this._layoutTextCtx=null,this._textDivProperties=new WeakMap,this._renderingDone=!1,this._canceled=!1,this._capability=(0,e.createPromiseCapability)(),this._renderTimer=null,this._bounds=[],this._capability.promise.finally(()=>{this._layoutTextCtx&&(this._layoutTextCtx.canvas.width=0,this._layoutTextCtx.canvas.height=0,this._layoutTextCtx=null)}).catch(()=>{})}return A.prototype={get promise(){return this._capability.promise},cancel:function(){this._canceled=!0,this._reader&&(this._reader.cancel(new e.AbortException("TextLayer task cancelled.")),this._reader=null),null!==this._renderTimer&&(clearTimeout(this._renderTimer),this._renderTimer=null),this._capability.reject(new Error("TextLayer task cancelled."))},_processItems(b,T){for(let M=0,S=b.length;M<S;M++)this._textContentItemsStr.push(b[M].str),_(this,b[M],T)},_layoutText(b){const T=this._textDivProperties.get(b);if(T.isWhitespace)return;let M="";if(0!==T.canvasWidth){const{fontSize:S,fontFamily:f}=b.style;(S!==this._layoutTextLastFontSize||f!==this._layoutTextLastFontFamily)&&(this._layoutTextCtx.font=`${S} ${f}`,this._layoutTextLastFontSize=S,this._layoutTextLastFontFamily=f);const{width:r}=this._layoutTextCtx.measureText(b.textContent);r>0&&(T.scale=T.canvasWidth/r,M=`scaleX(${T.scale})`)}0!==T.angle&&(M=`rotate(${T.angle}deg) ${M}`),M.length>0&&(this._enhanceTextSelection&&(T.originalTransform=M),b.style.transform=M),this._textDivProperties.set(b,T),this._container.appendChild(b)},_render:function(T){const M=(0,e.createPromiseCapability)();let S=Object.create(null);const f=document.createElement("canvas");if(f.mozOpaque=!0,this._layoutTextCtx=f.getContext("2d",{alpha:!1}),this._textContent)this._processItems(this._textContent.items,this._textContent.styles),M.resolve();else{if(!this._textContentStream)throw new Error('Neither "textContent" nor "textContentStream" parameters specified.');{const r=()=>{this._reader.read().then(({value:s,done:a})=>{a?M.resolve():(Object.assign(S,s.styles),this._processItems(s.items,S),r())},M.reject)};this._reader=this._textContentStream.getReader(),r()}}M.promise.then(()=>{S=null,T?this._renderTimer=setTimeout(()=>{h(this),this._renderTimer=null},T):h(this)},this._capability.reject)},expandTextDivs:function(T){if(!this._enhanceTextSelection||!this._renderingDone)return;null!==this._bounds&&(function v(b){for(var T=b._bounds,M=b._viewport,S=function O(b,T,M){var S=M.map(function(r,s){return{x1:r.left,y1:r.top,x2:r.right,y2:r.bottom,index:s,x1New:void 0,x2New:void 0}});l(b,S);var f=new Array(M.length);return S.forEach(function(r){f[r.index]={left:r.x1New,top:0,right:r.x2New,bottom:0}}),M.map(function(r,s){var a=f[s],u=S[s];u.x1=r.top,u.y1=b-a.right,u.x2=r.bottom,u.y2=b-a.left,u.index=s,u.x1New=void 0,u.x2New=void 0}),l(T,S),S.forEach(function(r){var s=r.index;f[s].top=r.x1New,f[s].bottom=r.x2New}),f}(M.width,M.height,T),f=0;f<S.length;f++){var r=T[f].div,s=b._textDivProperties.get(r);if(0!==s.angle){var a=S[f],u=T[f],c=u.m,R=c[0],P=c[1],q=[[0,0],[0,u.size[1]],[u.size[0],0],u.size],w=new Float64Array(64);q.forEach(function(L,n){var m=e.Util.applyTransform(L,c);w[n+0]=R&&(a.left-m[0])/R,w[n+4]=P&&(a.top-m[1])/P,w[n+8]=R&&(a.right-m[0])/R,w[n+12]=P&&(a.bottom-m[1])/P,w[n+16]=P&&(a.left-m[0])/-P,w[n+20]=R&&(a.top-m[1])/R,w[n+24]=P&&(a.right-m[0])/-P,w[n+28]=R&&(a.bottom-m[1])/R,w[n+32]=R&&(a.left-m[0])/-R,w[n+36]=P&&(a.top-m[1])/-P,w[n+40]=R&&(a.right-m[0])/-R,w[n+44]=P&&(a.bottom-m[1])/-P,w[n+48]=P&&(a.left-m[0])/P,w[n+52]=R&&(a.top-m[1])/-R,w[n+56]=P&&(a.right-m[0])/P,w[n+60]=R&&(a.bottom-m[1])/-R});var D=function(L,n,m){for(var d=0,o=0;o<m;o++){var i=L[n++];i>0&&(d=d?Math.min(i,d):i)}return d},H=1+Math.min(Math.abs(R),Math.abs(P));s.paddingLeft=D(w,32,16)/H,s.paddingTop=D(w,48,16)/H,s.paddingRight=D(w,0,16)/H,s.paddingBottom=D(w,16,16)/H,b._textDivProperties.set(r,s)}else s.paddingLeft=T[f].left-S[f].left,s.paddingTop=T[f].top-S[f].top,s.paddingRight=S[f].right-T[f].right,s.paddingBottom=S[f].bottom-T[f].bottom,b._textDivProperties.set(r,s)}}(this),this._bounds=null);const M=[],S=[];for(var f=0,r=this._textDivs.length;f<r;f++){const s=this._textDivs[f],a=this._textDivProperties.get(s);a.isWhitespace||(T?(M.length=0,S.length=0,a.originalTransform&&M.push(a.originalTransform),a.paddingTop>0?(S.push(`${a.paddingTop}px`),M.push(`translateY(${-a.paddingTop}px)`)):S.push(0),S.push(a.paddingRight>0?a.paddingRight/a.scale+"px":0),S.push(a.paddingBottom>0?`${a.paddingBottom}px`:0),a.paddingLeft>0?(S.push(a.paddingLeft/a.scale+"px"),M.push(`translateX(${-a.paddingLeft/a.scale}px)`)):S.push(0),s.style.padding=S.join(" "),M.length&&(s.style.transform=M.join(" "))):(s.style.padding=null,s.style.transform=a.originalTransform))}}},function p(b){var T=new A({textContent:b.textContent,textContentStream:b.textContentStream,container:b.container,viewport:b.viewport,textDivs:b.textDivs,textContentItemsStr:b.textContentItemsStr,enhanceTextSelection:b.enhanceTextSelection});return T._render(b.timeout),T}}();t.renderTextLayer=y},function(J,t,C){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AnnotationLayer=void 0;var e=C(4),y=C(1);class F{static create(n){switch(n.data.annotationType){case y.AnnotationType.LINK:return new j(n);case y.AnnotationType.TEXT:return new x(n);case y.AnnotationType.WIDGET:switch(n.data.fieldType){case"Tx":return new h(n);case"Btn":return n.data.radioButton?new O(n):n.data.checkBox?new v(n):new l(n);case"Ch":return new A(n)}return new _(n);case y.AnnotationType.POPUP:return new p(n);case y.AnnotationType.FREETEXT:return new T(n);case y.AnnotationType.LINE:return new M(n);case y.AnnotationType.SQUARE:return new S(n);case y.AnnotationType.CIRCLE:return new f(n);case y.AnnotationType.POLYLINE:return new r(n);case y.AnnotationType.CARET:return new a(n);case y.AnnotationType.INK:return new u(n);case y.AnnotationType.POLYGON:return new s(n);case y.AnnotationType.HIGHLIGHT:return new c(n);case y.AnnotationType.UNDERLINE:return new R(n);case y.AnnotationType.SQUIGGLY:return new P(n);case y.AnnotationType.STRIKEOUT:return new q(n);case y.AnnotationType.STAMP:return new w(n);case y.AnnotationType.FILEATTACHMENT:return new D(n);default:return new N(n)}}}class N{constructor(n,m=!1,d=!1){this.isRenderable=m,this.data=n.data,this.layer=n.layer,this.page=n.page,this.viewport=n.viewport,this.linkService=n.linkService,this.downloadManager=n.downloadManager,this.imageResourcesPath=n.imageResourcesPath,this.renderInteractiveForms=n.renderInteractiveForms,this.svgFactory=n.svgFactory,m&&(this.container=this._createContainer(d))}_createContainer(n=!1){const m=this.data,d=this.page,o=this.viewport,i=document.createElement("section");let g=m.rect[2]-m.rect[0],k=m.rect[3]-m.rect[1];i.setAttribute("data-annotation-id",m.id);const E=y.Util.normalizeRect([m.rect[0],d.view[3]-m.rect[1]+d.view[1],m.rect[2],d.view[3]-m.rect[3]+d.view[1]]);if(i.style.transform=`matrix(${o.transform.join(",")})`,i.style.transformOrigin=`-${E[0]}px -${E[1]}px`,!n&&m.borderStyle.width>0){i.style.borderWidth=`${m.borderStyle.width}px`,m.borderStyle.style!==y.AnnotationBorderStyleType.UNDERLINE&&(g-=2*m.borderStyle.width,k-=2*m.borderStyle.width);const I=m.borderStyle.horizontalCornerRadius,G=m.borderStyle.verticalCornerRadius;switch((I>0||G>0)&&(i.style.borderRadius=`${I}px / ${G}px`),m.borderStyle.style){case y.AnnotationBorderStyleType.SOLID:i.style.borderStyle="solid";break;case y.AnnotationBorderStyleType.DASHED:i.style.borderStyle="dashed";break;case y.AnnotationBorderStyleType.BEVELED:(0,y.warn)("Unimplemented border style: beveled");break;case y.AnnotationBorderStyleType.INSET:(0,y.warn)("Unimplemented border style: inset");break;case y.AnnotationBorderStyleType.UNDERLINE:i.style.borderBottomStyle="solid"}m.color?i.style.borderColor=y.Util.makeCssRgb(0|m.color[0],0|m.color[1],0|m.color[2]):i.style.borderWidth=0}return i.style.left=`${E[0]}px`,i.style.top=`${E[1]}px`,i.style.width=`${g}px`,i.style.height=`${k}px`,i}_createPopup(n,m,d){m||((m=document.createElement("div")).style.height=n.style.height,m.style.width=n.style.width,n.appendChild(m));const i=new b({container:n,trigger:m,color:d.color,title:d.title,modificationDate:d.modificationDate,contents:d.contents,hideWrapper:!0}).render();i.style.left=n.style.width,n.appendChild(i)}render(){(0,y.unreachable)("Abstract method `AnnotationElement.render` called")}}class j extends N{constructor(n){super(n,!!(n.data.url||n.data.dest||n.data.action))}render(){this.container.className="linkAnnotation";const{data:n,linkService:m}=this,d=document.createElement("a");return n.url?(0,e.addLinkAttributes)(d,{url:n.url,target:n.newWindow?e.LinkTarget.BLANK:m.externalLinkTarget,rel:m.externalLinkRel,enabled:m.externalLinkEnabled}):n.action?this._bindNamedAction(d,n.action):this._bindLink(d,n.dest),this.container.appendChild(d),this.container}_bindLink(n,m){n.href=this.linkService.getDestinationHash(m),n.onclick=()=>(m&&this.linkService.navigateTo(m),!1),m&&(n.className="internalLink")}_bindNamedAction(n,m){n.href=this.linkService.getAnchorUrl(""),n.onclick=()=>(this.linkService.executeNamedAction(m),!1),n.className="internalLink"}}class x extends N{constructor(n){super(n,!!(n.data.hasPopup||n.data.title||n.data.contents))}render(){this.container.className="textAnnotation";const n=document.createElement("img");return n.style.height=this.container.style.height,n.style.width=this.container.style.width,n.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",n.alt="[{{type}} Annotation]",n.dataset.l10nId="text_annotation_type",n.dataset.l10nArgs=JSON.stringify({type:this.data.name}),this.data.hasPopup||this._createPopup(this.container,n,this.data),this.container.appendChild(n),this.container}}class _ extends N{render(){return this.container}}class h extends _{constructor(n){super(n,n.renderInteractiveForms||!n.data.hasAppearance&&!!n.data.fieldValue)}render(){this.container.className="textWidgetAnnotation";let m=null;if(this.renderInteractiveForms){if(this.data.multiLine?(m=document.createElement("textarea"),m.textContent=this.data.fieldValue):(m=document.createElement("input"),m.type="text",m.setAttribute("value",this.data.fieldValue)),m.disabled=this.data.readOnly,null!==this.data.maxLen&&(m.maxLength=this.data.maxLen),this.data.comb){const o=(this.data.rect[2]-this.data.rect[0])/this.data.maxLen;m.classList.add("comb"),m.style.letterSpacing=`calc(${o}px - 1ch)`}}else{m=document.createElement("div"),m.textContent=this.data.fieldValue,m.style.verticalAlign="middle",m.style.display="table-cell";let d=null;this.data.fontRefName&&this.page.commonObjs.has(this.data.fontRefName)&&(d=this.page.commonObjs.get(this.data.fontRefName)),this._setTextStyle(m,d)}return null!==this.data.textAlignment&&(m.style.textAlign=["left","center","right"][this.data.textAlignment]),this.container.appendChild(m),this.container}_setTextStyle(n,m){const d=n.style;if(d.fontSize=`${this.data.fontSize}px`,d.direction=this.data.fontDirection<0?"rtl":"ltr",!m)return;let o="normal";m.black?o="900":m.bold&&(o="bold"),d.fontWeight=o,d.fontStyle=m.italic?"italic":"normal",d.fontFamily=(m.loadedName?`"${m.loadedName}", `:"")+(m.fallbackName||"Helvetica, sans-serif")}}class v extends _{constructor(n){super(n,n.renderInteractiveForms)}render(){this.container.className="buttonWidgetAnnotation checkBox";const n=document.createElement("input");return n.disabled=this.data.readOnly,n.type="checkbox",this.data.fieldValue&&"Off"!==this.data.fieldValue&&n.setAttribute("checked",!0),this.container.appendChild(n),this.container}}class O extends _{constructor(n){super(n,n.renderInteractiveForms)}render(){this.container.className="buttonWidgetAnnotation radioButton";const n=document.createElement("input");return n.disabled=this.data.readOnly,n.type="radio",n.name=this.data.fieldName,this.data.fieldValue===this.data.buttonValue&&n.setAttribute("checked",!0),this.container.appendChild(n),this.container}}class l extends j{render(){const n=super.render();return n.className="buttonWidgetAnnotation pushButton",n}}class A extends _{constructor(n){super(n,n.renderInteractiveForms)}render(){this.container.className="choiceWidgetAnnotation";const n=document.createElement("select");n.disabled=this.data.readOnly,this.data.combo||(n.size=this.data.options.length,this.data.multiSelect&&(n.multiple=!0));for(const m of this.data.options){const d=document.createElement("option");d.textContent=m.displayValue,d.value=m.exportValue,this.data.fieldValue.includes(m.displayValue)&&d.setAttribute("selected",!0),n.appendChild(d)}return this.container.appendChild(n),this.container}}class p extends N{constructor(n){super(n,!(!n.data.title&&!n.data.contents))}render(){if(this.container.className="popupAnnotation",["Line","Square","Circle","PolyLine","Polygon","Ink"].includes(this.data.parentType))return this.container;const d=this.layer.querySelector(`[data-annotation-id="${this.data.parentId}"]`);if(!d)return this.container;const o=new b({container:this.container,trigger:d,color:this.data.color,title:this.data.title,modificationDate:this.data.modificationDate,contents:this.data.contents}),i=parseFloat(d.style.left),g=parseFloat(d.style.width);return this.container.style.transformOrigin=`-${i+g}px -${d.style.top}`,this.container.style.left=`${i+g}px`,this.container.appendChild(o.render()),this.container}}class b{constructor(n){this.container=n.container,this.trigger=n.trigger,this.color=n.color,this.title=n.title,this.modificationDate=n.modificationDate,this.contents=n.contents,this.hideWrapper=n.hideWrapper||!1,this.pinned=!1}render(){const m=document.createElement("div");m.className="popupWrapper",this.hideElement=this.hideWrapper?m:this.container,this.hideElement.setAttribute("hidden",!0);const d=document.createElement("div");d.className="popup";const o=this.color;o&&(d.style.backgroundColor=y.Util.makeCssRgb(0|.7*(255-o[0])+o[0],0|.7*(255-o[1])+o[1],0|.7*(255-o[2])+o[2]));const i=document.createElement("h1");i.textContent=this.title,d.appendChild(i);const g=e.PDFDateString.toDateObject(this.modificationDate);if(g){const E=document.createElement("span");E.textContent="{{date}}, {{time}}",E.dataset.l10nId="annotation_date_string",E.dataset.l10nArgs=JSON.stringify({date:g.toLocaleDateString(),time:g.toLocaleTimeString()}),d.appendChild(E)}const k=this._formatContents(this.contents);return d.appendChild(k),this.trigger.addEventListener("click",this._toggle.bind(this)),this.trigger.addEventListener("mouseover",this._show.bind(this,!1)),this.trigger.addEventListener("mouseout",this._hide.bind(this,!1)),d.addEventListener("click",this._hide.bind(this,!0)),m.appendChild(d),m}_formatContents(n){const m=document.createElement("p"),d=n.split(/(?:\r\n?|\n)/);for(let o=0,i=d.length;o<i;++o)m.appendChild(document.createTextNode(d[o])),o<i-1&&m.appendChild(document.createElement("br"));return m}_toggle(){this.pinned?this._hide(!0):this._show(!0)}_show(n=!1){n&&(this.pinned=!0),this.hideElement.hasAttribute("hidden")&&(this.hideElement.removeAttribute("hidden"),this.container.style.zIndex+=1)}_hide(n=!0){n&&(this.pinned=!1),!this.hideElement.hasAttribute("hidden")&&!this.pinned&&(this.hideElement.setAttribute("hidden",!0),this.container.style.zIndex-=1)}}class T extends N{constructor(n){super(n,!!(n.data.hasPopup||n.data.title||n.data.contents),!0)}render(){return this.container.className="freeTextAnnotation",this.data.hasPopup||this._createPopup(this.container,null,this.data),this.container}}class M extends N{constructor(n){super(n,!!(n.data.hasPopup||n.data.title||n.data.contents),!0)}render(){this.container.className="lineAnnotation";const n=this.data,o=this.svgFactory.create(n.rect[2]-n.rect[0],n.rect[3]-n.rect[1]),i=this.svgFactory.createElement("svg:line");return i.setAttribute("x1",n.rect[2]-n.lineCoordinates[0]),i.setAttribute("y1",n.rect[3]-n.lineCoordinates[1]),i.setAttribute("x2",n.rect[2]-n.lineCoordinates[2]),i.setAttribute("y2",n.rect[3]-n.lineCoordinates[3]),i.setAttribute("stroke-width",n.borderStyle.width||1),i.setAttribute("stroke","transparent"),o.appendChild(i),this.container.append(o),this._createPopup(this.container,i,n),this.container}}class S extends N{constructor(n){super(n,!!(n.data.hasPopup||n.data.title||n.data.contents),!0)}render(){this.container.className="squareAnnotation";const n=this.data,m=n.rect[2]-n.rect[0],d=n.rect[3]-n.rect[1],o=this.svgFactory.create(m,d),i=n.borderStyle.width,g=this.svgFactory.createElement("svg:rect");return g.setAttribute("x",i/2),g.setAttribute("y",i/2),g.setAttribute("width",m-i),g.setAttribute("height",d-i),g.setAttribute("stroke-width",i||1),g.setAttribute("stroke","transparent"),g.setAttribute("fill","none"),o.appendChild(g),this.container.append(o),this._createPopup(this.container,g,n),this.container}}class f extends N{constructor(n){super(n,!!(n.data.hasPopup||n.data.title||n.data.contents),!0)}render(){this.container.className="circleAnnotation";const n=this.data,m=n.rect[2]-n.rect[0],d=n.rect[3]-n.rect[1],o=this.svgFactory.create(m,d),i=n.borderStyle.width,g=this.svgFactory.createElement("svg:ellipse");return g.setAttribute("cx",m/2),g.setAttribute("cy",d/2),g.setAttribute("rx",m/2-i/2),g.setAttribute("ry",d/2-i/2),g.setAttribute("stroke-width",i||1),g.setAttribute("stroke","transparent"),g.setAttribute("fill","none"),o.appendChild(g),this.container.append(o),this._createPopup(this.container,g,n),this.container}}class r extends N{constructor(n){super(n,!!(n.data.hasPopup||n.data.title||n.data.contents),!0),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.className=this.containerClassName;const n=this.data,o=this.svgFactory.create(n.rect[2]-n.rect[0],n.rect[3]-n.rect[1]);let i=[];for(const k of n.vertices)i.push(k.x-n.rect[0]+","+(n.rect[3]-k.y));i=i.join(" ");const g=this.svgFactory.createElement(this.svgElementName);return g.setAttribute("points",i),g.setAttribute("stroke-width",n.borderStyle.width||1),g.setAttribute("stroke","transparent"),g.setAttribute("fill","none"),o.appendChild(g),this.container.append(o),this._createPopup(this.container,g,n),this.container}}class s extends r{constructor(n){super(n),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class a extends N{constructor(n){super(n,!!(n.data.hasPopup||n.data.title||n.data.contents),!0)}render(){return this.container.className="caretAnnotation",this.data.hasPopup||this._createPopup(this.container,null,this.data),this.container}}class u extends N{constructor(n){super(n,!!(n.data.hasPopup||n.data.title||n.data.contents),!0),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline"}render(){this.container.className=this.containerClassName;const n=this.data,o=this.svgFactory.create(n.rect[2]-n.rect[0],n.rect[3]-n.rect[1]);for(const i of n.inkLists){let g=[];for(const E of i)g.push(`${E.x-n.rect[0]},${n.rect[3]-E.y}`);g=g.join(" ");const k=this.svgFactory.createElement(this.svgElementName);k.setAttribute("points",g),k.setAttribute("stroke-width",n.borderStyle.width||1),k.setAttribute("stroke","transparent"),k.setAttribute("fill","none"),this._createPopup(this.container,k,n),o.appendChild(k)}return this.container.append(o),this.container}}class c extends N{constructor(n){super(n,!!(n.data.hasPopup||n.data.title||n.data.contents),!0)}render(){return this.container.className="highlightAnnotation",this.data.hasPopup||this._createPopup(this.container,null,this.data),this.container}}class R extends N{constructor(n){super(n,!!(n.data.hasPopup||n.data.title||n.data.contents),!0)}render(){return this.container.className="underlineAnnotation",this.data.hasPopup||this._createPopup(this.container,null,this.data),this.container}}class P extends N{constructor(n){super(n,!!(n.data.hasPopup||n.data.title||n.data.contents),!0)}render(){return this.container.className="squigglyAnnotation",this.data.hasPopup||this._createPopup(this.container,null,this.data),this.container}}class q extends N{constructor(n){super(n,!!(n.data.hasPopup||n.data.title||n.data.contents),!0)}render(){return this.container.className="strikeoutAnnotation",this.data.hasPopup||this._createPopup(this.container,null,this.data),this.container}}class w extends N{constructor(n){super(n,!!(n.data.hasPopup||n.data.title||n.data.contents),!0)}render(){return this.container.className="stampAnnotation",this.data.hasPopup||this._createPopup(this.container,null,this.data),this.container}}class D extends N{constructor(n){super(n,!0);const{filename:m,content:d}=this.data.file;this.filename=(0,e.getFilenameFromUrl)(m),this.content=d,this.linkService.eventBus&&this.linkService.eventBus.dispatch("fileattachmentannotation",{source:this,id:(0,y.stringToPDFString)(m),filename:m,content:d})}render(){this.container.className="fileAttachmentAnnotation";const n=document.createElement("div");return n.style.height=this.container.style.height,n.style.width=this.container.style.width,n.addEventListener("dblclick",this._download.bind(this)),!this.data.hasPopup&&(this.data.title||this.data.contents)&&this._createPopup(this.container,n,this.data),this.container.appendChild(n),this.container}_download(){this.downloadManager?this.downloadManager.downloadData(this.content,this.filename,""):(0,y.warn)("Download cannot be started due to unavailable download manager")}}t.AnnotationLayer=class H{static render(n){const m=[],d=[];for(const o of n.annotations)if(o){if(o.annotationType===y.AnnotationType.POPUP){d.push(o);continue}m.push(o)}d.length&&m.push(...d);for(const o of m){const i=F.create({data:o,layer:n.div,page:n.page,viewport:n.viewport,linkService:n.linkService,downloadManager:n.downloadManager,imageResourcesPath:n.imageResourcesPath||"",renderInteractiveForms:n.renderInteractiveForms||!1,svgFactory:new e.DOMSVGFactory});i.isRenderable&&n.div.appendChild(i.render())}}static update(n){for(const m of n.annotations){const d=n.div.querySelector(`[data-annotation-id="${m.id}"]`);d&&(d.style.transform=`matrix(${n.viewport.transform.join(",")})`)}n.div.removeAttribute("hidden")}}},function(J,t,C){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SVGGraphics=void 0;var e=C(1),y=C(4),F=C(7);let N=function(){throw new Error("Not implemented: SVGGraphics")};t.SVGGraphics=N;{let A=function(f){let r=[];const s=[];for(const a of f)"save"!==a.fn?"restore"===a.fn?r=s.pop():r.push(a):(r.push({fnId:92,fn:"group",items:[]}),s.push(r),r=r[r.length-1].items);return r},p=function(f){if(Number.isInteger(f))return f.toString();const r=f.toFixed(10);let s=r.length-1;if("0"!==r[s])return r;do{s--}while("0"===r[s]);return r.substring(0,"."===r[s]?s:s+1)},b=function(f){if(0===f[4]&&0===f[5]){if(0===f[1]&&0===f[2])return 1===f[0]&&1===f[3]?"":`scale(${p(f[0])} ${p(f[3])})`;if(f[0]===f[3]&&f[1]===-f[2]){const r=180*Math.acos(f[0])/Math.PI;return`rotate(${p(r)})`}}else if(1===f[0]&&0===f[1]&&0===f[2]&&1===f[3])return`translate(${p(f[4])} ${p(f[5])})`;return`matrix(${p(f[0])} ${p(f[1])} ${p(f[2])} ${p(f[3])} ${p(f[4])} ${p(f[5])})`};const j={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},x="http://www.w3.org/XML/1998/namespace",_="http://www.w3.org/1999/xlink",h=["butt","round","square"],v=["miter","round","bevel"],O=function(){const f=new Uint8Array([137,80,78,71,13,10,26,10]),s=new Int32Array(256);for(let w=0;w<256;w++){let D=w;for(let H=0;H<8;H++)D=1&D?3988292384^D>>1&2147483647:D>>1&2147483647;s[w]=D}function u(w,D,H,L){let n=L;const m=D.length;H[n]=m>>24&255,H[n+1]=m>>16&255,H[n+2]=m>>8&255,H[n+3]=255&m,n+=4,H[n]=255&w.charCodeAt(0),H[n+1]=255&w.charCodeAt(1),H[n+2]=255&w.charCodeAt(2),H[n+3]=255&w.charCodeAt(3),n+=4,H.set(D,n),n+=D.length;const d=function a(w,D,H){let L=-1;for(let n=D;n<H;n++)L=L>>>8^s[255&(L^w[n])];return-1^L}(H,L+4,n);H[n]=d>>24&255,H[n+1]=d>>16&255,H[n+2]=d>>8&255,H[n+3]=255&d}function P(w){let D=w.length;const H=65535,L=Math.ceil(D/H),n=new Uint8Array(2+D+5*L+4);let m=0;n[m++]=120,n[m++]=156;let d=0;for(;D>H;)n[m++]=0,n[m++]=255,n[m++]=255,n[m++]=0,n[m++]=0,n.set(w.subarray(d,d+H),m),m+=H,d+=H,D-=H;n[m++]=1,n[m++]=255&D,n[m++]=D>>8&255,n[m++]=255&~D,n[m++]=(65535&~D)>>8&255,n.set(w.subarray(d),m),m+=w.length-d;const o=function c(w,D,H){let L=1,n=0;for(let m=D;m<H;++m)L=(L+(255&w[m]))%65521,n=(n+L)%65521;return n<<16|L}(w,0,w.length);return n[m++]=o>>24&255,n[m++]=o>>16&255,n[m++]=o>>8&255,n[m++]=255&o,n}return function(D,H,L){return function q(w,D,H,L){const n=w.width,m=w.height;let d,o,i;const g=w.data;switch(D){case e.ImageKind.GRAYSCALE_1BPP:o=0,d=1,i=n+7>>3;break;case e.ImageKind.RGB_24BPP:o=2,d=8,i=3*n;break;case e.ImageKind.RGBA_32BPP:o=6,d=8,i=4*n;break;default:throw new Error("invalid format")}const k=new Uint8Array((1+i)*m);let E=0,I=0;for(let V=0;V<m;++V)k[E++]=0,k.set(g.subarray(I,I+i),E),I+=i,E+=i;if(D===e.ImageKind.GRAYSCALE_1BPP&&L){E=0;for(let V=0;V<m;V++){E++;for(let K=0;K<i;K++)k[E++]^=255}}const G=new Uint8Array([n>>24&255,n>>16&255,n>>8&255,255&n,m>>24&255,m>>16&255,m>>8&255,255&m,d,o,0,0,0]),B=function R(w){if(!F.isNodeJS)return P(w);try{let D;D=parseInt(process.versions.node)>=8?w:Buffer.from(w);const H=require("zlib").deflateSync(D,{level:9});return H instanceof Uint8Array?H:new Uint8Array(H)}catch(D){(0,e.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+D)}return P(w)}(k),Y=new Uint8Array(f.length+36+G.length+B.length);let $=0;return Y.set(f,$),$+=f.length,u("IHDR",G,Y,$),$+=12+G.length,u("IDATA",B,Y,$),$+=12+B.length,u("IEND",new Uint8Array(0),Y,$),(0,e.createObjectURL)(Y,"image/png",H)}(D,void 0===D.kind?e.ImageKind.GRAYSCALE_1BPP:D.kind,H,L)}}();class l{constructor(){this.fontSizeScale=1,this.fontWeight=j.fontWeight,this.fontSize=0,this.textMatrix=e.IDENTITY_MATRIX,this.fontMatrix=e.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=e.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=j.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}clone(){return Object.create(this)}setCurrentPoint(r,s){this.x=r,this.y=s}}let T=0,M=0,S=0;t.SVGGraphics=N=class{constructor(r,s,a){this.svgFactory=new y.DOMSVGFactory,this.current=new l,this.transformMatrix=e.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=r,this.objs=s,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!a,this._operatorIdMapping=[];for(const u in e.OPS)this._operatorIdMapping[e.OPS[u]]=u}save(){this.transformStack.push(this.transformMatrix);const r=this.current;this.extraStack.push(r),this.current=r.clone()}restore(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}group(r){this.save(),this.executeOpTree(r),this.restore()}loadDependencies(r){const s=r.fnArray,a=r.argsArray;for(let u=0,c=s.length;u<c;u++)if(s[u]===e.OPS.dependency)for(const R of a[u]){const P=R.startsWith("g_")?this.commonObjs:this.objs,q=new Promise(w=>{P.get(R,w)});this.current.dependencies.push(q)}return Promise.all(this.current.dependencies)}transform(r,s,a,u,c,R){this.transformMatrix=e.Util.transform(this.transformMatrix,[r,s,a,u,c,R]),this.tgrp=null}getSVG(r,s){this.viewport=s;const a=this._initialize(s);return this.loadDependencies(r).then(()=>(this.transformMatrix=e.IDENTITY_MATRIX,this.executeOpTree(this.convertOpList(r)),a))}convertOpList(r){const s=this._operatorIdMapping,a=r.argsArray,u=r.fnArray,c=[];for(let R=0,P=u.length;R<P;R++){const q=u[R];c.push({fnId:q,fn:s[q],args:a[R]})}return A(c)}executeOpTree(r){for(const s of r){const a=s.fn,c=s.args;switch(0|s.fnId){case e.OPS.beginText:this.beginText();break;case e.OPS.dependency:break;case e.OPS.setLeading:this.setLeading(c);break;case e.OPS.setLeadingMoveText:this.setLeadingMoveText(c[0],c[1]);break;case e.OPS.setFont:this.setFont(c);break;case e.OPS.showText:case e.OPS.showSpacedText:this.showText(c[0]);break;case e.OPS.endText:this.endText();break;case e.OPS.moveText:this.moveText(c[0],c[1]);break;case e.OPS.setCharSpacing:this.setCharSpacing(c[0]);break;case e.OPS.setWordSpacing:this.setWordSpacing(c[0]);break;case e.OPS.setHScale:this.setHScale(c[0]);break;case e.OPS.setTextMatrix:this.setTextMatrix(c[0],c[1],c[2],c[3],c[4],c[5]);break;case e.OPS.setTextRise:this.setTextRise(c[0]);break;case e.OPS.setTextRenderingMode:this.setTextRenderingMode(c[0]);break;case e.OPS.setLineWidth:this.setLineWidth(c[0]);break;case e.OPS.setLineJoin:this.setLineJoin(c[0]);break;case e.OPS.setLineCap:this.setLineCap(c[0]);break;case e.OPS.setMiterLimit:this.setMiterLimit(c[0]);break;case e.OPS.setFillRGBColor:this.setFillRGBColor(c[0],c[1],c[2]);break;case e.OPS.setStrokeRGBColor:this.setStrokeRGBColor(c[0],c[1],c[2]);break;case e.OPS.setStrokeColorN:this.setStrokeColorN(c);break;case e.OPS.setFillColorN:this.setFillColorN(c);break;case e.OPS.shadingFill:this.shadingFill(c[0]);break;case e.OPS.setDash:this.setDash(c[0],c[1]);break;case e.OPS.setRenderingIntent:this.setRenderingIntent(c[0]);break;case e.OPS.setFlatness:this.setFlatness(c[0]);break;case e.OPS.setGState:this.setGState(c[0]);break;case e.OPS.fill:this.fill();break;case e.OPS.eoFill:this.eoFill();break;case e.OPS.stroke:this.stroke();break;case e.OPS.fillStroke:this.fillStroke();break;case e.OPS.eoFillStroke:this.eoFillStroke();break;case e.OPS.clip:this.clip("nonzero");break;case e.OPS.eoClip:this.clip("evenodd");break;case e.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case e.OPS.paintJpegXObject:this.paintJpegXObject(c[0],c[1],c[2]);break;case e.OPS.paintImageXObject:this.paintImageXObject(c[0]);break;case e.OPS.paintInlineImageXObject:this.paintInlineImageXObject(c[0]);break;case e.OPS.paintImageMaskXObject:this.paintImageMaskXObject(c[0]);break;case e.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(c[0],c[1]);break;case e.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case e.OPS.closePath:this.closePath();break;case e.OPS.closeStroke:this.closeStroke();break;case e.OPS.closeFillStroke:this.closeFillStroke();break;case e.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case e.OPS.nextLine:this.nextLine();break;case e.OPS.transform:this.transform(c[0],c[1],c[2],c[3],c[4],c[5]);break;case e.OPS.constructPath:this.constructPath(c[0],c[1]);break;case e.OPS.endPath:this.endPath();break;case 92:this.group(s.items);break;default:(0,e.warn)(`Unimplemented operator ${a}`)}}}setWordSpacing(r){this.current.wordSpacing=r}setCharSpacing(r){this.current.charSpacing=r}nextLine(){this.moveText(0,this.current.leading)}setTextMatrix(r,s,a,u,c,R){const P=this.current;P.textMatrix=P.lineMatrix=[r,s,a,u,c,R],P.textMatrixScale=Math.sqrt(r*r+s*s),P.x=P.lineX=0,P.y=P.lineY=0,P.xcoords=[],P.tspan=this.svgFactory.createElement("svg:tspan"),P.tspan.setAttributeNS(null,"font-family",P.fontFamily),P.tspan.setAttributeNS(null,"font-size",`${p(P.fontSize)}px`),P.tspan.setAttributeNS(null,"y",p(-P.y)),P.txtElement=this.svgFactory.createElement("svg:text"),P.txtElement.appendChild(P.tspan)}beginText(){const r=this.current;r.x=r.lineX=0,r.y=r.lineY=0,r.textMatrix=e.IDENTITY_MATRIX,r.lineMatrix=e.IDENTITY_MATRIX,r.textMatrixScale=1,r.tspan=this.svgFactory.createElement("svg:tspan"),r.txtElement=this.svgFactory.createElement("svg:text"),r.txtgrp=this.svgFactory.createElement("svg:g"),r.xcoords=[]}moveText(r,s){const a=this.current;a.x=a.lineX+=r,a.y=a.lineY+=s,a.xcoords=[],a.tspan=this.svgFactory.createElement("svg:tspan"),a.tspan.setAttributeNS(null,"font-family",a.fontFamily),a.tspan.setAttributeNS(null,"font-size",`${p(a.fontSize)}px`),a.tspan.setAttributeNS(null,"y",p(-a.y))}showText(r){const s=this.current,a=s.font,u=s.fontSize;if(0===u)return;const c=s.charSpacing,R=s.wordSpacing,P=s.fontDirection,q=s.textHScale*P,w=a.vertical,D=u*s.fontMatrix[0];let H=0;for(const m of r){if(null===m){H+=P*R;continue}if((0,e.isNum)(m)){H+=-m*u*.001;continue}const o=m.fontChar,g=m.width*D+((m.isSpace?R:0)+c)*P;m.isInFont||a.missingFile?(s.xcoords.push(s.x+H),s.tspan.textContent+=o,H+=g):H+=g}w?s.y-=H*q:s.x+=H*q,s.tspan.setAttributeNS(null,"x",s.xcoords.map(p).join(" ")),s.tspan.setAttributeNS(null,"y",p(-s.y)),s.tspan.setAttributeNS(null,"font-family",s.fontFamily),s.tspan.setAttributeNS(null,"font-size",`${p(s.fontSize)}px`),s.fontStyle!==j.fontStyle&&s.tspan.setAttributeNS(null,"font-style",s.fontStyle),s.fontWeight!==j.fontWeight&&s.tspan.setAttributeNS(null,"font-weight",s.fontWeight);const L=s.textRenderingMode&e.TextRenderingMode.FILL_STROKE_MASK;L===e.TextRenderingMode.FILL||L===e.TextRenderingMode.FILL_STROKE?(s.fillColor!==j.fillColor&&s.tspan.setAttributeNS(null,"fill",s.fillColor),s.fillAlpha<1&&s.tspan.setAttributeNS(null,"fill-opacity",s.fillAlpha)):s.tspan.setAttributeNS(null,"fill",s.textRenderingMode===e.TextRenderingMode.ADD_TO_PATH?"transparent":"none"),(L===e.TextRenderingMode.STROKE||L===e.TextRenderingMode.FILL_STROKE)&&this._setStrokeAttributes(s.tspan,1/(s.textMatrixScale||1));let n=s.textMatrix;0!==s.textRise&&(n=n.slice(),n[5]+=s.textRise),s.txtElement.setAttributeNS(null,"transform",`${b(n)} scale(${p(q)}, -1)`),s.txtElement.setAttributeNS(x,"xml:space","preserve"),s.txtElement.appendChild(s.tspan),s.txtgrp.appendChild(s.txtElement),this._ensureTransformGroup().appendChild(s.txtElement)}setLeadingMoveText(r,s){this.setLeading(-s),this.moveText(r,s)}addFontStyle(r){this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.appendChild(this.cssStyle));const s=(0,e.createObjectURL)(r.data,r.mimetype,this.forceDataSchema);this.cssStyle.textContent+=`@font-face { font-family: "${r.loadedName}"; src: url(${s}); }\n`}setFont(r){const s=this.current,a=this.commonObjs.get(r[0]);let u=r[1];s.font=a,this.embedFonts&&a.data&&!this.embeddedFonts[a.loadedName]&&(this.addFontStyle(a),this.embeddedFonts[a.loadedName]=a),s.fontMatrix=a.fontMatrix?a.fontMatrix:e.FONT_IDENTITY_MATRIX;let c="normal";a.black?c="900":a.bold&&(c="bold");const R=a.italic?"italic":"normal";u<0?(u=-u,s.fontDirection=-1):s.fontDirection=1,s.fontSize=u,s.fontFamily=a.loadedName,s.fontWeight=c,s.fontStyle=R,s.tspan=this.svgFactory.createElement("svg:tspan"),s.tspan.setAttributeNS(null,"y",p(-s.y)),s.xcoords=[]}endText(){const r=this.current;r.textRenderingMode&e.TextRenderingMode.ADD_TO_PATH_FLAG&&r.txtElement&&r.txtElement.hasChildNodes()&&(r.element=r.txtElement,this.clip("nonzero"),this.endPath())}setLineWidth(r){r>0&&(this.current.lineWidth=r)}setLineCap(r){this.current.lineCap=h[r]}setLineJoin(r){this.current.lineJoin=v[r]}setMiterLimit(r){this.current.miterLimit=r}setStrokeAlpha(r){this.current.strokeAlpha=r}setStrokeRGBColor(r,s,a){this.current.strokeColor=e.Util.makeCssRgb(r,s,a)}setFillAlpha(r){this.current.fillAlpha=r}setFillRGBColor(r,s,a){this.current.fillColor=e.Util.makeCssRgb(r,s,a),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[]}setStrokeColorN(r){this.current.strokeColor=this._makeColorN_Pattern(r)}setFillColorN(r){this.current.fillColor=this._makeColorN_Pattern(r)}shadingFill(r){const s=this.viewport.width,a=this.viewport.height,u=e.Util.inverseTransform(this.transformMatrix),c=e.Util.applyTransform([0,0],u),R=e.Util.applyTransform([0,a],u),P=e.Util.applyTransform([s,0],u),q=e.Util.applyTransform([s,a],u),w=Math.min(c[0],R[0],P[0],q[0]),D=Math.min(c[1],R[1],P[1],q[1]),H=Math.max(c[0],R[0],P[0],q[0]),L=Math.max(c[1],R[1],P[1],q[1]),n=this.svgFactory.createElement("svg:rect");n.setAttributeNS(null,"x",w),n.setAttributeNS(null,"y",D),n.setAttributeNS(null,"width",H-w),n.setAttributeNS(null,"height",L-D),n.setAttributeNS(null,"fill",this._makeShadingPattern(r)),this._ensureTransformGroup().appendChild(n)}_makeColorN_Pattern(r){return"TilingPattern"===r[0]?this._makeTilingPattern(r):this._makeShadingPattern(r)}_makeTilingPattern(r){const s=r[1],a=r[2],u=r[3]||e.IDENTITY_MATRIX,[c,R,P,q]=r[4],w=r[5],D=r[6],H=r[7],L="shading"+S++,[n,m]=e.Util.applyTransform([c,R],u),[d,o]=e.Util.applyTransform([P,q],u),[i,g]=e.Util.singularValueDecompose2dScale(u),k=w*i,E=D*g,I=this.svgFactory.createElement("svg:pattern");I.setAttributeNS(null,"id",L),I.setAttributeNS(null,"patternUnits","userSpaceOnUse"),I.setAttributeNS(null,"width",k),I.setAttributeNS(null,"height",E),I.setAttributeNS(null,"x",`${n}`),I.setAttributeNS(null,"y",`${m}`);const G=this.svg,B=this.transformMatrix,X=this.current.fillColor,Y=this.current.strokeColor,$=this.svgFactory.create(d-n,o-m);if(this.svg=$,this.transformMatrix=u,2===H){const V=e.Util.makeCssRgb(...s);this.current.fillColor=V,this.current.strokeColor=V}return this.executeOpTree(this.convertOpList(a)),this.svg=G,this.transformMatrix=B,this.current.fillColor=X,this.current.strokeColor=Y,I.appendChild($.childNodes[0]),this.defs.appendChild(I),`url(#${L})`}_makeShadingPattern(r){switch(r[0]){case"RadialAxial":const s="shading"+S++,a=r[3];let u;switch(r[1]){case"axial":const c=r[4],R=r[5];u=this.svgFactory.createElement("svg:linearGradient"),u.setAttributeNS(null,"id",s),u.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),u.setAttributeNS(null,"x1",c[0]),u.setAttributeNS(null,"y1",c[1]),u.setAttributeNS(null,"x2",R[0]),u.setAttributeNS(null,"y2",R[1]);break;case"radial":const P=r[4],q=r[5],w=r[6],D=r[7];u=this.svgFactory.createElement("svg:radialGradient"),u.setAttributeNS(null,"id",s),u.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),u.setAttributeNS(null,"cx",q[0]),u.setAttributeNS(null,"cy",q[1]),u.setAttributeNS(null,"r",D),u.setAttributeNS(null,"fx",P[0]),u.setAttributeNS(null,"fy",P[1]),u.setAttributeNS(null,"fr",w);break;default:throw new Error(`Unknown RadialAxial type: ${r[1]}`)}for(const c of a){const R=this.svgFactory.createElement("svg:stop");R.setAttributeNS(null,"offset",c[0]),R.setAttributeNS(null,"stop-color",c[1]),u.appendChild(R)}return this.defs.appendChild(u),`url(#${s})`;case"Mesh":return(0,e.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error(`Unknown IR type: ${r[0]}`)}}setDash(r,s){this.current.dashArray=r,this.current.dashPhase=s}constructPath(r,s){const a=this.current;let u=a.x,c=a.y,R=[],P=0;for(const q of r)switch(0|q){case e.OPS.rectangle:u=s[P++],c=s[P++];const H=u+s[P++],L=c+s[P++];R.push("M",p(u),p(c),"L",p(H),p(c),"L",p(H),p(L),"L",p(u),p(L),"Z");break;case e.OPS.moveTo:u=s[P++],c=s[P++],R.push("M",p(u),p(c));break;case e.OPS.lineTo:u=s[P++],c=s[P++],R.push("L",p(u),p(c));break;case e.OPS.curveTo:u=s[P+4],c=s[P+5],R.push("C",p(s[P]),p(s[P+1]),p(s[P+2]),p(s[P+3]),p(u),p(c)),P+=6;break;case e.OPS.curveTo2:R.push("C",p(u),p(c),p(s[P]),p(s[P+1]),p(s[P+2]),p(s[P+3])),u=s[P+2],c=s[P+3],P+=4;break;case e.OPS.curveTo3:u=s[P+2],c=s[P+3],R.push("C",p(s[P]),p(s[P+1]),p(u),p(c),p(u),p(c)),P+=4;break;case e.OPS.closePath:R.push("Z")}R=R.join(" "),a.path&&r.length>0&&r[0]!==e.OPS.rectangle&&r[0]!==e.OPS.moveTo?R=a.path.getAttributeNS(null,"d")+R:(a.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().appendChild(a.path)),a.path.setAttributeNS(null,"d",R),a.path.setAttributeNS(null,"fill","none"),a.element=a.path,a.setCurrentPoint(u,c)}endPath(){const r=this.current;if(r.path=null,!this.pendingClip)return;if(!r.element)return void(this.pendingClip=null);const s="clippath"+T++,a=this.svgFactory.createElement("svg:clipPath");a.setAttributeNS(null,"id",s),a.setAttributeNS(null,"transform",b(this.transformMatrix));const u=r.element.cloneNode(!0);u.setAttributeNS(null,"clip-rule","evenodd"===this.pendingClip?"evenodd":"nonzero"),this.pendingClip=null,a.appendChild(u),this.defs.appendChild(a),r.activeClipUrl&&(r.clipGroup=null,this.extraStack.forEach(function(c){c.clipGroup=null}),a.setAttributeNS(null,"clip-path",r.activeClipUrl)),r.activeClipUrl=`url(#${s})`,this.tgrp=null}clip(r){this.pendingClip=r}closePath(){const r=this.current;if(r.path){const s=`${r.path.getAttributeNS(null,"d")}Z`;r.path.setAttributeNS(null,"d",s)}}setLeading(r){this.current.leading=-r}setTextRise(r){this.current.textRise=r}setTextRenderingMode(r){this.current.textRenderingMode=r}setHScale(r){this.current.textHScale=r/100}setRenderingIntent(r){}setFlatness(r){}setGState(r){for(const[s,a]of r)switch(s){case"LW":this.setLineWidth(a);break;case"LC":this.setLineCap(a);break;case"LJ":this.setLineJoin(a);break;case"ML":this.setMiterLimit(a);break;case"D":this.setDash(a[0],a[1]);break;case"RI":this.setRenderingIntent(a);break;case"FL":this.setFlatness(a);break;case"Font":this.setFont(a);break;case"CA":this.setStrokeAlpha(a);break;case"ca":this.setFillAlpha(a);break;default:(0,e.warn)(`Unimplemented graphic state operator ${s}`)}}fill(){const r=this.current;r.element&&(r.element.setAttributeNS(null,"fill",r.fillColor),r.element.setAttributeNS(null,"fill-opacity",r.fillAlpha),this.endPath())}stroke(){const r=this.current;r.element&&(this._setStrokeAttributes(r.element),r.element.setAttributeNS(null,"fill","none"),this.endPath())}_setStrokeAttributes(r,s=1){const a=this.current;let u=a.dashArray;1!==s&&u.length>0&&(u=u.map(function(c){return s*c})),r.setAttributeNS(null,"stroke",a.strokeColor),r.setAttributeNS(null,"stroke-opacity",a.strokeAlpha),r.setAttributeNS(null,"stroke-miterlimit",p(a.miterLimit)),r.setAttributeNS(null,"stroke-linecap",a.lineCap),r.setAttributeNS(null,"stroke-linejoin",a.lineJoin),r.setAttributeNS(null,"stroke-width",p(s*a.lineWidth)+"px"),r.setAttributeNS(null,"stroke-dasharray",u.map(p).join(" ")),r.setAttributeNS(null,"stroke-dashoffset",p(s*a.dashPhase)+"px")}eoFill(){this.current.element&&this.current.element.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}fillStroke(){this.stroke(),this.fill()}eoFillStroke(){this.current.element&&this.current.element.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}closeStroke(){this.closePath(),this.stroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.closePath(),this.eoFillStroke()}paintSolidColorImageMask(){const r=this.svgFactory.createElement("svg:rect");r.setAttributeNS(null,"x","0"),r.setAttributeNS(null,"y","0"),r.setAttributeNS(null,"width","1px"),r.setAttributeNS(null,"height","1px"),r.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().appendChild(r)}paintJpegXObject(r,s,a){const u=this.objs.get(r),c=this.svgFactory.createElement("svg:image");c.setAttributeNS(_,"xlink:href",u.src),c.setAttributeNS(null,"width",p(s)),c.setAttributeNS(null,"height",p(a)),c.setAttributeNS(null,"x","0"),c.setAttributeNS(null,"y",p(-a)),c.setAttributeNS(null,"transform",`scale(${p(1/s)} ${p(-1/a)})`),this._ensureTransformGroup().appendChild(c)}paintImageXObject(r){const s=this.objs.get(r);s?this.paintInlineImageXObject(s):(0,e.warn)(`Dependent image with object ID ${r} is not ready yet`)}paintInlineImageXObject(r,s){const a=r.width,u=r.height,c=O(r,this.forceDataSchema,!!s),R=this.svgFactory.createElement("svg:rect");R.setAttributeNS(null,"x","0"),R.setAttributeNS(null,"y","0"),R.setAttributeNS(null,"width",p(a)),R.setAttributeNS(null,"height",p(u)),this.current.element=R,this.clip("nonzero");const P=this.svgFactory.createElement("svg:image");P.setAttributeNS(_,"xlink:href",c),P.setAttributeNS(null,"x","0"),P.setAttributeNS(null,"y",p(-u)),P.setAttributeNS(null,"width",p(a)+"px"),P.setAttributeNS(null,"height",p(u)+"px"),P.setAttributeNS(null,"transform",`scale(${p(1/a)} ${p(-1/u)})`),s?s.appendChild(P):this._ensureTransformGroup().appendChild(P)}paintImageMaskXObject(r){const s=this.current,a=r.width,u=r.height,c=s.fillColor;s.maskId="mask"+M++;const R=this.svgFactory.createElement("svg:mask");R.setAttributeNS(null,"id",s.maskId);const P=this.svgFactory.createElement("svg:rect");P.setAttributeNS(null,"x","0"),P.setAttributeNS(null,"y","0"),P.setAttributeNS(null,"width",p(a)),P.setAttributeNS(null,"height",p(u)),P.setAttributeNS(null,"fill",c),P.setAttributeNS(null,"mask",`url(#${s.maskId})`),this.defs.appendChild(R),this._ensureTransformGroup().appendChild(P),this.paintInlineImageXObject(r,R)}paintFormXObjectBegin(r,s){if(Array.isArray(r)&&6===r.length&&this.transform(r[0],r[1],r[2],r[3],r[4],r[5]),s){const a=s[2]-s[0],u=s[3]-s[1],c=this.svgFactory.createElement("svg:rect");c.setAttributeNS(null,"x",s[0]),c.setAttributeNS(null,"y",s[1]),c.setAttributeNS(null,"width",p(a)),c.setAttributeNS(null,"height",p(u)),this.current.element=c,this.clip("nonzero"),this.endPath()}}paintFormXObjectEnd(){}_initialize(r){const s=this.svgFactory.create(r.width,r.height),a=this.svgFactory.createElement("svg:defs");s.appendChild(a),this.defs=a;const u=this.svgFactory.createElement("svg:g");return u.setAttributeNS(null,"transform",b(r.transform)),s.appendChild(u),this.svg=u,s}_ensureClipGroup(){if(!this.current.clipGroup){const r=this.svgFactory.createElement("svg:g");r.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.appendChild(r),this.current.clipGroup=r}return this.current.clipGroup}_ensureTransformGroup(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",b(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().appendChild(this.tgrp):this.svg.appendChild(this.tgrp)),this.tgrp}}}},function(J,t,C){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PDFNodeStream=void 0;var e=C(1),y=C(20);const F=require("fs"),N=require("http"),j=require("https"),x=require("url"),_=/^file:\/\/\/[a-zA-Z]:\//;t.PDFNodeStream=class v{constructor(f){this.source=f,this.url=function h(S){const f=x.parse(S);return"file:"===f.protocol||f.host?f:/^[a-z]:[/\\]/i.test(S)?x.parse(`file:///${S}`):(f.host||(f.protocol="file:"),f)}(f.url),this.isHttp="http:"===this.url.protocol||"https:"===this.url.protocol,this.isFsUrl="file:"===this.url.protocol,this.httpHeaders=this.isHttp&&f.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?this._fullRequestReader._loaded:0}getFullReader(){return(0,e.assert)(!this._fullRequestReader),this._fullRequestReader=this.isFsUrl?new T(this):new p(this),this._fullRequestReader}getRangeReader(f,r){if(r<=this._progressiveDataLength)return null;const s=this.isFsUrl?new M(this,f,r):new b(this,f,r);return this._rangeRequestReaders.push(s),s}cancelAllRequests(f){this._fullRequestReader&&this._fullRequestReader.cancel(f),this._rangeRequestReaders.slice(0).forEach(function(s){s.cancel(f)})}};class O{constructor(f){this._url=f.url,this._done=!1,this._storedError=null,this.onProgress=null;const r=f.source;this._contentLength=r.length,this._loaded=0,this._filename=null,this._disableRange=r.disableRange||!1,this._rangeChunkSize=r.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!r.disableStream,this._isRangeSupported=!r.disableRange,this._readableStream=null,this._readCapability=(0,e.createPromiseCapability)(),this._headersCapability=(0,e.createPromiseCapability)()}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const f=this._readableStream.read();return null===f?(this._readCapability=(0,e.createPromiseCapability)(),this.read()):(this._loaded+=f.length,this.onProgress&&this.onProgress({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(f).buffer,done:!1})}cancel(f){this._readableStream?this._readableStream.destroy(f):this._error(f)}_error(f){this._storedError=f,this._readCapability.resolve()}_setReadableStream(f){this._readableStream=f,f.on("readable",()=>{this._readCapability.resolve()}),f.on("end",()=>{f.destroy(),this._done=!0,this._readCapability.resolve()}),f.on("error",r=>{this._error(r)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new e.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class l{constructor(f){this._url=f.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=(0,e.createPromiseCapability)(),this._isStreamingSupported=!f.source.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const f=this._readableStream.read();return null===f?(this._readCapability=(0,e.createPromiseCapability)(),this.read()):(this._loaded+=f.length,this.onProgress&&this.onProgress({loaded:this._loaded}),{value:new Uint8Array(f).buffer,done:!1})}cancel(f){this._readableStream?this._readableStream.destroy(f):this._error(f)}_error(f){this._storedError=f,this._readCapability.resolve()}_setReadableStream(f){this._readableStream=f,f.on("readable",()=>{this._readCapability.resolve()}),f.on("end",()=>{f.destroy(),this._done=!0,this._readCapability.resolve()}),f.on("error",r=>{this._error(r)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function A(S,f){return{protocol:S.protocol,auth:S.auth,host:S.hostname,port:S.port,path:S.path,method:"GET",headers:f}}class p extends O{constructor(f){super(f);const r=s=>{if(404===s.statusCode){const R=new e.MissingPDFException(`Missing PDF "${this._url}".`);return this._storedError=R,void this._headersCapability.reject(R)}this._headersCapability.resolve(),this._setReadableStream(s);const a=R=>this._readableStream.headers[R.toLowerCase()],{allowRangeRequests:u,suggestedLength:c}=(0,y.validateRangeRequestCapabilities)({getResponseHeader:a,isHttp:f.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=u,this._contentLength=c||this._contentLength,this._filename=(0,y.extractFilenameFromHeader)(a)};this._request=null,this._request="http:"===this._url.protocol?N.request(A(this._url,f.httpHeaders),r):j.request(A(this._url,f.httpHeaders),r),this._request.on("error",s=>{this._storedError=s,this._headersCapability.reject(s)}),this._request.end()}}class b extends l{constructor(f,r,s){super(f),this._httpHeaders={};for(const u in f.httpHeaders){const c=f.httpHeaders[u];typeof c>"u"||(this._httpHeaders[u]=c)}this._httpHeaders.Range=`bytes=${r}-${s-1}`;const a=u=>{if(404!==u.statusCode)this._setReadableStream(u);else{const c=new e.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=c}};this._request=null,this._request="http:"===this._url.protocol?N.request(A(this._url,this._httpHeaders),a):j.request(A(this._url,this._httpHeaders),a),this._request.on("error",u=>{this._storedError=u}),this._request.end()}}class T extends O{constructor(f){super(f);let r=decodeURIComponent(this._url.path);_.test(this._url.href)&&(r=r.replace(/^\//,"")),F.lstat(r,(s,a)=>{if(s)return"ENOENT"===s.code&&(s=new e.MissingPDFException(`Missing PDF "${r}".`)),this._storedError=s,void this._headersCapability.reject(s);this._contentLength=a.size,this._setReadableStream(F.createReadStream(r)),this._headersCapability.resolve()})}}class M extends l{constructor(f,r,s){super(f);let a=decodeURIComponent(this._url.path);_.test(this._url.href)&&(a=a.replace(/^\//,"")),this._setReadableStream(F.createReadStream(a,{start:r,end:s-1}))}}},function(J,t,C){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createResponseStatusError=function j(_,h){return 404===_||0===_&&h.startsWith("file:")?new e.MissingPDFException('Missing PDF "'+h+'".'):new e.UnexpectedResponseException("Unexpected server response ("+_+') while retrieving PDF "'+h+'".',_)},t.extractFilenameFromHeader=function N(_){const h=_("Content-Disposition");if(h){let v=(0,y.getFilenameFromContentDispositionHeader)(h);if(v.includes("%"))try{v=decodeURIComponent(v)}catch{}if(/\.pdf$/i.test(v))return v}return null},t.validateRangeRequestCapabilities=function F({getResponseHeader:_,isHttp:h,rangeChunkSize:v,disableRange:O}){(0,e.assert)(v>0,"Range chunk size must be larger than zero");const l={allowRangeRequests:!1,suggestedLength:void 0},A=parseInt(_("Content-Length"),10);return!Number.isInteger(A)||(l.suggestedLength=A,A<=2*v)||O||!h||"bytes"!==_("Accept-Ranges")||"identity"!==(_("Content-Encoding")||"identity")||(l.allowRangeRequests=!0),l},t.validateResponseStatus=function x(_){return 200===_||206===_};var e=C(1),y=C(21)},function(J,t,C){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getFilenameFromContentDispositionHeader=function e(y){let F=!0,N=j("filename\\*","i").exec(y);if(N){N=N[1];let A=v(N);return A=unescape(A),A=O(A),A=l(A),_(A)}if(N=function h(A){const p=[];let b;const T=j("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;null!==(b=T.exec(A));){let[,S,f,r]=b;if(S=parseInt(S,10),S in p){if(0===S)break}else p[S]=[f,r]}const M=[];for(let S=0;S<p.length&&S in p;++S){let[f,r]=p[S];r=v(r),f&&(r=unescape(r),0===S&&(r=O(r))),M.push(r)}return M.join("")}(y),N)return _(l(N));if(N=j("filename","i").exec(y),N){N=N[1];let A=v(N);return A=l(A),_(A)}function j(A,p){return new RegExp("(?:^|;)\\s*"+A+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',p)}function x(A,p){if(A){if(!/^[\x00-\xFF]+$/.test(p))return p;try{const b=new TextDecoder(A,{fatal:!0}),T=Array.from(p,function(M){return 255&M.charCodeAt(0)});p=b.decode(new Uint8Array(T)),F=!1}catch{if(/^utf-?8$/i.test(A))try{p=decodeURIComponent(escape(p)),F=!1}catch{}}}return p}function _(A){return F&&/[\x80-\xff]/.test(A)&&(A=x("utf-8",A),F&&(A=x("iso-8859-1",A))),A}function v(A){if(A.startsWith('"')){const p=A.slice(1).split('\\"');for(let b=0;b<p.length;++b){const T=p[b].indexOf('"');-1!==T&&(p[b]=p[b].slice(0,T),p.length=b+1),p[b]=p[b].replace(/\\(.)/g,"$1")}A=p.join('"')}return A}function O(A){const p=A.indexOf("'");return-1===p?A:x(A.slice(0,p),A.slice(p+1).replace(/^[^']*'/,""))}function l(A){return!A.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(A)?A:A.replace(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(p,b,T,M){if("q"===T||"Q"===T)return x(b,M=(M=M.replace(/_/g," ")).replace(/=([0-9a-fA-F]{2})/g,function(S,f){return String.fromCharCode(parseInt(f,16))}));try{M=atob(M)}catch{}return x(b,M)})}return""}},function(J,t,C){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PDFNetworkStream=void 0;var e=C(1),y=C(20);class x{constructor(l,A){this.url=l,A=A||{},this.isHttp=/^https?:/i.test(l),this.httpHeaders=this.isHttp&&A.httpHeaders||{},this.withCredentials=A.withCredentials||!1,this.getXhr=A.getXhr||function(){return new XMLHttpRequest},this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(l,A,p){const b={begin:l,end:A};for(const T in p)b[T]=p[T];return this.request(b)}requestFull(l){return this.request(l)}request(l){const A=this.getXhr(),p=this.currXhrId++,b=this.pendingRequests[p]={xhr:A};A.open("GET",this.url),A.withCredentials=this.withCredentials;for(const T in this.httpHeaders){const M=this.httpHeaders[T];typeof M>"u"||A.setRequestHeader(T,M)}return this.isHttp&&"begin"in l&&"end"in l?(A.setRequestHeader("Range",`bytes=${l.begin}-${l.end-1}`),b.expectedStatus=206):b.expectedStatus=200,A.responseType="arraybuffer",l.onError&&(A.onerror=function(T){l.onError(A.status)}),A.onreadystatechange=this.onStateChange.bind(this,p),A.onprogress=this.onProgress.bind(this,p),b.onHeadersReceived=l.onHeadersReceived,b.onDone=l.onDone,b.onError=l.onError,b.onProgress=l.onProgress,A.send(null),p}onProgress(l,A){const p=this.pendingRequests[l];p&&p.onProgress&&p.onProgress(A)}onStateChange(l,A){const p=this.pendingRequests[l];if(!p)return;const b=p.xhr;if(b.readyState>=2&&p.onHeadersReceived&&(p.onHeadersReceived(),delete p.onHeadersReceived),4!==b.readyState||!(l in this.pendingRequests))return;if(delete this.pendingRequests[l],0===b.status&&this.isHttp)return void(p.onError&&p.onError(b.status));const T=b.status||200;if((200!==T||206!==p.expectedStatus)&&T!==p.expectedStatus)return void(p.onError&&p.onError(b.status));const S=function j(O){const l=O.response;return"string"!=typeof l?l:(0,e.stringToBytes)(l).buffer}(b);if(206===T){const f=b.getResponseHeader("Content-Range"),r=/bytes (\d+)-(\d+)\/(\d+)/.exec(f);p.onDone({begin:parseInt(r[1],10),chunk:S})}else S?p.onDone({begin:0,chunk:S}):p.onError&&p.onError(b.status)}hasPendingRequests(){for(const l in this.pendingRequests)return!0;return!1}getRequestXhr(l){return this.pendingRequests[l].xhr}isPendingRequest(l){return l in this.pendingRequests}abortAllRequests(){for(const l in this.pendingRequests)this.abortRequest(0|l)}abortRequest(l){const A=this.pendingRequests[l].xhr;delete this.pendingRequests[l],A.abort()}}t.PDFNetworkStream=class _{constructor(l){this._source=l,this._manager=new x(l.url,{httpHeaders:l.httpHeaders,withCredentials:l.withCredentials}),this._rangeChunkSize=l.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(l){const A=this._rangeRequestReaders.indexOf(l);A>=0&&this._rangeRequestReaders.splice(A,1)}getFullReader(){return(0,e.assert)(!this._fullRequestReader),this._fullRequestReader=new h(this._manager,this._source),this._fullRequestReader}getRangeReader(l,A){const p=new v(this._manager,l,A);return p.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(p),p}cancelAllRequests(l){this._fullRequestReader&&this._fullRequestReader.cancel(l),this._rangeRequestReaders.slice(0).forEach(function(p){p.cancel(l)})}};class h{constructor(l,A){this._manager=l;const p={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=A.url,this._fullRequestId=l.requestFull(p),this._headersReceivedCapability=(0,e.createPromiseCapability)(),this._disableRange=A.disableRange||!1,this._contentLength=A.length,this._rangeChunkSize=A.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const l=this._fullRequestId,A=this._manager.getRequestXhr(l),p=M=>A.getResponseHeader(M),{allowRangeRequests:b,suggestedLength:T}=(0,y.validateRangeRequestCapabilities)({getResponseHeader:p,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});b&&(this._isRangeSupported=!0),this._contentLength=T||this._contentLength,this._filename=(0,y.extractFilenameFromHeader)(p),this._isRangeSupported&&this._manager.abortRequest(l),this._headersReceivedCapability.resolve()}_onDone(l){l&&(this._requests.length>0?this._requests.shift().resolve({value:l.chunk,done:!1}):this._cachedChunks.push(l.chunk)),this._done=!0,!(this._cachedChunks.length>0)&&(this._requests.forEach(function(A){A.resolve({value:void 0,done:!0})}),this._requests=[])}_onError(l){const p=(0,y.createResponseStatusError)(l,this._url);this._storedError=p,this._headersReceivedCapability.reject(p),this._requests.forEach(function(b){b.reject(p)}),this._requests=[],this._cachedChunks=[]}_onProgress(l){this.onProgress&&this.onProgress({loaded:l.loaded,total:l.lengthComputable?l.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const l=(0,e.createPromiseCapability)();return this._requests.push(l),l.promise}cancel(l){this._done=!0,this._headersReceivedCapability.reject(l),this._requests.forEach(function(A){A.resolve({value:void 0,done:!0})}),this._requests=[],this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class v{constructor(l,A,p){this._manager=l;const b={onDone:this._onDone.bind(this),onProgress:this._onProgress.bind(this)};this._requestId=l.requestRange(A,p,b),this._requests=[],this._queuedChunk=null,this._done=!1,this.onProgress=null,this.onClosed=null}_close(){this.onClosed&&this.onClosed(this)}_onDone(l){const A=l.chunk;this._requests.length>0?this._requests.shift().resolve({value:A,done:!1}):this._queuedChunk=A,this._done=!0,this._requests.forEach(function(p){p.resolve({value:void 0,done:!0})}),this._requests=[],this._close()}_onProgress(l){!this.isStreamingSupported&&this.onProgress&&this.onProgress({loaded:l.loaded})}get isStreamingSupported(){return!1}async read(){if(null!==this._queuedChunk){const A=this._queuedChunk;return this._queuedChunk=null,{value:A,done:!1}}if(this._done)return{value:void 0,done:!0};const l=(0,e.createPromiseCapability)();return this._requests.push(l),l.promise}cancel(l){this._done=!0,this._requests.forEach(function(A){A.resolve({value:void 0,done:!0})}),this._requests=[],this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}},function(J,t,C){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PDFFetchStream=void 0;var e=C(1),y=C(20);function F(h,v,O){return{method:"GET",headers:h,signal:O&&O.signal,mode:"cors",credentials:v?"include":"same-origin",redirect:"follow"}}function N(h){const v=new Headers;for(const O in h){const l=h[O];typeof l>"u"||v.append(O,l)}return v}t.PDFFetchStream=class j{constructor(v){this.source=v,this.isHttp=/^https?:/i.test(v.url),this.httpHeaders=this.isHttp&&v.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?this._fullRequestReader._loaded:0}getFullReader(){return(0,e.assert)(!this._fullRequestReader),this._fullRequestReader=new x(this),this._fullRequestReader}getRangeReader(v,O){if(O<=this._progressiveDataLength)return null;const l=new _(this,v,O);return this._rangeRequestReaders.push(l),l}cancelAllRequests(v){this._fullRequestReader&&this._fullRequestReader.cancel(v),this._rangeRequestReaders.slice(0).forEach(function(l){l.cancel(v)})}};class x{constructor(v){this._stream=v,this._reader=null,this._loaded=0,this._filename=null;const O=v.source;this._withCredentials=O.withCredentials||!1,this._contentLength=O.length,this._headersCapability=(0,e.createPromiseCapability)(),this._disableRange=O.disableRange||!1,this._rangeChunkSize=O.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),typeof AbortController<"u"&&(this._abortController=new AbortController),this._isStreamingSupported=!O.disableStream,this._isRangeSupported=!O.disableRange,this._headers=N(this._stream.httpHeaders);const l=O.url;fetch(l,F(this._headers,this._withCredentials,this._abortController)).then(A=>{if(!(0,y.validateResponseStatus)(A.status))throw(0,y.createResponseStatusError)(A.status,l);this._reader=A.body.getReader(),this._headersCapability.resolve();const p=M=>A.headers.get(M),{allowRangeRequests:b,suggestedLength:T}=(0,y.validateRangeRequestCapabilities)({getResponseHeader:p,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=b,this._contentLength=T||this._contentLength,this._filename=(0,y.extractFilenameFromHeader)(p),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new e.AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._headersCapability.promise;const{value:v,done:O}=await this._reader.read();return O?{value:v,done:O}:(this._loaded+=v.byteLength,this.onProgress&&this.onProgress({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(v).buffer,done:!1})}cancel(v){this._reader&&this._reader.cancel(v),this._abortController&&this._abortController.abort()}}class _{constructor(v,O,l){this._stream=v,this._reader=null,this._loaded=0;const A=v.source;this._withCredentials=A.withCredentials||!1,this._readCapability=(0,e.createPromiseCapability)(),this._isStreamingSupported=!A.disableStream,typeof AbortController<"u"&&(this._abortController=new AbortController),this._headers=N(this._stream.httpHeaders),this._headers.append("Range",`bytes=${O}-${l-1}`);const p=A.url;fetch(p,F(this._headers,this._withCredentials,this._abortController)).then(b=>{if(!(0,y.validateResponseStatus)(b.status))throw(0,y.createResponseStatusError)(b.status,p);this._readCapability.resolve(),this._reader=b.body.getReader()}),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._readCapability.promise;const{value:v,done:O}=await this._reader.read();return O?{value:v,done:O}:(this._loaded+=v.byteLength,this.onProgress&&this.onProgress({loaded:this._loaded}),{value:new Uint8Array(v).buffer,done:!1})}cancel(v){this._reader&&this._reader.cancel(v),this._abortController&&this._abortController.abort()}}}])});