"use strict";function findMe(b,a){for(var c in b){if(c+""==a){return c}}return null}function disloc(a){return a.split("").join(" ")}function parseJson(str){if(null===str){return null}if(typeof str==="string"){if(JSON){return JSON.parse(str)}if($){return $.parseJSON(str)}return eval("(function(){return "+str+";})()")}if(typeof str==="object"){return str}return null}function createQueryString(a){var b="";for(var c in a){if(a.hasOwnProperty(c)&&a[c]!==""){if(b.length!==0){b+="&"}b+=encodeURIComponent(c)+"="+encodeURIComponent(a[c])}}return b}var wl=findMe(window,"location");var wlh=findMe(window[wl],"href");function dislocWlh(){return disloc(window[wl][wlh])}function findLrt(){return findRawParamValue(window[wl][wlh],"loginRequestId")}function findRawParamValue(b,d){var e,c=d+"=",f,a;f=b.indexOf("?"+c);if(f===-1){f=b.indexOf("&"+c)}if(f!==-1){e=b.substring(f+c.length+1);a=e.indexOf("&");if(a!==-1){e=e.substr(0,a)}else{a=e.indexOf("#");if(a!==-1){e=e.substr(0,a)}}return e}return null}function parseUrl(a){var k,f,d,j,e,b,g,l={};l.params={};b=a.indexOf("?");if(b===-1){l.url=a;return l}l.url=a.substring(0,b);k=a.substring(b+1);f=k.split("&");for(var h=0,c=f.length;h<c;h++){d=f[h].split("=");j=d[0];if(d.length>1){e=d[1];g=e.indexOf("#");if(g!==-1){e=e.substr(0,g)}}else{e=""}l.params[j]=e}return l}var secTek="";var locValCount=0;var dnrps=[];function locval(){function f(C,D,E){alert("ERROR:\n-HTTP Status: "+C+' "'+E+'"\n-Response:\n'+D)}function u(){var C,E,D;C="reload";E=findMe(window[wl],C);if(null!=E){D=E}else{D=C}window[wl][D](true)}function x(K,C,D,J,I){var G=-1,F=null,E="";try{G=K.status===1223?204:K.status;if(G===0){G=F?200:0}}catch(H){}try{F=("response" in K)?K.response:(typeof K.responseText==="string")?K.responseText:null}catch(H){}try{E=K.statusText||""}catch(H){E=""}J(K,C,D,G,F,E,I)}function r(P,C,E,I,H,G,O){var Q,L,D;if(I===202){Q=parseJson(H);if(null===Q){f(I,H,G);return}if(Q.crossOriginUrls&&Q.crossOriginUrls.length){if(Q.correlationId){D=Q.correlationId.join("")}l=Q.crossOriginUrls.length;k=l;for(var J=0,F=l;J<F;J++){L=parseUrl(Q.crossOriginUrls[J].join(""));if(D){L.params.correlationId=D}y(L.url,B,createQueryString(L.params),b,D,"json",null)}}secTek=Q.secTek.join("");if(Q.dnrps&&Q.dnrps.length){dnrps=Q.dnrps}if(!Q.crossOriginUrls||!Q.crossOriginUrls.length||Q.crossOriginUrls.length===0){w()}}else{if(I===406){Q=parseJson(H);if(null===Q){f(I,H,G);return}var N="replace";var M=findMe(window[wl],N);var K;if(null!=M){K=M}else{K=N}window[wl][K](Q.newLoc.join(""))}else{if(I===205){if(locValCount++>5){alert("Your browser is not able to connect to the EU Login server...");return}locval()}else{if(I===200||I===404||I===503){u()}else{if(I===-1){alert("Unable to contact the EU Login server!")}else{f(I,H,G)}}}}}}function B(J,F,D,C,E,I,H){var G;if(C===201){G=J.getResponseHeader("X-Correlation-ID");window[wl][wlh]=F.replace("/sso/cors/init","/sso/restore")+(null===D?"":("?"+D.replace(/&ticket=[^&]+/g,"&ticket="+G)))}else{if(C===205){if(locValCount++>5){alert("Your browser is not able to connect to the EU Login server...");return}locval()}else{if(C===200||C===203||C===204||C===400||C===401||C===403||C===404||C===502||C===503||C===0){b()}else{if(C===-1){alert("Unable to contact the EU Login server!")}else{f(C,E,I)}}}}}function b(){if((--k+q===0)&&!o){w()}else{if(k>0){v(Math.round((l-k)*100/l))}}}function i(){var C=document.createElement("img");C.setAttribute("id","progressId");return C}function j(D,C){var E;if(C){E=C}else{E=document.getElementById("progressId")}E.setAttribute("src",ecas_context_path+"/images/progressbar/"+D+".png")}function v(J){var H,L,M,K,I,D,G,F,C,N;if(!g){g=document.getElementById("loginForm");if(!g){g=document.getElementById("whoamiContainerId");if(g){F=true}}if(g){G=i();j(J,G);C=document.createElement("div");C.setAttribute("class","text-center");C.appendChild(G);if(F){D=document.createElement("div");D.setAttribute("class","inner col-md-9");D.appendChild(C);t=D}else{t=C}N=$(g);N.hide();N.after(t);var E=$("#responsive-main-nav");if(E){E.css("visibility","visible")}return}}else{j(J);return}if(!h){h=document.documentElement;document.removeChild(h);H=document.createElement("html");L=document.createElement("head");M=document.createElement("title");M.appendChild(document.createTextNode("Please wait..."));K=document.createElement("link");K.setAttribute("href",ecas_context_path+"/stylesheets/crossOrigin/crossOrigin_en_"+ECAS.getVersion()+".css");K.setAttribute("rel","stylesheet");K.setAttribute("type","text/css");K.setAttribute("media","all");L.appendChild(M);L.appendChild(K);I=document.createElement("body");I.setAttribute("class","crossOrigin");D=document.createElement("div");G=i();j(J,G);D.appendChild(G);I.appendChild(D);H.appendChild(L);H.appendChild(I);document.appendChild(H)}else{j(J)}}function w(){if(typeof jQuery==="undefined"){throw new Error("locVal.js JavaScript requires jQuery")}if($){$(document).ready(function(){function G(M,L){M.find("input").each(function(){$(this).prop("disabled",L)})}if(g&&t){var H=$(t);H.hide();$(g).show();H.remove()}else{if(h){document.removeChild(document.documentElement);document.appendChild(h)}}if(secTek&&$.trim(secTek).length>0){var I=$("#loginStrength");if(I){var F=I.val();var D=$("#usesPassword");if(dnrps&&dnrps.length>0){if(dnrps.contains(F)){D.addClass("nodisplay");G(D,true)}else{D.removeClass("nodisplay");G(D,false)}for(var E=0;E<dnrps.length;E++){var K=$("#div-id-"+dnrps[E]);if(K){K.removeClass("usesPassword")}}}}var C=$("#responsive-main-nav");if(C){C.css("visibility","visible")}var J=$("#secTek");if(J.length){J.each(function(){var L=$(this);L.val(secTek.escapeHTML());L.prop("disabled",false);ECAS.validator.dispatchNewEvent(this,"populated",this)})}$("form.focusable").each(function(){jcv_focusFirstEditable(this)})}})}}function e(){var C=null;if(window.XMLHttpRequest){C=new XMLHttpRequest()}else{if(window.ActiveXObject){C=function(){try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(D){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(D){}try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(D){}alert(ECAS.getAjaxErrorXhr());throw new Error(ECAS.getAjaxErrorXhr())}}else{alert(ECAS.getAjaxErrorXhr());throw new Error(ECAS.getAjaxErrorXhr())}}return C}function y(I,G,D,F,H,E,C){z("POST",I,G,D,F,H,E,C)}function m(D,G,F,H,E,C){z("GET",D,G,null,F,H,E,C)}function z(C,D,J,E,F,I,G,K){var L=e();L.open(C,D,true);if("withCredentials" in L){L.withCredentials=true}if("timeout" in L){L.timeout=20000;if(F){L.ontimeout=F}}if(E){L.setRequestHeader("Content-type","application/x-www-form-urlencoded; charset=utf-8")}if(K){L.setRequestHeader("X-Requested-With",K)}L.onreadystatechange=function(){if(L.readyState==4){x(L,D,E,J,I)}};if(G){try{L.responseType=G}catch(H){}}L.send(E)}var l=0;var k=0;var q=0;var o=false;var g,t,h;var d=document.createElement("div");var p=document.createElement("form");p.setAttribute("action",ecas_url_prefix+"/back-to-captivity");d.appendChild(p);var n=disloc(p[findMe(p,"action")]);var s=("withCredentials" in e());var A=createQueryString({disloc:dislocWlh(),dislocredir:n,useCors:s,hardware:ECAS.Utils.getHardware(),intlTimeZone:ECAS.Utils.getIntlTimeZone(),localDateFormat:ECAS.Utils.getLocalDateFormat(),math:ECAS.Utils.getMath(),navigator:ECAS.Utils.getNavigator(),maxTouchPoints:ECAS.Utils.getMaxTouchPoints(),mediaDevices:ECAS.Utils.getMediaDevices(),platform:ECAS.Utils.getPlatform(),resolution:ECAS.Utils.getResolution(),timeZone:ECAS.Utils.getTimeZone(),webGL:ECAS.Utils.getWebGL(),fonts:ECAS.Utils.getFonts(),audio:ECAS.Utils.getAudio()});var c=findLrt();var a;if(null!=c){a=locval_url+"?loginRequestId="+c}else{a=locval_url}y(a,r,A,null,null,"json","EULoginLocVal/7.6")}(function(){if(!!ECAS&&!!ECAS.Preprocessing&&!!ECAS.Preprocessing.getPromises()&&ECAS.Preprocessing.getPromises().length!==0){Promise.all(ECAS.Preprocessing.getPromises()).then(function(a){locval()})}else{locval()}})();