function Riu(){this.preventPasteEvent=function(a){if(a.ctrlKey&&(a.which|a.keyCode)==86){a.preventDefault();return false}return true};this.dataUrodzeniaZPeselu=function(a){if(a!=null&&a.length==11){var b="19"+a.charAt(0)+a.charAt(1)+"-"+a.charAt(2)+a.charAt(3)+"-"+a.charAt(4)+a.charAt(5);var c=parseDate(b,zusNpiDateFormat);return c}return null};this.dodajZawartoscDoInfoFielda=function(d){var a=dijit.byId(d);if(a!=null){var c="";for(var b=1;b<arguments.length;b++){c+=arguments[b]}a.setContentValue(c)}};this.pobierzKomunikatTJO=function(c){var a=null;var b={url:"riu/pobierzListeTerenowychJednostek.npi",content:{kodSlownika:c},handleAs:"json",sync:true,load:function(d){console.log("resp");console.log(d);if(d!=null&&d.komunikat!=null){riu.komunikatTJOTresc=d.komunikat;a=d.komunikat;console.log("result w srodku: "+a)}}};dojo.xhrPost(b);return a};this.przejdzNaStroneGlowna=function(){var a={url:"riu/strona-glowna-adres.npi",handleAs:"json",sync:true,load:function(b){if(b!=null&&b.adres!=null){console.log(b);document.location.href=b.adres}}};dojo.xhrPost(a)};this.przypomnienieHaslaWyborSposobu=function(){var c=dijit.byId("przypomnienieSmsRadioButtonId");var b=dijit.byId("przypomnienieEmailRadioButtonId");var d=dijit.byId("numerTelefonuTextBoxId");var a=dijit.byId("emailTextBoxId");a.set("value","");d.set("value","");if(c.checked==true){d.set("disabled",false);a.set("disabled",true)}else{if(b.checked==true){d.set("disabled",true);a.set("disabled",false)}}};this.przypomnienieHaslaWyslijDane=function(c){var e=dijit.byId("przypomnienieHaslaFormId");if(e.validate()){var a="riu/przypomnij-haslo-email.npi";var d=dijit.byId("przypomnienieSmsRadioButtonId");if(d.get("checked")===true){a="riu/przypomnij-haslo-sms.npi"}var b={url:a,form:e.domNode,handleAs:"json",sync:false,load:function(f){riu.pokazZmianaHaslaKodDialog(f)},error:function(g,f){console.error(g)}};dojo.xhrPost(b)}};this.aktualizujLinkWysylkiNowegoKodu=function(b){var a=document.getElementById("resend-code-link");if(a){if(b>0){a.innerText=riu.przygotujTrescZmianyDanych(b);window.setTimeout(function(){riu.aktualizujLinkWysylkiNowegoKodu(--b)},1000)}else{a.innerText=riuJezyk.zwrocTekst("Kliknij tutaj, aby wysłać nowy kod","Натисніть тут, щоб вислати новий код");a.onclick=riu.zmienWidocznoscWysylkiNowegoKodu;riu.ustawDostepnoscLinku(a,true)}}};this.ustawDostepnoscLinku=function(b,a){if(a){b.removeAttribute("disabled");b.removeAttribute("style")}else{b.setAttribute("disabled","true");b.setAttribute("style","color: #999999;")}};this.przygotujTrescZmianyDanych=function(a){return riuJezyk.zwrocTekst("Kliknij tutaj, aby wysłać nowy kod (dostępne za ","Натисніть тут, щоб вислати новий код (доступно через ")+a+" "+riu.odmienLiczbeSekund(a)+")"};this.odmienLiczbeSekund=function(a){if(a===1){return riuJezyk.zwrocTekst("sekundę","секунду")}else{if(a%10>=2&&a%10<=4&&(a%100<10||a%100>=20)){return riuJezyk.zwrocTekst("sekundy","секунди")}else{return riuJezyk.zwrocTekst("sekund","секунд")}}};this.wyslijNowyKod=function(){riu.ustawDostepnoscLinku(document.getElementById("resend-code-link"),false);var a=document.getElementById("contactEmail").value;if(document.getElementById("contactPhone").checked){a=document.getElementById("contactPhone").value}$.ajax("riuRejWyslijNowyKod.npi",{async:false,type:"POST",data:{weryfikowanyKanal:a,numerTelefonu:document.getElementById("phone").value,adresEmail:document.getElementById("e-mail").value},success:function(b){if(b.result===true){location.reload()}else{alert("Nie udało się zmienić kanału weryfikacji. Spróbuj ponownie za chwilę.");riu.ustawDostepnoscLinku(document.getElementById("resend-code-link"),true)}},error:function(d,b,c){riu.ustawDostepnoscLinku(document.getElementById("resend-code-link"),true)}})};this.zmienWidocznoscWysylkiNowegoKodu=function(){var a=document.getElementById("send-new-code-section").style.display;document.getElementById("send-new-code-section").style.display=a==="none"?"block":"none"};this.ofeNiezalogowanyCaptchaFunction=function(){var d=dijit.byId("ofeNiezalogowanyCaptchaId");var g=dijit.byId("kodZObrazka").value;var a=dojo.byId("ofeNiezalogowanyCaptchaId");var c=dojo.byId("wyslijButtonId");if(d.validate()){var b={url:"ofe/riuSprawdzCaptche.npi",content:{kodZObrazka:g},handleAs:"json",sync:true,load:function(e){if(e.wynik){a.style.display="none";c.style.display="none";dojo.byId("FormularzOFE").click()}else{alert("Niepoprawny kod. Odśwież obrazek z kodem i spróbuj ponownie.")}},error:function(e){console.log("Error : ",e)}};try{console.log("KodZObrazka: ",KodZObrazka)}catch(f){}dojo.xhrGet(b)}};this.pokazZmianaHaslaKodDialog=function(d){var a=d.captcha;var c=dijit.byId("zmianaHaslaWyslijButtonId");if(c!=null){c.set("disabled",true)}if(a==null||a==true){var e=dojo.byId("komunikatLabelId");var b=dojo.byId("komunikatLabelIdBlad");if(d.blad==null&&d.wynik!=null&&e!=null){e.innerHTML=d.wynik;zmianaHaslaKodDialog.show()}else{if(d.blad!=null&&b!=null){b.innerHTML=d.blad;zmianaHaslaKodDialogBlad.show();if(c!=null){c.set("disabled",false)}}}}else{if(a==false){c.set("label","Wyślij");c.set("disabled",false);riuCaptcha.odswiezObrazek()}}};this.zmianaHaslaLinkPostCreate=function(){var k="NPI";var a=decodeURIComponent(window.location.search).substring(1).split("&");for(var e=0;e<a.length;e++){var g=a[e].split("=");if(g.length=2){var c=g[0];var j=g[1];if(c=="kanal"){var f=dijit.byId("kanalTextbox");f.set("value",j);k=j}if(c=="kod"){var h=dijit.byId("queryStringTextbox");h.set("value",j)}}}var d=dijit.byId("noweHasloTextbox");var b=dijit.byId("noweHasloPowtorzoneTextbox");if(k=="NPI"){dijit.byId("opisHaslaCITInfoId").set("style","display: none; width: 0px; height: 0px");d.set("validator",function(){return riuWalidacja.validHaslo(dijit.byId("noweHasloTextbox"))});b.set("validator",function(){return riuWalidacja.czyHasloPowtorzone(dijit.byId("noweHasloTextbox"),dijit.byId("noweHasloPowtorzoneTextbox"))})}else{if(k=="CIT"){dijit.byId("opisHaslaNPIInfoId").set("style","display: none; width: 0px; height: 0px");d.set("validator",function(){return riuWalidacja.validHasloCIT(dijit.byId("noweHasloTextbox"))});b.set("validator",function(){return riuWalidacja.czyHasloPowtorzone(dijit.byId("noweHasloTextbox"),dijit.byId("noweHasloPowtorzoneTextbox"))})}else{if(k==null){riu.przejdzNaStroneGlowna()}}}dojo.connect(dijit.byId("noweHasloTextbox"),"onKeyPress",function(i){if(i.charOrCode=="13"){if(riuWalidacja.bezpieczneHaslo(dijit.byId("noweHasloTextbox"))){if(riuWalidacja.bezpieczneHaslo(dijit.byId("noweHasloPowtorzoneTextbox"))){dijit.byId("riuZmianaHaslaLinkWyslijButton").focus()}else{dijit.byId("noweHasloPowtorzoneTextbox").focus()}}}});dojo.connect(dijit.byId("noweHasloPowtorzoneTextbox"),"onKeyPress",function(i){if(i.charOrCode=="13"){if(riuWalidacja.bezpieczneHaslo(dijit.byId("noweHasloPowtorzoneTextbox"))){if(riuWalidacja.bezpieczneHaslo(dijit.byId("noweHasloTextbox"))){dijit.byId("riuZmianaHaslaLinkWyslijButton").focus()}else{dijit.byId("noweHasloTextbox").focus()}}}})};this.zmianaHaslaLink=function(){var b=dijit.byId("zmianaHaslaLinkFormId");b.validate();if(b.isValid()){var a={url:"zmien-haslo-link.npi",content:{kod:dojo.byId("queryStringTextbox").value,kanal:dojo.byId("kanalTextbox").value,noweHaslo:dojo.byId("noweHasloTextbox").value,noweHasloPowtorzone:dojo.byId("noweHasloPowtorzoneTextbox").value},handleAs:"json",sync:true,load:function(c){riu.pokazZmianaHaslaKodDialog(c)},error:function(d,c){console.error(d)}};dojo.xhrPost(a)}};this.logowanie=function(){var c=dijit.byId("formularzForm");var a=null;var b={form:dojo.byId("formularzForm"),handleAs:"json",sync:true,url:"riu/riuZalogujLoginHaslo.npi",load:function(d){a=d;if(d!=null&&d.blad!=null){riu.komunikatBledu=d.blad}}};formularzForm.validate();if(formularzForm.isValid()){dojo.xhrPost(b);return a}return null};this.komunikatBledu="";this.sprawdzCzyDostepnaTechnologiaFlex=function(){var a={handleAs:"json",sync:true,url:"riu/pobierzKomunikatCzyWyswietlacFlex.npi",load:function(b){if(b!=null&&b.czyWyswietlacKomunikatFlex!=null){if(b.czyWyswietlacKomunikatFlex=="true"){flexInfoId.setContentValue(b.komunikatFlex);if(!isFlashEnabled()||isUsingPepperFlash()){flexInfoId.domNode.style.display="inline-block";flexInfoId.domNode.style.width="97%"}else{flexInfoId.domNode.style.display="none"}}}else{flexInfoId.domNode.style.display="none"}}};dojo.xhrPost(a)};this.wyslijFormularzKodAktywOdpowiedzi=function(){var a=new Array();a.push(dijit.byId("pytanie1").get("value"));a.push(dijit.byId("pytanie2").get("value"));a.push(dijit.byId("pytanie3").get("value"));for(var d=0;d<riu.pytania.length;d++){var c=riu.pytania[d]["typOdpowiedzi"];if(c=="KOD_POCZTOWY"){var g=a[d].substring(0,2)+a[d].substring(3);a[d]=g}else{if(c=="OFE"){var f=dijit.byId("listaOFESelectId").get("value");a[d]=f}else{if(c=="DATA"){var e=dijit.byId("pytanie"+(d+1)+"Data").toString();a[d]=e}}}}var b={url:"riu/riuWyslijFormularzKodAktywOdp.npi",form:dojo.byId("formularzForm"),content:{kodAktywacyjny:dojo.byId("kodAktywacyjny").value,pytanie1:a[0],pytanie2:a[1],pytanie3:a[2],nrPytanie1:nrPytanie1,nrPytanie2:nrPytanie2,nrPytanie3:nrPytanie3,kodZObrazka:dijit.byId("kodZObrazka").get("value")},handleAs:"json",sync:true,load:function(k){console.log("riuWyslijFormularzKodAktywOdp resp");console.log(k);riu.resp=k;var j=k.login;var h=k.akcja;var l=k.bledy;var i=k.blad;if(k.captcha==false){riuCaptcha.odswiezObrazek()}else{if(l==0&&j!=null){dijit.byId("wizardId").forward();dijit.byId("loginPUE").set("value",j);riu.wyswietlenieOstrzezenia(k.ostrzezenie,"ostrzezenieFieldsetId","ostrzezenieInfoFieldId")}else{if((l>0||j==null||j=="")&&i!=null||i!=""){dijit.byId("rejPodpisBladMessageId").setContentValue(i);dijit.byId("wizardId").selectChild(dijit.byId("rejBladRejestracjiPaneId"))}else{dijit.byId("wizardId").selectChild(dijit.byId("rejBladInfoPaneId"))}}}}};pytaniaOdpowiedzi.validate();if(pytaniaOdpowiedzi.isValid()){formularzForm.validate();if(formularzForm.isValid()){dojo.xhrPost(b)}}};this.pytania=null;this.wyslijFormularzKodAktyw=function(){var a={url:"riu/riuWyslijFormularzKodAktyw.npi",content:{kodZObrazka:dojo.byId("kodZObrazka").value,kodAktywacyjny:dojo.byId("kodAktywacyjny").value,nazwisko:dojo.byId("riuNazwisko").value,imiePierwsze:dojo.byId("riuImiePierwsze").value,dataUrodzenia:dojo.byId("dataUrodzenia").value,pesel:dojo.byId("pesel").value,nip:dojo.byId("nip").value,kodTypDokTozsamosci:dojo.byId("typDokTozsamosci").value,nrDokTozsamosci:dojo.byId("nrDokumentuToz").value},handleAs:"json",sync:true,load:function(j){console.log("wyslijFormularzKodAktyw resp");console.log(j);liczbaBledow=j.bledy;komunikatBledu=j.blad;pytanie1=j.pytanie1;pytanie2=j.pytanie2;pytanie3=j.pytanie3;nrPytanie1=j.nrPytanie1;nrPytanie2=j.nrPytanie2;nrPytanie3=j.nrPytanie3;akcja=j.akcja;if(komunikatBledu==null||komunikatBledu==""){riu.pytania=j.pytania;var h="pytanie";for(var e=0;e<riu.pytania.length;e++){var c=dijit.byId(h+(e+1));var b=dijit.byId(h+(e+1)+"Data");var f=dijit.byId("listaOFESelectId");var g=riu.pytania[e]["typOdpowiedzi"];if(g=="DATA"){console.log("typ odpowiedzi - DATA");c.set("required",false);c.set("style","display: none");b.set("style","display: inline-block");b.set("required",true)}else{if(g=="OFE"){console.log("typ odpowiedzi - OFE");c.set("required",false);c.set("style","display: none");b.set("required",false);b.set("style","display: none");var d="ofeOdpContainer"+(e+1);f.set("required",true);f.set("style","width: 400px; display: inline-block");f.placeAt(d)}else{c.set("required",true);c.set("style","display: inline-block");switch(g){case"NUMER":console.log("typ odpowiedzi - NUMER");c.set("maxLength",255);c.set("regExp",riuRejKodem.numerRegex);break;case"NAPIS":console.log("typ odpowiedzi - NAPIS");c.set("maxLength",255);c.set("regExp",riuRejKodem.napisRegex);break;case"KOD_POCZTOWY":console.log("typ odpowiedzi - KOD_POCZTOWY");c.set("maxLength",6);c.set("regExp",riuRejKodem.kodPocztowyRegex);break;case"REGON":console.log("typ odpowiedzi - REGON");c.set("maxLength",14);c.set("regExp",riuRejKodem.regonRegex);break;case"NIP":console.log("typ odpowiedzi - NIP");c.set("maxLength",11);c.set("regExp",riuRejKodem.nipRegex);break;case"RACHUNEK_BANKOWY":console.log("typ odpowiedzi - RACHUNEK_BANKOWY");c.set("maxLength",26);c.set("regExp",riuRejKodem.rachBankowyRegex);break;default:console.log("typ odpowiedzi - nieznany");c.set("disabled",true);c.set("value","");c.set("required",true);break}}}}dijit.byId("riuPytanie1").setContentValue(pytanie1);dijit.byId("riuPytanie2").setContentValue(pytanie2);dijit.byId("riuPytanie3").setContentValue(pytanie3);dijit.byId("wizardId").forward()}else{dijit.byId("rejPodpisBladMessageId").setContentValue(komunikatBledu);dijit.byId("wizardId").selectChild(dijit.byId("rejBladRejestracjiPaneId"))}}};kodAktywacyjnyForm.validate();if(kodAktywacyjnyForm.isValid()){dojo.xhrPost(a)}};this.wylogowanie=function(a){dojo.cookie("workingPlace","",{expires:-1});dojo.cookie("noweMiejsce","",{expires:-1});dojo.xhrPost({url:"riu/riuKontekstySprawdzCzyIstniejeRolaRelacja.npi",handleAs:"json",content:{roleToCheck:"LEKARZ",roleToCheckRelationType:"MASTER"},load:function(b){if(b===true){riu.sprawdzDokumentyFZLA(riu.sprawdzNiewyslaneDokumenty,riu.wyloguj,a,true)}else{riu.sprawdzInneDokumenty(riu.sprawdzInneNiewyslaneDokumenty,riu.wyloguj,a,true,null)}}})};this.sprawdzInneNiewyslaneDokumenty=function(f,b,c,e){var a="obw/obszar/ogolnySprawdzNiewyslaneDokumenty.npi";dojo.xhrPost({url:a,handleAs:"json",load:function(g){if((e!=null&&e.niewyslane!=null&&e.niewyslane)||(g!=null&&g.niewyslane||g.niewyslanePr)){d(g,f,b,c,e)}else{if(f!=null&&f!=undefined&&c!=undefined&&c!=null&&c!=false){f(b)}}}});function d(s,h,w,p,t){var o,n,m,l=true,q="Przejdź do zleceń",g="Przejdź do ZLA/AZLA",u="Przejdz do PR-4",j;j=(p==true)?"Wyloguj się":"Anuluj";o=!!(s.niewyslane);m=!!(s.niewyslanePr);if(t===undefined||t==null){n=false}else{n=!!(t.zla||t.azla)}var r;var v="230px";var x=s.NAGLOWEK;var k="";var i="";if(s.iloscDokumentow!=null&&s.iloscDokumentow>1){k=s.KOM_INNE2;i=s.KOM_ZLA_AZLA_PR42}else{k=s.KOM_INNE;i=s.KOM_ZLA_AZLA_PR4}if(!m&&!n&&o){r=k+"\n"+s.ZLECENIA_KOMUNIKAT.replaceAll("\\n","\n");v="180px"}else{if(m&&!n&&!o){r=i+"\n"+s.contentMid.substring(0,s.contentMid.length-1)+".\n\n"+s.PR_4_KOMUNIKAT.replaceAll("\\n","\n");v="230px"}else{if(!m&&n&&!o){r=i+"\n"+t.contentMid.substring(0,t.contentMid.length-1)+".\n\n"+s.ZLA_AZLA_KOMUNIKAT.replaceAll("\\n","\n");v="230px"}else{if(m&&n&&!o){r=i+"\n"+t.contentMid+s.contentMid.substring(0,s.contentMid.length-1)+".\n\n"+s.ZLA_AZLA_PR_4_KOMUNIKAT.replaceAll("\\n","\n");v="340px"}else{if(m&&!n&&o){r=i+"\n"+s.contentMid+"- i inne.\n\n"+s.ZLECENIA_PR_4_KOMUNIKAT.replaceAll("\\n","\n");v="300px"}else{if(!m&&n&&o){r=i+"\n"+t.contentMid+"- i inne.\n\n"+s.ZLECENIA_ZLA_AZLA_KOMUNIKAT.replaceAll("\\n","\n");v="340px"}else{if(m&&n&&o){r=i+"\n"+t.contentMid+s.contentMid+"- i inne.\n\n"+s.ZLECENIA_ZLA_AZLA_PR_4_KOMUNIKAT.replaceAll("\\n","\n");v="340px"}}}}}}}showDialog(zusnpi.dialog.FourButtonDialog(),{title:x,content:r,btn1Text:q,btn2Text:g,btn3Text:u,btn4Text:j,displayBtn1:o,displayBtn2:n,displayBtn3:m,displayBtn4:l,dialogWidth:"650px",dialogHeight:v,onBtn1Click:function(){dojo.cookie(riu.niewyslaneKody,s.niewyslaneKody);changeRoleAndKontekst(s.rola,s.link)},onBtn2Click:function(){changeRole("LEKARZ","obszar-lekarza.npi#KLE0005")},onBtn3Click:function(){dojo.cookie(riu.niewyslaneKody,"PR-4");changeRoleAndKontekst("OGOLNA","obszar-ogolny.npi#OBW0071")},onBtn4Click:function(){dojo.cookie("zalegleDokumenty","",{expires:-1});if(p!=null&&p!=false&&h!=null&&h!=undefined){h(w)}}})}};this.sprawdzInneDokumenty=function(e,c,b,a,d){e(c,b,a,d)};this.wylogowanieBezSprawdzania=function(a){dojo.cookie("workingPlace","",{expires:-1});dojo.cookie("noweMiejsce","",{expires:-1});riu.wyloguj(a)};this.niewyslaneKody="NIEWYSLANE_KODY";this.dokumentyNieWyslaneCookie="DOKUMENTY-NIEWYSLANE-KOMUNIKAT";this.sprawdzPrzegladarkeCookieName="SPRAWDZ-PRZEGLADARKE-KOMUNIKAT";this.zalogowany=function(){var a=dojo.cookie(this.dokumentyNieWyslaneCookie);if(a==undefined||a==null||(a&&a==="")){dojo.cookie(riu.dokumentyNieWyslaneCookie,true);dojo.xhrPost({url:"riu/riuKontekstySprawdzCzyIstniejeRolaRelacja.npi",handleAs:"json",content:{roleToCheck:"LEKARZ",roleToCheckRelationType:"MASTER"},load:function(e){if(e===true){if(d===undefined){var d=null}riu.sprawdzNiewyslaneDokumenty(riu.sprawdzInneNiewyslaneDokumenty,null,false)}else{if(d===undefined){var d=null}riu.sprawdzInneDokumenty(riu.sprawdzInneNiewyslaneDokumenty,null,d,false,null)}}})}var c=dojo.cookie(this.sprawdzPrzegladarkeCookieName);if(c==null||c===""){dojo.cookie(riu.sprawdzPrzegladarkeCookieName,true);if(this.sprawdzPrzegladarke()===false){var b=new zusnpi.dialog.HtmlDialog({title:"Komunikat ostrzeżenia",content:"<div style='padding-left: 10px; padding-top: 3px;'>Ze względu na <b>brak wsparcia</b> firmy Microsoft dla przeglądarki <b>Internet Explorer (IE)</b>, niektóre funkcje portalu mogą nie działać prawidłowo.<br/><br/>Skorzystaj z innych przeglądarek.</div>",iconSrc:"css/img/attention.png",dialogWidth:"535px",buttonsArray:[new dijit.form.Button({label:"OK",onClick:function(){b.hide()}})]});b.setArgs();b.show()}}};this.sprawdzNiewyslaneDokumenty=function(e,b,c){var a="obszar-lekarza/lekarzSprawdzNiewyslaneDokumenty.npi";dojo.xhrPost({url:a,handleAs:"json",load:function(g){if(g.niewyslane){if(f===undefined&&e!=null&&e!=undefined){var f=b}riu.sprawdzInneDokumenty(riu.sprawdzInneNiewyslaneDokumenty,riu.wyloguj,f,c,g)}else{if(f===undefined&&e!=null&&e!=undefined){var f=b}riu.sprawdzInneDokumenty(riu.sprawdzInneNiewyslaneDokumenty,riu.wyloguj,f,c,null)}}});function d(h,n,k,l){var m=true,i=true,j=true,o=(h.zla||h.azla)?"Przejdź do dokumentów ZLA/AZLA":(m=false),g=(h.pr4)?"Przejdź do dokumentów PR-4":(i=false),f=(l==true)?"Wyloguj się":"Anuluj";showDialog(zusnpi.dialog.YesNoCancelDialog(),{title:h.title,content:h.content,yesText:o,noText:g,cancelText:f,displayYesBtn:m,displayNoBtn:i,displayCancelBtn:j,dialogWidth:"650px",dialogHeight:"150px",onYesClick:function(){changeRole("LEKARZ","obszar-lekarza.npi#KLE0005")},onNoClick:function(){changeRole("LEKARZ","obszar-lekarza.npi#OBW0031")},onCancelClick:function(){dojo.cookie("zalegleDokumenty","",{expires:-1});if(n!=null&&n!=undefined){n(k)}}})}};this.sprawdzDokumentyFZLA=function(e,d,c,b){var a="obszar-lekarza/lekarzMiejsceWykonywaniaZawoduGetCurrent.npi";dojo.xhrPost({url:a,handleAs:"json",load:function(g){if(g.status&&g.status==="NEW"){var f=[d,c,b];new zusnpi.dialog.AddNewWorkingPlaceInfoOFZLA({onOkCallback:e,onOkCallbackParams:{callback:d,trybPK:c,wylogowanie:b}}).show()}else{e(d,c,b)}}})};this.wyloguj=function(a){dojo.cookie("workingPlace","",{expires:-1});akcja="riu/riuWylogujPUE.npi";if(a){akcja="riu/riuWyloguj.npi"}dojo.xhrPost({url:akcja,handleAs:"json",load:function(d){dojo.cookie(riu.dokumentyNieWyslaneCookie,null,{expires:-1});dojo.cookie(riu.sprawdzPrzegladarkeCookieName,null,{expires:-1});dojo.cookie(riu.niewyslaneKody,null,{expires:-1});sessionStorage.clear();if(!a){if(d!==null&&typeof d.epuap_logout_url!=="undefined"){document.location.href=d.epuap_logout_url}else{if(d!==null&&typeof d.jwt!=="undefined"){var b="Bearer".concat(" ",d.jwt);if(typeof d.nonEzus!=="undefined"&&d.nonEzus==="false"){sendLogoutRequestEZUS(b)}}var c=getAdresStronyGlownejEZUS();console.log("[DEBUG] Przekierowanie do strony e-ZUS");window.location.href=c+"/logowanie?jezyk="+riuJezyk.kod+"&npi-logged-out=true"}}else{document.location.href="wylogowanie.npi"}},error:function(b,c){b(b)}})};this.wyslijFormularz=function(){formularzForm.validate();if(formularzForm.isValid()){riuRejNiezaufanegoWyslijFormularzButton.set("disabled",true);var a;var e;var c;var d;var b={url:"riu/riuWyslijFormularz.npi",form:dojo.byId("formularzForm"),handleAs:"json",sync:true,load:function(f){riuRejNiezaufanegoWyslijFormularzButton.set("disabled",false);d=f.login;a=f.akcja;e=f.bledy;c=f.blad;if(a==false&&e==null){riuCaptcha.odswiezObrazek()}else{if(e==0&&d!=null){dijit.byId("wizardId").forward();dijit.byId("loginPUE").set("value",d)}else{if(e>0&&c!=null){dijit.byId("infoFieldError").setContentValue(c);dijit.byId("wizardId").forward();dijit.byId("wizardId").forward()}}}}};dojo.xhrPost(b)}};this.akceptuj_regulamin=function(a){if(dijit.byId("regCheck").checked&&dijit.byId("regCheckPrzetwarzanie").checked){dojo.xhrPost({url:"riu/riuRegulaminOtrzymywanieWiadomosciEmail.npi",content:{checkboxOtrzymywanieWiadomosciEmail:dijit.byId("regCheckOtrzymywanie").checked},handleAs:"json",sync:true,load:function(b){dijit.byId("wizardId").forward()},error:function(b,c){b(b)}})}else{alert(a)}};this.akceptuj_nowy_regulamin=function(b,a){if(riu._walidujZgody()){dojo.xhrPost({url:"riu/riuRegulaminZgody.npi",content:{zgody:JSON.stringify(riu._pobierzZgodyDoZapisania())},handleAs:"json",sync:true,load:function(c){dojo.xhrPost({url:a,sync:true,load:function(e){var d=getAdresStronyGlownejEZUS();window.location.href=d+"/wybor-kontekstu?default=true"},error:function(d,e){errorLoad(d)}})},error:function(c,d){c(c)}})}else{alert(b)}};this.wprowadzono_login=function(){if(dijit.byId("riuLogin").value!=""){dijit.byId("wizardId").forward()}else{alert("By przejść dalej musisz podać swój login!")}};this._zgody=null;this.pobierzRegulamin=function(){dojo.xhrPost({url:"riu/riuRegulaminPobierzNajnowszy.npi",handleAs:"json",load:function(a){riu._zgody=a.zgody;dijit.byId("trescRegulaminuDialog").set("value",a.tresc);dojo.byId("trescZmianaRegulaminu").innerHTML=a.trescZmiana;riu._utworzZgody(a.zgody,"zmianaRegulaminuZgodyContentPane");dijit.byId("trescRegulaminuWizard").set("value",a.tresc);riu._utworzZgody(a.zgody,"regulaminZgodyContentPane");if(a.zaakceptowanyPoprzedniRegulamin===false){dijit.byId("wizardId").selectChild(dijit.byId("riuWizardNowyRegulaminId"));dijit.byId("regulaminBorderContainer").resize()}else{riu.resizeZgody()}},error:function(a,b){a(a)}})};this.resizeZgody=function(){var c=$(".zusnpiMainContentPaneCenter").height();var a=$("#insideTopElements").height();var b=$("#buttonPane").height();$("#zmianaRegulaminuZgodyContentPane").height(c-a-b-47)};this._utworzZgody=function(a,b){dojo.forEach(a,function(e,d){if(!e.zaakceptowana){var c=b+e.id.idOb;var g=e.tresc;if(e.obowiazkowa){g+="*"}var f=dijit.byId(b).domNode;var h=dojo.create("div",{style:"width:100%; padding-top: 5px"},f);new dijit.form.CheckBox({id:c,checked:e.zaakceptowana,onChange:function(i){riu._onChangeZgoda(e.id.idOb,i)}}).placeAt(h,"last");dojo.create("label",{innerHTML:g,htmlFor:c,style:"width:100%; padding-left: 5px; white-space: pre-line"},h)}})};this._onChangeZgoda=function(b,a){dojo.forEach(riu._zgody,function(d,c){if(d.id.idOb==b){d.zaakceptowana=a}})};this._walidujZgody=function(){if(dojo.some(riu._zgody,function(b,a){return b.obowiazkowa&&!b.zaakceptowana})){return false}return true};this._pobierzZgodyDoZapisania=function(){var a=[];dojo.forEach(riu._zgody,function(c,b){a.push({id:{idOb:c.id.idOb},zaakceptowana:c.zaakceptowana})});return a};this._BRAK_PROFILU_UMOZLIWIENIE_REJESTRACJI="brakProfiluPodpis";this._brakProfiluRejDane=null;this.akcjaPodpis=function(b,a,c){riuPodpis.blokujPrzycisk("Proszę czekać ...");riuPodpis.podpiszDokument(b,null,null,function(d){riuPodpis.zwolnijPrzycisk();if(d){document.getElementById(a).value=riuPodpis.xmlResult;document.getElementById(c).submit()}else{alert(riu.komunikatBledu)}})};this.odblokujKanal=function(b,c,a){dijit.byId("riuProgressBarPodpis").set("style","display: block;");dijit.byId("riuPrzyciskPodpis").set("disabled","true");riuPodpis.podpiszDokument(c,null,null,function(e){if(e){e=riu.wykonanieAkcji(b)}if(e){var d=dijit.byId("wizardId");if(d){d.selectChild(dijit.byId("odblokowanieSukcesPaneId"))}}else{menuSelect(a)}})};this.wykonanieAkcji=function(a){var b=true;$.ajax(a,{data:{token:riuPodpis.xmlResult},async:false,type:"POST",success:function(c){if(c.blad!=null&&c.blad!=""){riu.komunikatBledu=c.blad;b=false;if(riu.komunikatBledu==riu._BRAK_PROFILU_UMOZLIWIENIE_REJESTRACJI){riu._brakProfiluRejDane=c;riuRejPodpis.podpisanyDokument=c.podpisanyDokument}}}});riuPodpis.xmlData=null;return b};this.pobierzKomunikatSukcesRejNiezaufanego=function(){var a={url:"riu/pobierzLiczbeDniWaznosciKontaNiezaufanego.npi",handleAs:"json",sync:true,load:function(b){dijit.byId("sukcesRejNiezaufany").setContentValue(b.komunikat)}};dojo.xhrPost(a)};this.zmienHaslo=function(){var a={content:{login:document.getElementById("riuLogin").value,haslo:document.getElementById("riuHaslo").value},handleAs:"json",sync:true,url:"riu/riuHaslaZmien.npi",load:function(b){zmienione=b.zmienione;riu.komunikatBledu=b.blad}};formularzForm.validate();if(formularzForm.isValid()){dojo.xhrPost(a);return zmienione}return false};this.ustawHaslo=function(){var a={content:{login:document.getElementById("riuLoginH").value,haslo:document.getElementById("riuHaslo").value},handleAs:"json",sync:true,url:"riu/riuHaslaUstaw.npi",load:function(b){zmienione=b.zmienione;riu.komunikatBledu=b.blad}};formularzForm.validate();if(formularzForm.isValid()){dojo.xhrPost(a);return zmienione}return false};this.logowanieEPUAP=function(a,c,d){var b={url:"riu/riuEPUAPLogSSO.npi",handleAs:"json",sync:true,load:function(e){riu.komunikatBledu=e.blad;if(riu.komunikatBledu==riu._BRAK_PROFILU_UMOZLIWIENIE_REJESTRACJI){riu._brakProfiluRejDane=e;menuSelect(d)}else{if(riu.komunikatBledu!=null&&riu.komunikatBledu!=""){menuSelect(a)}else{menuSelect(c)}}}};dojo.xhrPost(b)};this.riuLogZmianaHaslaLoadData=function(b){var a={url:b,handleAs:"json",sync:true,load:function(c){dijit.byId("riuLoginH").set("value",c.login,false);dijit.byId("riuImieH").set("value",c.imie,false);dijit.byId("riuNazwiskoH").set("value",c.nazwisko,false);dijit.byId("riuDataUrodzeniaH").set("value",c.data_urodzenia,false);dijit.byId("riuPeselH").set("value",c.pesel,false);dijit.byId("riuNipH").set("value",c.nip,false);dijit.byId("riuNrDokH").set("value",c.nr_dok_tozsamosci,false)}};dojo.xhrPost(a)};this.odblokowanieKomunikat=function(b){if(b!=null){var a={url:b,content:{komunikatBledu:riu.komunikatBledu},handleAs:"json",sync:true,load:function(e){var c=e!=null?e.komunikat:null;if(c!=null){var d=dijit.byId("odblokowanieInfoPaneId")||dijit.byId("infoFieldError");if(d!=null){d.setContentValue(c)}}}};dojo.xhrPost(a)}};this.wyswietlenieOstrzezenia=function(e,b,d){var f=dijit.byId(b);var a=dijit.byId(d);if(e!=null&&e!=""&&f!=null&&a!=null){var c=a.get("content");c=c.replace("#bledy#",e);a.setContentValue(c);f.set("style","display: block")}};this.logowanieBankSSO=function(){var a=null;var b={handleAs:"json",sync:true,url:"riu/riuZalogujBankSSOToken.npi?jezyk="+riuJezyk.kod,load:function(c){a=c;if(c!=null&&c.blad!=null){riu.komunikatBledu=c.blad}}};dojo.xhrPost(b);return a};this.logowanieSsogp=function(){var a=null;var b={handleAs:"json",sync:true,url:"riu/riuZalogujSsogpToken.npi",load:function(c){a=c;if(c!=null&&c.blad!=null){riu.komunikatBledu=c.blad}}};dojo.xhrPost(b);return a};this.zmienKontekstNaZbiorczy=function(b){var a={url:"obw/pobierzUpowaznienia/zmienKontekst.npi",content:{idKontekstu:-1},handleAs:"json",load:b};dojo.xhrPost(a)};this.redirect=function(a){window.location.href=a};this.sprawdzPrzegladarke=function(){var a=window.navigator.userAgent;if(a.indexOf("MSIE ")>0){return false}if(a.indexOf("Trident/")>0){return false}return true}}var riu=new Riu();