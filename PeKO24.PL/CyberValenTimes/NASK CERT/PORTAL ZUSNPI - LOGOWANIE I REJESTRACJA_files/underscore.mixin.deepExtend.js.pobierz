((typeof module!=="undefined"&&function(a){module.exports=a()})||(typeof define==="function"&&function(a){define("underscoreDeepExtend",a)})||(function(a){window.underscoreDeepExtend=a()}))(function(){return function(b){return function a(h){var k=/#{\s*?_\s*?}/,d,j=function(p,q){return(b.isUndefined(p)||b.isNull(p)||b.isFunction(p)||b.isNull(q)||b.isDate(q))},f=function(p,q,r){return h[r]=b.clone(q)},n=function(p,q){return(b.isString(q)&&k.test(q))},e=function(p,q,r){if(!b.isString(p)){}return h[r]=q.replace(k,p)},l=function(p,q){return(b.isArray(p)||b.isArray(q))},o=function(p,r,s){if(!b.isArray(p)||!b.isArray(r)){throw new Error("Trying to combine an array with a non-array ("+s+")")}var q=b.deepExtend(h[s],r);return h[s]=b.reject(q,b.isNull)},g=function(p,q){return(b.isObject(p)||b.isObject(q))},i=function(p,q,r){if(!b.isObject(p)||!b.isObject(q)){throw new Error("Trying to combine an object with a non-object ("+r+")")}return h[r]=b.deepExtend(p,q)},m=function(r){var p=h[r],q=d[r];if(j(p,q)){f(p,q,r)}else{if(n(p,q)){e(p,q,r)}else{if(l(p,q)){o(p,q,r)}else{if(g(p,q)){i(p,q,r)}else{f(p,q,r)}}}}},c=function(p){d=p;Object.keys(d).forEach(m)};b.each(Array.prototype.slice.call(arguments,1),c);return h}}});