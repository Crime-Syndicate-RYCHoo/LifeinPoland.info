define("plugins/font-resizer",["require","jquery","lib/plugins/cookie","common/basePlugin","adapter/jsClass","adapter/dom","adapter/enumerable"],function(d){var c=d("common/basePlugin"),h=d("adapter/dom"),g=d("jquery"),a=d("adapter/enumerable"),b=d("adapter/jsClass"),f=d("lib/plugins/cookie");var e=b.Class(c,{constructor:function(m,j,l,i){var k={mode:"zoomRange",cssStyle:"class",cookiesEnabledCookie:null,cookieName:"accessFontResizer",zoomRange:[100,130,156],cssClasses:["","-l","-xl"],cssClassPrefix:"fontresizer",linkSelector:"a",linkActiveClass:"js-active",linkDisabledClass:"js-disabled",pseudoElementSelector:"[class*=b-icon-],.zus-ci,.zus-ci-label"};this.settings=a.defaults(i,k);e.$super.call(this,m,j,l,i);this.body=h.find("body");this.zoom=100;this.context=h.find("#"+this.modId);this.init()},init:function(){if(!this.settings.cookiesEnabledCookie||(this.settings.cookiesEnabledCookie&&g.cookie(this.settings.cookiesEnabledCookie)=="true")){this.switchZoom(this.getCookie());this.initLinks();this.setMode();this.markLinks()}},initLinks:function(){var i=this;this.links=h.find(this.settings.linkSelector,this.context);if(this.links.length==2){h.on(h.find(this.links[0],this.context),"click",null,{resize:"smaller"},i.resizeFont.bind(i));h.on(h.find(this.links[1],this.context),"click",null,{resize:"bigger"},i.resizeFont.bind(i))}else{if(this.links.length>2&&this.links.length==this.settings.zoomRange.length){a.each(this.links,function(j,k){h.on(j,"click",null,{resizeIndex:k},i.resizeFont.bind(i))})}}},setMode:function(){if(this.settings.mode=="data-attr"){this.settings.zoomRange=[];var i=this;a.each(this.links,function(j,k){i.settings.zoomRange.push(parseInt(h.getAttribute(j,"data-fontresizer")))})}},markLinks:function(){var i=this;a.each(this.links,function(l,m){h.removeClass(l,i.settings.linkActiveClass);h.removeClass(l,i.settings.linkDisabledClass)});var j;if(this.links.length==2){if(this.zoom<100){j=this.links[0]}else{if(this.zoom>100){j=this.links[1]}}}else{if(this.links.length>2&&this.zoom!=100){var k=g.inArray(this.zoom,this.settings.zoomRange);j=this.links[k]}}h.addClass(j,this.settings.linkActiveClass);if(this.zoom==this.settings.zoomRange[0]){h.addClass(this.links[0],this.settings.linkDisabledClass)}else{if(this.zoom==this.settings.zoomRange[this.settings.zoomRange.length-1]){h.addClass(this.links[this.links.length-1],this.settings.linkDisabledClass)}}},resizeFont:function(k){k.preventDefault();var i=this.zoom;if(typeof k.data.resizeIndex!="undefined"){i=this.settings.zoomRange[k.data.resizeIndex]}else{var j=g.inArray(this.zoom,this.settings.zoomRange);if(k.data.resize=="smaller"&&j>0){i=this.settings.zoomRange[j-1]}else{if(k.data.resize=="bigger"&&j<this.settings.zoomRange.length){i=this.settings.zoomRange[j+1]}}}this.switchZoom(i);this.markLinks();this.writeCookie()},switchZoom:function(o){if(typeof o==="number"&&o%1==0){if(o!=this.zoom){var j=null;if(this.browser.ie8){j=h.find(this.settings.pseudoElementSelector)}if(this.settings.cssStyle=="inline"||this.settings.cssStyle=="both"){h.css(this.body,"font-size",o+"%")}if(this.settings.cssStyle=="class"||this.settings.cssStyle=="both"){var k=this;var m=h.getClass(this.body).split(" ");var q="";var l=0;for(l=0;l<m.length;l++){if(m[l].indexOf(this.settings.cssClassPrefix)!=0){q+=(m[l]+" ")}}if(this.settings.cssClasses.length==this.settings.zoomRange.length){var p=g.inArray(o,this.settings.zoomRange);q+=(this.settings.cssClassPrefix+this.settings.cssClasses[p])}else{q+=(this.settings.cssClassPrefix+"-"+o)}h.setAttribute(this.body,"class",q);h.trigger(window,"resize")}if(this.browser.ie8){h.addClass(j,"js-pseudo-reload");var n=setTimeout(function(){h.removeClass(j,"js-pseudo-reload")},0)}if(this.browser.ie9){h.setAttribute(h.find("select"),"style","")}}this.zoom=o}},writeCookie:function(){g.cookie(this.settings.cookieName,this.zoom,{expires:14,path:"/"})},getCookie:function(){return parseInt(g.cookie(this.settings.cookieName))},browser:{ie8:(function(){var k=-1;if(navigator.appName==="Microsoft Internet Explorer"){var i=navigator.userAgent;var j=new RegExp(/MSIE ([0-9]{1,}[\.0-9]{0,})/);if(j.exec(i)!==null){k=parseFloat(RegExp.$1)}}return k!==-1&&k<9})(),ie9:h.hasClass("html","ie9"),ie10:window.navigator.msPointerEnabled,ie11:window.navigator.pointerEnabled}});return e});