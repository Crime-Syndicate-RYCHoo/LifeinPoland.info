/** @preserve
version 4.4.20, 18.10.2024
*/
(function(){if(_undef(window.yourcx)||typeof window.yourcx!="function"){window.yourcx=undefined;(function(y,o,u,r,c,x){y[c]=y[c]||function(){(y[c].q=y[c].q||[]).push(arguments)};if(x){if(typeof y[x]!="undefined"&&typeof y[x].q!="undefined")for(var i=0;i<y[x].q.length;i++)y[c].apply(null,y[x].q[i]);y[x]=y[c]}})(window,document,"script",".","yourcx","opiniac")}if(_undef(window.opiniac))(function(y,o,u,r,c,x){y[x]=y[c]})(window,document,"script",".","yourcx","opiniac");if(_undef(window.yourcx.loaded))window.yourcx.loaded=true;else return;if(_undef(window.yourcx.q))window.yourcx.q=[];var _config={products:{acceptable:["audit","checkout","quit","target","insert"],exclusive:["audit"],multiply:["insert","target"]},geolocation:{check:false},pageTypeFunc:function(pageType){},charEncodingTranslate:function(txt){return txt},analytics:{pathDimensions:["page.type","page.type_path"],processDimensionsFunc:function(key,val){},defaultParams:{session:{"user.logged":false},visitor:{"user.customer":false},events:{}},flags:{monitorHashChange:false,monitorHistoryChange:true,hashHistoryChangeAutoClean:true,hashHistoryChangeAutoRepeat:false,paths:true,events:true}},plugins:{},allowedSurveys:["87682805257e619d49b8e0dfdc14affa","c4f796afbc6267501964b46427b3f6ba","75455e062929d32a333868084286bb68","75e33da9b103b7b91dcd8da0abe1354b","880610aa9f9de9ea7c545169c716f477","b427426b8acd2c2e53827970f2c2f526","6e82873a32b95af115de1c414a1849cb","5e751896e527c862bf67251a474b3819","b38e5ff5f816ac6e4169bce9314b2996","9813b270ed0288e7c0388f0fd4ec68f5","1b9812b99fe2672af746cefda86be5f9","ccbd8ca962b80445df1f7f38c57759f0","a70dc40477bc2adceef4d2c90f47eb82","ff2cc3b8c7caeaa068f2abbc234583f5","4ebd440d99504722d80de606ea8507da","23fc4cba066f390a8cc729c7592b6ee8","86c4ad52768c511046fea7b2d42b300c","5f14615696649541a025d3d0f8e0447f","c6335734dbc0b1ded766421cfc611750","1006ff12c465532f8c574aeaa4461b16","b030afbb3a8af8fb0759241c97466ee4","8fc687aa152e8199fe9e73304d407bca","44ac09ac6a149136a4102ee4b4103ae6","f804d21145597e42851fa736e221da3f","12311d05c9aa67765703984239511212","379a7ba015d8bf1c70b8add2c287c6fa","8c59fd6fbe0e9793ec2b27971221cace","94aef38441efa3380a3bed3faf1f9d5d","c68c9c8258ea7d85472dd6fd0015f047","ef67f7c2d86352c2c42e19d20f881f53","0f21f0349462cacdc5796990d37760ae","a7a3d70c6d17a73140918996d03c014f","794288f252f45d35735a13853e605939","f15eda31a2da646eea513b0f81a5414d","0cdf61037d7053ca59347ab230818335","2bd235c31c97855b7ef2dc8b414779af"]};var _defaultSurveyConfig={};var _defaultProductConfig={};var _surveyPreRunCheck={};var _surveys={},_surveysByProducts={},_observer=new Observers,_mutationObserver=new MutationObservers(_observer),_arrayObserver=new ArrayObserver(_observer),_run_time=(new Date).getTime(),_storage=null,_analytics=null,_tablet=_detectMobile().tablet,_mobile=_detectMobile().phone,_clientId=934,_logging=false,_globalFireSurveyBlock=false,_globalWelcomeBlock=false,_postponedSurveys={};function fExtend(out){out=out||{};for(var i=1;i<arguments.length;i++){var obj=arguments[i];if(!obj)continue;for(var key in obj){if(obj.hasOwnProperty(key)){if(obj[key]===Object(obj[key])&&typeof obj[key]!="function"){if(out[key]!==Object(out[key]))out[key]={};out[key]=fExtend(out[key],obj[key])}else out[key]=obj[key]}}}return out}function _undef(a){return typeof a=="undefined"}function _pluginRegister(obj){for(var i=0;i<obj.config.events.length;i++){switch(obj.config.events[i]){case"receiveResult":_observer.on(obj.config.events[i],function(x){return function(data){var name=obj.config.name;if(!_undef(data.rules[name]))obj["on"+x](data.results,data.rules[name])}}(obj.config.events[i]));break;default:_observer.on(obj.config.events[i],function(x){return function(data){obj["on"+x](data)}}(obj.config.events[i]));break}}}function _detectMobile(){var apple_phone=/iPhone/i,apple_ipod=/iPod/i,apple_tablet=/iPad/i,android_phone=/(?=.*\bAndroid\b)(?=.*\bMobile\b)/i,android_tablet=/Android/i,amazon_phone=/(?=.*\bAndroid\b)(?=.*\bSD4930UR\b)/i,amazon_tablet=/(?=.*\bAndroid\b)(?=.*\b(?:KFOT|KFTT|KFJWI|KFJWA|KFSOWI|KFTHWI|KFTHWA|KFAPWI|KFAPWA|KFARWI|KFASWI|KFSAWI|KFSAWA)\b)/i,windows_phone=/Windows Phone/i,windows_tablet=/(?=.*\bWindows\b)(?=.*\bARM\b)/i,other_blackberry=/BlackBerry/i,other_blackberry_10=/BB10/i,other_opera=/Opera Mini/i,other_chrome=/(CriOS|Chrome)(?=.*\bMobile\b)/i,other_firefox=/(?=.*\bFirefox\b)(?=.*\bMobile\b)/i,seven_inch=new RegExp("(?:"+"Nexus 7"+"|"+"BNTV250"+"|"+"Kindle Fire"+"|"+"Silk"+"|"+"GT-P1000"+")","i");var match=function(regex,userAgent){return regex.test(userAgent)};var IsMobileClass=function(userAgent){var ua=userAgent||navigator.userAgent;var tmp=ua.split("[FBAN");if(typeof tmp[1]!=="undefined"){ua=tmp[0]}tmp=ua.split("Twitter");if(typeof tmp[1]!=="undefined"){ua=tmp[0]}this.apple={phone:match(apple_phone,ua),ipod:match(apple_ipod,ua),tablet:!match(apple_phone,ua)&&match(apple_tablet,ua),device:match(apple_phone,ua)||match(apple_ipod,ua)||match(apple_tablet,ua)};this.amazon={phone:match(amazon_phone,ua),tablet:!match(amazon_phone,ua)&&match(amazon_tablet,ua),device:match(amazon_phone,ua)||match(amazon_tablet,ua)};this.android={phone:match(amazon_phone,ua)||match(android_phone,ua),tablet:!match(amazon_phone,ua)&&!match(android_phone,ua)&&(match(amazon_tablet,ua)||match(android_tablet,ua)),device:match(amazon_phone,ua)||match(amazon_tablet,ua)||match(android_phone,ua)||match(android_tablet,ua)};this.windows={phone:match(windows_phone,ua),tablet:match(windows_tablet,ua),device:match(windows_phone,ua)||match(windows_tablet,ua)};this.other={blackberry:match(other_blackberry,ua),blackberry10:match(other_blackberry_10,ua),opera:match(other_opera,ua),firefox:match(other_firefox,ua),chrome:match(other_chrome,ua),device:match(other_blackberry,ua)||match(other_blackberry_10,ua)||match(other_opera,ua)||match(other_firefox,ua)||match(other_chrome,ua)};this.seven_inch=match(seven_inch,ua);this.any=this.apple.device||this.android.device||this.windows.device||this.other.device||this.seven_inch;this.phone=this.apple.phone||this.android.phone||this.windows.phone;this.tablet=this.apple.tablet||this.android.tablet||this.windows.tablet;if(typeof window==="undefined"){return this}};var IM=new IsMobileClass;IM.Class=IsMobileClass;return IM}function _out(txt){txt=_config.charEncodingTranslate(txt);return txt}function _log(msg){if(!_logging)return;var a=document.getElementById("yourcx.log");if(!a){a=document.createElement("div");a.setAttribute("id","yourcx.log");document.body.appendChild(a)}var err=new Error;a.innerHTML=a.innerHTML+"<br />"+(new Date).getTime()+" "+msg+"<br />"+err.stack}var _generateGUID=typeof window.crypto!="undefined"&&typeof window.crypto.getRandomValues!="undefined"?function(){var buf=new Uint16Array(8);window.crypto.getRandomValues(buf);var S4=function(num){var ret=num.toString(16);while(ret.length<4){ret="0"+ret}return ret};return S4(buf[0])+S4(buf[1])+"-"+S4(buf[2])+"-"+S4(buf[3])+"-"+S4(buf[4])+"-"+S4(buf[5])+S4(buf[6])+S4(buf[7])}:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(c){var r=Math.random()*16|0,v=c=="x"?r:r&3|8;return v.toString(16)})};var _cookie={set:function(e,t,n,r,i,s){var o=e+"="+escape(t);if(n){var u=new Date;var a=new Date(u.getTime()+n*1e3*60);o+="; expires="+a.toGMTString()}if(r)o+="; path="+escape(r);if(i)o+="; domain="+escape(i);if(s)o+="; secure";document.cookie=o;return this},get:function(e){var t=document.cookie.match("(^|;) ?"+e+"=([^;]*)(;|$)");if(t)return unescape(t[2]);else return null}};var _misc={};_misc.url={getQueryStringObj:function(query){if(typeof query=="undefined")query=document.location.search;var obj={},qPos=query.indexOf("?"),tokens=query.substr(qPos+1).split("&"),i=tokens.length-1;if(qPos!==-1||query.indexOf("=")!==-1){for(;i>=0;i--){var s=tokens[i].split("=");obj[unescape(s[0])]=s.hasOwnProperty(1)?unescape(s[1]):null}}return obj}};_config.analytics.flags.paths = true;
_config.analytics.flags.events = true;
_config.analytics.flags.monitorHashChange = false;
_config.analytics.flags.monitorHistoryChange = false;

function _runConfigAndConditions(){
 _defaultProductConfig['quit'] = {"config":{"methods":{"noMouseMoveOut":{"delay":0,"minTimeWithoutMovement":2,"maxTimeWithoutMovement":65,"probability":1},"timeOnPageOut":{"enabled":true,"minTimeOnPage":5},"noScrollTouchOut":{"enabled":true,"delay":1,"minTimeWithoutMovement":2,"maxTimeWithoutMovement":140},"onBeforeUnload":{"enabled":true}},"display":{"minHeight":1199},"surveyDelay":0.1,"blockDaysAfterSurveyShown":27}};

 _defaultProductConfig['audit'] = {"skin":"c0","config":{"pictogramMode":"right","pictogramTemplate":"https://static.yourcx.io\/customers\/934\/files\/icon.png"},"od":{"skins":{"c0":{"a":{"c":"#222222","ba":"#ffffff","bo":"#0068b4"},"p":"_navyblue","s":null,"ah":{"c":"#000000","ba":"#f3f3f3","bo":"#0068b4"},"as":"div#yourcx_blk > div { border: none;  }\ndiv#yourcx_blk img { transform: rotate(90deg); width: 40px; margin-left: auto; }\ndiv#yourcx_blk a.link { border-width: 1px; padding: 0px; flex-direction: row-reverse; }\ndiv#yourcx_blk a.link div { padding-left: 10px; padding-right: 10px; line-height: 38px; border-right: 1px solid #ddd; border-top: 1px solid #ddd; border-bottom: 1px solid #ddd; }\ndiv#yourcx_layer { z-index: 16777272; }\ndiv#yourcx_blk { top: 56%; }\n"},"c1":{"a":{"c":"#222222","ba":"#ffffff","bo":"#0068b4"},"p":"_navyblue","s":null,"ah":{"c":"#000000","ba":"#eeeeee","bo":"#0068b4"},"as":"div#yourcx_blk { bottom: 40%; top: unset; z-index: 100!important; }\ndiv#yourcx_blk > div { border: none;  }\ndiv#yourcx_blk img { transform: rotate(90deg); width: 30px; margin-left: auto; }\ndiv#yourcx_blk a.link { border-width: 1px; padding: 0px; flex-direction: row-reverse; }\ndiv#yourcx_blk a.link div { padding-left: 10px; padding-right: 10px; line-height: 28px; border-right: 1px solid #ddd; border-top: 1px solid #ddd; border-bottom: 1px solid #ddd; }\ndiv#yourcx_layer { z-index: 16777272; }\ndiv#yourcx_blk { top: 56%; }\n"},"c2":{"a":{"c":"#FFFFFF","ba":"#199BFA","bo":"#199BFA"},"p":"_navyblue","s":null,"ah":{"c":"#ffffff","ba":"#2E8CD0","bo":"#2E8CD0"},"as":"div#yourcx_blk img { transform: rotate(90deg); border-radius: inherit; width: 30px; background-color: #ffffff; }\ndiv#yourcx_blk a { padding: 0px 0px 0px 12px; border-width: 0px; }\ndiv#yourcx_blk { top: 40%; z-index: 9998!important; }\ndiv#yourcx_blk a.link { margin: 0px; padding: 0px 0px 0px 12px; margin-bottom: 0px; }\n"}}}};

 _defaultProductConfig['target'] = {"surveyMode":"slide","config":{"probability":0.1,"blockDaysAfterSurveyFilled":58}};

 _defaultProductConfig['checkout'] = {"config":{"methods":{"autoWelcome":{"delaySeconds":610,"probability":1},"timeOnPageOut":{"minTimeOnPage":11,"maxTimeOnPage":320,"probability":1},"notProcessPage":{"pageNum":5,"probability":1},"noScrollTouchOut":{"enabled":true}},"display":{"minHeight":470}}};

 _config.plugins['yourcx.integrate.ga'] = [];
var _randomNumberForTriggerSet = Math.random();

_defaultSurveyConfig['ccbd8ca962b80445df1f7f38c57759f0'] = fExtend(_defaultSurveyConfig['ccbd8ca962b80445df1f7f38c57759f0'], {"audit":{"surveyMode":"slide","linkText":"Zg\u0142o\u015b b\u0142\u0105d","skin":"c0","config":{"pictogramMode":"right","imageText":"Zg\u0142o\u015b b\u0142\u0105d","display":{"minHeight":340}}}});

_defaultSurveyConfig['a70dc40477bc2adceef4d2c90f47eb82'] = fExtend(_defaultSurveyConfig['a70dc40477bc2adceef4d2c90f47eb82'], {"audit":{"surveyMode":"slide","linkText":"Zg\u0142o\u015b b\u0142\u0105d","skin":"c0","config":{"pictogramMode":"right","imageText":"Zg\u0142o\u015b b\u0142\u0105d","display":{"minHeight":340}}}});

_defaultSurveyConfig['8c59fd6fbe0e9793ec2b27971221cace'] = fExtend(_defaultSurveyConfig['8c59fd6fbe0e9793ec2b27971221cace'], {"audit":{"surveyMode":"layer","linkText":"Oce\u0144 nas","skin":"c2","config":{"pictogramTemplate":"https://static.yourcx.io\/customers\/934\/files\/autopay2.png"}}});

_defaultSurveyConfig['75455e062929d32a333868084286bb68'] = fExtend(_defaultSurveyConfig['75455e062929d32a333868084286bb68'], {"audit":{"surveyMode":"layer","linkText":"Oce\u0144 proces rejestracji"}});

_defaultSurveyConfig['94aef38441efa3380a3bed3faf1f9d5d'] = fExtend(_defaultSurveyConfig['94aef38441efa3380a3bed3faf1f9d5d'], {"audit":{"surveyMode":"slide","linkText":"Einen Fehler melden","skin":"c0","config":{"pictogramMode":"right","imageText":"Einen Fehler melden","display":{"minHeight":340}}}});

_defaultSurveyConfig['9813b270ed0288e7c0388f0fd4ec68f5'] = fExtend(_defaultSurveyConfig['9813b270ed0288e7c0388f0fd4ec68f5'], {"audit":{"surveyMode":"layer","linkText":"Oce\u0144 panel","skin":"c0"}});

_defaultSurveyConfig['f15eda31a2da646eea513b0f81a5414d'] = fExtend(_defaultSurveyConfig['f15eda31a2da646eea513b0f81a5414d'], {"insert":{"config":{"probability":1}}});

_defaultSurveyConfig['f804d21145597e42851fa736e221da3f'] = fExtend(_defaultSurveyConfig['f804d21145597e42851fa736e221da3f'], {"audit":{"surveyMode":"slide","linkText":"Report an error","skin":"c0","config":{"pictogramMode":"right","imageText":"Report an error","display":{"minHeight":340}}}});

_defaultSurveyConfig['44ac09ac6a149136a4102ee4b4103ae6'] = fExtend(_defaultSurveyConfig['44ac09ac6a149136a4102ee4b4103ae6'], {"audit":{"linkText":"Zg\u0142o\u015b b\u0142\u0105d"}});

_defaultSurveyConfig['379a7ba015d8bf1c70b8add2c287c6fa'] = fExtend(_defaultSurveyConfig['379a7ba015d8bf1c70b8add2c287c6fa'], {"insert":{"config":{"display":{"minHeight":390,"addHeight":30}}}});

_defaultSurveyConfig['c68c9c8258ea7d85472dd6fd0015f047'] = fExtend(_defaultSurveyConfig['c68c9c8258ea7d85472dd6fd0015f047'], {"insert":{"config":{"display":{"minHeight":390,"addHeight":30}}}});

_defaultSurveyConfig['ef67f7c2d86352c2c42e19d20f881f53'] = fExtend(_defaultSurveyConfig['ef67f7c2d86352c2c42e19d20f881f53'], {"insert":{"config":{"display":{"minHeight":390,"addHeight":30}}}});



 if((( _mobile === true))) 
 {
 fExtend(_defaultProductConfig['target'], {"config":{"probability":0.05}});

fExtend(_defaultProductConfig['audit'], {"skin":"c1"});


_defaultSurveyConfig['ccbd8ca962b80445df1f7f38c57759f0'] = fExtend(_defaultSurveyConfig['ccbd8ca962b80445df1f7f38c57759f0'], {"audit":{"surveyMode":"layer","skin":"c1"}});

_defaultSurveyConfig['a70dc40477bc2adceef4d2c90f47eb82'] = fExtend(_defaultSurveyConfig['a70dc40477bc2adceef4d2c90f47eb82'], {"audit":{"surveyMode":"layer","skin":"c1"}});

_defaultSurveyConfig['94aef38441efa3380a3bed3faf1f9d5d'] = fExtend(_defaultSurveyConfig['94aef38441efa3380a3bed3faf1f9d5d'], {"audit":{"surveyMode":"layer","linkText":"Einen Fehler melden","skin":"c1"}});
}


 if(((document.location.hostname.match(/^platnosci\.bm\.pl$/)))) 
 {
 if (document.location.hash == '#yourcx') {
  yourcx('survey', '26505e0494662534f633586941b77d0c', { product: 'audit' });
}

if (document.location.hash == '#yourcx2') {
  yourcx('survey', 'ccbd8ca962b80445df1f7f38c57759f0', { product: 'audit' });
}


}


 if(((document.location.hostname.match(/^developers\.bluemedia\.pl$/)))) 
 {
 // version 2.3.1, 24.06.2022
function YourcxScreenshot() {
    var caller = arguments[0],
        yourcxSurveyBlockId = arguments[1],
        yourcxBgBlockId = arguments[2],
        upConfig = arguments[3],
        loadScripts = 0,
        $ = null;

    var settings = {
        proxy: '//surveys.yourcx.io/html2canvasproxy_1.1.0.php',
        jQuery: 'https://static.yourcx.io/vendor/jquery/jquery.1.11.3.min.js',
        ES6PromiseAuto: 'https://static.yourcx.io/vendor/stefanpenner/es6-promise.auto.js',
        letterRendering: false,
        strokeStyle: 'black',
 shadowColor:      'rgba(0, 0, 0, 0.498)',
        shadowOffsetX: 0,
        shadowOffsetY: 0,
        shadowBlur: 4,
        lineJoin: 'bevel',
        lineWidth: 2,
        html2canvasURL: 'https://static.yourcx.io/vendor/hertzen/html2canvas_1.0.0-alpha.11.js',
        isDraggable: true,
        screenshotStroke: true,
        highlightElement: false,
        addComment: true,
        autoScreenshot: false,
        createPng: false,
        infoCloseTime: 2500, // in miliseconds
        texts: {
            logo: 'Zrzut ekranu',
            description: 'Żółtym zaznacz istotny element,<br>czarnym zasłoń poufne dane.',
            select: 'Zaznacz',
            selectLabel: 'Zaznacz istotny obszar.',
            blackout: 'Zasłoń',
            blackoutLabel: 'Zasłoń prywatne dane.',
            finish: 'Po zaznaczeniu kliknij i wróć do badania',
            loader: 'Robię zrzut ekranu, poczekaj proszę chwilę :)'
        }
    };
    var tabindexElems = [], fixedPositionElems = [];

    //--------------------------------------------------------------------
    function loadScript(_url, _onload) {
        var script;

        script = document.createElement("script");
        script.src = _url;
        script.onload = (scriptLoader)(script, _onload);

        ++loadScripts;

        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(script, s);
    };


    //--------------------------------------------------------------------
    //script onload function to provide support for IE as well
    function scriptLoader(script, func) {
        if (script.onload === undefined) {
            // IE lack of support for script onload
            if (script.onreadystatechange !== undefined) {
                var intervalFunc = function () {
                    if (script.readyState !== "loaded" && script.readyState !== "complete") {
                        window.setTimeout(intervalFunc, 250);
                    } else {
                        // it is loaded
                        func();
                    }
                };
                window.setTimeout(intervalFunc, 250);
            }
        } else {
            return func;
        }
    };

    //--------------------------------------------------------------------
    function addCss(_block) {
        var style = document.createElement('style'), s = '', os = '#yourcx_screenshot', cs = '.yourcx_screenshot';
        style.setAttribute('type', 'text/css');

        s += os + "-module p {  font-size: 13px; line-height: 18px; }\n";
        s += os + "-canvas { position: absolute; top: 0; left: 0; }\n";
        s += cs + "-helper { background: rgba(0,0,0,0); cursor: default; }\n";
        s += cs + "-helper-comment { position:absolute; display: flex; align-items: center; background: #444; color: #ffffff; border-top: 1px solid #ccc; padding: 0px 4px 0px 4px; line-height: 14px; }\n";
        s += cs + "-helper-comment input { flex-grow: 1; margin-left: 5px; color: #000000; }\n";
        s += cs + "-helper[data-type=\"highlight\"]>" + cs + "-helper-inner {  background: rgba(0,68,255,0.1) }\n";
        s += os + "-close { cursor: pointer; position: absolute; display:block; box-sizing:border-box; width: 20px; height: 20px; border-width:3px; border-style: solid; border-color: #888888; border-radius:100%; background: -webkit-linear-gradient(-45deg, transparent 0%, transparent 46%, white 46%,  white 56%,transparent 56%, transparent 100%), -webkit-linear-gradient(45deg, transparent 0%, transparent 46%, white 46%,  white 56%,transparent 56%, transparent 100%); background-color: #888888; box-shadow:0px 0px 0px 0px rgba(0,0,0,0.5); transition: all 0.3s ease; }\n";
        s += os + "-close:hover {  border-color: #000000; background-color: #000000;box-shadow:0px 0px 1px 1px rgba(0,0,0,0.5); }\n";
        s += os + "-highlighter { display: none; bottom: 50px; right: 50px; width: 255px; position: fixed; }\n";
        s += os + "-highlighter { align-items: center; background-color: white; border-radius: 2px; box-shadow: rgba(0, 0, 0, 0.14) 0px 24px 38px 3px, rgba(0, 0, 0, 0.12) 0px 9px 46px 8px, rgba(0, 0, 0, 0.2) 0px 11px 15px -7px; cursor: pointer; display: -webkit-inline-flex; flex-direction: row; height: 56px; min-width: 232px; pointer-events: auto; z-index: 40000; }\n";
        s += "button" + cs + "-active { background-color: rgb(224, 224, 224) !important; }\n";
        s += "button" + cs + "-sethighlight, button" + cs + "-setblackout{ background-color: rgb(255, 255, 255); align-items: center; border: none; box-sizing: border-box; cursor: pointer; display: -webkit-flex; justify-content: center; outline: none; padding: 10px; pointer-events: auto; position: relative; height: 56px; width: 56px; }\n";
        s += "button" + cs + "-sethighlight:hover, button" + cs + "-setblackout:hover { box-shadow: inset 0 0px 6px rgba(0,0,0,.3); background-color: #ddd; background-image: linear-gradient(top , #e5e5e5, #d8d8d8); border: 1px solid #ccc; color: #333 !important; }\n";
        s += "button" + cs + "-setblackout { align-items: center; border: none; box-sizing: border-box; cursor: pointer; display: -webkit-flex; justify-content: center; outline: none; padding: 10px; pointer-events: auto; position: relative; height: 56px; width: 56px; }\n";
        s += cs + "-outer_btn { display: -webkit-flex; position: relative; }\n";
        s += os + "-info { display: none; position: fixed; right: 50px; bottom: 50px; z-index:39999; background-color: rgba(255, 255, 255, 0.6); border-radius: 12px; color: rgb(117, 117, 117); font: 400 34px/40px Roboto, RobotoDraft, Helvetica, Arial, sans-serif; margin-bottom: 72px; padding: 22px 0px; text-align: center; width: 656px; }\n";
        s += cs + "-highlighter_inner { cursor: -webkit-grab; height: 56px; padding: 0px 12px; position: relative; }\n";
        s += os + "-highlighter-next { background-color: transparent; border-color: transparent; border-radius: 2px; box-sizing: border-box; color: inherit; cursor: pointer; font: 500 14px/20px Roboto, RobotoDraft, Helvetica, Arial, sans-serif; height: 36px; margin: 0px; min-width: 64px; opacity: 1; outline: none; padding: 0px 8px; }\n";
        s += cs + "-labelbtn { align-items: center; align-self: stretch; box-sizing: border-box; cursor: pointer; display: -webkit-inline-flex; min-height: 48px; padding: 0px 8px; color: rgb(66, 133, 244); pointer-events: auto; }\n";
        s += cs + "-spanbtn { display: inline-block; position: relative; height: 36px; width: 36px; }\n";


        s += cs + "-loader { position: fixed; left: 45%; top: 40%; display: flex; justify-content: center; flex-direction: column; align-items: center; }\n";
        s += cs + "-loader div.yourcx_screenshot-loader_text { margin-top: 15px; font-size: 14px; color: #ffffff; font-weight: bold; padding: 5px; background-color: #000000; }\n";
        s += cs + "-loader div.yourcx_screenshot-loader_spin { border: 16px solid #283579; border-top: 16px solid #ff6600; border-radius: 50%; width: 120px; height: 120px; animation: yourcx_spin 2s linear infinite; }\n";
        s += "@-webkit-keyframes yourcx_spin { 0% { -webkit-transform: rotate(0deg); transform: rotate(0deg); } 100% { -webkit-transform: rotate(360deg); transform: rotate(360deg); } } @keyframes yourcx_spin { 0% { -webkit-transform: rotate(0deg); transform: rotate(0deg); } 100% { -webkit-transform: rotate(360deg); transform: rotate(360deg); } }\n";

        s += os + "-module h3 { font-weight: bold; font-size: 15px; margin: 8px 0; }\n";

        if (style.styleSheet)
            style.styleSheet.cssText = s;
        else
            style.appendChild(document.createTextNode(s));
        document.getElementsByTagName("head")[0].appendChild(style);
    };


    function runH2c() {
        // clean tabindexes
        $('* [tabindex]').each(function (i) {
            tabindexElems.push({
                elem: this,
                index: $(this).attr('tabindex')
            });

            $(this).removeAttr('tabindex');
        });

        var now = Date.now();
        var canDraw = false,
            creatingScreenshot = false,
            img = '',
            h = $(document).height(),
            w = $(document).width(),
            tpl = '<div id="yourcx_screenshot-module">' +
                '<div id="yourcx_screenshot-info">' + _out(settings.texts.description) + '</div>' +
                '<div id="yourcx_screenshot-highlighter"><div class="yourcx_screenshot-highlighter_inner" ><svg xmlns="https://www.w3.org/2000/svg" focusable="false" aria-label="Drag" fill="#BDBDBD" height="56" width="16" viewBox="-2 2 12 12"><circle cx="1.5" cy="1.5" r="1.5"></circle><circle cx="1.5" cy="7.5" r="1.5"></circle><circle cx="1.5" cy="13.5" r="1.5"></circle><circle cx="6.5" cy="1.5" r="1.5"></circle><circle cx="6.5" cy="7.5" r="1.5"></circle><circle cx="6.5" cy="13.5" r="1.5"></circle></svg></div>' +
                '<div class="yourcx_screenshot-outer_btn"><button class="yourcx_screenshot-sethighlight yourcx_screenshot-active" type="button" title="' + _out(settings.texts.selectLabel) + '"><span class="yourcx_screenshot-spanbtn"><svg xmlns="https://www.w3.org/2000/svg" focusable="false" aria-label="" viewBox="0 0 24 24" height="36" width="36" fill="#FDD835"><path d="M3 3h18v18H3z"></path></svg><svg xmlns="https://www.w3.org/2000/svg" focusable="false" aria-label="" fill="#757575" viewBox="0 0 24 24" height="36" width="36" style="left: 0px; position: absolute; top: 0px;"><path d="M21 17h-2.58l2.51 2.56c-.18.69-.73 1.26-1.41 1.44L17 18.5V21h-2v-6h6v2zM19 7h2v2h-2V7zm2-2h-2V3.08c1.1 0 2 .92 2 1.92zm-6-2h2v2h-2V3zm4 8h2v2h-2v-2zM9 21H7v-2h2v2zM5 9H3V7h2v2zm0-5.92V5H3c0-1 1-1.92 2-1.92zM5 17H3v-2h2v2zM9 5H7V3h2v2zm4 0h-2V3h2v2zm0 16h-2v-2h2v2zm-8-8H3v-2h2v2zm0 8.08C3.9 21.08 3 20 3 19h2v2.08z"></path></svg></span></button></div>' +
                '<div class="yourcx_screenshot-outer_btn"><button class="yourcx_screenshot-setblackout" type="button" title="' + _out(settings.texts.blackoutLabel) + '" ><span class="yourcx_screenshot-spanbtn"><svg xmlns="https://www.w3.org/2000/svg" focusable="false" aria-label="" viewBox="0 0 24 24" height="36" width="36" fill="#000"><path d="M3 3h18v18H3z"></path></svg></span></button></div>' +
                '<div style="display: inline-flex;"><label class="yourcx_screenshot-labelbtn" ><button type="button" id="yourcx_screenshot-highlighter-next"><span style="pointer-events: none;">GOTOWE</span></button></label></div></div>' +
                '<canvas id="yourcx_screenshot-canvas"></canvas><div id="yourcx_screenshot-helpers"></div></div>';

        $('body').append(tpl);

        moduleStyle = {
            'position': 'absolute',
            'left': '0px',
            'top': '0px'
        };
        canvasAttr = {
            'width': w,
            'height': h
        };

        $('#yourcx_screenshot-module').css(moduleStyle);
        $('#yourcx_screenshot-canvas').attr(canvasAttr).css('z-index', '30000');

        $('#' + yourcxSurveyBlockId).hide();
        $('#' + yourcxBgBlockId).hide();

        var audit = $('#yourcx_blk');
        if (audit)
            $(audit).hide();

        canDraw = true;
        $('#yourcx_screenshot-canvas').css('cursor', 'crosshair');
        $('#yourcx_screenshot-helpers').show();
        $('#yourcx_screenshot-highlighter').show();
        $('#yourcx_screenshot-info').show();

        if (settings.isDraggable) {
            $('#yourcx_screenshot-highlighter').on('mousedown', function (e) {
                var $d = $(this).addClass('yourcx_screenshot-draggable'),
                    drag_h = $d.outerHeight(),
                    drag_w = $d.outerWidth(),
                    pos_y = $d.offset().top + drag_h - e.pageY,
                    pos_x = $d.offset().left + drag_w - e.pageX;
                $d.css('z-index', 40000).parents().on('mousemove', function (e) {
                    _top = e.pageY + pos_y - drag_h;
                    _left = e.pageX + pos_x - drag_w;
                    _bottom = drag_h - e.pageY;
                    _right = drag_w - e.pageX;

                    if (_left < 0) _left = 0;
                    if (_top < 0) _top = 0;
                    if (_right > $(window).width())
                        _left = $(window).width() - drag_w;
                    if (_left > $(window).width() - drag_w)
                        _left = $(window).width() - drag_w;
                    if (_bottom > $(document).height())
                        _top = $(document).height() - drag_h;
                    if (_top > $(document).height() - drag_h)
                        _top = $(document).height() - drag_h;

                    $('.yourcx_screenshot-draggable').offset({
                        top: _top,
                        left: _left
                    }).on("mouseup", function () {
                        $(this).removeClass('yourcx_screenshot-draggable');
                    });
                });
                e.preventDefault();
            }).on('mouseup', function () {
                $(this).removeClass('yourcx_screenshot-draggable');
                $(this).parents().off('mousemove mousedown');
            });
        }

        var ctx = $('#yourcx_screenshot-canvas')[0].getContext('2d');

        if (!settings.autoScreenshot) {
            ctx.fillStyle = 'rgba(102,102,102,0.5)';
            console.log($('#yourcx_screenshot-canvas').width(), $('#yourcx_screenshot-canvas').height());
            
            ctx.fillRect(0, 0, $('#yourcx_screenshot-canvas').width(), $('#yourcx_screenshot-canvas').height());
        }

        var rect = {};
        var drag = false;
        var highlight = 1;
        var rectangleCounter = 0;

        $(document).on('mousedown', '#yourcx_screenshot-canvas', function (e) {
            if (canDraw) {

                rect.startX = e.pageX - $(this).offset().left;
                rect.startY = e.pageY - $(this).offset().top;
                rect.w = 0;
                rect.h = 0;
                drag = true;
            }
        });

        $(document).on('mousedown', '.yourcx_screenshot-helper', function (e) {
          if (canDraw && !highlight) {

             rect.startX = e.pageX;
             rect.startY = e.pageY;
             rect.w = 0;
             rect.h = 0;
             drag = true;
          }
        });

        $(document).on('mouseup', function () {
            if (canDraw) {
                drag = false;

                var dtop = rect.startY,
                    dleft = rect.startX,
                    dwidth = rect.w,
                    dheight = rect.h,
                    dZIndex = 30000;
             
                dtype = 'highlight';

                if ((typeof(dwidth) == 'undefined') || (typeof(dheight) == 'undefined')) return;
                if (dwidth == 0 || dheight == 0) return;

                if (dwidth < 0) {
                    dleft += dwidth;
                    dwidth *= -1;
                }
                if (dheight < 0) {
                    dtop += dheight;
                    dheight *= -1;
                }

                if (dtop + dheight > $(document).height())
                    dheight = $(document).height() - dtop;
                if (dleft + dwidth > $(document).width())
                    dwidth = $(document).width() - dleft;

                if (highlight == 0) {
                    dtype = 'blackout';
                    dZIndex = 30010;
                }

                $('#yourcx_screenshot-helpers').append('<div data-method="drag" data-rectangle="' + rectangleCounter + '" class="yourcx_screenshot-helper" data-type="' + dtype + '" data-time="' + Date.now() + '" style="position:absolute;top:' + dtop + 'px;left:' + dleft + 'px;width:' + dwidth + 'px;height:' + dheight + 'px;z-index:'+ dZIndex +';"></div>');

                if (settings.addComment && (dtype == 'highlight')) {
                    dwidth = Math.max(dwidth, 300);
                    $('#yourcx_screenshot-helpers').append('<div data-rectangle="' + rectangleCounter + '" class="yourcx_screenshot-helper-comment" style="position:absolute;top:' + (dtop + dheight) + 'px;left:' + dleft + 'px;width:' + dwidth + 'px;height:30px;z-index:30000;"><span>Dodaj komentarz: </span><input style="z-index: 30001;" name="rectangleComment' + rectangleCounter + '" title="" value="" type="text" /></div>');
                }
                ++rectangleCounter;

                redraw(ctx);
                rect.w = 0;
            }

        });

        $(document).on('mousemove', function (e) {
            if (canDraw && drag) {
                $('#yourcx_screenshot-highlighter').css('cursor', 'default');

                rect.w = (e.pageX - $('#yourcx_screenshot-canvas').offset().left) - rect.startX;
                rect.h = (e.pageY - $('#yourcx_screenshot-canvas').offset().top) - rect.startY;

                ctx.clearRect(0, 0, $('#yourcx_screenshot-canvas').width(), $('#yourcx_screenshot-canvas').height());

                ctx.fillStyle = 'rgba(102,102,102,0.5)';
                ctx.fillRect(0, 0, $('#yourcx_screenshot-canvas').width(), $('#yourcx_screenshot-canvas').height());
                $('.yourcx_screenshot-helper').each(function () {
                    if ($(this).attr('data-type') == 'highlight')
                        drawlines(ctx, parseInt($(this).css('left'), 10), parseInt($(this).css('top'), 10), $(this).width(), $(this).height());
                });
                if (highlight == 1) {
                    drawlines(ctx, rect.startX, rect.startY, rect.w, rect.h);
                    ctx.clearRect(rect.startX, rect.startY, rect.w, rect.h);
                }
                $('.yourcx_screenshot-helper').each(function () {
                    if ($(this).attr('data-type') == 'highlight') {
                        ctx.clearRect(parseInt($(this).css('left'), 10), parseInt($(this).css('top'), 10), $(this).width(), $(this).height());
                    }
                });
                $('.yourcx_screenshot-helper').each(function () {
                    if ($(this).attr('data-type') == 'blackout') {
                        ctx.fillStyle = 'rgba(0,0,0,1)';
                        ctx.fillRect(parseInt($(this).css('left'), 10), parseInt($(this).css('top'), 10), $(this).width(), $(this).height())
                    }
                });
                if (highlight == 0) {
                    ctx.fillStyle = 'rgba(0,0,0,0.5)';
                    ctx.fillRect(rect.startX, rect.startY, rect.w, rect.h);
                }
            }
        });

        if (settings.highlightElement) {
            var highlighted = [],
                hidx = 0;

            $(document).on('mousemove click', '#yourcx_screenshot-canvas', function (e) {
                if (canDraw) {
                    var elem = null;

                    redraw(ctx);

                    $('#yourcx_screenshot-canvas').css('cursor', 'crosshair');

                    $('#yourcx_screenshot-canvas').css('visibility', 'hidden');
                    elem = document.elementFromPoint(e.clientX, e.clientY);
                    $('#yourcx_screenshot-canvas').css('visibility', 'visible');

                    if (elem) {
                        if (($(elem).attr('data-highlighted') === 'true') ||
                            ($(elem)[0].id == '#yourcx_screenshot-module') ||
                            ($.inArray($(elem).prop("tagName").toLowerCase(), ['body', 'script', 'head', 'html', 'div']) !== -1) ||
                            ($(elem).parents('#yourcx_screenshot-module').length))
                            return;
                    }

                    var $toHighlight = $(elem);

                    if ($toHighlight && !drag) {
                        $('#yourcx_screenshot-canvas').css('cursor', 'pointer');

                        var _x = $toHighlight.offset().left - 2,
                            _y = $toHighlight.offset().top - 2,
                            _w = $toHighlight.width() + parseInt($toHighlight.css('padding-left'), 10) + parseInt($toHighlight.css('padding-right'), 10) + 6,
                            _h = $toHighlight.height() + parseInt($toHighlight.css('padding-top'), 10) + parseInt($toHighlight.css('padding-bottom'), 10) + 6;

                        if (highlight == 1) {
                            drawlines(ctx, _x, _y, _w, _h);
                            ctx.clearRect(_x, _y, _w, _h);
                            dtype = 'highlight';
                        }

                        $('.yourcx_screenshot-helper').each(function () {
                            if ($(this).attr('data-type') == 'highlight')
                                ctx.clearRect(parseInt($(this).css('left'), 10), parseInt($(this).css('top'), 10), $(this).width(), $(this).height());
                        });

                        if (highlight == 0) {
                            dtype = 'blackout';
                            ctx.fillStyle = 'rgba(0,0,0,0.5)';
                            ctx.fillRect(_x, _y, _w, _h);
                        }

                        $('.yourcx_screenshot-helper').each(function () {
                            if ($(this).attr('data-type') == 'blackout') {
                                ctx.fillStyle = 'rgba(0,0,0,1)';
                                ctx.fillRect(parseInt($(this).css('left'), 10), parseInt($(this).css('top'), 10), $(this).width(), $(this).height());
                            }
                        });

                        if (e.type == 'click' && e.pageX == rect.startX && e.pageY == rect.startY) {
                            $('#yourcx_screenshot-helpers').append('<div data-method="click" data-rectangle="' + rectangleCounter + '" class="yourcx_screenshot-helper" data-highlight-id="' + hidx + '" data-type="' + dtype + '" data-time="' + Date.now() + '" style="position:absolute;top:' + _y + 'px;left:' + _x + 'px;width:' + _w + 'px;height:' + _h + 'px;z-index:30000;"></div>');

                            if (settings.addComment && (dtype == 'highlight')) {
                                var dwidth = Math.max(_w, 300);
                                $('#yourcx_screenshot-helpers').append('<div data-rectangle="' + rectangleCounter + '" class="yourcx_screenshot-helper-comment" style="position:absolute;top:' + (_y + _h) + 'px;left:' + (_x - 1) + 'px;width:' + dwidth + 'px;height:30px;z-index:30000;"><span>Dodaj komentarz: </span><input type="text" /></div>');
                            }
                            ++rectangleCounter;

                            highlighted.push(hidx);
                            ++hidx;
                            redraw(ctx);
                        }
                    }
                }
            });
        }

        $(document).on('mouseleave', 'body,#yourcx_screenshot-canvas', function () {
            redraw(ctx);
        });

        $(document).on('mouseenter', '.yourcx_screenshot-helper', function () {
            redraw(ctx);
        });

        $(document).on('mouseenter mouseleave', '.yourcx_screenshot-helper', function (e) {
            if (drag)
                return;

            rect.w = 0;
            rect.h = 0;

            if (e.type === 'mouseenter') {
                $(this).append('<div class="yourcx_screenshot-helper-inner" style="width:' + ($(this).width() - 2) + 'px;height:' + ($(this).height() - 2) + 'px;position:absolute;margin:1px;"></div>');
                $(this).append('<div id="yourcx_screenshot-close"></div>');

                $(this).find('#yourcx_screenshot-close').css({
                    'top': '-12px',
                    'left': $(this).width() - ($(this).find('#yourcx_screenshot-close').width() / 2) + 'px'
                });

                if ($(this).attr('data-type') == 'blackout') {
                    $(this).css('z-index', '30011');
                    /* redraw white */
                    ctx.clearRect(0, 0, $('#yourcx_screenshot-canvas').width(), $('#yourcx_screenshot-canvas').height());
                    ctx.fillStyle = 'rgba(102,102,102,0.5)';
                    ctx.fillRect(0, 0, $('#yourcx_screenshot-canvas').width(), $('#yourcx_screenshot-canvas').height());
                    $('.yourcx_screenshot-helper').each(function () {
                        if ($(this).attr('data-type') == 'highlight')
                            drawlines(ctx, parseInt($(this).css('left'), 10), parseInt($(this).css('top'), 10), $(this).width(), $(this).height());
                    });
                    $('.yourcx_screenshot-helper').each(function () {
                        if ($(this).attr('data-type') == 'highlight')
                            ctx.clearRect(parseInt($(this).css('left'), 10), parseInt($(this).css('top'), 10), $(this).width(), $(this).height());
                    });

                    ctx.clearRect(parseInt($(this).css('left'), 10), parseInt($(this).css('top'), 10), $(this).width(), $(this).height())
                    ctx.fillStyle = 'rgba(0,0,0,0.75)';
                    ctx.fillRect(parseInt($(this).css('left'), 10), parseInt($(this).css('top'), 10), $(this).width(), $(this).height());

                    ignore = $(this).attr('data-time');

                    /* redraw black */
                    $('.yourcx_screenshot-helper').each(function () {
                        if ($(this).attr('data-time') == ignore)
                            return true;
                        if ($(this).attr('data-type') == 'blackout') {
                            ctx.fillStyle = 'rgba(0,0,0,1)';
                            ctx.fillRect(parseInt($(this).css('left'), 10), parseInt($(this).css('top'), 10), $(this).width(), $(this).height())
                        }
                    });
                } else {
                  if (!highlight) {
                    $(this).css('cursor', 'crosshair');
                  } else {
                    $(this).css('cursor', 'default');
                  }
                }
            }
            else {
                $(this).css('z-index', '30000');
                $(this).children().remove();
                if ($(this).attr('data-type') == 'blackout') {
                    $(this).css('z-index', '30010');
                    redraw(ctx);
                }
            }
        });

        $(document).on('mousedown', '#yourcx_screenshot-close', function () {
            if (settings.highlightElement && $(this).parent().attr('data-highlight-id'))
                var _hidx = $(this).parent().attr('data-highlight-id');

            $(this).parent().next().remove();
            $(this).parent().remove();

            if (settings.highlightElement && _hidx)
                $('[data-highlight-id="' + _hidx + '"]').removeAttr('data-highlighted').removeAttr('data-highlight-id');

            redraw(ctx);
        });

        $('#yourcx_screenshot-module').on('click', '.yourcx_screenshot-wizard-close', function () {
            close(true);
        });

        $(document).on('keyup', function (e) {
            if (e.keyCode == 27)
                close(false);
        });

        $(document).on('selectstart dragstart', document, function (e) {
            e.preventDefault();
        });

        $(document).on('mouseover', '#yourcx_screenshot-info', function () {
            var curTime = Date.now();
            var that = this;
         
            if (curTime - now >= settings.infoCloseTime)
               $(this).hide();
            else {
              setTimeout(function() { $(that).hide(); },  settings.infoCloseTime - (curTime - now));
            }
        });

        $(document).on('mousedown', '.yourcx_screenshot-sethighlight', function () {
            highlight = 1;
            $(this).addClass('yourcx_screenshot-active');
            $('.yourcx_screenshot-setblackout').removeClass('yourcx_screenshot-active');
        });

        $(document).on('mousedown', '.yourcx_screenshot-setblackout', function () {
            highlight = 0;
            $(this).addClass('yourcx_screenshot-active');
            $('.yourcx_screenshot-sethighlight').removeClass('yourcx_screenshot-active');
        });

        $(document).on('click', '#yourcx_screenshot-highlighter-next', function () {
            createScreenshot();
        });
        $(document).on('mousedown', '#yourcx_screenshot-highlighter-next', function () {
            createScreenshot();
        });


        function createScreenshot() {
            if (creatingScreenshot) return;

            creatingScreenshot = true;
            canDraw = false;
            $('#yourcx_screenshot-canvas').css('cursor', 'default');
            var sy = $(document).scrollTop(),
                dh = $(document).height();
            $('#yourcx_screenshot-helpers .yourcx_screenshot-helper').hide();

            if (settings.addComment) {
                $('#yourcx_screenshot-helpers .yourcx_screenshot-helper-comment input').each(function () {
                    if ($(this).val() == '')
                        $(this).parent().hide();
                });
            }

            $('#yourcx_screenshot-highlighter').hide();
            if (!settings.screenshotStroke) {
                redraw(ctx, false);
            }

            $('#yourcx_screenshot-helpers').append('<div class="yourcx_screenshot-screen-boundary" style="position:absolute;top:' + sy + 'px;left:' + $(window).scrollLeft() + 'px;width:' + $(window).width() + 'px;height:' + $(window).height() + 'px;z-index:30002; background-color: transparent; border: 2px dotted #ff0000;"></div>');

             if (!settings.createPng) {
               var data = {rectangles: {}, img: null};
          
               $('.yourcx_screenshot-helper').each(function (i) {
                   var rectangleNumber = $(this).attr('data-rectangle'),
                       coords = {
                           left: $(this).css('left'),
                           top: $(this).css('left'),
                           width: $(this).css('width'),
                           height: $(this).css('height')
                       },
                       commentInput = $('div.yourcx_screenshot-helper-comment[data-rectangle=' + rectangleNumber + '] input'),
                       comment = '';
          
                   if ($(commentInput).length) {
                       comment = $(commentInput).val();
                   }
          
                   data.rectangles[rectangleNumber] = {
                       coords: coords,
                       comment: comment,
                       type: $(this).attr('data-type'),
                       method: $(this).attr('data-method')
                   }
               });
          
               caller.closeScreenshot(encodeURIComponent(window.JSON.stringify(data)));
               $('#yourcx_screenshot-module').remove();
               close(false);
               
               return;
             }
   
   
            // change fixed to absolute positioned
            $('*').filter(function () {
                return $(this).css("position") === 'fixed';
            }).each(function () {
                var position = $(this).offset();

                fixedPositionElems.push({
                    elem: this,
                    style: $(this).attr('style')
                });

                $(this).css({
                    position: 'absolute',
                    top: position.top,
                    left: position.left,
                    bottom: '',
                    right: '',
                    width: $(this).width(),
                    height: $(this).height()
                });

                var position2 = $(this).offset();

                $(this).css({
                    top: position.top - (position2.top - position.top),
                    left: position.left - (position2.left - position.left)
                });

                $('body').append('<div data-html2canvas-ignore="true" class="yourcx_screenshot-loader"><div class="yourcx_screenshot-loader_spin"></div><div class="yourcx_screenshot-loader_text">' + _out(settings.texts.loader) + '</div></div>');
            });


            /** Run the Screenshot builder code **/
            html2canvas($('body').get(0), {
                proxy: settings.proxy,
                letterRendering: settings.letterRendering,
                logging: false
            }).then(
                function (canvas) {
                    if (!settings.screenshotStroke) {
                        redraw(ctx);
                    }

                    _canvas = $('<canvas id="yourcx_screenshot-canvas-tmp" width="' + w + '" height="' + dh + '"/>').hide().appendTo('body');
                    _ctx = _canvas.get(0).getContext('2d');
                    // _ctx.drawImage(canvas, 0, sy, w, dh, 0, 0, w, dh);
                    _ctx.drawImage(canvas, 0, 0, w, dh, 0, 0, w, dh);

                    img = _canvas.get(0).toDataURL();
                    $(document).scrollTop(sy);

                    canDraw = false;

                    // restore fixed elements
                    for (var i = 0; i < fixedPositionElems.length; i++) {
                        if (!fixedPositionElems[i].style) fixedPositionElems[i].style = '';
                        $(fixedPositionElems[i].elem).attr('style', fixedPositionElems[i].style);
                    }

                    var data = {rectangles: {}, img: img};

                    $('.yourcx_screenshot-helper').each(function (i) {
                        var rectangleNumber = $(this).attr('data-rectangle'),
                            coords = {
                                left: $(this).css('left'),
                                top: $(this).css('left'),
                                width: $(this).css('width'),
                                height: $(this).css('height')
                            },
                            commentInput = $('div.yourcx_screenshot-helper-comment[data-rectangle=' + rectangleNumber + '] input'),
                            comment = '';

                        if ($(commentInput).length) {
                            comment = $(commentInput).val();
                        }

                        data.rectangles[rectangleNumber] = {
                            coords: coords,
                            comment: comment,
                            type: $(this).attr('data-type'),
                            method: $(this).attr('data-method')
                        }
                    });

                    caller.closeScreenshot(encodeURIComponent(window.JSON.stringify(data)));

                    $('#yourcx_screenshot-module').remove();
                    close(false);
                    _canvas.remove();
                }
            ).catch(function (error) {
                /* This is fired when the promise executes without the DOM */
                console.log('.');
            });

        }

        if (settings.autoScreenshot)
            createScreenshot();
    }


    function close(_force) {
        canDraw = false;
        $(document).off('mouseenter mouseleave', '.yourcx_screenshot-helper');
        $(document).off('mouseup keyup');
        $(document).off('mousedown', '.yourcx_screenshot-setblackout');
        $(document).off('mousedown', '.yourcx_screenshot-sethighlight');
        $(document).off('mousedown click', '#yourcx_screenshot-close');
        $(document).off('mousedown', '#yourcx_screenshot-canvas');
        $(document).off('click', '#yourcx_screenshot-highlighter-next');
        $(document).off('mouseleave', 'body');
        $(document).off('mouseenter', '.yourcx_screenshot-helper');
        $(document).off('mouseover', '#yourcx_screenshot-info');
        $(document).off('selectstart dragstart', document);
        $('#yourcx_screenshot-module').off('click', '.yourcx_screenshot-wizard-close');

        if (settings.highlightElement) {
            $(document).off('click', '#yourcx_screenshot-canvas');
            $(document).off('mousemove', '#yourcx_screenshot-canvas');
        }
        $('[data-highlighted="true"]').removeAttr('data-highlight-id').removeAttr('data-highlighted');
        $('#yourcx_screenshot-module').remove();
        $('.yourcx_screenshot-loader').remove();

        $('#' + yourcxSurveyBlockId).show();
        $('#' + yourcxBgBlockId).show();

        var audit = $('#yourcx_blk');
        if (audit)
            $(audit).show();

        // restore tabindex attribute
        for (var i = 0; i < tabindexElems.length; i++) {
            $(tabindexElems[i].elem).attr('tabindex', tabindexElems[i].index);
        }

        if (_force)
            caller.screenshotForceClose();
    }

    function redraw(ctx, border) {
        border = typeof border !== 'undefined' ? border : true;
        ctx.clearRect(0, 0, $('#yourcx_screenshot-canvas').width(), $('#yourcx_screenshot-canvas').height());
        ctx.fillStyle = 'rgba(102,102,102,0.5)';
        ctx.fillRect(0, 0, $('#yourcx_screenshot-canvas').width(), $('#yourcx_screenshot-canvas').height());
        $('.yourcx_screenshot-helper').each(function () {
            if ($(this).attr('data-type') == 'highlight')
                if (border)
                    drawlines(ctx, parseInt($(this).css('left'), 10), parseInt($(this).css('top'), 10), $(this).width(), $(this).height());
        });
        $('.yourcx_screenshot-helper').each(function () {
            if ($(this).attr('data-type') == 'highlight')
                ctx.clearRect(parseInt($(this).css('left'), 10), parseInt($(this).css('top'), 10), $(this).width(), $(this).height());
        });
        $('.yourcx_screenshot-helper').each(function () {
            if ($(this).attr('data-type') == 'blackout') {
                ctx.fillStyle = 'rgba(0,0,0,1)';
                ctx.fillRect(parseInt($(this).css('left'), 10), parseInt($(this).css('top'), 10), $(this).width(), $(this).height());
            }
        });
    }

    function drawlines(ctx, x, y, w, h) {
        ctx.strokeStyle = settings.strokeStyle;
        ctx.shadowColor = settings.shadowColor;
        ctx.shadowOffsetX = settings.shadowOffsetX;
        ctx.shadowOffsetY = settings.shadowOffsetY;
        ctx.shadowBlur = settings.shadowBlur;
        ctx.lineJoin = settings.lineJoin;
        ctx.lineWidth = settings.lineWidth;

        ctx.strokeRect(x, y, w, h);
    }

    // REAL RUN

    fExtend(settings, upConfig);
    addCss();

    if (typeof window.Promise === "undefined") {
        loadScript(settings.ES6PromiseAuto, function () {
            if (--loadScripts > 0) {
                return;
            }
            if (typeof window.jQuery === "undefined") {
                return;
            }
            if (window.html2canvas === undefined) {
                return;
            }
            runH2c();
        });
    }

    if (typeof window.jQuery === "undefined") {
        loadScript(settings.jQuery, function () {
            $ = window.jQuery;

            if (--loadScripts > 0)
                return;

            if (window.html2canvas === undefined) {
                return;
            }

            runH2c();
        });
    } else {
        $ = window.jQuery;
    }
    
    loadScript(settings.html2canvasURL, function () {
      if (--loadScripts > 0)
          return;
  
      var func = function() {
        if (window.html2canvas === undefined) {
          setTimeout(func, 100);
          return;
        }
      
        runH2c();
      };

      setTimeout(func, 100);
    });
};

}


 if((( _mobile === false))) 
 {
 (function() {
  var style = document.createElement('style')
  style.setAttribute('type', 'text/css');
  var s = '.yourcx_insert_iframe_wrapper iframe { width: 100% !important; }';
  if (style.styleSheet)
    style.styleSheet.cssText = s;
  else
    style.appendChild(document.createTextNode(s));
  document.getElementsByTagName("head")[0].appendChild(style);
})();
}

1==1}_observer.on("runSurveys",_runConfigAndConditions);
/** @preserve
version 2.5.1, 11.08.2021
*/
function _YourcxAnalytics(){var that=this,XDomainStorageUrl=null;this.ready=false;this.selfInit=false,this.userId=null;var webVitalsObj=null;if(arguments.length>=1)XDomainStorageUrl=arguments[0];var storageKey="_analytics";var storage=new _YourcxStorage({sessionKey:"_analytics_session",mode:"xdomain",xDomainUrl:XDomainStorageUrl,preload:[storageKey,"client_params.session","client_params.visitor"],obj:that});_storage=storage;var client_params={page:{},session:{},visitor:{}};if(!storage.supported())return null;if(arguments.callee._singletonInstance)return arguments.callee._singletonInstance;arguments.callee._singletonInstance=this;var initData={version:4,visit:{num:1,startTime:parseInt((new Date).getTime()/1e3),page:1,firstUrl:document.URL.substring(0,299),referer:document.referrer.substring(0,299),geolocation:null,id:null,surveyed:false,path:{url:[],"page.type":[]},events:[]},site:{firstPageTime:parseInt((new Date).getTime()/1e3),lastPageTime:parseInt((new Date).getTime()/1e3),pages:1},user:{surveysSeen:0,surveysInited:0,surveysFilled:0,returning:false,events:[]},page:{webVitals:{lcp:null,cls:null,fid:null,ttfb:null,fcp:null}}};var updateDataOnPageView=function(data){var time=parseInt((new Date).getTime()/1e3),urlParsed,refererParsed;++data.site.pages;if(data.version==1){data.version=2;data.visit.geolocation=null}if(data.version==2){data.version=3;data.visit.id=null;data.visit.surveyed=false;data.visit.path=that.path.init()}if(data.version==3){data.version=4;data.visit.events=[];data.user.events=[]}if(data.version==4){if(typeof data.user.events=="undefined")data.user.events=[];if(typeof data.page=="undefined")data.page={webVitals:{lcp:null,cls:null,fid:null,ttfb:null,fcp:null}}}if(time-data.site.lastPageTime>=30*60){_observer.fire("analytics.visit.new",{diffSeconds:time-data.site.lastPageTime});urlParsed=that.parseURL(document.URL);refererParsed=that.parseURL(document.referrer);data.visit.num=parseInt(data.visit.num)+1;data.visit.startTime=parseInt((new Date).getTime()/1e3);data.visit.page=1;data.visit.firstUrl=document.URL.substring(0,299);if(urlParsed.host!=refererParsed.host)data.visit.referer=document.referrer.substring(0,299);data.visit.id=_generateGUID();data.visit.surveyed=false;data.visit.events=[];data.visit.path=that.path.init();that.cleanClientParams("session");that.initClientParams();if(_config.analytics.flags.paths){var clientParams=that.getClientParams(null,true,false);data.visit.path.url.push({time:(new Date).getTime(),val:document.URL.substring(0,299),page:data.visit.page,clientParams:clientParams["page"]})}data.site.lastPageTime=time;data.user.returning=true;storage.set(storageKey,data);that.sendEvent("visitor.event","visit.new",{val:true,sessionParams:{}});that.checkGeolocation(true)}else{data.site.lastPageTime=time;data.visit.page=parseInt(data.visit.page)+1;that.path.addEventData("url",document.URL.substring(0,299),data);storage.set(storageKey,data);that.checkGeolocation(false)}};this.storageInit=function(){this.initWrapper()};this.initWrapper=function(){this.init();this.initHashChangeMonitor();this.initHistoryChangeMonitor()};this.initHistoryChangeMonitor=function(){var oldHref=location.href;if(_config.analytics.flags.monitorHistoryChange===true){(function(history){var pushState=history.pushState;history.pushState=function(state){if(typeof history.onpushstate=="function"){history.onpushstate({state:state})}setTimeout(function(){that.init();_observer.fire("analytics.init.historyChange",state)},200);return pushState.apply(history,arguments)}})(window.history)}else if(_config.analytics.flags.monitorHistoryChange==="dumb"){setInterval(function(){var newHref=location.href;if(oldHref!==newHref){oldHref=newHref;setTimeout(function(){that.init();_observer.fire("analytics.init.historyChange",state)},200)}},1e3)}};this.initHashChangeMonitor=function(){var oldHref=location.href;if(_config.analytics.flags.monitorHashChange===true){if("onhashchange"in window){window.addEventListener("hashchange",function(){var newHref=location.href;if(oldHref!==newHref){oldHref=newHref;that.init();_observer.fire("analytics.init.hashChange",{})}},false)}}else if(_config.analytics.flags.monitorHashChange==="dumb"){setInterval(function(){var newHref=location.href;if(oldHref!==newHref){oldHref=newHref;that.init();_observer.fire("analytics.init.hashChange",{})}},500)}};this.init=function(){_globalFireSurveyBlock=false;storage.getUserId(function(userId){var data=storage.get(storageKey);that.userId=userId;if(!data){data=initData;data.visit.id=_generateGUID();data.visit.surveyed=false;data.visit.path=that.path.init();storage.set(storageKey,data);that.initClientParams();if(_config.analytics.flags.paths){var clientParams=that.getClientParams(null,true,false);data.visit.path.url.push({time:(new Date).getTime(),val:document.URL.substring(0,299),page:data.visit.page,clientParams:clientParams["page"]})}storage.set(storageKey,data);that.sendEvent("visitor.event","visit.new",{val:true,sessionParams:{}});that.checkGeolocation(true)}else{updateDataOnPageView(data)}if(!webVitalsObj)webVitalsObj=new _YourCXWebVitals(that);that.ready=true})};this.initClientParams=function(){var clientParams=that.getClientParams(null,true,false),scope,key,scopes=["session","visitor"],i;for(i=0;i<scopes.length;i++){scope=scopes[i];if(!_undef(clientParams[scope]["ttl"]))that.addClientParam(null,null,scope)}};this.setWebVitalsData=function(type,value){var data=this.getData();data.page.webVitals[type]=value;storage.set(storageKey,data)};this.cleanClientParams=function(scope){_storage.set("client_params."+scope,{})};this.getData=function(){return storage.get(storageKey)};this.getUserId=function(){return this.userId};this.checkGeolocation=function(_newVisit){var newVisit=typeof _newVisit=="undefined"?false:_newVisit;storage.getGeneral("geolocation",function(_geolocation){if(_geolocation){var data=storage.get(storageKey);data.visit.geolocation=_geolocation;storage.set(storageKey,data,false)}if((newVisit||_geolocation.forceUpdate)&&_config.geolocation.check){if(!_geolocation.lastUpdate||parseInt((new Date).getTime())-parseInt(_geolocation.lastUpdate)>=60*1e3||_geolocation.error||_geolocation.forceUpdate){if("geolocation"in navigator){navigator.geolocation.getCurrentPosition(function(position){that.savePosition(position)},function(error){that.savePosition(null,error)},{timeout:15e3,maximumAge:6e4,enableHighAccuracy:true})}}}})};this.savePosition=function(_position,_error){error=_error||false;var position={longitude:0,latitude:0,accuracy:0,error:null};if(_error){position.error={code:_error.code,message:_error.message}}else{position.longitude=_position.coords.longitude;position.latitude=_position.coords.latitude;position.accuracy=_position.coords.accuracy}var data=storage.get(storageKey);data.visit.geolocation=position;storage.set(storageKey,data,false);storage.setGeneral("geolocation",position);_observer.fire("analytics.location.save",position)};this.userDataEvent=function(event,event_data){var data=storage.get(storageKey);switch(event){case"goal":that.path.addEventData("goal",event_data.name,data);var clientParams=that.getClientParams(null,true,false);that.sendEvent("visitor.event",event_data.name,{val:true,sessionParams:clientParams["session"]});break;case"event":switch(event_data.scope){case"session":that.path.addEventData(event_data.key,event_data.val,data);if(event_data.key==event_data.scope+".event")that.sendEvent(event_data.scope+".event",event_data.val,true);else that.sendEvent(event_data.scope+".event",event_data.key,event_data.val);break;case"visitor":var clientParams=that.getClientParams(null,true,false);if(event_data.key==event_data.scope+".event")that.sendEvent(event_data.scope+".event",event_data.val,{val:true,sessionParams:clientParams["session"]});else that.sendEvent(event_data.scope+".event",event_data.key,{val:event_data.val,sessionParams:clientParams["session"]});break}break;case"surveyFilled":data.user.surveysFilled=parseInt(data.user.surveysFilled)+1;data.user.events=[];that.path.addEventData("survey.filled",document.URL.substring(0,299),data);break;case"surveySeen":data.visit.surveyed=true;this.path.setSurveyedFlag(data.visit.path);data.user.surveysSeen=parseInt(data.user.surveysSeen)+1;break;case"surveyInited":data.user.surveysInited=parseInt(data.user.surveysInited)+1;break}storage.set(storageKey,data)};this.addClientParam=function(key,val,scope,_overwrite){var saveTime=360*24;var overwrite=typeof _overwrite=="undefined"?true:_overwrite;switch(scope){case"page":client_params.page[key]=val;break;case"session":saveTime=24;case"visitor":_storage.get("client_params."+scope,function(_data){var sendChangeData=false,sendAll=false;if(!_data){_data={};sendChangeData=true}if(!_undef(_data["ttl"])){var tmp={};for(var i in _data.data){tmp[i]={ttl:_data["ttl"],val:_data.data[i]}}_data=tmp;sendAll=true}if(key){if(_undef(_data[key])){_data[key]={ttl:saveTime*60*60*1e3+(new Date).getTime(),val:val};sendChangeData=true}else{if(overwrite){if(_data[key].val!=val)sendChangeData=true;_data[key]={ttl:saveTime*60*60*1e3+(new Date).getTime(),val:val}}}}_storage.set("client_params."+scope,_data);if(key){if(sendChangeData&&overwrite)that.sendEvent("client.param."+scope,key,val);if(sendAll){for(var i in _data)that.sendEvent("client.param."+scope,i,_data[i].val)}}});break}};this.getClientParams=function(_callback,_cached,_combined){_cached=_cached||false;var combined=typeof _combined=="undefined"?true:_combined;var int=function(_data){var tmp={visitor:{},session:{},page:{}},i;if(!_undef(_config.analytics.defaultParams["visitor"]))tmp["visitor"]=_config.analytics.defaultParams["visitor"];if(!_undef(_config.analytics.defaultParams["session"]))tmp["session"]=_config.analytics.defaultParams["session"];for(i in client_params.page)tmp["page"][i]=client_params.page[i];if(_data["client_params.visitor"])for(i in _data["client_params.visitor"])if(!_undef(_data["client_params.visitor"][i].ttl)&&_data["client_params.visitor"][i].ttl>=(new Date).getTime())tmp["visitor"][i]=_data["client_params.visitor"][i].val;if(_data["client_params.session"])for(i in _data["client_params.session"])if(!_undef(_data["client_params.session"][i].ttl)&&_data["client_params.session"][i].ttl>=(new Date).getTime()&&_data["client_params.session"][i].ttl<=24*60*60*1e3+(new Date).getTime())tmp["session"][i]=_data["client_params.session"][i].val;var ret={};if(combined)ret=fExtend(ret,tmp["visitor"],tmp["session"],tmp["page"]);else ret=tmp;if(_callback)_callback(ret);return ret};if(_cached){var _data=_storage.getMultiCached(["client_params.session","client_params.visitor"]);return int(_data)}_storage.getMulti(["client_params.session","client_params.visitor"],int)};this.dimensionCheck=function(key,val,scope){if(key=="page.type"){if(val=="thank you page")setTimeout(function(){that.userDataEvent("goal",{name:"purchase"})},33)}if(key=="user.logged"){if(val==true)this.addClientParam("user.customer",true,"visitor")}this.path.updateDimension(key,val);_config.analytics.processDimensionsFunc(key,val)};this.sendEvent=function(_event_type,_key,_val){var data=storage.get(storageKey);if(!_config.analytics.flags.events&&_event_type!="survey.welcome.shown")return;if(!_undef(_config.analytics.defaultParams.events[_key]))if(_val===Object(_val)&&typeof _val!="function")_val=fExtend(_val,_config.analytics.defaultParams.events[_key]);switch(_event_type){case"session.event":case"client.param.session":if(!data.visit.surveyed){data.visit.events.push({visitId:data.visit.id,key:_key,data:_val,time:(new Date).getTime(),page:data.visit.page,type:_event_type});storage.set(storageKey,data);break}storage.sendEvent(_event_type,{visitId:data.visit.id,key:_key,data:_val,time:(new Date).getTime(),page:data.visit.page,type:_event_type});break;case"client.param.visitor":case"visitor.event":storage.sendEvent(_event_type,{visitId:data.visit.id,userId:that.getUserId(),key:_key,data:_val,time:(new Date).getTime(),page:data.visit.page,clientId:_clientId});if(!data.visit.surveyed){data.visit.events.push({visitId:data.visit.id,key:_key,data:_val,time:(new Date).getTime(),page:data.visit.page,type:_event_type});storage.set(storageKey,data);break}var _e_type=_event_type.replace("visitor","session");storage.sendEvent(_e_type,{visitId:data.visit.id,key:_key,data:_val,time:(new Date).getTime(),page:data.visit.page,type:_event_type});break;case"survey.welcome.shown":storage.sendEvent(_event_type,{visitId:data.visit.id,userId:that.getUserId(),key:_key,data:_val,time:(new Date).getTime(),page:data.visit.page,type:_event_type,mobile:_mobile});break}};this.path={init:function(){var obj={url:[]};for(var i=0;i<_config.analytics.pathDimensions.length;i++){obj[_config.analytics.pathDimensions[i]]=[]}return obj},addEventData:function(_key,_val,_data){var setData=false;if(!_config.analytics.flags.paths)return;if(!_data){_data=storage.get(storageKey);setData=true}if(_undef(_data.visit.path[_key]))_data.visit.path[_key]=[];var clientParams=that.getClientParams(null,true,false);if(!_undef(clientParams["page"][_key]))delete clientParams["page"][_key];var keyPush={time:(new Date).getTime(),val:_val,page:_data.visit.page,clientParams:clientParams["page"]};_data.visit.path[_key].push(keyPush);if(_data.visit.surveyed)storage.sendEvent("updateVisitPath",{visitId:_data.visit.id,key:_key,data:keyPush,clientId:_clientId});if(setData)storage.set(storageKey,_data)},updateDimension:function(_key,_val){if(_config.analytics.pathDimensions.indexOf(_key)===-1)return;this.addEventData(_key,_val)},setSurveyedFlag:function(_data){var dimensions=_config.analytics.pathDimensions,i=0,j=null,tmpData=null,params,key,val;dimensions.push("url");params=that.getClientParams(null,true);for(i=0;i<dimensions.length;i++){if(_undef(params[dimensions[i]])&&dimensions[i]!="url")continue;if(_undef(_data[dimensions[i]]))continue;tmpData=_data[dimensions[i]];if(!tmpData.length)continue;val=tmpData[tmpData.length-1];val.surveyed=true;tmpData[tmpData.length-1]=val;_data[dimensions[i]]=tmpData}},getStep:function(_key,_pos){var data,pathData,pos=null;if(typeof _pos=="undefined")_pos=null;if(!_config.analytics.flags.paths)return false;data=storage.get(storageKey);if(_undef(data.visit.path[_key]))return false;pathData=data.visit.path[_key];switch(_pos){case null:return pathData;case"last":pos=pathData.length-1;break;case"previous":pos=pathData.length-2;break;default:pos=_pos}if(pos<0)pos=pathData.length-1+pos;if(_undef(pathData[pos]))return null;return pathData[pos]},checkStep:function(_key,_pos,_val){if(_pos===Object(_pos)&&typeof _pos!="function"){var data,i;if(_undef(_pos["type"]))return false;data=this.getStep(_key,null);switch(_pos["type"]){case"first":for(i=0;i<data.length;i++){if(this.checkStepVal(data[i],_val))return i}return false;case">":if(_undef(_pos["start"]))return false;for(i=_pos["start"]+1;i<data.length;i++){if(this.checkStepVal(data[i],_val))return i}return false}}var val=this.getStep(_key,_pos);return this.checkStepVal(val,_val)},checkStepVal:function(_valObject,_valMatch){var ret;if(!_valObject)return false;if(_valMatch instanceof RegExp){ret=_valObject.val.match(_valMatch);return ret?true:false}else if(_valObject.val===_valMatch)return true;return false}};this.parseURL=function(url){var parser=document.createElement("a"),searchObject={},queries,split,i;parser.href=url;queries=parser.search.replace(/^\?/,"").split("&");for(i=0;i<queries.length;i++){split=queries[i].split("=");searchObject[split[0]]=split[1]}return{protocol:parser.protocol,host:parser.host,hostname:parser.hostname,port:parser.port,pathname:parser.pathname,search:parser.search,searchObject:searchObject,hash:parser.hash}};if(this.selfInit)this.initWrapper()}function _YourCXWebVitals(dataObject){!function(){var e,t,n,i,r={passive:!0,capture:!0},a=new Date,o=function(){i=[],t=-1,e=null,f(addEventListener)},c=function(i,r){e||(e=r,t=i,n=new Date,f(removeEventListener),u())},u=function(){if(t>=0&&t<n-a){var r={entryType:"first-input",name:e.type,target:e.target,cancelable:e.cancelable,startTime:e.timeStamp,processingStart:e.timeStamp+t};i.forEach(function(e){e(r)}),i=[]}},s=function(e){if(e.cancelable){var t=(e.timeStamp>1e12?new Date:performance.now())-e.timeStamp;"pointerdown"==e.type?function(e,t){var n=function(){c(e,t),a()},i=function(){a()},a=function(){removeEventListener("pointerup",n,r),removeEventListener("pointercancel",i,r)};addEventListener("pointerup",n,r),addEventListener("pointercancel",i,r)}(t,e):c(t,e)}},f=function(e){["mousedown","keydown","touchstart","pointerdown"].forEach(function(t){return e(t,s,r)})},p="hidden"===document.visibilityState?0:1/0;addEventListener("visibilitychange",function e(t){"hidden"===document.visibilityState&&(p=t.timeStamp,removeEventListener("visibilitychange",e,!0))},!0);o(),self.webVitals={firstInputPolyfill:function(e){i.push(e),u()},resetFirstInputPolyfill:o,get firstHiddenTime(){return p}}}();var t=function(t,e){return{name:t,value:void 0===e?-1:e,delta:0,entries:[],id:"v1-".concat(Date.now(),"-").concat(Math.floor(8999999999999*Math.random())+1e12)}},e=function(t,e){try{if(PerformanceObserver.supportedEntryTypes.includes(t)){var n=new PerformanceObserver(function(t){return t.getEntries().map(e)});return n.observe({type:t,buffered:!0}),n}}catch(t){}},n=!1,i=function(t,e){n||"undefined"!=typeof InstallTrigger||(addEventListener("beforeunload",function(){}),n=!0);addEventListener("visibilitychange",function n(i){"hidden"===document.visibilityState&&(t(i),e&&removeEventListener("visibilitychange",n,!0))},!0)},a=function(t){addEventListener("pageshow",function(e){e.persisted&&t(e)},!0)},r="function"==typeof WeakSet?new WeakSet:new Set,o=function(t,e,n){var i;return function(){e.value>=0&&(n||r.has(e)||"hidden"===document.visibilityState)&&(e.delta=e.value-(i||0),(e.delta||void 0===i)&&(i=e.value,t(e)))}},u=function(n,r){var u,c=t("CLS",0),s=function(t){t.hadRecentInput||(c.value+=t.value,c.entries.push(t),u())},f=e("layout-shift",s);f&&(u=o(n,c,r),i(function(){f.takeRecords().map(s),u()}),a(function(){c=t("CLS",0),u=o(n,c,r)}))},c=-1,s=function(){i(function(t){var e=t.timeStamp;c=e},!0)},f=function(){return c<0&&((c=self.webVitals.firstHiddenTime)===1/0&&s(),a(function(){setTimeout(function(){c="hidden"===document.visibilityState?0:1/0,s()},0)})),{get timeStamp(){return c}}},d=function(n,i){var u,c=f(),s=t("FCP"),d=e("paint",function(t){"first-contentful-paint"===t.name&&(d&&d.disconnect(),t.startTime<c.timeStamp&&(s.value=t.startTime,s.entries.push(t),r.add(s),u()))});d&&(u=o(n,s,i),a(function(e){s=t("FCP"),u=o(n,s,i),requestAnimationFrame(function(){requestAnimationFrame(function(){s.value=performance.now()-e.timeStamp,r.add(s),u()})})}))},m=function(n,u){var c,s=f(),d=t("FID"),m=function(t){t.startTime<s.timeStamp&&(d.value=t.processingStart-t.startTime,d.entries.push(t),r.add(d),c())},v=e("first-input",m);c=o(n,d,u),v&&i(function(){v.takeRecords().map(m),v.disconnect()},!0),v||window.webVitals.firstInputPolyfill(m),a(function(){d=t("FID"),c=o(n,d,u),window.webVitals.resetFirstInputPolyfill(),window.webVitals.firstInputPolyfill(m)})},v=function(n,u){var c,s=f(),d=t("LCP"),m=function(t){var e=t.startTime;e<s.timeStamp&&(d.value=e,d.entries.push(t)),c()},v=e("largest-contentful-paint",m);if(v){c=o(n,d,u);var l=function(){r.has(d)||(v.takeRecords().map(m),v.disconnect(),r.add(d),c())};["keydown","click"].forEach(function(t){addEventListener(t,l,{once:!0,capture:!0})}),i(l,!0),a(function(e){d=t("LCP"),c=o(n,d,u),requestAnimationFrame(function(){requestAnimationFrame(function(){d.value=performance.now()-e.timeStamp,r.add(d),c()})})})}},l=function(e){var n,i=t("TTFB");n=function(){try{var t=performance.getEntriesByType("navigation")[0]||function(){var t=performance.timing,e={entryType:"navigation",startTime:0};for(var n in t)"navigationStart"!==n&&"toJSON"!==n&&(e[n]=Math.max(t[n]-t.navigationStart,0));return e}();i.value=i.delta=t.responseStart,i.entries=[t],e(i)}catch(t){}},"complete"===document.readyState?setTimeout(n,0):addEventListener("pageshow",n)};this.getCLS=u;this.getFCP=d;this.getFID=m;this.getLCP=v;this.getTTFB=l;var processCLS=function(event){dataObject.setWebVitalsData("cls",event.value)};this.getCLS(processCLS,true);var processFCP=function(event){dataObject.setWebVitalsData("fcp",parseInt(event.value))};this.getFCP(processFCP,true);var processFID=function(event){dataObject.setWebVitalsData("fid",parseInt(event.value))};this.getFID(processFID,true);var processLCP=function(event){dataObject.setWebVitalsData("lcp",parseInt(event.value))};this.getLCP(processLCP,true);var processTTFB=function(event){dataObject.setWebVitalsData("ttfb",parseInt(event.value))};this.getTTFB(processTTFB,true)}/** @preserve
version 2.2.1, 11.08.2021
*/
function _YourcxStorage(){var config={sessionKey:"_yourcx_session",mode:"local",xDomainUrl:null,preload:[],obj:null};var iframe=null,cachedData={},callbacks={},multiCallbacks=[],that=this,xDomainReady=false,preloadCount=0,checkPreload=true;var myLocalStorage=null;this.ready=false;if(arguments.length>=1)for(var i in arguments[0])config[i]=arguments[0][i];if(!arguments.callee._idNum)arguments.callee._idNum=1;else++arguments.callee._idNum;var thisId="yourcx_storage_"+arguments.callee._idNum;this.setS=function(_key,_value){var vars=this.get(this.key);if(!vars)vars={time:(new Date).getTime()/1e3,data:{}};else vars.time=(new Date).getTime()/1e3;vars.data[_key]=_value;this.set(config.sessionKey,vars)};this.getS=function(_key,_updateTime){var updateTime=_updateTime||true;var vars=this.get(config.sessionKey);var time=(new Date).getTime()/1e3;if(!vars)return null;if(time-vars.time>30*60){this.del(this.key);return null}if(updateTime){vars.time=(new Date).getTime()/1e3;this.set(this.key,vars)}if(_undef(vars.data[_key]))return null;return vars.data[_key]};this.supported=function(){try{return"localStorage"in window&&window["localStorage"]!==null}catch(e){return false}};var sendMessage=function(_func,_key,_val,_type){if(!_undef(callbacks[_key])){if(callbacks[_key].length>1)return}_val=_val||null;_type=_type||"storage";var data={type:_type,key:_key,value:_val,func:_func,id:thisId};if(config.mode=="local")setTimeout(function(){myLocalStorage.postMessage(JSON.stringify(data),config.xDomainUrl)},0);else if(iframe&&iframe.contentWindow)iframe.contentWindow.postMessage(JSON.stringify(data),config.xDomainUrl)};var onMessage=function(event){var key=null,i,j,foundAll,tmpValues,removeMultiCallbacksElements=[];if(config.mode!="local"){if(!event.origin||event.origin=="null")return;var originHostname=event.origin.split("://")[1].split(":")[0].split("/")[0];var xDomainHostname=config.xDomainUrl.split("://")[1].split(":")[0].split("/")[0];if(originHostname!=xDomainHostname)return}var msg="";try{msg=JSON.parse(event.data)}catch(e){return}if(!msg)return;if(_undef(msg.type)||msg.type!="storage"&&msg.type!="storage_general"&&msg.type!="user_id"&&msg.type!="check.localStorage")return;if(_undef(msg.id)||msg.id!=thisId)return;if(_undef(msg.key)||msg.key==null)return;if(msg.type=="storage_general")msg.key="general."+msg.key;if(typeof msg.value==="object")cachedData[msg.key]=msg.value;else cachedData[msg.key]=JSON.parse(msg.value);if(!that.ready&&checkPreload){var size=0,key=null;for(key in cachedData){if(cachedData.hasOwnProperty(key))size++}if(size>=preloadCount){that.ready=true;config.obj.storageInit()}}if(!_undef(callbacks[msg.key])){for(var i=0;i<callbacks[msg.key].length;i++){callbacks[msg.key][i](cachedData[msg.key])}delete callbacks[msg.key]}for(i=0;i<multiCallbacks.length;i++){foundAll=true;tmpValues={};for(j=0;j<multiCallbacks[i].keys.length;j++){if(_undef(cachedData[multiCallbacks[i].keys[j]])){foundAll=false;break}else tmpValues[multiCallbacks[i].keys[j]]=cachedData[multiCallbacks[i].keys[j]]}if(foundAll){multiCallbacks[i].callback(tmpValues);removeMultiCallbacksElements.push(i)}}removeMultiCallbacksElements.reverse();for(i=0;i<removeMultiCallbacksElements.length;i++)multiCallbacks.splice(removeMultiCallbacksElements[i],1)};var setLocal=function(_key,_value,_sendMessage){var val=JSON.stringify(_value);localStorage.setItem(_key,val)};var delLocal=function(_key){localStorage.removeItem(_key)};var getLocal=function(_key,_callback){return JSON.parse(localStorage.getItem(_key))};var setXDomain=function(_key,_value,_sendMessage){if(_undef(_sendMessage))_sendMessage=true;cachedData[_key]=_value;if(_sendMessage)sendMessage("set",_key,_value)};var delXDomain=function(_key){if(!_undef(cachedData[_key]))delete cachedData[_key];sendMessage("del",_key)};var getXDomain=function(_key,_callback,_omitCache){if(_undef(_omitCache))_omitCache=false;if(!_omitCache&&!_undef(cachedData[_key])){if(_callback)_callback(cachedData[_key]);return cachedData[_key]}if(!xDomainReady){config.preload.push({key:_key,callback:_callback});return}addCallback(_key,_callback);sendMessage("get",_key)};var getMultiXDomain=function(_keys,_callback,_omitCache){if(_undef(_omitCache))_omitCache=false;if(!_omitCache){var foundAll=true;var tmpValues={};for(var i=0;i<_keys.length;i++){if(_undef(cachedData[_keys[i]])){foundAll=false;break}else tmpValues[_keys[i]]=cachedData[_keys[i]]}if(foundAll){if(_callback)_callback(tmpValues);return tmpValues}}if(!xDomainReady){config.preload.push({keys:_keys,callback:_callback});return}if(!_undef(_callback)){multiCallbacks.push({keys:_keys,callback:_callback});for(var i=0;i<_keys.length;i++)addCallback(_keys[i])}for(var i=0;i<_keys.length;i++){sendMessage("get",_keys[i])}};this.initLocal=function(){myLocalStorage=new _YourcxLocalStorage(that);this.set=setXDomain;this.get=getXDomain;this.getMulti=getMultiXDomain;this.del=delXDomain;this.processLocalMessage=onMessage;config.mode="local"};this.getMultiCached=function(_keys){var tmpValues={};for(var i=0;i<_keys.length;i++){if(_undef(cachedData[_keys[i]])){tmpValues[_keys[i]]=null}else tmpValues[_keys[i]]=cachedData[_keys[i]]}return tmpValues};this.getUserId=function(_callback){if(!_undef(cachedData["user_id"])){if(_callback)_callback(cachedData["user_id"]);return cachedData["user_id"]}addCallback("user_id",_callback);sendMessage("user_id","user_id",null,"user_id")};this.getGeneral=function(_key,_callback){if(!_undef(cachedData["general."+_key])){if(_callback)_callback(cachedData["general."+_key]);return cachedData["general."+_key]}addCallback("general."+_key,_callback);sendMessage("get",_key,null,"storage_general")};this.setGeneral=function(_key,_value){cachedData["general."+_key]=_value;sendMessage("set",_key,_value,"storage_general")};this.sendEvent=function(_key,_val){sendMessage("event",_key,_val,"event")};var xDomainOnLoadCallback=function(hasLocalStorageAccess){if(!hasLocalStorageAccess){that.initLocal()}checkPreload=true;that.xDomainPreload()};var xDomainOnLoad=function(){addCallback("check.localStorage",xDomainOnLoadCallback);checkPreload=false;sendMessage("check.localStorage","check.localStorage",null,"check.localStorage")};this.xDomainPreload=function(){var i,key,preloadKeys={},j;if(!config.preload.length){that.ready=true;config.obj.storageInit()}xDomainReady=true;for(i=0;i<config.preload.length;i++){key=config.preload[i];if(typeof key==="object"){if(!_undef(key.key))preloadKeys[key.key]=1;else for(j=0;j<key.keys.length;j++)preloadKeys[key.keys[j]]=1}else preloadKeys[key]=1}for(key in preloadKeys){if(preloadKeys.hasOwnProperty(key))++preloadCount}for(i=0;i<config.preload.length;i++){key=config.preload[i];if(typeof key==="object"){if(!_undef(key.key))getXDomain(key.key,key.callback);else getMultiXDomain(key.keys,key.callback)}else getXDomain(key)}};function addCallback(_key,_callback){if(_undef(callbacks[_key]))callbacks[_key]=[];if(!_undef(_callback)){callbacks[_key].push(_callback)}else{callbacks[_key].push(function(){})}}if(config.mode=="xdomain"&&!config.xDomainUrl)config.mode="local";if(config.mode=="xdomain"){iframe=document.createElement("iframe");if(window.addEventListener){window.addEventListener("message",onMessage,false)}else if(window.attachEvent){window.attachEvent("onmessage",onMessage)}iframe.src=config.xDomainUrl;if(!iframe.src){iframe=document.createElementNS("http://www.w3.org/1999/xhtml","iframe");iframe.src=config.xDomainUrl}iframe.style.position="absolute";iframe.style.left=iframe.style.top="-999px";iframe.style.display="none";iframe.onload=xDomainOnLoad;document.body.appendChild(iframe);this.set=setXDomain;this.get=getXDomain;this.getMulti=getMultiXDomain;this.del=delXDomain}if(config.mode=="local"){this.initLocal()}}function _YourcxLocalStorage(_source){var domainKey=null;var eventTimer=null;var hasLocalStorageAccess=true;var storagePrefix="yourcx_";var storageObject="yourcx_storage";var sourceObject=_source;var domainTranslation={};var generalDataInit={geolocation:{longitude:0,altitude:0,accuracy:0,error:null,forceUpdate:true,lastUpdate:null}};var generateGUID=typeof window.crypto!="undefined"&&typeof window.crypto.getRandomValues!="undefined"?function(){var buf=new Uint16Array(8);window.crypto.getRandomValues(buf);var S4=function(num){var ret=num.toString(16);while(ret.length<4){ret="0"+ret}return ret};return S4(buf[0])+S4(buf[1])+"-"+S4(buf[2])+"-"+S4(buf[3])+"-"+S4(buf[4])+"-"+S4(buf[5])+S4(buf[6])+S4(buf[7])}:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(c){var r=Math.random()*16|0,v=c=="x"?r:r&3|8;return v.toString(16)})};function parseMainDomain(url){var a=document.createElement("a");a.href=url;var parts=a.hostname.split(".");if(parts[0]=="www")parts.shift();if(parts.length>2){if(parts[parts.length-2].length>3)parts.shift()}var domain=parts.join(".");if(typeof domainTranslation[domain]!="undefined")domain=domainTranslation[domain];else{if(typeof domainTranslation["general"]!="undefined"){var i=0,g=null;for(i=0;i<domainTranslation["general"].length;i++){g=domainTranslation["general"][i];if(domain.search(g.pattern)!=-1)domain=g.domain}}}return domain}function updateCounter(){var cnt=JSON.parse(localStorage.getItem(storagePrefix+"storage.counter"));if(!cnt)cnt={count:1,time:(new Date).getTime()};else cnt={count:cnt.count+1,time:(new Date).getTime()};localStorage.setItem(storagePrefix+"storage.counter",JSON.stringify(cnt))}function init(event){var originDomain="_"+parseMainDomain(event.origin);var msg=JSON.parse(event);if(typeof msg.type=="undefined")throw new Exception("undefined type");msg.orig_type=msg.type;if(msg.type.substring(0,7)=="opiniac")msg.type=msg.type.substring(8);switch(msg.type){case"storage":break;case"storage_general":originDomain=".general";break;case"user_id":break;case"check.localStorage":break;case"event":originDomain=".events";break;default:throw new Exception("wrong type")}domainKey="storage"+originDomain;return msg}function processEventTable(){var eventsDomainKey="storage.events";var eventDomainData=getDomainData(eventsDomainKey);if(!eventDomainData)return;if(eventDomainData.length>0){eventDomainData=processEventTableInner(eventDomainData);setDomainData(eventDomainData,false,eventsDomainKey);if(eventTimer){clearTimeout(eventTimer);eventTimer=null}return}if(!eventTimer&&eventDomainData.length){eventTimer=setTimeout(function(){eventDomainData=getDomainData(eventsDomainKey);eventDomainData=processEventTableInner(eventDomainData);setDomainData(eventDomainData,false,eventsDomainKey);eventTimer=null},234)}else return}function processEventTableInner(_data){if(_data.length<1)return _data;if(!window.XMLHttpRequest)return _data;var xhttp;xhttp=new XMLHttpRequest;xhttp.open("POST","https://events.yourcx.io/events/",true);xhttp.setRequestHeader("Content-Type","application/x-www-form-urlencoded");xhttp.send("data="+encodeURIComponent(JSON.stringify(_data)));_data=[];return _data}function getDomainData(_domainKey){_domainKey=_domainKey||domainKey;if(!hasLocalStorageAccess||!localStorage)return null;var domainData=localStorage.getItem(storagePrefix+_domainKey);domainData=JSON.parse(domainData);return domainData}function setDomainData(domainData,_updateCounter,_domainKey){_domainKey=_domainKey||domainKey;if(!hasLocalStorageAccess)return;domainData["_last_update"]=(new Date).getTime();localStorage.setItem(storagePrefix+_domainKey,JSON.stringify(domainData));if(_updateCounter)updateCounter()}function setGeneralData(msg){var value=null,domainData;switch(msg.key){case"geolocation":domainKey="storage.general";domainData=getDomainData();value={};if(domainData!=null&&typeof domainData[msg.key]!="undefined")value=domainData[msg.key];if(typeof msg.value["error"]!="undefined"&&msg.value["error"]){if(msg.value["error"].code==1){value.forceUpdate=false;value.lastUpdate=(new Date).getTime()}else{value.forceUpdate=true}value.error=msg.value["error"]}else{if(typeof msg.value["longitude"]!="undefined")value.longitude=msg.value["longitude"];if(typeof msg.value["latitude"]!="undefined")value.latitude=msg.value["latitude"];if(typeof msg.value["accuracy"]!="undefined"){if(parseInt(msg.value["accuracy"])<parseInt(value.accuracy)||!value.accuracy){value.accuracy=msg.value["accuracy"];value.forceUpdate=true;if(parseInt(value.accuracy)<200)value.forceUpdate=false}else value.forceUpdate=false}else{value.forceUpdate=true}value.lastUpdate=(new Date).getTime()}domainData[msg.key]=value;setDomainData(domainData,false,domainKey);break}}function handleRequest(event){var msg=null,domainData=null,value=null,tmpKey=null;domainKey=null;msg=init(event);if(!hasLocalStorageAccess||!localStorage)return false;switch(msg.func){case"user_id":value=localStorage.getItem(storagePrefix+"storage.user_id");if(!value){value=generateGUID();setDomainData(value,false,"storage.user_id")}setTimeout(function(){sourceObject.processLocalMessage({data:JSON.stringify({type:msg.orig_type,id:msg.id,key:msg.key,value:value}),origin:""})},0);break;case"get":domainData=getDomainData();tmpKey=msg.key;if(tmpKey.substring(0,7)=="opiniac")tmpKey=tmpKey.substring(8);else if(tmpKey=="_opiniac_analytics")tmpKey="_analytics";if(domainData!=null&&typeof domainData[tmpKey]!="undefined")value=domainData[tmpKey];setTimeout(function(){sourceObject.processLocalMessage({data:JSON.stringify({type:msg.orig_type,id:msg.id,key:msg.key,value:value}),origin:""})},0);break;case"set":if(msg.type=="storage_general")setGeneralData(msg);else{domainData=getDomainData();tmpKey=msg.key;if(tmpKey.substring(0,7)=="opiniac")tmpKey=tmpKey.substring(8);else if(tmpKey=="_opiniac_analytics")tmpKey="_analytics";if(!domainData)domainData={};if(Array.isArray(domainData))domainData={};domainData[tmpKey]=msg.value;setDomainData(domainData,true)}break;case"del":domainData=getDomainData();if(!domainData)return;domainData[msg.key]=null;delete domainData[msg.key];setDomainData(domainData,true);break;case"event":domainData=getDomainData();if(!domainData)domainData=[];domainData.push({key:msg.key,val:msg.value});setDomainData(domainData,false);processEventTable();break}if(msg.func!="event")processEventTable()}this.postMessage=function(data,domain){handleRequest(data)};domainKey="storage.general";generalData=getDomainData();if(!generalData)setDomainData(generalDataInit,false);domainKey="storage.user_id";generalData=getDomainData();if(!generalData)setDomainData(generateGUID(),false,"storage.user_id")}

// version 1.5.3, 02.02.2016
var _yourcx_transport={listeners:{},mode:"",inited:{send:!1,receive:null},receiverId:null,topLocation:"",hashTickInterval:300,firstSend:!0,hashTickDelay:0,senderObj:top,send:function(e){},__init:function(e){var i=this;if("send"==e){if(this.inited.send)return;this.inited.send=!0}else{if(this.inited.receive)return;this.inited.receive=!0}"function"==typeof window.postMessage||"object"==typeof window.postMessage?"send"==e?this.send=this.postMessageSend:this.eventListener(window,"message",function(e){i.postMessageReceive(e)}):(this.getTopLocation(),"send"==e?this.send=this.hashSend:setInterval(function(){i.hashMonitor()},this.hashTickInterval))},initSender:function(e){if(e=e||null)this.receiverId=e;else{var i=document.location.hash;if(i&&("#"==i.charAt(0)&&(i=i.substr(1)),i.indexOf("|")>-1&&(i=i.split("|"),i=i[0]),this.receiverId=i,"yourcx.insert_insert"!=this.receiverId)){var t=this.receiverId.match(/\d+$/g);t&&(this.hashTickDelay=parseInt(t[0])*this.hashTickInterval*1.1)}}this.__init("send")},registerListener:function(e,i){this.listeners[e]=i,this.__init("receive")},hashSend:function(e){if(this.receiverId){if(this.firstSend&&this.hashTickDelay){this.firstSend=!1;var i=this;return void setTimeout(function(){i.hashSend(e)},this.hashTickDelay)}parent.location=this.topLocation+"#"+this.serializeMessageObject(e)}},hashMonitor:function(){var e,i=window.location.hash;if(i&&i.length>2&&("#"==i.charAt(0)&&(i=i.substr(1)),e=this.deserializeMessage(i),e.receiverId)){if(window.location.hash="_","undefined"==typeof this.listeners[e.receiverId])return;this.listeners[e.receiverId].processMessage(e.data)}},postMessageSend:function(e){this.receiverId&&this.senderObj.postMessage(this.serializeMessageObject(e),"*")},postMessageReceive:function(e){var i=this.deserializeMessage(e.data);"undefined"!=typeof this.listeners[i.receiverId]&&this.listeners[i.receiverId].processMessage(i.data)},serializeMessageObject:function(e){var i={yourcx:"yourcx",receiverId:this.receiverId,data:{}};for(var t in e)i.data[t]=e[t];return JSON.stringify(i)},deserializeMessage:function(e){var i="",t={receiverId:null,data:{}};try{i=JSON.parse(e)}catch(s){return t}return"undefined"==typeof i.yourcx||"yourcx"!=i.yourcx?t:(t.receiverId=i.receiverId,t.data=i.data,t)},eventListener:function(e,i,t){e.addEventListener?e.addEventListener(i,t,!1):e.attachEvent&&e.attachEvent("on"+i,t)},getTopLocation:function(){var e=document.location.hash,i="";if(e)"#"==e.charAt(0)&&(e=e.substr(1)),e.indexOf("|")>-1&&(e=e.split("|"),e=e[1]),i=decodeURIComponent(e),i.indexOf("#")>-1&&(i=i.substr(0,i.indexOf("#")));else{var t=document.location.pathname.split("/");""==t[0]&&t.shift(),t.shift(),t.shift();for(var s={},n=null,r=0;r<t.length;r++)r%2?s[n]=t[r]:n=t[r];"undefined"!=typeof s.u&&(i=decodeURIComponent(s.u),i.indexOf("#")>-1&&(i=i.substr(0,i.indexOf("#"))))}this.topLocation=i}};

function Observers(){var callbacks={};return{fire:function(key,value){if(callbacks[key]){callbacks[key].forEach(function(callback){callback(value)})}},on:function(key,callbackToAdd){if(!callbacks[key]){callbacks[key]=[]}callbacks[key].push(callbackToAdd)},off:function(key,callbackToRemove){if(callbacks[key]){callbacks[key]=callbacks[key].filter(function(callback){return callback!==callbackToRemove})}}}}function MutationObservers(_generalObserver){var observers={};var generalObserver=_generalObserver;return{observe:function(name,target,callback,config){if(!_undef(observers[name])){generalObserver.on("mutationObserver."+name,callback);return}var mObserver=new MutationObserver(function(iName){return function(mutations){mutations.forEach(function(mutation){generalObserver.fire("mutationObserver."+iName,mutation)})}}(name));config=config||{attributes:true,childList:true,characterData:true};observers[name]={config:config,target:target,observer:mObserver};mObserver.observe(target,config);generalObserver.on("mutationObserver."+name,callback)},disconnect:function(name){if(!_undef(observers[name])){generalObserver.off("mutationObserver."+name,null);delete observers[name]}}}}function ArrayObserver(_generalObserver){var observers={};var generalObserver=_generalObserver;return{observe:function(_observedArray,_name,_mode,_observeEarlierEntries){_observeEarlierEntries=typeof _observeEarlierEntries!=="undefined"?_observeEarlierEntries:true;switch(_mode){case"timeout":var func=function(){if(_observedArray.length!=observers[_name].targetLength){for(var i=observers[_name].targetLength;i<_observedArray.length;i++){generalObserver.fire("arrayObserver."+_name,_observedArray[i])}observers[_name].targetLength=_observedArray.length}var timeoutId=setTimeout(func,1e3);observers[_name].timeoutId=timeoutId};var timeoutId=setTimeout(func,1e3);var targetLength=_observedArray.length;if(_observeEarlierEntries)targetLength=0;observers[_name]={mode:_mode,target:_observedArray,targetLength:targetLength,timeoutId:timeoutId};break;case"push":var originalPush=_observedArray.push,val;if(_observeEarlierEntries){for(var i=0;i<_observedArray.length;i++){generalObserver.fire("arrayObserver."+_name,_observedArray[i])}}_observedArray.push=function(){originalPush.apply(this,arguments);for(var j=0;j<arguments.length;j++)generalObserver.fire("arrayObserver."+_name,arguments[j])};observers[_name]={mode:_mode,target:_observedArray,originalPush:originalPush};break}},disconnect:function(name){if(!_undef(observers[name])){generalObserver.off("arrayObserver."+name,null);if(observers[name].mode=="push"){observers[name].target.push=observers[name].originalPush}else if(observers[name].mode=="timeout"){if(observers[name].timeoutId)clearTimeout(observers[name].timeoutId);observers[name].timeoutId=null}delete observers[name]}}}}function YourcxBase(){var params={s:{},c:{},a:{},answers:{},ts:{}},that=this,blockResize=false,screenshot=null,surveyResizeMessage=null,blockFireSurvey=false;this.config={surveyMode:"window",welcome:{enable:false,mode:"welcome",submode:"right",verticalMode:"bottom",addFooter:true,followUser:{enable:false,timeSeconds:60*30},style:{width:0,height:300,sideMargin:0,logoImage:"",addCss:"",main:{bg:"00b050",bo:"1px solid #4ca84c"},head:{c:"000000",bg:"eeeeee"},body:{c:"ffffff",bg:"transparent",padding:"20px"},buttons:{padding:"10px"},button:{c:"111111",bg:"eeeeee",hc:"000000",hbg:"ffffff"},footer:{c:"eeeeee",bg:"00b050"}},buttons:{1:{image:"",text:"Oceń serwis",hash:"",mode:"link"},2:{image:"",text:"Przykro mi, nie mogę!",mode:"close"}},texts:{head:"Pomóż nam w rozwoju!",main:'<div class="$CLASSBASE$body_in"><div class="$CLASSBASE$body_in1">Witaj,</div><div class="$CLASSBASE$body_in2">Czy możesz nam pomóc ulepszyć nasz serwis?</div><div class="$CLASSBASE$body_in3">Ankieta zajmie Ci tylko chwilę.</div></div>',buttons:'<div class="$CLASSBASE$buttons"><a class="$CLASSBASE$button $CLASSBASE$button1"></a><a class="$CLASSBASE$button $CLASSBASE$button2"></a></div>',mainBottom:'Chcielibyśmy poznać <span style="font-weight: bold;">Twoją opinię</span> na temat serwisu, pomożesz nam?',footer:"Badanie zapewnia"}},mouse:{topCatchMargin:10,speed:{analyse:true,minSpeed:500}},blockDaysAfterSurveyShown:28,screenshot:{},mobile:{},display:{stickToTop:false,minHeight:440,addHeight:0,startWidth:600},blockades:{enable:true,product:{set:true,check:true},mode:"product",surveys:{daysAfterShown:21,daysAfterFirstAnswer:24,daysAfterFilled:28},probabilityBlockMode:"visit"},postpone:{enable:true,autoClose:false,maxPostponeMinutes:60,globalMode:false,blockade:"onRestore",allowWelcomeForPostponed:false,methods:{widget:{enable:true,mode:"welcome",submode:"right",verticalMode:"bottom",style:{width:0,sideMargin:20,logoImage:"",main:{bg:"ffffff",bo:"1px solid #333333"},head:{c:"000000",bg:"eeeeee"},body:{c:"000000",bg:"ffffff",padding:"0px"},buttons:{padding:"0px 10px 0px 0px"},button:{c:"000000",bg:"eeeeee",hc:"ffffff",hbg:"222222"},footer:{c:"000000",bg:"eeeeee"}},addFooter:false,texts:{head:"",main:"",buttons:'<div class="$CLASSBASE$buttons">                 <a class="$CLASSBASE$button $CLASSBASE$button1"></a>               </div>'},buttons:{1:{image:"",text:"Wróć do badania!",hash:"",mode:"link"}}},quit:{enable:true}},display:{changePostponedSurveyMode:false,postponedSurveyMode:"layer"}},texts:{closeButton:"Zamknij",iframe:"Badanie doświadczeń"},ignoreClean:false};this.od={hash:null,events:{},storagePrefix:"",mouse:{move:{lastMoves:[]},out:{noMouseMoveOut:false,timeOutHandler:null,timeOnPageOut:false}},touch:{scroll:{startTime:null,endTime:null,scrollPos:null},out:{timeOutHandler:null}},startedAsPostponed:false,surveyInputParams:{},hasShownWelcome:false,activeTimeouts:[]};this.checkBeforeFireSurvey=null;this.runInit=null;this.clean=function(){};this.productPreRunCheck=function(surveys){return true};this.addParamInternal=function(key,val,scope){scope=scope||"s";if(scope=="s"&&key in{s:"",c:"",r:"",u:"",t:"",td:"",p:""})return this;if(_undef(params[scope]))params[scope]={};params[scope][key]=val;return this};this.addSurveyInputParams=function(key,val){var obj={};obj[key]=val;this.od.surveyInputParams=fExtend(this.od.surveyInputParams,obj);return this};this.getParamInternal=function(key,scope){scope=scope||"s";if(_undef(params[scope])||_undef(params[scope][key]))return null;return params[scope][key]};this.setSurveyAnswer=function(question_num,val){params.answers[question_num]=val;return this};this.segment=function(segment){return this.addParamInternal("segment",segment)};this.getParams=function(){return params};this.cssClass={reg:function(className){return new RegExp("(^|\\s+)"+className+"(\\s+|$)")},has:function(elem,c){return that.cssClass.reg(c).test(elem.className)},add:function(elem,c){if(!that.cssClass.has(elem,c)){elem.className=elem.className+" "+c}},remove:function(elem,c){elem.className=elem.className.replace(that.cssClass.reg(c)," ")}};this.page={width:function(){return document.documentElement&&document.documentElement.clientWidth?document.documentElement.clientWidth:window.innerWidth!=null?window.innerWidth:document.body!=null?document.body.clientWidth:null},height:function(){return document.documentElement&&document.documentElement.clientHeight?document.documentElement.clientHeight:window.innerHeight!=null?window.innerHeight:document.body!=null?document.body.clientHeight:null},allHeight:function(){var body=document.body,html=document.documentElement;if(!body||!html)return 0;return height=Math.max(body.scrollHeight,body.offsetHeight,html.clientHeight,html.scrollHeight,html.offsetHeight)},scrollTop:function(){if(window.pageYOffset!==undefined){return window.pageYOffset}return document.documentElement.scrollTop||document.body.scrollTop||0}};this._={getColor:function(color){if(color&&color.length&&color.substring(0,1)=="#")return color.substring(1);else return color},getMutationObserver:function(){return _mutationObserver}};this.storageDel=function(_key){_storage.del(that.od.storagePrefix+_key)};this.storageSet=function(_key,_val,_options){_options=fExtend({},{_omitStoragePrefix:true},_options);var prefix=that.od.storagePrefix;if(_options._omitStoragePrefix)prefix="";_storage.set(prefix+_key,_val)};this.storageSetTimed=function(_key,_val,_minutes,_options){this.storageSet(_key,{value:_val,ttl:_minutes*60*1e3+(new Date).getTime()},_options)};this.storageGet=function(_key,_callback,_options){_options=fExtend({},{_omitCache:false,_omitStoragePrefix:true},_options);var prefix=that.od.storagePrefix;if(_options._omitStoragePrefix)prefix="";if(typeof _key=="string"){_storage.get(prefix+_key,_callback,_options._omitCache)}else{var tmp=[];for(var i=0;i<_key.length;i++){tmp.push(prefix+_key[i])}_storage.getMulti(tmp,_callback,_options._omitCache)}};this.storageGetTimed=function(_key,_callback,_options){var func=function(_obj){var val=that.__storageGetTimedValue(_obj);if(typeof _callback!="undefined")_callback(val)};this.storageGet(_key,func,_options)};this.__storageGetTimedValue=function(_obj){var val=null;if(!_obj||typeof _obj!="object"||typeof _obj["value"]=="undefined"||typeof _obj["ttl"]=="undefined")val=null;else if(_obj["ttl"]>=(new Date).getTime())val=_obj["value"];return val};this.addEventListener=function(obj,event,fn,useCapture,simple){useCapture=useCapture||false;simple=simple||false;if(typeof this.od.events[fn]!="undefined"&&typeof this.od.events[fn].cnt!="undefined"){++this.od.events[fn].cnt;return false}this.od.events[fn]={fn:function(e){var ret=null;if(typeof fn=="function")ret=fn(e);else ret=that[fn](e);if(ret)return ret;return false},cnt:1,useCapture:useCapture};if(simple)this.od.events[fn].fn=that[fn];if(obj.addEventListener){obj.addEventListener(event,this.od.events[fn].fn,useCapture)}else if(obj.attachEvent){obj.attachEvent("on"+event,this.od.events[fn].fn,useCapture)}else this.od.events[fn]=null;return true};this.removeEventListener=function(obj,event,fn,forceRemove){forceRemove=forceRemove||false;if(typeof this.od.events[fn]!="undefined"&&typeof this.od.events[fn].cnt!="undefined"){if(--this.od.events[fn].cnt>0&&!forceRemove)return false;if(obj.removeEventListener)obj.removeEventListener(event,this.od.events[fn].fn,this.od.events[fn].useCapture);else if(obj.detachEvent)obj.detachEvent("on"+event,this.od.events[fn].fn,this.od.events[fn].useCapture);this.od.events[fn]=null;delete this.od.events[fn];return true}return false};this.touchStartEventListener=function(e){var localConfig;localConfig=this.config.methods.noScrollTouchOut;if(this.od.touch.out.timeOutHandler){clearTimeout(this.od.touch.out.timeOutHandler);delete this.od.touch.out.timeOutHandler;this.od.touch.out.timeOutHandler=null}this.od.touch.scroll.scrollPos=this.page.scrollTop();this.od.touch.scroll.startTime=(new Date).getTime();if(localConfig.minTimeWithoutMovement&&this.od.touch.scroll.endTime){if(this.od.touch.scroll.startTime-this.od.touch.scroll.endTime<localConfig.minTimeWithoutMovement*1e3||this.od.touch.scroll.startTime-this.od.touch.scroll.endTime>localConfig.maxTimeWithoutMovement*1e3)this.od.touch.scroll.startTime=this.od.touch.scroll.startTime-localConfig.maxTouchTime-1e3}};this.touchEndEventListener=function(e){var scrollEnd=this.page.scrollTop(),distanceScrolled,direction,touchTime,localConfig,fireSurvey="touchScroll";if(!this.od.touch.scroll.scrollPos)return;localConfig=this.config.methods.noScrollTouchOut;distanceScrolled=Math.abs(scrollEnd-this.od.touch.scroll.scrollPos);direction=scrollEnd-this.od.touch.scroll.scrollPos>0?"down":"up";touchTime=(new Date).getTime()-this.od.touch.scroll.startTime;this.od.touch.scroll.endTime=(new Date).getTime();if(touchTime>localConfig.maxTouchTime)return;if(direction==="up"&&Math.abs(distanceScrolled/touchTime*1e3)>localConfig.minScrollSpeed&&distanceScrolled>localConfig.minScrollDistance&&distanceScrolled<localConfig.maxScrollDistance){if(localConfig.probability!=1&&localConfig.probability<Math.random())return;if(localConfig.startDelay){this.od.touch.out.timeOutHandler=setTimeout(function(){that.fireSurvey(fireSurvey)},localConfig.startDelay*1e3)}else{this.fireSurvey(fireSurvey)}}};this.initScreenshot=function(){if(screenshot){delete screenshot;screenshot=null}var surveyBlock="yourcx_layer";switch(this.config.surveyMode){case"layer":surveyBlock="yourcx_layer";break;case"slide":surveyBlock="yourcx_slide";break;case"corner":surveyBlock="yourcx_corner";break}screenshot=new YourcxScreenshot(this,surveyBlock,"yourcx_bg",this.config.screenshot);blockResize=true};this.screenshotForceClose=function(){this.removeSurvey();blockResize=false;if(screenshot){delete screenshot;screenshot=null}};this.closeScreenshot=function(_screenshot_data){_yourcx_transport.initSender("surveyScManager");var frame=document.getElementById(this.iframeId);_yourcx_transport.senderObj=frame.contentWindow;var html=(new XMLSerializer).serializeToString(document.doctype)+document.documentElement.outerHTML;_yourcx_transport.send({type:"setScData",screenshot:_screenshot_data,html:html,mode:"manual"});delete screenshot;screenshot=null;blockResize=false};this.getPageHtml=function(){_yourcx_transport.initSender("surveyScManager");var frame=document.getElementById(this.iframeId);_yourcx_transport.senderObj=frame.contentWindow;var elements={yourcx_bg:null,yourcx_layer:null,yourcx_slide:null,yourcx_corner:null},i,elem;for(i in elements){if(!i)continue;elem=document.getElementById(i);if(elem){elements[i]={elem:elem,display:elem.style.display};elem.style.display="none"}}var html=(new XMLSerializer).serializeToString(document.doctype)+document.documentElement.outerHTML;for(i in elements){if(!i)continue;if(elements[i])elements[i].elem.style.display=elements[i].display}var _screenshot_data=encodeURIComponent(window.JSON.stringify({rectangles:{},img:null,mode:"auto"}));_yourcx_transport.send({type:"setScData",screenshot:_screenshot_data,html:html})};this.onResize=function(){if(!blockResize)that.resize(surveyResizeMessage)};this.processMessage=function(message){var loader=document.getElementById("yourcx_loader");if(!_undef(message.type)){switch(message.type){case"resize":if(loader)loader.style.display="none";surveyResizeMessage=message;this.resize(message);break;case"close":this.removeSurvey();break;case"surveyFilled":_observer.fire("surveyFilled."+this.od.hash,message.data);_analytics.userDataEvent("surveyFilled");break;case"initPageScreenshot":this.initScreenshot();break;case"getPageHtml":this.getPageHtml();break;case"results":_observer.fire("receiveResult",{results:message.results,rules:message.rules});break;case"event":if(_undef(message.data)||_undef(message.eventType))break;_observer.fire(message.eventType,message.data);break;case"postpone":this.postponeSurvey(message);break}}};this.postponeSurvey=function(message){if(!that.config.postpone.enable)return;if(!_undef(message.tmp_result_id)){that.storageGet("postponed surveys",function(data){if(!data)data={};var analyticsData=_analytics.getData();data[that.od.hash]={time:(new Date).getTime(),tmp_result_id:message.tmp_result_id,page:analyticsData.visit.page};if(that.config.postpone.globalMode){if(_undef(data["global"]))data["global"]={};data["global"][that.od.hash]={time:(new Date).getTime(),surveyConfig:that.surveyConfigOrg,maxPostponeMinutes:that.config.postpone.maxPostponeMinutes,page:analyticsData.visit.page}}that.storageSet("postponed surveys",data,{_omitStoragePrefix:true})},{_omitCache:true,_omitStoragePrefix:true});_observer.fire("postponeSurvey",that.od.hash)}if(that.config.postpone.autoClose)this.removeSurvey()};this.removeSurvey=function(){switch(this.config.surveyMode){case"insert":this.removeEventListener(window,"resize","onResize");break;case"layer":var bg=document.getElementById("yourcx_bg");if(bg)document.body.removeChild(bg);var layer=document.getElementById("yourcx_layer");if(layer)document.body.removeChild(layer);this.removeEventListener(window,"resize","onResize");that.cssClass.remove(document.body,"yourcxBlockOverflow");break;case"slide":this.cssClass.remove(document.body,"yourcxSlide");var slide=document.getElementById("yourcx_slide");that.resize=function(){};switch(this.config.pictogramMode){case"left_bottom":case"left":slide.style.left="-"+slide.style.width+"px";break;case"right_bottom":case"right":slide.style.right="-"+slide.style.width+"px";break}slide.style.width="0px";setTimeout(function(){document.body.removeChild(slide);var bg=document.getElementById("yourcx_bg");if(bg)document.body.removeChild(bg)},500);this.removeEventListener(window,"resize","onResize");this.cssClass.remove(document.body,"yourcxBlockOverflow");break;case"corner":var slide=document.getElementById("yourcx_corner");that.resize=function(){};slide.style.width="0px";slide.style.height="0px";setTimeout(function(){document.body.removeChild(slide)},500);this.removeEventListener(window,"resize","onResize");break}_observer.fire("postRemoveSurvey."+this.od.hash,{mode:this.config.surveyMode})};this.resizeLayer=function(message){var fr=document.getElementById(this.iframeId);var layer=document.getElementById("yourcx_layer");var bg=document.getElementById("yourcx_bg");var pageHeight=this.page.height();if(!message)return;if(layer.style.display!="block")layer.style.display="block";if(bg.style.display!="block"){bg.style.display="block";that.cssClass.add(document.body,"yourcxBlockOverflow")}if(!_undef(message.mobile)&&message.mobile==true){layer.style.top=6+"px";fr.style.width="100%";fr.style.height="100%";layer.style.width="100%";layer.style.height="100%";layer.style.left="0%";this.cssClass.add(layer,"yourcx-mobile")}else{if(!_undef(message.width)){var width=message.width;if(width>this.page.width()-20)width=this.page.width()-20;layer.style.left=(this.page.width()-width)/2+"px";layer.style.width=width+"px";fr.style.width=width-20+"px"}if(_undef(message.height))message.height=this.config.display.minHeight;var height=message.height;if(!_undef(message.scrollHeight)&&message.scrollHeight>height)height=message.scrollHeight;if(height<this.config.display.minHeight)height=this.config.display.minHeight;height+=this.config.display.addHeight;if(height>this.page.height()-50||this.config.display.stickToTop)height=this.page.height()-50;fr.style.height=height+"px";layer.style.top=pageHeight/2-height/2+"px"}};this.resizeSlide=function(message){var fr=document.getElementById(this.iframeId);var slide=document.getElementById("yourcx_slide");if(slide.style.display!="block")slide.style.display="block";if(typeof message.mobile!="undefined"&&message.mobile==true){fr.style.width="100%";if(_undef(message.height))message.height=this.config.display.minHeight;var height=message.height;if(!_undef(message.scrollHeight)&&message.scrollHeight>height)height=message.scrollHeight;if(height>this.page.height()-50||this.config.display.stickToTop)height=this.page.height()-50;if(height<this.config.display.minHeight)height=this.config.display.minHeight;fr.style.height=height+"px";slide.style.width="100%";slide.style.height=height+"px";switch(this.config.pictogramMode){case"bottom":slide.style.left="15px";break;case"left":case"right":default:slide.style.top="calc(50% - "+parseInt(height/2)+"px)";break}}else{if(!_undef(message.width)){slide.style.width=message.width+"px";fr.style.width=message.width+"px"}if(_undef(message.height))message.height=this.config.display.minHeight;var height=message.height;if(!_undef(message.scrollHeight)&&message.scrollHeight>height)height=message.scrollHeight;if(height>this.page.height()-50||this.config.display.stickToTop)height=this.page.height()-50;if(height<this.config.display.minHeight)height=this.config.display.minHeight;fr.style.height=height+"px";switch(this.config.pictogramMode){case"bottom":slide.style.left="calc(50% - "+parseInt(message.width/2)+"px)";break;case"left":case"right":default:slide.style.top="calc(50% - "+parseInt(height/2)+"px)";break}}};this.resizeCorner=function(message){var fr=document.getElementById(this.iframeId);var corner=document.getElementById("yourcx_corner");if(!_undef(message.mobile)&&message.mobile==true){fr.style.width="100%";fr.style.height="100%";corner.style.width="100%";corner.style.height="100%";corner.style.left="0%";this.cssClass.add(corner,"yourcx-mobile")}if(!_undef(message.height)){var height=message.height;if(!_undef(message.scrollHeight)&&(message.scrollHeight>height||message.scrollHeight+30<height))height=message.scrollHeight;if(height>this.page.height()-20)height=this.page.height()-20;fr.style.height=height+"px";corner.style.height=height+"px"}if(!_undef(message.width)){var width=message.width;if(width>this.page.width()-20){fr.style.width="100%";corner.style.width="100%"}else{fr.style.width=width+"px";corner.style.width=width+"px"}}};this.resizeInsert=function(message){var fr=document.getElementById(this.iframeId);if(!message)return;if(!_undef(message.mobile)&&message.mobile==true){fr.style.width="100%"}else if(typeof message.width!="undefined")fr.style.width=message.width+"px";if(!_undef(message.height)){var height=message.height;if(!_undef(message.scrollHeight)&&message.scrollHeight>height)height=message.scrollHeight;if(height<this.config.display.minHeight)height=this.config.display.minHeight;height+=this.config.display.addHeight;fr.style.height=height+"px"}};this.showSurveySlide=function(){var style=document.createElement("style"),s="",wrap="",slide="",shadow="";style.setAttribute("type","text/css");s+="#yourcx_slide { position: fixed; z-index: 16777271; background-color: #ffffff; transition: all 0.1s; }\n";s+="#yourcx_slide .yourcx_close { display:block; box-sizing:border-box; width: 22px; height: 22px; border-width:3px; border-style: solid; border-color:#ededed; border-radius:100%; background: -webkit-linear-gradient(-45deg, transparent 0%, transparent 46%, white 46%,  white 56%,transparent 56%, transparent 100%), -webkit-linear-gradient(45deg, transparent 0%, transparent 46%, white 46%,  white 56%,transparent 56%, transparent 100%); background-color: #777777; position: absolute; right: 0px; top: -7px; }\n";s+="#yourcx_slide .yourcx_close:hover { background-color: #333333; }\n";s+="#yourcx_slide #yourcx_loader { margin-left: 10px; margin-top: 10px; }\n";s+=".yourcxBlockOverflow { overflow: hidden; }\n";var positionRight=0;var positionBottom="inherit";switch(this.config.pictogramMode){case"bottom":wrap="top";slide="bottom";shadow="4px";basePosition="left";positionBottom="calc(50% - 150px)";positionRight=20;break;case"left_bottom":case"left":wrap="right";slide="left";shadow="-4px";positionBottom="calc(50% - 150px)";basePosition="bottom";break;case"right_bottom":case"right":default:wrap="left";slide="right";shadow="4px";positionBottom="calc(50% - 150px)";basePosition="bottom";break}s+="#yourcx_slide.pmr { width: 50px; height: 50px; "+slide+": -50px; }\n";s+="body.yourcxSlide #yourcx_slide.pmr { "+slide+": "+positionRight+"px; box-shadow: rgba(0, 0, 0, 0.498039) 2px 2px 4px 0px;border-radius: 5px; "+basePosition+": "+positionBottom+"}\n";if(style.styleSheet)style.styleSheet.cssText=s;else style.appendChild(document.createTextNode(s));document.getElementsByTagName("head")[0].appendChild(style);var slide=document.createElement("div");slide.setAttribute("id","yourcx_slide");slide.className="pmr";slide.innerHTML='<a href="#" title="'+this.config.texts.closeButton+'" onclick="return false;" class="yourcx_close" /></a><iframe title="'+this.config.texts.iframe+'" id="'+this.iframeId+'" name="'+this.iframeId+'" width="100%" style="height: 0px; background: none transparent scroll repeat 0% 0%;" allowTransparency="true" frameborder="0" border="0"></iframe><img id="yourcx_loader" src="https://static.yourcx.io/survey/images/loader.gif" />';document.body.appendChild(slide);var a=document.getElementById("yourcx_slide").getElementsByTagName("a");for(var i=0;i<a.length;i++)if(this.cssClass.has(a[i],"yourcx_close"))a[i].onclick=function(i){return function(){i.removeSurvey();return false}}(that);document.getElementById(this.iframeId).focus();setTimeout(function(){that.openSurvey("iframe");that.cssClass.add(document.body,"yourcxSlide")},50)};this.showSurveyCorner=function(){var style=document.createElement("style"),s="",slide="",shadow="";style.setAttribute("type","text/css");s+="#yourcx_corner { bottom: 0px; width: 300px; height: 0px; right: -300px; position: fixed; z-index: 16777271; background-color: #ffffff; overflow: hidden; -webkit-transition: all 0.4s; -moz-transition: all 0.4s; -ms-transition: all 0.4s; -o-transition: all 0.4s; transition: all 0.4s; }\n";s+="#yourcx_corner .yourcx_close { display:block; box-sizing:border-box; width: 22px; height: 22px; border-width:3px; border-style: solid; border-color:#000000; border-radius:100%; background: -webkit-linear-gradient(-45deg, transparent 0%, transparent 46%, white 46%,  white 56%,transparent 56%, transparent 100%), -webkit-linear-gradient(45deg, transparent 0%, transparent 46%, white 46%,  white 56%,transparent 56%, transparent 100%); background-color: #000000; box-shadow:0px 0px 2px 2px rgba(0,0,0,0.5); transition: all 0.3s ease; position: absolute; right: 0px; top: 0px; }\n";s+="#yourcx_corner .yourcx_close:hover { background-color: #777777; }\n";if(_mobile)s+="#yourcx_corner { -webkit-transition: all 0.1s; -moz-transition: all 0.1s; -ms-transition: all 0.1s; -o-transition: all 0.1s; transition: all 0.1s; }\n";switch(this.config.pictogramMode){case"left_bottom":case"left":slide="left";shadow="-4px";break;case"right_bottom":case"right":slide="right";shadow="4px";break}s+="#yourcx_corner.pmr { "+slide+": 0px; box-shadow: 4px "+shadow+" 6px "+shadow+" #333 !important; }\n";if(style.styleSheet)style.styleSheet.cssText=s;else style.appendChild(document.createTextNode(s));document.getElementsByTagName("head")[0].appendChild(style);var slide=document.createElement("div");slide.setAttribute("id","yourcx_corner");slide.innerHTML='<a href="#" title="'+this.config.texts.closeButton+'" onclick="return false;" class="yourcx_close" /></a><iframe title="'+this.config.texts.iframe+'" id="'+this.iframeId+'" name="'+this.iframeId+'" width="100%" style="height: 0px; background: none transparent scroll repeat 0% 0%;" allowTransparency="true" frameborder="0" border="0"></iframe><img id="yourcx_loader" src="https://static.yourcx.io/survey/images/loader.gif" />';document.body.appendChild(slide);var a=document.getElementById("yourcx_corner").getElementsByTagName("a");for(var i=0;i<a.length;i++)if(this.cssClass.has(a[i],"yourcx_close"))a[i].onclick=function(i){return function(){i.removeSurvey();return false}}(that);document.getElementById(this.iframeId).focus();setTimeout(function(){that.cssClass.add(slide,"pmr");that.openSurvey("iframe")},50)};this.showSurveyLayer=function(){var newBg=document.createElement("div");newBg.setAttribute("id","yourcx_bg");document.body.appendChild(newBg);var layer=document.createElement("div");layer.style.top=this.page.height()*2/5-10/2+"px";layer.style.left=(this.page.width()-10)/2+"px";layer.setAttribute("id","yourcx_layer");layer.innerHTML='<a href="#" title="'+this.config.texts.closeButton+'" onclick="return false;" class="yourcx_close" /></a><iframe title="'+this.config.texts.iframe+'" id="'+this.iframeId+'" name="'+this.iframeId+'" width="100%" allowTransparency="true" frameborder="0" border="0"></iframe><img id="yourcx_loader" src="https://static.yourcx.io/survey/images/loader.gif" />';document.body.appendChild(layer);var a=document.getElementById("yourcx_layer").getElementsByTagName("a");for(var i=0;i<a.length;i++)if(this.cssClass.has(a[i],"yourcx_close"))a[i].onclick=function(i){return function(){i.removeSurvey();return false}}(that);var style=document.createElement("style"),s="";style.setAttribute("type","text/css");s+="#yourcx_bg { display: none; top: 0px; left: 0px; position: fixed; z-index: 16777270; width:100%; height:100%; filter: alpha(opacity=50); -moz-opacity: .50; -khtml-opacity: 0.5; opacity: 0.5; background-color:#000000; text-align:center; vertical-align:middle; }\n";s+="#yourcx_layer { width: 1px; z-index: 16777271; position: fixed; text-align: left; padding: 10px 10px 10px 10px; box-sizing: border-box; display: none; }\n";s+="#yourcx_layer iframe { height: 0px; background: none transparent scroll repeat 0% 0%; visibility: visible; }\n";s+="#yourcx_layer.yourcx-mobile { overflow-y: scroll; -webkit-overflow-scrolling: touch; }\n";s+="#yourcx_layer .yourcx_close { display:block; box-sizing:border-box; width: 22px; height: 22px; border-width:3px; border-style: solid; border-color:#000000; border-radius:100%; background: -webkit-linear-gradient(-45deg, transparent 0%, transparent 46%, white 46%,  white 56%,transparent 56%, transparent 100%), -webkit-linear-gradient(45deg, transparent 0%, transparent 46%, white 46%,  white 56%,transparent 56%, transparent 100%); background-color: #000000; box-shadow:0px 0px 2px 2px rgba(0,0,0,0.5); transition: all 0.3s ease; position: absolute; right: 0px; top: 0px; }\n";s+="#yourcx_layer .yourcx_close:hover { background-color: #777777; }\n";s+=".yourcxBlockOverflow { overflow: hidden; }\n";if(style.styleSheet)style.styleSheet.cssText=s;else style.appendChild(document.createTextNode(s));document.getElementsByTagName("head")[0].appendChild(style);document.getElementById(this.iframeId).focus();this.openSurvey("iframe")};this.showSurveyInsert=function(tries){var txt,d;if(typeof tries=="undefined")tries=3;txt='<iframe title="'+this.config.texts.iframe+'" id="'+this.iframeId+'" name="'+this.iframeId+'" frameborder="0" width="'+this.config.display.startWidth+'" height="150" marginheight="0" marginwidth="0"></iframe>';d=document.createElement("div");d.innerHTML=txt;d.className="yourcx_insert_iframe_wrapper";if(!document.getElementById(this.config.blockId)){if(tries>0){setTimeout(function(){that.showSurveyInsert(tries-1)},1234)}return}document.getElementById(this.config.blockId).appendChild(d);this.openSurvey("iframe")};this.openSurvey=function(mode){var proto="https:"==document.location.protocol?"https://":"https://",params=this.getParams();_analytics.userDataEvent("surveySeen");if(window.screen){params.s["s"]=window.screen.width+"x"+window.screen.height;if(!isNaN(screen.pixelDepth)&&screen.pixelDepth!=0){params.s["c"]=screen.pixelDepth}else{params.s["c"]=screen.colorDepth}}if(document.referrer)params.s["r"]=document.referrer.substring(0,399);if(document.URL)params.s["u"]=document.URL.substring(0,399);params.s["t"]=(new Date).getTime();params.s["td"]=((new Date).getTime()-_run_time)/1e3;params.s["p"]=this.product;params.s["ph"]=this.page.allHeight();if(!_undef(this.config.pictogramMode))params.s["_pm"]=this.config.pictogramMode;params.s["_sm"]=this.config.surveyMode;if(!_undef(this.config.hovercard))params.s["_hovercard"]=this.config.hovercard.enable;if(!_undef(window.performance)&&!_undef(window.performance.timing))params.s["performanceTiming"]=window.performance.timing;params.s["title"]=document.title;params.a=_analytics.getData();params.u=_analytics.getUserId();form=document.createElement("form");switch(mode){case"window":window.open("",this.product,"width=700,height=600,innerWidth=700,innerHeight=600,titlebar=0,scrollbars=1,status=0,location=0,toolbar=0,menubar=0");form.target=this.product;form.action=proto+"surveys.yourcx.io/s/"+this.od.hash;break;case"iframe":this.surveyUrl=proto+"surveys.yourcx.io/s/"+this.od.hash+"/#"+this.iframeId+"|"+encodeURIComponent(document.URL.substring(0,299));form.target=this.iframeId;form.action=this.surveyUrl;break}form.method="post";form.style.display="none";input=document.createElement("input");input.type="hidden";input.name="params";input.value=JSON.stringify(params);form.appendChild(input);for(key in this.od.surveyInputParams){input=document.createElement("input");input.type="hidden";input.name=key;input.value=this.od.surveyInputParams[key];form.appendChild(input)}document.body.appendChild(form);form.submit();_observer.fire("postOpenSurvey."+this.od.hash,{survey:this});_observer.fire("postOpenSurvey",{survey:this});return this.surveyUrl};this.fireSurvey=function(mode){_observer.fire("preFireSurvey."+this.od.hash,{mode:mode});if(mode)that.addParamInternal("_im",mode);if(blockFireSurvey)return false;if(this.checkBeforeFireSurvey)this.checkBeforeFireSurvey(mode);else this.fireSurveyInternal(mode);
return true};this.fireSurveyInternal=function(mode){if(mode)that.addParamInternal("_im",mode);if(!_undef(_postponedSurveys[that.od.hash])&&!that.config.postpone.allowWelcomeForPostponed){this.fireSurveyReal();return}if(!this.config.welcome.enable){this.fireSurveyReal();return}this.showWelcome()};this.fireSurveyReal=function(){if(!_undef(_postponedSurveys[that.od.hash])){this.addSurveyInputParams("tmp_result_id",_postponedSurveys[this.od.hash].tmp_result_id);if(that.config.postpone.blockade=="onRestore"){that.storageGet("postponed surveys",function(data){if(!data)data={};if(!_undef(data[that.od.hash]))delete data[that.od.hash];if(!_undef(data["global"])&&!_undef(data["global"][that.od.hash]))delete data["global"][that.od.hash];that.storageSet("postponed surveys",data,{_omitStoragePrefix:true})},{_omitCache:true,_omitStoragePrefix:true})}else if(that.config.postpone.blockade=="afterSurveyFilled"){_observer.on("surveyFilled."+this.od.hash,function(){that.storageGet("postponed surveys",function(data){if(!data)data={};if(!_undef(data[that.od.hash]))delete data[that.od.hash];if(!_undef(data["global"])&&!_undef(data["global"][that.od.hash]))delete data["global"][that.od.hash];that.storageSet("postponed surveys",data,{_omitStoragePrefix:true})},{_omitCache:true,_omitStoragePrefix:true})})}this.od.startedAsPostponed=true;_observer.fire("runPostponedSurvey",{hash:this.od.hash,product:this.product});that.closePostponedWidget();if(that.config.postpone.display.changePostponedSurveyMode)that.config.surveyMode=that.config.postpone.display.postponedSurveyMode}_analytics.getClientParams(function(_params){params.c=_params;switch(that.config.surveyMode){case"insert":that.iframeId=that.iframeIdBase+"_insert";_yourcx_transport.registerListener(that.iframeId,that);that.resize=that.resizeInsert;that.addEventListener(window,"resize","onResize");that.showSurveyInsert();break;case"layer":if(_globalFireSurveyBlock&&that.getParamInternal("_im")!="click")return false;_globalFireSurveyBlock=true;that.iframeId=that.iframeIdBase+"_layer";_yourcx_transport.registerListener(that.iframeId,that);that.resize=that.resizeLayer;that.addEventListener(window,"resize","onResize");that.showSurveyLayer();break;case"slide":if(_globalFireSurveyBlock&&that.getParamInternal("_im")!="click")return false;_globalFireSurveyBlock=true;that.iframeId=that.iframeIdBase+"_slide";_yourcx_transport.registerListener(that.iframeId,that);that.resize=that.resizeSlide;that.addEventListener(window,"resize","onResize");that.showSurveySlide();break;case"corner":if(_globalFireSurveyBlock&&that.getParamInternal("_im")!="click")return false;_globalFireSurveyBlock=true;that.iframeId=that.iframeIdBase+"_corner";_yourcx_transport.registerListener(that.iframeId,that);that.resize=that.resizeCorner;that.addEventListener(window,"resize","onResize");that.showSurveyCorner();break;case"window":default:_yourcx_transport.registerListener(that.product+"_"+that.od.hash,that);that.resize=function(message){};that.openSurvey("window");break}},false,false)};this.showWelcome=function(){var options={classBase:"yourcx_welcome_",checkGlobalWelcomeBlock:true,internalParam:{set:true,name:"_welcome",val:this.config.welcome.mode},widgetBase:this.config.welcome,observerEvent:"welcome.show",analyticsEvent:"survey.welcome.shown",closeFunction:"closeWelcome",runFunction:"runWelcomeSurvey"};this.showWelcomeInternal(options)};this.showPostponedSurveyWidget=function(){var options={classBase:"yourcx_postpone_",checkGlobalWelcomeBlock:false,internalParam:{set:false,name:"_postpone",val:"widget"},widgetBase:this.config.postpone.methods.widget,observerEvent:"postpone.show",analyticsEvent:"survey.postpone.shown",closeFunction:"closePostponedWidget",runFunction:"runPostponedSurvey"};this.showWelcomeInternal(options)};this.showWelcomeInternal=function(_options){var classBase=_options["classBase"],txt="";if(_options["checkGlobalWelcomeBlock"]){if(_globalWelcomeBlock)return false;_globalWelcomeBlock=true}if(_options.internalParam.set)that.addParamInternal(_options.internalParam.name,_options.internalParam.val);var welcome=document.createElement("div");welcome.setAttribute("id","yourcx_layer"+_options.internalParam.name);var widgetBase=_options.widgetBase;switch(widgetBase.mode){case"two surveys":var newBg=document.createElement("div");newBg.setAttribute("id","yourcx_bg");document.body.appendChild(newBg);welcome.style.width=widgetBase.style.width+"px";welcome.style.top=this.page.height()*2/5-widgetBase.style.height/2+"px";welcome.style.left=(this.page.width()-widgetBase.style.width)/2+"px";welcome.innerHTML='<div class="'+classBase+'main">               <div class="'+classBase+'close"></div>               <div class="'+classBase+'head">                 <img class="'+classBase+'logo" src="'+widgetBase.style.logoImage+'" />                 <span class="'+classBase+'main_text">'+widgetBase.texts.main+'</span>               </div>               <div class="'+classBase+'body">                 <div class="'+classBase+"button "+classBase+'button1">                   <a class="'+classBase+"button "+classBase+'button1">                     <img src="'+widgetBase.buttons[1].image+'" />                     <span>'+widgetBase.buttons[1].text+'</span>                   </a>                 </div>                 <div class="'+classBase+"button "+classBase+'button2">                   <a class="'+classBase+"button "+classBase+'button2">                     <img src="'+widgetBase.buttons[2].image+'" />                     <span>'+widgetBase.buttons[2].text+'</span>                   </a>                 </div>               </div>               <div class="'+classBase+'footer">                 <div class="'+classBase+'oplogo">                   '+widgetBase.texts.footer+'                   <a href="https://yourcx.pluto/" target="_blank">YourCX</a>                 </div>               </div>             </div>';document.body.appendChild(welcome);var style=document.createElement("style"),s="",o="#yourcx_layer ";style.setAttribute("type","text/css");s+="#yourcx_bg { top: 0px; left: 0px; position: fixed; z-index: 100000; width:100%; height:100%; filter: alpha(opacity=50); -moz-opacity: .50; -khtml-opacity: 0.5; opacity: 0.5; background-color:#000000; text-align:center; vertical-align:middle; }\n";s+=o+"{ text-align: left; position: fixed; z-index: 100001; }\n";s+=o+" ."+classBase+"main { margin: 15px; font-family: arial; color: #000000; background-color: #ffffff; position: reative; font-size: 12px; box-shadow: 0 0 15px rgba(0, 0, 0, 0.6); }\n";s+=o+" ."+classBase+"close { position: absolute; right: 10px; top: 10px; width: 16px; height: 16px; display: block; background: url('//static.yourcx.pluto/survey/close.png') no-repeat; cursor: pointer; border: 3px solid #011971; border-radius: 18px; }\n";s+=o+" ."+classBase+"close:hover { background: url('//static.yourcx.pluto/survey/close_hover.png') no-repeat; }\n";s+=o+" ."+classBase+"head { background-color: #011971; display: flex; align-items: center; }\n";s+=o+" ."+classBase+"logo { max-width: 160px; max-height: 30px; margin: 14px 10px 10px 20px; }\n";s+=o+" ."+classBase+"main_text { flex-grow: 1; padding: 14px 20px 10px 20px; color: #ffffff; font-size: 17px; font-weight: bold; }\n";s+=o+" ."+classBase+"body { padding: 20px 20px; display: flex; align-items: center; }\n";s+=o+" div."+classBase+"buttons { width: 50%; text-align: center; }\n";s+=o+" a."+classBase+"button { cursor: pointer; display: flex;  align-items: center; justify-content: center; padding: 20px 0px 20px 0px; }\n";s+=o+" a."+classBase+"button:hover { text-decoration: none; background-color: #f2f2f2; }\n";s+=o+" ."+classBase+"button img { max-width: 40px; max-height: 40px; margin-right: 5px; }\n";s+=o+" ."+classBase+"button span { padding: 8px 20px 8px 20px; color: #ffffff; font-size: 15px; font-weight: bold; background-color: #011971; border-radius: 4px; max-width: 160px; }\n";s+=o+" ."+classBase+"footer { padding: 0px 10px 8px 0px; text-align: right; }\n";s+=o+" ."+classBase+"footer a { font-weight: bold; color: #011971; }\n";s+=o+" ."+classBase+"orange { color: #F47605; }\n";break;case"bottom":widgetBase.buttons[1].hash=this.od.hash;welcome.style.width="100%";welcome.style.bottom="0px";welcome.style.left="0px";welcome.innerHTML='<div class="'+classBase+'main">               <div class="'+classBase+'close"></div>               <a class="'+classBase+"body "+classBase+'button1" href="#">'+widgetBase.texts.mainBottom+"</a>             </div>";document.body.appendChild(welcome);var style=document.createElement("style"),s="",o="#yourcx_layer ";style.setAttribute("type","text/css");s+=o+"{ text-align: center; position: fixed; z-index: 100001; }\n";s+=o+" ."+classBase+"main { padding: 10px; font-family: arial; color: #000000; background-color: #ffffff; box-shadow: 0 0 15px rgba(0, 0, 0, 0.6); display: flex; justify-content: center; }\n";s+=o+" ."+classBase+"close { position: absolute; right: 10px; top: 10px; width: 26px; height: 26px; display: block; background: url('//static.yourcx.pluto/survey/close.png') no-repeat; cursor: pointer; }\n";s+=o+" ."+classBase+"close:hover { background: url('//static.yourcx.pluto/survey/close_hover.png') no-repeat; }\n";s+=o+" ."+classBase+"body { display: block; padding: 10px; text-align: center; width: 70%; cursor: pointer; font-size: 14px; color: #000000; text-decoration: none; background-color: #f7f7f7; border: 1px solid #dddddd; line-height: 1.3em; }\n";s+=o+" ."+classBase+"body:hover { background-color: #f0f0f0; }\n";break;case"welcome":widgetBase.buttons[1].hash=this.od.hash;if(!_undef(widgetBase.texts.buttons))widgetBase.texts.main+=widgetBase.texts.buttons;if(widgetBase.style.width&&parseInt(widgetBase.style.width))welcome.style.width=widgetBase.style.width+"px";mainBorderStyles="border: "+widgetBase.style.main.bo+"; border-radius: 6px 6px 0px 0px; border-bottom: none;";switch(widgetBase.verticalMode){case"top":welcome.style.top="0px";mainBorderStyles="border: "+widgetBase.style.main.bo+"; border-radius: 0px 0px 6px 6px; border-top: none;";break;case"bottom":welcome.style.bottom="0px";break}switch(widgetBase.submode){case"left":welcome.style.left=widgetBase.style.sideMargin+"px";break;case"center":welcome.style.left=(this.page.width()-widgetBase.style.width)/2+"px";break;case"right":default:welcome.style.right=widgetBase.style.sideMargin+"px";break}txt='<div class="'+classBase+'main $MOBILE$">               <div class="'+classBase+'close"></div>';if(widgetBase.texts.head.length)txt+='<div class="'+classBase+'head">                 $LOGO$<span class="'+classBase+'head_text">'+widgetBase.texts.head+"</span>               </div>";txt+='<div class="'+classBase+'body">'+widgetBase.texts.main+"</div>               $FOOTER$             </div>";if(widgetBase.style.logoImage&&widgetBase.style.logoImage.length)txt=txt.replace("$LOGO$",'<img class="'+classBase+'logo" src="'+widgetBase.style.logoImage+'" />');else txt=txt.replace("$LOGO$","");if(!widgetBase.addFooter){txt=txt.replace("$FOOTER$","")}else txt=txt.replace("$FOOTER$",'<div class="'+classBase+'footer">                 <div class="'+classBase+'oplogo">                   '+widgetBase.texts.footer+'                   <a href="https://yourcx.io/" target="_blank">YourCX</a>                 </div>               </div>');if(_mobile)txt=txt.replace("$MOBILE$",classBase+"mobile");else txt=txt.replace("$MOBILE$","");txt=txt.replace(/\$CLASSBASE\$/g,classBase);welcome.innerHTML=txt;document.body.appendChild(welcome);var style=document.createElement("style"),s="",o="#yourcx_layer"+_options.internalParam.name+" ",ws=widgetBase.style;style.setAttribute("type","text/css");s+=o+"{ text-align: center; position: fixed; z-index: 2147483647!important; }\n";s+=o+" ."+classBase+"main { padding: 0px; background-color: #"+that._.getColor(ws.main.bg)+"; text-decoration: none; font-size: 14px; display: flex; flex-direction: column; justify-content: center; "+mainBorderStyles+" }\n";if(widgetBase.addFooter){s+=o+" ."+classBase+"footer { border-top: 1px solid #cccccc; padding: 3px 10px; color: #"+that._.getColor(ws.footer.c)+"; background-color: #"+that._.getColor(ws.footer.bg)+"; text-align: left; font-size: 11px; }\n";s+=o+" ."+classBase+"footer a { color: #"+that._.getColor(ws.footer.c)+"; background-color: #"+that._.getColor(ws.footer.bg)+"; font-size: 11px; }\n"}s+=o+" ."+classBase+"body { display: flex; padding: "+ws.body.padding+"; text-align: center; font-size: 13px; color: #"+that._.getColor(ws.body.c)+"; background-color: transparent; }\n";s+=o+" ."+classBase+"buttons { display: flex; flex-direction: column; padding: "+ws.buttons.padding+"; justify-content: center; }\n";s+=o+" ."+classBase+"button { cursor: pointer; font-size: 14px; padding: 10px 5px 10px 5px; color: #"+that._.getColor(ws.button.c)+"; background-color: #"+that._.getColor(ws.button.bg)+"; text-decoration: none; white-space: nowrap; }\n";s+=o+" ."+classBase+"button_small { font-size: 13px; padding: 5px 8px; }\n";s+=o+" ."+classBase+"button:hover { color: #"+that._.getColor(ws.button.hc)+"; background-color: #"+that._.getColor(ws.button.hbg)+"; text-decoration: none; }\n";s+=o+" ."+classBase+"button:first-child { margin-right: 15px; }\n";s+=o+" ."+classBase+"close { display: none; }\n";s+=o+" ."+classBase+"head { display: none; }\n";s+=o+" ."+classBase+"body_in { padding: 20px; text-align: left; }\n";s+=o+" ."+classBase+"body_in1 { font-size: 20px; font-weight: bold; margin-bottom: 10px; }\n";s+=o+" ."+classBase+"body_in2 { font-size: 13px; font-weight: bold; }\n";s+=o+" ."+classBase+"button.yourcx_welcome_button1 { background: #"+that._.getColor(ws.button.bg)+"; color: #"+that._.getColor(ws.button.c)+"; min-width: 170px; padding: 15px; margin-right: 0px; }\n";s+=o+" ."+classBase+"button.yourcx_welcome_button1:hover { background: #"+that._.getColor(ws.button.hbg)+"; color: #"+that._.getColor(ws.button.hc)+" }\n";s+=o+" ."+classBase+"button.yourcx_welcome_button2 { text-decoration: underline; background: transparent; color: #ffffff; padding: 15px; font-size: 13px; }\n";s+=o+" ."+classBase+"button.yourcx_welcome_button2:hover { text-decoration: none; }\n";s+=o+" ."+classBase+"mobile .yourcx_welcome_body { padding: 5px; }\n";s+=o+" ."+classBase+"mobile .yourcx_welcome_button.yourcx_welcome_button1 { min-width: 120px; }\n";if(widgetBase.verticalMode=="side"){switch(widgetBase.submode){case"left":welcome.style.left="0px";welcome.style.top="60%";welcome.style.right="unset";welcome.style.bottom="unset";s+=o+" ."+classBase+"main { border-top: none; border-bottom: "+widgetBase.style.main.bo+"; border-radius: 0px 0px 6px 6px; transform: rotate(270deg); transform-origin: 0% 0%; }\n";break;case"center":case"right":welcome.style.right="0px";welcome.style.top="50%";welcome.style.left="unset";welcome.style.bottom="unset";s+=o+" ."+classBase+"main { transform: rotate(270deg); transform-origin: 100% 100%; }\n";break}}if(ws.addCss)s+=ws.addCss;break}if(style.styleSheet)style.styleSheet.cssText=s;else style.appendChild(document.createTextNode(s));document.getElementsByTagName("head")[0].appendChild(style);var tab=document.getElementById("yourcx_layer"+_options.internalParam.name).getElementsByTagName("a"),buttonNumber=null;for(var i=0;i<tab.length;i++){buttonNumber=null;if(this.cssClass.has(tab[i],classBase+"button1"))buttonNumber=1;if(this.cssClass.has(tab[i],classBase+"button2"))buttonNumber=2;if(buttonNumber){switch(widgetBase.buttons[buttonNumber].mode){case"link":tab[i].onclick=function(i,j,func){return function(){i[func](j);return false}}(that,buttonNumber,_options.runFunction);break;case"close":tab[i].onclick=function(i,j){return function(){i[j]();return false}}(that,_options.closeFunction);break}tab[i].innerHTML=widgetBase.buttons[buttonNumber].text}}tab=document.getElementById("yourcx_layer"+_options.internalParam.name).getElementsByClassName(classBase+"close");for(var i=0;i<tab.length;i++){tab[i].onclick=function(i,j){return function(){i[j]();return false}}(that,_options.closeFunction)}_observer.fire(_options.observerEvent,widgetBase.buttons[1].hash);_analytics.sendEvent(_options.analyticsEvent,"surveyId",widgetBase.buttons[1].hash);that.od.hasShownWelcome=true};this.closeWelcome=function(_mode){_mode=_mode||"manual";var bg=document.getElementById("yourcx_bg");if(bg)document.body.removeChild(bg);var layer=document.getElementById("yourcx_layer_welcome");if(layer)document.body.removeChild(layer);if(!_undef(this.config.welcome.followUser)&&this.config.welcome.followUser.enable&&_mode=="manual"){this.storageDel("target welcome followUser")}if(_mode!="manual")_globalWelcomeBlock=false};this.closePostponedWidget=function(){var layer=document.getElementById("yourcx_layer_postpone");if(layer){document.body.removeChild(layer);_observer.fire("closePostponedWidget")}};this.runWelcomeSurvey=function(_buttonNum){if(this.config.welcome.buttons[_buttonNum].hash)this.od.hash=this.config.welcome.buttons[_buttonNum].hash;this.closeWelcome();this.fireSurveyReal()};this.runPostponedSurvey=function(_buttonNum){if(this.config.postpone.methods.widget.buttons[_buttonNum].hash)this.od.hash=this.config.postpone.methods.widget.buttons[_buttonNum].hash;this.addSurveyInputParams("updateParams",JSON.stringify({s:{_postpone:"widget"}}));this.closePostponedWidget();this.fireSurveyReal()};this.init=function(config){var skin=null,pictogram=null,i,j;for(i in config){switch(i){case"id":this.od.hash=config[i];this.od.storagePrefix=this.od.hash+" ";break;case"segment":this.segment(config[i]);break;case"onLoad":break;case"surveyMode":this.config.surveyMode=config[i];break;case"product":break;case"language":this.addParamInternal("lang",config[i],"ts");break;case"mobile":break;case"answers":for(j in config[i]){this.setSurveyAnswer(j,config[i][j])}break;case"config":this.config=fExtend(this.config,config[i]);break;case"od":this.od=fExtend(this.od,config[i]);break;case"linkText":this.config.pictogramText=config[i];break;case"mode":this.config.pictogramMode=config[i];break;case"skin":this.config.skin=config[i];break;case"pictogram":pictogram=config[i];break;case"hovercard":this.config.hovercard.enable=config[i];break;case"process":this.isProcessPage(config[i]);break;case"finish":this.finishProcessPage(config[i]);break}}if(skin)this.setSkin(this.config.skin,pictogram);if(!_undef(config.onLoad))config.onLoad(this);if(!_undef(config["mobile"])&&_mobile){var m=config["mobile"];delete config["mobile"];this.init(m,false)}};this.baseRun=function(){if(!that.config.postpone.enable){that.run();return}that.storageGet("postponed surveys",function(data){if(!data){that.run();return}if(_undef(data[that.od.hash])||_undef(data[that.od.hash].time)){that.run();return}var time=data[that.od.hash].time;if(time+that.config.postpone.maxPostponeMinutes*60*1e3>=(new Date).getTime())that.initPostponedSurvey(data[that.od.hash].tmp_result_id,data);else{that.run();delete data[that.od.hash];that.storageSet("postponed surveys",data,{_omitStoragePrefix:true})}},{_omitCache:true,_omitStoragePrefix:true})};this.initPostponedSurvey=function(tmp_result_id,data){if(!_undef(_postponedSurveys[that.od.hash])){if(_undef(_postponedSurveys[that.od.hash].product[that.product])){_postponedSurveys[that.od.hash].product[that.product]=1;that.run()}return}if(_undef(_postponedSurveys[that.od.hash])){_postponedSurveys[that.od.hash]={tmp_result_id:tmp_result_id,product:{},time:data[that.od.hash].time,page:data[that.od.hash].page};_postponedSurveys[that.od.hash].product[that.product]=1;_observer.fire("initPostponedSurvey",that.od.hash)}else _postponedSurveys[that.od.hash].product[that.product]=1;var analyticsData=_analytics.getData();if(that.config.postpone.methods.quit.enable){var surveyConfig={product:"quit",onLoad:function(obj){obj.addSurveyInputParams("updateParams",JSON.stringify({s:{_postpone:"quit"}}))}};yourcx("survey",that.od.hash,surveyConfig)}if(that.config.postpone.methods.target.enable){var surveyConfig={product:"target",onLoad:function(obj){obj.addSurveyInputParams("updateParams",JSON.stringify({s:{_postpone:"target"}}))}};var forceRun=false;if(analyticsData.visit.page-_postponedSurveys[that.od.hash].page>=that.config.postpone.methods.target.minPagesOnSiteFromHide)forceRun=true;if((new Date).getTime()-_postponedSurveys[that.od.hash].time>=that.config.postpone.methods.target.minTimeOnSiteFromHide*1e3)forceRun=true;if(forceRun)setTimeout(function(){yourcx("forcerun",that.od.hash,surveyConfig)},20);else setTimeout(function(){yourcx("survey",that.od.hash,surveyConfig)},20)}if(that.config.postpone.methods.widget.enable)that.showPostponedSurveyWidget()}}/** @preserve
version 4.0.12, 9.10.2024
*/
YourcxQuit.prototype=new YourcxBase;YourcxQuit.prototype.constructor=YourcxQuit;YourcxQuit.baseConstructor=YourcxBase;function YourcxQuit(){YourcxQuit.baseConstructor.call(this);var that=this;fExtend(this.config,{surveyMode:"layer",methods:{noMouseMoveOut:{enabled:true,delay:1,minTimeWithoutMovement:30,maxTimeWithoutMovement:60,probability:1},timeOnPageOut:{enabled:true,minTimeOnPage:20,maxTimeOnPage:300,probability:1},noScrollTouchOut:{enabled:true,startDelay:1,delay:1,minTimeWithoutMovement:5,maxTimeWithoutMovement:120,probability:1,minScrollSpeed:100,maxTouchTime:1e3,minScrollDistance:40,maxScrollDistance:400},returnToPage:{enabled:false,returnsAmount:1,returnTime:30,probability:1,waitForReturnDays:30},onBeforeUnload:{enabled:false,probability:1,alertText:"Czy zechcesz podzielić się z nami przyczyną opuszczenia strony?<br />Jeśli tak, zostań proszę i wypełnij ankietę."}},surveyDelay:.8,postpone:{methods:{widget:{enable:false}}}});this.checkBeforeFireSurvey=function(mode){this.storageGet("quit block",function(_future_block_time){if(_future_block_time>=(new Date).getTime()&&that.config.blockades.product.check)return;that.fireSurveyInternal(mode)},{_omitCache:true,_omitStoragePrefix:true})};this.addHooks=function(){_observer.on("preFireSurvey."+this.od.hash,function(_data){var bg=document.getElementById("yourcx_bg");if(bg)blockFireSurvey=true});_observer.on("postOpenSurvey."+this.od.hash,function(){if(that.config.blockades.product.set){var future=1e3*60*60*24*that.config.blockDaysAfterSurveyShown+(new Date).getTime();that.storageSet("quit block",future,{_omitStoragePrefix:true})}that.clean();blockFireSurvey=true});_observer.on("postRemoveSurvey."+this.od.hash,function(){that.clean();blockFireSurvey=true})};this.clean=function(){if(that.od.mouse.out.noMouseMoveOut)that.od.mouse.out.noMouseMoveOut=false;if(that.od.mouse.out.timeOnPageOut){that.od.mouse.out.timeOnPageOut=false;that.removeEventListener(document,"mouseout","mouseOutEventListener",true);that.removeEventListener(document,"mousemove","mouseMoveEventListener",true)}if(that.config.methods.noScrollTouchOut.enabled){if(this.od.touch.out.timeOutHandler){clearTimeout(this.od.touch.out.timeOutHandler);delete this.od.touch.out.timeOutHandler;this.od.touch.out.timeOutHandler=null}that.removeEventListener(document,"touchstart","touchStartEventListener",true);that.removeEventListener(document,"touchend","touchEndEventListener",true)}if(that.config.methods.onBeforeUnload.enabled)that.removeEventListener(window,"beforeunload","onBeforeUnloadListener",true)};this.addListeners=function(mode){mode=mode||"all";var body=document.getElementsByTagName("body")[0]||document;if(mode=="all"||mode=="mousemove"||mode=="mouse")this.addEventListener(document,"mousemove","mouseMoveEventListener",false);if(mode=="all"||mode=="mouseout"||mode=="mouse")this.addEventListener(document,"mouseout","mouseOutEventListener",true);if(mode=="all"||mode=="touchstart"||mode=="touch")this.addEventListener(body,"touchstart","touchStartEventListener",false);if(mode=="all"||mode=="touchend"||mode=="touch")this.addEventListener(body,"touchend","touchEndEventListener",false)};this.addTimeOnPageOut=function(){var time=null;time=this.config.methods.timeOnPageOut.maxTimeOnPage-this.config.methods.timeOnPageOut.minTimeOnPage;if(time>0){this.addListeners("mousemove");this.addListeners("mouseout");setTimeout(function(){that.od.mouse.out.timeOnPageOut=false;that.removeEventListener(document,"mouseout","mouseOutEventListener")},time*1e3);this.od.mouse.out.timeOnPageOut=true}};this.mouseMoveEventListener=function(e){var t1=null,t2=null;if(this.od.mouse.out.timeOutHandler){clearTimeout(this.od.mouse.out.timeOutHandler);delete this.od.mouse.out.timeOutHandler;this.od.mouse.out.timeOutHandler=null}this.od.mouse.move.lastMoves.push({time:(new Date).getTime(),x:e.clientX,y:e.clientY});if(this.od.mouse.move.lastMoves.length>2)this.od.mouse.move.lastMoves.shift();if(this.config.methods.noMouseMoveOut.enabled&&this.od.mouse.move.lastMoves.length>1){t1=this.od.mouse.move.lastMoves[0];t2=this.od.mouse.move.lastMoves[1];if(t2.time-t1.time>=this.config.methods.noMouseMoveOut.minTimeWithoutMovement*1e3&&t2.time-t1.time<=this.config.methods.noMouseMoveOut.maxTimeWithoutMovement*1e3){this.od.mouse.out.noMouseMoveOut=true}}};this.mouseOutEventListener=function(e){var fireSurvey=false,speed=null,p1=null,p2=null,t=null;if(this.od.mouse.out.timeOutHandler)return;if(this.od.mouse.out.noMouseMoveOut){if(this.config.methods.noMouseMoveOut.probability!=1&&this.config.methods.noMouseMoveOut.probability<Math.random())return;fireSurvey="noMouseMoveOut"}if(this.od.mouse.out.timeOnPageOut){if(this.config.methods.timeOnPageOut.probability!=1&&this.config.methods.timeOnPageOut.probability<Math.random())return;fireSurvey="timeOnPageOut"}if(e.clientY>this.config.mouse.topCatchMargin)fireSurvey=false;if(this.config.mouse.speed.analyse&&fireSurvey){p1=this.od.mouse.move.lastMoves[0];p2=this.od.mouse.move.lastMoves[1];t=p2.time-p1.time;if(t<1)t=1;speed=Math.sqrt((p2.x-p1.x)*(p2.x-p1.x)+(p2.y-p1.y)*(p2.y-p1.y))/t*1e3;if(speed<this.config.mouse.speed.minSpeed)fireSurvey=false}if(fireSurvey){if(this.config.surveyDelay){this.od.mouse.out.timeOutHandler=setTimeout(function(){that.fireSurvey(fireSurvey)},this.config.surveyDelay*1e3)}else{this.fireSurvey(fireSurvey)}}};this.returnToPage=function(){var yourcx_quit_returntopage=_cookie.get("yourcx_quit_returntopage"),obj=null,now=(new Date).getTime();if(!yourcx_quit_returntopage)yourcx_quit_returntopage="{}";obj=JSON.parse(yourcx_quit_returntopage);if(typeof obj["time"]=="undefined"){obj["cnt"]=0;obj["time"]=(new Date).getTime()}else{if(this.config.methods.returnToPage.returnsAmount!==null&&++obj["cnt"]>=this.config.methods.returnToPage.returnsAmount||this.config.methods.returnToPage.returnTime!==null&&now-obj["time"]>=this.config.methods.returnToPage.returnTime*1e3){if(this.config.methods.returnToPage.probability!=1&&this.config.methods.returnToPage.probability<Math.random())return;if(this.config.surveyDelay){that.od.activeTimeouts.push(setTimeout(function(){that.fireSurvey("returnToPage")},this.config.surveyDelay*1e3))}else{this.fireSurvey("returnToPage")}obj={}}}yourcx_quit_returntopage=JSON.stringify(obj);var future=60*24*this.config.methods.returnToPage.waitForReturnDays;_cookie.set("yourcx_quit_returntopage",yourcx_quit_returntopage,future,document.location.pathname)};this.onBeforeUnload=function(){this.addEventListener(window,"beforeunload","onBeforeUnloadListener",false,true)};this.onBeforeUnloadListener=function(e){e.preventDefault();e.returnValue=true;that.fireSurveyInternal("onBeforeUnload")};this.run=function(){this.storageGet("quit block",function(_future_block_time){if(_future_block_time>=(new Date).getTime()&&that.config.blockades.product.check)return;that.addHooks();if(that.config.methods.noMouseMoveOut.enabled){if(that.config.methods.noMouseMoveOut.delay)that.od.activeTimeouts.push(setTimeout(function(){that.addListeners("mouse")},that.config.methods.noMouseMoveOut.delay*1e3));else that.addListeners("mouse")}if(that.config.methods.timeOnPageOut.enabled){if(that.config.methods.timeOnPageOut.minTimeOnPage)that.od.activeTimeouts.push(setTimeout(function(){that.addTimeOnPageOut()},that.config.methods.timeOnPageOut.minTimeOnPage*1e3));else that.addTimeOnPageOut()}if(that.config.methods.noScrollTouchOut.enabled){if(that.config.methods.noScrollTouchOut.delay)that.od.activeTimeouts.push(setTimeout(function(){that.addListeners("touch")},that.config.methods.noScrollTouchOut.delay*1e3));else that.addListeners("touch")}if(that.config.methods.returnToPage.enabled)that.returnToPage();if(that.config.methods.onBeforeUnload.enabled)that.onBeforeUnload()},{_omitStoragePrefix:true})};return this}

/** @preserve
version 4.0.24, 11.09.2024
*/
YourcxAudit.prototype=new YourcxBase;YourcxAudit.prototype.constructor=YourcxAudit;YourcxAudit.baseConstructor=YourcxBase;function YourcxAudit(){YourcxAudit.baseConstructor.call(this);fExtend(this.config,{surveyMode:"window",removeAfterClick:true,fillCookieBlock:false,pictogramMode:"right_bottom",flickering:{allow:false,width:0,height:0,flick_time:0,limit:0,mobile:{width:0,height:0}},animate:{enable:false,startTime:5e3,transitionTime:"1s",states:{0:{style:"div#yourcx_blk a.yourcxAudit_0 { padding: 6px 16px 8px 18px; }",switchTime:1e3},1:{style:"div#yourcx_blk a.yourcxAudit_1 { padding: 6px 10px 8px 12px; }",switchTime:5e3}}},hovercard:{enable:false,img:"https://static.yourcx.io/yourcx/images/face.jpg",title:"yourcx.io",dscr:"Podziel się z nami swoją opinią, chętnie dowiemy się co myślisz.",width:156},pictogramText:"Oceń stronę",imageText:"Oceń stronę",pictogramHTML:null,useHTML:false,skin:"gray",pictogramTemplate:"https://static.yourcx.io/yourcx/yourcx.audit$s$.gif",pictogram:{width:null,height:null},blockId:"yourcx_blk",mobile:{enable:true},closeButton:{enable:false,image:'<svg viewBox="0 0 512 512" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M443.6,387.1L312.4,255.4l131.5-130c5.4-5.4,5.4-14.2,0-19.6l-37.4-37.6c-2.6-2.6-6.1-4-9.8-4c-3.7,0-7.2,1.5-9.8,4  L256,197.8L124.9,68.3c-2.6-2.6-6.1-4-9.8-4c-3.7,0-7.2,1.5-9.8,4L68,105.9c-5.4,5.4-5.4,14.2,0,19.6l131.5,130L68.4,387.1  c-2.6,2.6-4.1,6.1-4.1,9.8c0,3.7,1.4,7.2,4.1,9.8l37.4,37.6c2.7,2.7,6.2,4.1,9.8,4.1c3.5,0,7.1-1.3,9.8-4.1L256,313.1l130.7,131.1  c2.7,2.7,6.2,4.1,9.8,4.1c3.5,0,7.1-1.3,9.8-4.1l37.4-37.6c2.6-2.6,4.1-6.1,4.1-9.8C447.7,393.2,446.2,389.7,443.6,387.1z"/></svg>',blockSeconds:90},switchBlocks:{enable:false,appendBoxTo:"#mydiv"}});fExtend(this.od,{pictogram:"",skin:null,addElem:null,skins:{gray:{a:{c:"555555",ba:"ebebeb",bo:"d3d3d3"},ah:{c:"333333",ba:"ebebeb",bo:"b0b0b0"},p:"_gray",s:"div#yourcx_blk a.link { padding: 6px 10px 8px 10px; }",as:""},navyblue:{a:{c:"dddddd",ba:"011971",bo:"011971"},ah:{c:"ffffff",ba:"213991",bo:"011971"},p:"_navyblue",s:"div#yourcx_blk a.link { padding: 6px 10px 8px 10px; }",as:""},orange:{a:{c:"e7e7e7",ba:"f27302",bo:"f27302"},ah:{c:"ffffff",ba:"f28312",bo:"d25300"},p:"_orange",s:"div#yourcx_blk a.link { padding: 6px 10px 8px 10px; }",as:""},pink:{a:{c:"eeeeee",ba:"dd46dd",bo:"dd46dd"},ah:{c:"ffffff",ba:"dd46dd",bo:"cf16cf"},p:"_pink",s:"div#yourcx_blk a.link { padding: 6px 10px 8px 10px; }",as:""},green:{a:{c:"ffffff",ba:"00b250",bo:"00b250"},ah:{c:"ffffff",ba:"20d270",bo:"00b250"},p:"_green",s:"div#yourcx_blk a.link { padding: 6px 10px 8px 10px; }",as:""},yourcx:{a:{c:"ffffff",ba:"00b050",bo:"00b050"},ah:{c:"ffffff",ba:"00bf55",bo:"00b050"},p:"_cx",s:"",as:""},empty:{a:{c:"ffffff",ba:"ffffff",bo:"ffffff"},ah:{c:"ffffff",ba:"ffffff",bo:"ffffff"},p:"",s:"div#yourcx_blk img { display: block; margin: 0px; vertical-align: auto; } div#yourcx_blk a { padding: 0px; border: none; border-radius: 0px; background-color: transparent; } div#yourcx_blk a:hover, div#yourcx_blk a:active { background-color: transparent; }",as:""}},mobile:{hideMaxWidth:600,hideMaxHeight:600},cleanMode:false});var that=this;this.getLinkHTML=function(){return this.config.pictogramHTML};this.getLinkText=function(_escape){if(_escape)return _out(this.config.pictogramText.replace(/"/g,"&quot;").replace(/<br \/>/g," "));return _out(this.config.pictogramText+"")};this.getImageText=function(_escape){if(_escape)return _out(this.config.imageText.replace(/"/g,"&quot;").replace(/<br \/>/g," "));return _out(this.config.imageText+"")};this.setSkin=function(_skin,_pictogram){this.config.skin=_skin;if(_undef(this.od.skins[_skin]))_skin="gray";this.od.skin=this.od.skins[_skin];if(_pictogram)this.od.pictogram=_pictogram;else if(!_undef(this.od.skin.p)&&this.od.skin.p&&this.od.skin.p.trim().length)this.od.pictogram=this.config.pictogramTemplate.replace("$s$",this.od.skin.p);else this.od.pictogram=""};this.blockWidget=function(_seconds){var future=1e3*_seconds+(new Date).getTime();that.storageSet("audit block pictogram",future);var elem=document.getElementById(that.config.blockId);if(elem)document.getElementById(that.config.blockId).style.display="none";if(that.config.switchBlocks.enable){elem=document.getElementById("yourcx_dockpane");if(elem)elem.style.display="none"}};this.addHooks=function(){_observer.on("postOpenSurvey."+this.od.hash,function(){_analytics.userDataEvent("surveyInited");if(that.config.fillCookieBlock&&that.config.blockades.product.set){var future=1e3*60*60*24*that.config.fillCookieBlock+(new Date).getTime();that.storageSet("audit block pictogram",future)}});_observer.on("preFireSurvey."+this.od.hash,function(){if(that.config.removeAfterClick){var elem=document.getElementById(that.config.blockId);if(elem)document.getElementById(that.config.blockId).style.display="none";if(that.config.switchBlocks.enable){elem=document.getElementById("yourcx_dockpane");if(elem)elem.style.display="none"}}})};this.clean=function(){that.od.cleanMode=true;var yourcx_block=document.getElementById(this.config.blockId);if(yourcx_block)yourcx_block.parentNode.removeChild(yourcx_block);if(that.config.switchBlocks.enable){yourcx_block=document.getElementById("yourcx_dockpane");if(yourcx_block)yourcx_block.parentNode.removeChild(yourcx_block)}};this.switchBlocks={prevPane:false,dockPane:function(){var wasShown=that.switchBlocks.prevPane;function isElementInViewport(el){var rect=el.getBoundingClientRect();return rect.top>=0&&rect.left>=0&&rect.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&rect.right<=(window.innerWidth||document.documentElement.clientWidth)}var paneDiv=document.getElementById("yourcx_dockpane");var isShown=isElementInViewport(paneDiv);var blk=document.getElementById(that.config.blockId);if(isShown&&!wasShown){paneDiv.style.opacity="1.0";blk.style.opacity="0.0"}else if(!isShown&&wasShown){paneDiv.style.opacity="0.0";blk.style.opacity="1.0"}that.switchBlocks.prevPane=isShown},init:function(){var paneDiv=document.createElement("div"),insertBefore=null;paneDiv.setAttribute("id","yourcx_dockpane");insertBefore=document.querySelector(that.config.switchBlocks.insertBefore);if(!insertBefore)return;var parent=insertBefore.parentNode;parent.insertBefore(paneDiv,insertBefore);paneDiv.style.opacity="0.0";var blk=document.getElementById(that.config.blockId);paneDiv.innerHTML='<div class="yourcx_dockpane_block">'+blk.innerHTML+"</div>";paneDiv.style.transition="visibility 0s 1s, opacity .3s .7s linear";blk.style.transition="visibility 0s 1s, opacity .3s .7s linear";that.addEventListener(document,"scroll",that.switchBlocks.dockPane,false);var div=document.getElementById(that.config.blockId).getElementsByClassName("yourcx_close");for(var i=0;i<div.length;i++)div[i].onclick=function(i){return function(){document.getElementById(i.config.blockId).style.display="none"}}(that)}};this.clickThumb=function(){document.querySelectorAll(".yourcx_thumb_up, .yourcx_thumb_down").forEach(function(element){element.onclick=function(){var data=element.dataset.choose.split("_");that.setSurveyAnswer(data[0],data[1]);that.fireSurvey()}})};this.run=function(){this.setSkin(this.config.skin);this.storageGet("audit block pictogram",function(_future_block_time){if(_future_block_time>=(new Date).getTime()&&(that.config.fillCookieBlock||that.config.closeButton.enable)&&that.config.blockades.product.check)return;if(that.od.cleanMode)return;that.addHooks();var s="",b_add="",blk_pos="",a_add="",div_add="",cls_add="",add_elem=that.od.addElem,hov_add="",hov_ab_add="",hov_ab_color="",hov_ab_margin="",id=that.config.blockId,skin=that.od.skin;var hovercard="",i;if(add_elem)add_elem=document.getElementById(add_elem);if(!add_elem)add_elem=document.body;s="#"+id+" { position: absolute; $blk_pos$; z-index: 14483646!important; }\n";s+="div > div#"+id+" { position: fixed; }\n";s+="div#"+id+" > div { display: flex; align-items: center; justify-content: center; background-color: #"+that._.getColor(skin.a.ba)+"; $div_add$ }\n";s+="div#"+id+" > div:hover, div#"+id+" > div:active { border-color: #"+that._.getColor(skin.ah.bo)+"; background-color: #"+that._.getColor(skin.ah.ba)+"; }\n";s+="div#"+id+" a.link { cursor: pointer; text-decoration: none; color: #"+that._.getColor(skin.a.c)+"; font-size: 12px; font-weight: bold; font-family: Arial; display: flex; align-items: center; justify-content: center; text-align:center; padding: 0px 0px 0px 10px; background-color: #"+that._.getColor(skin.a.ba)+"; $a_add$ }\n";s+="div#"+id+" a.link:hover, div#"+id+" a.link:active { text-decoration: none; color: #"+that._.getColor(skin.ah.c)+"; background-color: #"+that._.getColor(skin.ah.ba)+"; }\n";s+="div#"+id+" img { display: inline; vertical-align: -50%; margin-left: 10px; }\n";s+="div#"+id+" a.cls { cursor: pointer; text-decoration: none; color: #"+that._.getColor(skin.a.c)+"; padding: 6px 5px 6px 4px; $cls_add$ }\n";s+="div#"+id+" a.cls svg { fill: #555555; width: 10px; height: 10px; }\n";s+="div#"+id+" a.cls:hover svg { fill: #000000; }\n";if(that.config.switchBlocks.enable){s+=".yourcx_dockpane_block { background-color: #ffffff; border-top: 1px solid #d1d1d1; margin: 10px auto; padding: 10px; text-align: center;}\n";s+=".yourcx_thmubs { display: flex; justify-content: center; align-items: center; }\n";s+=".yourcx_thumb_up { margin-right: 15px; margin-left: 25px; }\n"}if(that.config.flickering.allow){if(_mobile){that.config.flickering.width=that.config.flickering.mobile.width;that.config.flickering.height=that.config.flickering.mobile.height}s+="div#"+id+" img { margin-left: 0px; }\n";s+="div#"+id+" a.link { width: "+that.config.flickering.width+"px; height: "+that.config.flickering.height+"px; }\n";s+="div#"+id+" a.link div { display: none; }\n";s+="div#"+id+" a.link:hover img { display: none; }\n";s+="div#"+id+" a.link:hover div { display: block; }\n"}if(!_mobile&&that.config.hovercard.enable){hovercard='<div class="yourcx-hovercard"><div class="yourcx-hovercard-in"><div class="yourcx-hovercard-face"><img src="'+that.config.hovercard.img+'" /></div><div class="yourcx-hovercard-text"><div class="yourcx-hovercard-text-title">'+_out(that.config.hovercard.title)+'</div><div class="yourcx-hovercard-text-dscr">'+_out(that.config.hovercard.dscr)+"</div></div></div></div>";s+="div#"+id+" .yourcx-hovercard { border: 1px solid rgba(0,0,0,.1); box-shadow: 0 0 10px rgba(0,0,0,.08); background-color: #fafafb; $hov_add$ position: absolute; padding: 10px; opacity:0; transition: visibility 0s 1s, opacity .3s .7s linear; visibility: hidden; cursor: pointer; }\n";s+="div#"+id+":hover .yourcx-hovercard { opacity: 1; visibility: visible; transition: opacity .3s linear; }\n";s+="div#"+id+" .yourcx-hovercard:after, div#"+id+' .yourcx-hovercard:before { $hov_ab_add$ border: 1px solid transparent; content: " "; height: 0; width: 0; position: absolute; pointer-events: none;  }\n';s+="div#"+id+" .yourcx-hovercard:after { border-color: rgba(0,0,0,0); border-$hov_ab_color$-color: #ffffff; border-width: 6px; margin-$hov_ab_margin$: -6px; }\n";s+="div#"+id+" .yourcx-hovercard:before { border-color: rgba(0,0,0,0); border-$hov_ab_color$-color: #333333; border-width: 6px; margin-$hov_ab_margin$: -6px; }\n";s+="div#"+id+" .yourcx-hovercard-in { display: flex; }\n";s+="div#"+id+" .yourcx-hovercard-face { padding-right: 15px; }\n";s+="div#"+id+" .yourcx-hovercard-face img { width: 80px; height: 80px; border-radius: 50%; margin-left: 0px; max-width: none; }\n";s+="div#"+id+" .yourcx-hovercard-text { width: "+that.config.hovercard.width+"px; }\n";s+="div#"+id+" .yourcx-hovercard-text-title { font-weight: bold; font-size: 14px; color: #000000; }\n";s+="div#"+id+" .yourcx-hovercard-text-dscr { font-weight: normal; font-size: 12px; color: #555555; line-height: 1.5; word-wrap: break-word; }\n"}if(that.config.animate.enable){s+="div#"+id+" a.link { transition: all "+that.config.animate.transitionTime+" ease; }\n";for(i in that.config.animate.states){s+=that.config.animate.states[i].style+"\n"}}switch(that.config.pictogramMode){case"left_bottom":blk_pos="left: 0px; bottom: 0px;";a_add="border-radius: 0px 5px 0px 0px; border-top: 1px solid #"+that._.getColor(skin.a.bo)+"; border-right: 1px solid #"+that._.getColor(skin.a.bo)+";";hov_add="border-radius: 5px; bottom: 55px; left: 10px;";hov_ab_add="top: 100%; left: 20%;";hov_ab_color="top";hov_ab_margin="left";break;case"right_bottom":blk_pos="right: 0px; bottom: 0px;";a_add="border-radius: 5px 0px 0px 0px; border-top: 1px solid #"+that._.getColor(skin.a.bo)+"; border-left: 1px solid #"+that._.getColor(skin.a.bo)+";";hov_add="border-radius: 5px; bottom: 55px; right: 10px;";hov_ab_add="top: 100%; right: 20%;";hov_ab_color="top";hov_ab_margin="left";break;case"right":blk_pos="right: 0px; top: 30%; transform: rotate(270deg); transform-origin: 100% 100%;";div_add="border-radius: 5px 5px 0px 0px; border-right: 1px solid #"+that._.getColor(skin.a.bo)+"; border-top: 1px solid #"+that._.getColor(skin.a.bo)+"; border-left: 1px solid #"+that._.getColor(skin.a.bo)+";";cls_add="border-radius: 0px 5px 0px 0px;";a_add="border-radius: 5px 0px 0px 0px;";hov_add="border-radius: 5px; top: 50px; right: 55px;";hov_ab_add="top: 50%; left: 100%;";hov_ab_color="left";hov_ab_margin="top";break;case"bottom":blk_pos="right: calc(50% - 160px); bottom:20px; width: 320px";a_add=" border-right: 1px solid #"+skin.a.bo+"; border-top: 1px solid #"+that._.getColor(skin.a.bo)+"; border-left: 1px solid #"+that._.getColor(skin.a.bo)+";";hov_add="border-radius: 5px; top: 50px; right: 55px;";hov_ab_add="top: 50%; left: 100%;";hov_ab_color="left";hov_ab_margin="top";break;case"left":blk_pos="left: 0px; top: 50%; transform: rotate(270deg); transform-origin: 0% 0%;";div_add="border-radius: 0px 0px 5px 5px; border-right: 1px solid #"+that._.getColor(skin.a.bo)+"; border-left: 1px solid #"+that._.getColor(skin.a.bo)+"; border-bottom: 1px solid #"+that._.getColor(skin.a.bo)+";";cls_add="border-radius: 0px 0px 5px 0px;";a_add="border-radius: 0px 0px 0px 5px;";hov_add="border-radius: 5px; bottom: 50px; left: 55px;";hov_ab_add="top: 50%; right: 100%;";hov_ab_color="right";hov_ab_margin="top";break;case"link":s="div#"+id+" { display: inline; }\n";s+="div#"+id+" a { text-decoration: none; color:#555555; font-size: 12px; font-weight: bold; font-family: Arial; text-align:center; }\n";s+="div#"+id+" a:hover, div#"+id+" a:active { text-decoration: none; color: #333333; }\n";s+="div#"+id+" img { display: inline; vertical-align: -50%; margin-left: 10px; }\n";b_add=' style="display: inline;"';add_elem=document.getElementById("yourcx_link");break}if(_mobile){if(that.config.mobile.enable&&(window.innerWidth<that.od.mobile.hideMaxWidth||window.innerHeight<that.od.mobile.hideMaxHeight)){switch(that.config.pictogramMode){case"right":case"left":s+="div#"+id+" {transform: scale(0.8) rotate(270deg); }\n";break;case"right_bottom":s+="div#"+id+" {transform: scale(0.8); transform-origin: bottom right; }\n";break;case"left_bottom":s+="div#"+id+" {transform: scale(0.8); transform-origin: bottom left; }\n";break}}b_add+=' class="ycxMobile"'}if(!_undef(skin.s)&&skin.s&&skin.s.trim().length)s+=skin.s;if(!_undef(skin.as)&&skin.as&&skin.as.trim().length)s+=skin.as;s=s.replace("$blk_pos$",blk_pos).replace("$a_add$",a_add).replace("$div_add$",div_add).replace("$cls_add$",cls_add).replace("$hov_add$",hov_add).replace("$hov_ab_add$",hov_ab_add).replace(/\$hov_ab_margin\$/g,hov_ab_margin).replace(/\$hov_ab_color\$/g,hov_ab_color);var style=document.createElement("style");style.setAttribute("type","text/css");if(style.styleSheet)style.styleSheet.cssText=s;else style.appendChild(document.createTextNode(s));document.getElementsByTagName("head")[0].appendChild(style);var b=null;if(that.config.useHTML)b="<div"+b_add+'><div id="'+id+'">'+that.getLinkHTML()+"</div>";else b="<div"+b_add+'><div id="'+id+'">'+hovercard+'<div><a href="#" class="link" onclick="return false;" title="'+that.getLinkText(true)+'"><div>'+that.getLinkText(false)+"</div>";if(that.od.pictogram){b+='<img src="'+that.od.pictogram+'" alt="'+that.getImageText(true)+'" style="border: none;"';if(that.config.pictogram.width)b+=' width="'+that.config.pictogram.width+'"';if(that.config.pictogram.height)b+=' height="'+that.config.pictogram.height+'"';b+=" />"}b+="</a>";if(that.config.closeButton.enable)b+='<a class="cls" href="#" onclick="return false;">'+that.config.closeButton.image+"</a>";b+="</div></div></div>";if(that.od.cleanMode)return;var d=document.createElement("div"),addedOnclick=false;d.innerHTML=b;if(add_elem)add_elem.appendChild(d);else if(that.config.pictogramMode=="link"){add_elem=document.getElementById(id);if(add_elem){add_elem.href="#";add_elem.onclick=function(){that.fireSurvey("click");return false};addedOnclick=true}}var tab=document.getElementById(id);if(tab&&!addedOnclick){tab=tab.getElementsByTagName("a");for(var i=0;i<tab.length;i++){if(that.cssClass.has(tab[i],"cls"))tab[i].onclick=function(){that.blockWidget(that.config.closeButton.blockSeconds);return false};else tab[i].onclick=function(){that.fireSurvey("click");return false}}if(that.config.hovercard.enable){tab=document.getElementById(id).getElementsByClassName("yourcx-hovercard");for(var i=0;i<tab.length;i++){tab[i].onclick=function(){that.fireSurvey("click");return false}}}}if(that.config.flickering.allow){var text_div=document.getElementById(id).getElementsByTagName("div");text_div[0].style.display="none";var flickerFunction=function(a){a=a||0;var div=document.getElementById(id).getElementsByTagName("div");var img=document.getElementById(id).getElementsByTagName("img");if(a%2){img[0].style.display="block";div[0].style.display="none"}else{img[0].style.display="none";div[0].style.display="block"}if(a%2&&that.config.flickering.limit){if(--that.config.flickering.limit<=0){img[0].style.display="";div[0].style.display="";return}}setTimeout(function(){flickerFunction(a+1)},that.config.flickering.flick_time)};setTimeout(flickerFunction,that.config.flickering.flick_time)}if(that.config.animate.enable){var animateFunction=function(state){state=state||0;if(_undef(that.config.animate.states[state]))state=0;var cssClass="yourcxAudit_"+state;var a=document.getElementById(id);if(a){a=a.getElementsByTagName("a");a[0].className=cssClass;setTimeout(function(){animateFunction(state+1)},that.config.animate.states[state].switchTime)}};setTimeout(animateFunction,that.config.animate.startTime)}if(that.config.switchBlocks.enable)that.switchBlocks.init();if(that.config.useHTML)that.clickThumb()})};return this}

/** @preserve
version 4.0.9, 11.09.2024
*/
YourcxInsert.prototype=new YourcxBase;YourcxInsert.prototype.constructor=YourcxInsert;YourcxInsert.baseConstructor=YourcxBase;function YourcxInsert(){YourcxInsert.baseConstructor.call(this);var that=this;fExtend(this.config,{probability:1,fill_block_hours:null,surveyMode:"insert",blockId:"yourcx.insert",display:{minHeight:140}});this.addHooks=function(){_observer.on("postOpenSurvey."+this.od.hash,function(){if(that.config.fill_block_hours&&that.config.blockades.product.set){var future=60*this.config.fill_block_hours;that.storageSet("insert block",future)}})};this.clean=function(){var yourcx_block=document.getElementById(this.config.blockId);if(yourcx_block)yourcx_block.parentNode.removeChild(yourcx_block);this.removeEventListener(window,"resize","onResize")};this.productPreRunCheck=function(_productSurveys){if(_undef(_productSurveys["insert"]))return true;var blockId,i;for(i=0;i<_productSurveys["insert"].length;i++){blockId=_productSurveys["insert"][i].config.blockId;if(blockId==this.config.blockId)return false}return true};this.run=function(){this.od.storagePrefix=this.od.hash;this.storageGet(["insert block","insert visit block"],function(_retVal){if(_retVal["insert block"]>=(new Date).getTime()&&that.config.blockades.product.check)return;_retVal["insert visit block"]=that.__storageGetTimedValue(_retVal["insert visit block"]);that.addHooks();if(that.config.probability!=1){if(_retVal["insert visit block"]!==null){if(_retVal["insert visit block"]==1)return}else{if(that.config.probability<Math.random()){that.storageSetTimed("insert visit block",1,60);return}else that.storageSetTimed("insert visit block",0,60)}}that.fireSurvey("auto")})};return this}

/** @preserve
version 4.2.5, 9.10.2024
*/
YourcxTarget.prototype=new YourcxBase;YourcxTarget.prototype.constructor=YourcxTarget;YourcxTarget.baseConstructor=YourcxBase;function YourcxTarget(){YourcxTarget.baseConstructor.call(this);var that=this;fExtend(this.config,{surveyMode:"layer",prerequisites:{minTimeOnSite:0},probability:1,minPages:{enabled:false,delaySeconds:0,pageNum:3,probability:1},blockDaysAfterSurveyShown:{survey:7,allSurveys:2},blockDaysAfterSurveyFilled:28,welcome:{enable:false,mode:"welcome",submode:"right",style:{width:250,sideMargin:20,logoImage:""},addFooter:true,texts:{head:"Pomóż nam w rozwoju!",main:"Czy możesz odpowiedzieć na kilka pytań dotyczących serwisu?",buttons:'<div class="$CLASSBASE$buttons">            <a class="$CLASSBASE$button $CLASSBASE$button1"></a>            <a class="$CLASSBASE$button $CLASSBASE$button2 $CLASSBASE$button_small"></a>          </div>'},buttons:{1:{image:"",text:"Tak",hash:"",mode:"link"},2:{image:"",text:"Nie",hash:"",mode:"close"}}}});this.prerequisitesData=null;this.getPrerequisitesData=function(data){if(this.prerequisitesData)return;var omitMainSettingsPrefix=true;if(that.config.blockades.mode=="individual")omitMainSettingsPrefix=false;if(data)this.prerequisitesData=data;else{var d=new Date;d=Math.round(d.getTime()/1e3);that.storageSetTimed("target prerequisites",d,60*24*180,{_omitStoragePrefix:omitMainSettingsPrefix});this.prerequisitesData=d}};this.checkPrerequisites=function(){var d=new Date;d=Math.round(d.getTime()/1e3);if(d-this.prerequisitesData>=this.config.prerequisites.minTimeOnSite)return true;return false};this.checkBeforeFireSurvey=function(mode){var omitMainSettingsPrefix=true;if(that.config.blockades.mode=="individual")omitMainSettingsPrefix=false;this.storageGet("target block",function(_future_block_time){if(_future_block_time>=(new Date).getTime()&&that.config.blockades.product.check)return;that.fireSurveyInternal(mode)},{_omitCache:true,_omitStoragePrefix:omitMainSettingsPrefix})};this.addHooks=function(){_observer.on("preFireSurvey."+this.od.hash,function(_data){var bg=document.getElementById("yourcx_bg");if(bg)blockFireSurvey=true});_observer.on("welcome.show",function(_surveyId){if(_surveyId!=that.od.hash)return;var future=1e3*60*60*24*that.config.blockDaysAfterSurveyShown.survey+(new Date).getTime();that.storageSet("target welcome block",future,{_omitStoragePrefix:false});future=1e3*60*60*24*that.config.blockDaysAfterSurveyShown.allSurveys+(new Date).getTime();that.storageSet("target welcome block",future,{_omitStoragePrefix:true});if(that.config.welcome.followUser.enable){var future=1e3*that.config.welcome.followUser.timeSeconds+(new Date).getTime();that.storageSet("target welcome followUser",future,{_omitStoragePrefix:false})}});_observer.on("postOpenSurvey."+this.od.hash,function(){setTimeout(function(){var omitMainSettingsPrefix=true;if(that.config.blockades.mode=="individual")omitMainSettingsPrefix=false;if(!that.config.welcome.enable){if(that.config.blockades.product.set){var future=1e3*60*60*24*that.config.blockades.surveys.daysAfterShown+(new Date).getTime();that.storageSet("target block",future,{_omitStoragePrefix:omitMainSettingsPrefix})}}else{var future=1e3*60*60*24*that.config.blockDaysAfterSurveyShown.survey+(new Date).getTime();that.storageSet("target welcome block",future,{_omitStoragePrefix:false});future=1e3*60*60*24*that.config.blockDaysAfterSurveyShown.allSurveys+(new Date).getTime();that.storageSet("target welcome block",future,{_omitStoragePrefix:true})}blockFireSurvey=true},67)});_observer.on("receivedFirstAnswer."+this.od.hash,function(){var omitMainSettingsPrefix=true;if(that.config.blockades.mode=="individual")omitMainSettingsPrefix=false;if(that.config.blockades.product.set){var future=1e3*60*60*24*that.config.blockades.surveys.daysAfterFirstAnswer+(new Date).getTime();that.storageSet("target block",future,{_omitStoragePrefix:omitMainSettingsPrefix})}blockFireSurvey=true});_observer.on("surveyFilled."+this.od.hash,function(){var omitMainSettingsPrefix=true;if(that.config.blockades.mode=="individual")omitMainSettingsPrefix=false;if(that.config.blockades.product.set){var future=1e3*60*60*24*that.config.blockades.surveys.daysAfterFilled+(new Date).getTime();that.storageSet("target block",future,{_omitStoragePrefix:omitMainSettingsPrefix})}blockFireSurvey=true})};this.clean=function(){if(this.od.hasShownWelcome)this.closeWelcome("auto")};this.runInit=function(){that.addHooks()};this.run=function(){var omitMainSettingsPrefix=true;var storagePrefix="";if(that.config.blockades.mode=="individual"){omitMainSettingsPrefix=false;storagePrefix=that.od.storagePrefix}this.storageGet(["target block","target process","target prerequisites","target welcome block"],function(_retVal){if(_retVal[storagePrefix+"target block"]>=(new Date).getTime()&&that.config.blockades.product.check)return;_retVal[storagePrefix+"target prerequisites"]=that.__storageGetTimedValue(_retVal[storagePrefix+"target prerequisites"]);var yourcx_process=that.__storageGetTimedValue(_retVal[storagePrefix+"target process"]);that.addHooks();that.storageGet(["target visit block","target welcome block","target welcome followUser"],function(_surveyRetVal){_surveyRetVal["target visit block"]=that.__storageGetTimedValue(_surveyRetVal[that.od.storagePrefix+"target visit block"]);if(that.config.probability!=1){if(that.config.blockades.probabilityBlockMode=="visit"&&_surveyRetVal["target visit block"]!==null){if(_surveyRetVal["target visit block"]==1)return}else{if(that.config.probability<Math.random()){that.storageSetTimed("target visit block",1,60,{_omitStoragePrefix:false});return}else that.storageSetTimed("target visit block",0,60,{_omitStoragePrefix:false})}}that.getPrerequisitesData(_retVal[storagePrefix+"target prerequisites"]);if(!that.checkPrerequisites())return;if(that.config.welcome.enable){if(that.config.welcome.followUser.enable){if(_surveyRetVal[that.od.storagePrefix+"target welcome followUser"]>=(new Date).getTime()){that.fireSurvey("welcome followUser");return}}if(_retVal[storagePrefix+"target welcome block"]>=(new Date).getTime())return;if(_surveyRetVal[that.od.storagePrefix+"target welcome block"]>=(new Date).getTime())return}if(that.config.minPages.enabled){if(yourcx_process!==null){if(++yourcx_process>=that.config.minPages.pageNum){if(that.config.minPages.probability==1||that.config.minPages.probability>=Math.random()){if(that.config.minPages.delaySeconds)that.od.activeTimeouts.push(setTimeout(function(){that.fireSurvey("auto")},that.config.minPages.delaySeconds*1e3));else that.fireSurvey("auto")}}else{that.storageSetTimed("target process",yourcx_process,60*24*28,{_omitStoragePrefix:omitMainSettingsPrefix})}}else{if(!that.config.minPages.pageNum){if(that.config.minPages.probability==1||that.config.minPages.probability>=Math.random()){if(that.config.minPages.delaySeconds)that.od.activeTimeouts.push(setTimeout(function(){that.fireSurvey("auto")},that.config.minPages.delaySeconds*1e3));else that.fireSurvey("auto")}}else{that.storageSetTimed("target process",1,60*24*28,{_omitStoragePrefix:omitMainSettingsPrefix})}}}else that.fireSurvey("auto")},{_omitStoragePrefix:false})},{_omitStoragePrefix:omitMainSettingsPrefix})};return this}

/** @preserve
version 4.1.2, 9.10.2024
*/
YourcxCheckout.prototype=new YourcxBase;YourcxCheckout.prototype.constructor=YourcxCheckout;YourcxCheckout.baseConstructor=YourcxBase;function YourcxCheckout(){YourcxCheckout.baseConstructor.call(this);var that=this;fExtend(this.config,{surveyMode:"layer",blockId:"chk1",methods:{autoWelcome:{enabled:true,question:'Przerwano realizację zamówienia.<br />Czy zechcesz odpowiedzieć na kilka pytań,<div class="burgundy">aby usprawnić zakupy w naszym sklepie? </div>',delaySeconds:600,probability:1},timeOnPageOut:{enabled:true,question:'Przerwano realizację zamówienia.<br />Czy zechcesz odpowiedzieć na kilka pytań,<div class="burgundy">aby usprawnić zakupy w naszym sklepie? </div>',minTimeOnPage:4,maxTimeOnPage:300,probability:1},notProcessPage:{enabled:true,delaySeconds:0,pageNum:5,probability:1},noScrollTouchOut:{enabled:true,startDelay:1,delay:1,minTimeWithoutMovement:5,maxTimeWithoutMovement:120,probability:1,minScrollSpeed:100,maxTouchTime:1e3,minScrollDistance:40,maxScrollDistance:400},mouseOutDelay:.8},welcome:{texts:{yes:"Tak",no:"Nie",later:"Innym razem",more:'<span class="orange">Pamiętaj!</span> Twoja opinia jest dla nas ważna.'},bagImage:"https://static.yourcx.io/yourcx/yourcx_help_bag.jpg"},laterMinutes:30});fExtend(this.od,{pageType:"normal"});this.isProcessPage=function(flag){if(flag)this.od.pageType="process"};this.finishProcessPage=function(flag){if(flag)this.od.pageType="finish"};this.addTimeOnPageOut=function(){var time=null;time=this.config.methods.timeOnPageOut.maxTimeOnPage-this.config.methods.timeOnPageOut.minTimeOnPage;if(time>0){this.addEventListener(document,"mousemove","mouseMoveEventListener",false);this.addEventListener(document,"mouseout","mouseOutEventListener",true);setTimeout(function(){that.od.mouse.out.timeOnPageOut=false;that.removeEventListener(document,"mouseout","mouseOutEventListener");that.removeEventListener(document,"mousemove","mouseMoveEventListener")},time*1e3);this.od.mouse.out.timeOnPageOut=true}};this.addTouchEventListeners=function(){var body=document.getElementsByTagName("body")[0]||document;this.addEventListener(body,"touchstart","touchStartEventListener",false);this.addEventListener(body,"touchend","touchEndEventListener",false)};this.mouseMoveEventListener=function(e){if(this.od.mouse.out.timeOutHandler){clearTimeout(this.od.mouse.out.timeOutHandler);delete this.od.mouse.out.timeOutHandler;this.od.mouse.out.timeOutHandler=null}this.od.mouse.move.lastMoves.push({time:(new Date).getTime(),x:e.clientX,y:e.clientY});if(this.od.mouse.move.lastMoves.length>2)this.od.mouse.move.lastMoves.shift()};this.mouseOutEventListener=function(e){var fireSurvey=false,speed=null,p1=null,p2=null,t=null;if(this.od.mouse.out.timeOutHandler)return;if(this.od.mouse.out.timeOnPageOut){if(this.config.methods.timeOnPageOut.probability!=1&&this.config.methods.timeOnPageOut.probability<Math.random())return;fireSurvey="timeOnPageOut"}if(e.clientY>this.config.mouse.topCatchMargin)fireSurvey=false;if(this.config.mouse.speed.analyse&&fireSurvey){p1=this.od.mouse.move.lastMoves[0];p2=this.od.mouse.move.lastMoves[1];t=p2.time-p1.time;if(t<1)t=1;speed=Math.sqrt((p2.x-p1.x)*(p2.x-p1.x)+(p2.y-p1.y)*(p2.y-p1.y))/t*1e3;if(speed<this.config.mouse.speed.minSpeed)fireSurvey=false}if(fireSurvey){if(this.config.methods.mouseOutDelay){this.od.mouse.out.timeOutHandler=setTimeout(function(){that.fireSurvey(fireSurvey)},this.config.methods.mouseOutDelay*1e3)}else{this.fireSurvey(fireSurvey)}}};this.checkBeforeFireSurvey=function(mode){var omitMainSettingsPrefix=true;if(that.config.blockades.mode=="individual")omitMainSettingsPrefix=false;this.storageGet("checkout block",function(_future_block_time){if(_future_block_time>=(new Date).getTime()&&that.config.blockades.product.check)return;that.fireSurveyInternal(mode)},{_omitCache:true,_omitStoragePrefix:omitMainSettingsPrefix})};this.showWelcome=function(mode){mode=mode||"timeOnPageOut";var newBg=document.createElement("div");newBg.setAttribute("id","yourcx_bg");document.body.appendChild(newBg);var question_text=this.config[mode].question;var welcome=document.createElement("div");welcome.setAttribute("id","yourcx_layer");welcome.style.width=this.config.welcome.width+"px";welcome.style.top=this.page.height()*2/5-220/2+"px";welcome.style.left=(this.page.width()-this.config.welcome.width)/2+"px";welcome.innerHTML='<div class="op_main"><img class="op_pic" src="'+this.config.welcome.bagImage+'" /><div class="op_txt"><div class="op_question">'+question_text+'</div><div class="op_buttons"><div><a class="yes">'+this.config.welcome.texts.yes+' <span>&raquo;</span></a></div><div><a class="no">'+this.config.welcome.texts.no+' <span>&raquo;</span></a></div><div><a class="later">'+this.config.welcome.texts.later+' <span>&raquo;</span></a></div>&nbsp;</div></div><div class="op_bottom"><div class="op_logo"><a href="http://yourcx.io/" target="_blank">yourcx<span class="orange">.com</span></a></div><div class="op_more">'+this.config.welcome.texts.more+"</div></div></div>";document.body.appendChild(welcome);var style=document.createElement("style"),s="",o="#yourcx_layer ";style.setAttribute("type","text/css");s+="#yourcx_bg { top: 0px; left: 0px; position: fixed; z-index: 100000; width:100%; height:100%; filter: alpha(opacity=50); -moz-opacity: .50; -khtml-opacity: 0.5; opacity: 0.5; background-color:#000000; text-align:center; vertical-align:middle; }\n";s+=o+"{ text-align: left; background-color: #ffffff; position: fixed; z-index: 100001; }\n";s+=o+".op_main { margin: 25px 15px 10px 15px; font-family: arial; color: #00000; background-color: #ffffff; }\n";s+=o+".op_main .op_pic { float: right; }\n";s+=o+".op_main .op_txt { margin-right: 150px; }\n";s+=o+".op_question { font-size: 16px; margin: 14px 0px 8px 0px; font-weight: normal; line-height: 1.4em; padding-top: 10px; text-align: center; }\n";s+=o+".op_question .burgundy { font-weight: bold; padding-top: 2px; }\n";s+=o+".op_buttons { padding: 40px 12px 35px 0px; font-size: 16px; }\n";s+=o+".op_buttons div { float: left; border: 1px solid #cdcdcd; min-width: 25%; margin-right: 10px; }\n";s+=o+".op_buttons div a { cursor: pointer; display: block; padding: 3px 30px 3px 5px; border: 1px solid #ffffff; font-weight: bold; font-family: arial; font-size: 13px; color: #ffffff; background-color: #011971; text-decoration: none; position: relative; }\n";s+=o+".op_buttons div a:hover { border: 1px solid #011971; }\n";s+=o+".op_buttons div a span { font-size: 13px; background-color: #898989; padding: 3px 7px 3px 7px; border-left: 1px solid #ffffff; text-decoration: none; position: absolute; right: 0px; top: 0px; }\n";s+=o+".op_buttons div a:hover span { border-left: 1px solid #011971; }\n";s+=o+".op_buttons div a.yes { background-color: #F47605; }\n";s+=o+".op_buttons div a.yes:hover { border: 1px solid #F47605; }\n";s+=o+".op_buttons div a.yes:hover span { border-left: 1px solid #F47605; }\n";s+=o+".op_bottom { clear: both; font-size: 17px; font-weight: bold; color: #011971; padding-top: 4px; }\n";s+=o+".op_logo { float: right; }\n";s+=o+".op_logo a { color: #011971; font-size: 19px; text-decoration: none; }\n";s+=o+".op_logo a span { font-size: 13px; }\n";s+=o+".op_logo a:hover { text-decoration: underline; }\n";s+=o+"span.orange { color: #F47605; }\n";s+=o+".burgundy { color: #011971; }\n";s+="</style>\n";if(style.styleSheet)style.styleSheet.cssText=s;else style.appendChild(document.createTextNode(s));document.getElementsByTagName("head")[0].appendChild(style);var tab=document.getElementById("yourcx_layer").getElementsByTagName("a");for(var i=0;i<tab.length;i++){if(this.cssClass.has(tab[i],"yes"))tab[i].onclick=function(){that.actionYes();return false};if(this.cssClass.has(tab[i],"no"))tab[i].onclick=function(){that.actionNo();return false};if(this.cssClass.has(tab[i],"later"))tab[i].onclick=function(){that.actionLater();return false}}var future=1e3*60*60*24*28+(new Date).getTime();this.storageSet("checkout block",future,{_omitStoragePrefix:true});this.addParamInternal("_im",mode)};this.actionYes=function(){this.removeSurvey();this.openSurvey("window")};this.actionNo=function(){this.removeSurvey()};this.actionLater=function(){this.removeSurvey();this.storageSet("checkout block",this.config.welcome.laterMinutes,{_omitStoragePrefix:true})};this.addHooks=function(){_observer.on("preFireSurvey."+this.od.hash,function(_data){var bg=document.getElementById("yourcx_bg");if(bg)blockFireSurvey=true});_observer.on("postOpenSurvey."+this.od.hash,function(){setTimeout(function(){var omitMainSettingsPrefix=true;if(that.config.blockades.mode=="individual")omitMainSettingsPrefix=false;if(that.config.blockades.product.set){var future=1e3*60*60*24*that.config.blockades.surveys.daysAfterShown+(new Date).getTime();that.storageSet("checkout block",future,{_omitStoragePrefix:omitMainSettingsPrefix})}if(that.od.mouse.out.timeOnPageOut){that.od.mouse.out.timeOnPageOut=false;that.removeEventListener(document,"mouseout","mouseOutEventListener");that.removeEventListener(document,"mousemove","mouseMoveEventListener")}blockFireSurvey=true},67)});_observer.on("receivedFirstAnswer."+this.od.hash,function(){var omitMainSettingsPrefix=true;if(that.config.blockades.mode=="individual")omitMainSettingsPrefix=false;if(that.config.blockades.product.set){var future=1e3*60*60*24*that.config.blockades.surveys.daysAfterFirstAnswer+(new Date).getTime();that.storageSet("checkout block",future,{_omitStoragePrefix:omitMainSettingsPrefix})}blockFireSurvey=true});_observer.on("surveyFilled."+this.od.hash,function(){var omitMainSettingsPrefix=true;if(that.config.blockades.mode=="individual")omitMainSettingsPrefix=false;if(that.config.blockades.product.set){var future=1e3*60*60*24*that.config.blockades.surveys.daysAfterFilled+(new Date).getTime();that.storageSet("checkout block",future,{_omitStoragePrefix:omitMainSettingsPrefix})}blockFireSurvey=true})};this.clean=function(){if(that.od.mouse.out.timeOnPageOut){that.od.mouse.out.timeOnPageOut=false;that.removeEventListener(document,"mouseout","mouseOutEventListener");that.removeEventListener(document,"mousemove","mouseMoveEventListener")}if(that.config.methods.noScrollTouchOut.enabled){if(this.od.touch.out.timeOutHandler){clearTimeout(this.od.touch.out.timeOutHandler);delete this.od.touch.out.timeOutHandler;this.od.touch.out.timeOutHandler=null}that.removeEventListener(document,"touchstart","touchStartEventListener");that.removeEventListener(document,"touchend","touchEndEventListener")}};this.run=function(){var omitMainSettingsPrefix=true;var storagePrefix="";if(that.config.blockades.mode=="individual"){omitMainSettingsPrefix=false;storagePrefix=that.od.storagePrefix}this.storageGet("checkout block",function(_future_block_time){if(_future_block_time>=(new Date).getTime()&&that.config.blockades.product.check)return;if(that.od.pageType=="finish"){that.storageDel("checkout notProcessPage");return}that.addHooks();if(that.od.pageType=="process"){if(that.config.methods.autoWelcome.enabled){if(that.config.methods.autoWelcome.probability==1||that.config.methods.autoWelcome.probability>=Math.random()){if(that.config.methods.autoWelcome.delaySeconds)that.od.activeTimeouts.push(setTimeout(function(){that.fireSurvey("autoWelcome")},that.config.methods.autoWelcome.delaySeconds*1e3));else that.fireSurvey("autoWelcome")}}if(that.config.methods.timeOnPageOut.enabled){if(that.config.methods.timeOnPageOut.minTimeOnPage)that.od.activeTimeouts.push(setTimeout(function(){that.addTimeOnPageOut()},that.config.methods.timeOnPageOut.minTimeOnPage*1e3));else that.addTimeOnPageOut()}if(that.config.methods.noScrollTouchOut.enabled){if(that.config.methods.noScrollTouchOut.delay)that.od.activeTimeouts.push(setTimeout(function(){that.addTouchEventListeners()},that.config.methods.noScrollTouchOut.delay*1e3));else that.addTouchEventListeners()}if(that.config.methods.notProcessPage.enabled)that.storageSetTimed("checkout notProcessPage",0,60)}else if(that.config.methods.notProcessPage.enabled){that.storageGetTimed("checkout notProcessPage",function(yourcx_process){if(yourcx_process!==null){if(++yourcx_process>=that.config.methods.notProcessPage.pageNum){if(that.config.methods.notProcessPage.probability==1||that.config.methods.notProcessPage.probability>=Math.random()){if(that.config.methods.notProcessPage.delaySeconds)that.od.activeTimeouts.push(setTimeout(function(){that.fireSurvey("notProcessPage")},that.config.methods.notProcessPage.delaySeconds*1e3));else that.fireSurvey("notProcessPage")}}else that.storageSetTimed("checkout notProcessPage",yourcx_process,60)}})}},{_omitStoragePrefix:omitMainSettingsPrefix})};return this}

/** @preserve
version 3.2, 26.06.2020
*/
function YourcxPluginGoogleAnalytics(){this.config={name:"yourcx.integrate.ga",events:["receiveResult","gaDataLayerPush"]};var _pluginConfigDefault={mode:"sendPageView",dataLayerEventDefaults:{},modeConfig:{pushDataLayer:{send:"bulk"}}};var _pluginConfig=_pluginConfigDefault;this.onreceiveResult=function(_results,_rules){switch(_pluginConfig.mode){case"sendPageView":this.__onreceiveResultSendPageView(_results,_rules);break;case"pushDataLayer":this.__onreceiveResultPushDataLayer(_results,_rules);break}};this.ongaDataLayerPush=function(_data){this.pushDataLayer(_data)};this.__onreceiveResultSendPageView=function(_results,_rules){var data=null,sendData={},i,j,rowNumber;if(typeof ga=="undefined")return;for(i in _results){data=_results[i];if(typeof data.val=="undefined"||typeof data.type=="undefined"||typeof _rules[i]=="undefined"||data.val==""||data.type==""||_rules[i]=={}){continue}else{if(data.type=="matrix_radio"){for(j in data.val){rowNumber=parseInt(data.val[j].number);if(typeof _rules[i][rowNumber]=="undefined"||typeof _rules[i][rowNumber].name=="undefined")continue;sendData[_rules[i][rowNumber].name]=data.val[j].val;continue}}else{if(typeof _rules[i].name=="undefined")continue;sendData[_rules[i].name]=data.val}}}ga.getAll()[0].send("pageview",sendData)};this.__onreceiveResultPushDataLayer=function(_results,_rules){var data=null,sendData={},i,j,vals,txt;if(typeof dataLayer=="undefined")return;if(typeof _rules.data=="undefined")return;sendData=fExtend(sendData,_pluginConfig.dataLayerEventDefaults);if(!_undef(_rules.dataLayerEventDefaults)){sendData=fExtend(sendData,_rules.dataLayerEventDefaults)}for(i in _results){data=_results[i];if(typeof data.val=="undefined"||typeof data.type=="undefined"||typeof _rules.data[i]=="undefined"||data.val==""||data.type==""||_rules.data[i]=={})continue;switch(data.type){case"matrix_radio":if(!_undef(_rules.data[i].combine)&&_rules.data[i].combine){vals=[];for(j in data.val){vals.push(data.val[j].text+"-"+data.val[j].val)}txt=vals.join("|");sendData[_rules.data[i].name]=txt;continue}else{for(j in data.val){rowNumber=parseInt(data.val[j].number);if(typeof _rules.data[i][rowNumber]=="undefined"||typeof _rules.data[i][rowNumber].name=="undefined")continue;sendData[_rules.data[i][rowNumber].name]=data.val[j].val;continue}}break;case"checkbox":if(typeof _rules.data[i].name=="undefined")continue;txt=data.val.join("|");sendData[_rules.data[i].name]=txt;break;default:if(typeof _rules.data[i].name=="undefined")continue;sendData[_rules.data[i].name]=data.val}if(typeof _rules.data[i].add!="undefined")sendData=fExtend(sendData,_rules.data[i].add);if(_pluginConfig.modeConfig.pushDataLayer.send!="bulk"){dataLayer.push(sendData);sendData={};sendData=fExtend(sendData,_pluginConfig.dataLayerEventDefaults);if(!_undef(_rules.dataLayerEventDefaults)){sendData=fExtend(sendData,_rules.dataLayerEventDefaults)}}}if(_pluginConfig.modeConfig.pushDataLayer.send=="bulk")dataLayer.push(sendData)};this.pushDataLayer=function(_data){if(typeof dataLayer=="undefined")return;dataLayer.push(_data)};this.init=function(){if(_undef(_config.plugins)||_undef(_config.plugins[this.config.name]))return;_pluginConfig=fExtend(_pluginConfig,_config.plugins[this.config.name])};this.init()}var _yourcxGoogleAnalytics=new YourcxPluginGoogleAnalytics;_pluginRegister(_yourcxGoogleAnalytics);


function initGlobalPostponedSurveys(){_storage.get("postponed surveys",function(data){if(!data){return}if(_undef(data["global"])){return}var time,maxPostpone,removed=false,surveyId;for(surveyId in data["global"]){time=data["global"][surveyId].time;maxPostpone=data["global"][surveyId].maxPostponeMinutes;if(time+maxPostpone*60*1e3>=(new Date).getTime())yourcx("survey",surveyId,data["global"][surveyId].surveyConfig);else{delete data["global"][surveyId];removed=true}}if(removed)_storage.set("postponed surveys",data)},true)}function _invokeOnHistoryHashChange(state){var i,arg;var lastCommands=[];if(_config.analytics.flags.hashHistoryChangeAutoRepeat){for(i=window.yourcx.q.length-1;i>=0;i--){arg=window.yourcx.q[i];if(arg.length<1)continue;if(arg[0]=="clean")break;lastCommands.unshift(arg)}}if(_config.analytics.flags.hashHistoryChangeAutoClean)lastCommands.unshift(["clean"]);for(i=0;i<lastCommands.length;i++)_processYourcxCall(lastCommands[i])}_observer.on("analytics.init.historyChange",_invokeOnHistoryHashChange);_observer.on("analytics.init.hashChange",_invokeOnHistoryHashChange);_observer.on("analytics.init.historyChange",initGlobalPostponedSurveys);_observer.on("analytics.init.hashChange",initGlobalPostponedSurveys);_observer.on("analytics.init.historyChange",_runConfigAndConditions);_observer.on("analytics.init.hashChange",_runConfigAndConditions);function _processYourcxCall(argv){if(argv.length<1)return;switch(argv[0]){case"survey":setTimeout(function(){_createSurvey(argv,true)},33);break;case"run":surveyConfig=_createSurvey(argv,false);if(!surveyConfig)break;var fireMode="auto",index=surveyConfig.surveyProductIndex;if(_surveys[surveyConfig.id][surveyConfig.product][index].runInit)_surveys[surveyConfig.id][surveyConfig.product][index].runInit();if(!_undef(argv[3]))fireMode=argv[3];_surveys[surveyConfig.id][surveyConfig.product][index].fireSurvey(fireMode);break;case"forcerun":surveyConfig=_createSurvey(argv,false);if(!surveyConfig)break;var fireMode="forceRun",index=surveyConfig.surveyProductIndex;if(_surveys[surveyConfig.id][surveyConfig.product][index].runInit)_surveys[surveyConfig.id][surveyConfig.product][index].runInit();if(!_undef(argv[3]))fireMode=argv[3];_globalFireSurveyBlock=false;_surveys[surveyConfig.id][surveyConfig.product][index].fireSurveyInternal(fireMode);break;case"goal":var name=null;if(argv.length<2)return;name=argv[1];_analytics.userDataEvent("goal",{name:name});break;case"event":var key=null,val=null,scope="session";if(argv.length<3)return;key=argv[1];val=argv[2];if(val==="")return;if(!_undef(argv[3])&&["page","session","visitor"].indexOf(argv[3])!=-1)scope=argv[3];if(key==="")key=scope+".event";_analytics.userDataEvent("event",{scope:scope,key:key,val:val});break;case"dimension":var key=null,val=null,scope="page";if(argv.length<3)return;key=argv[1];val=argv[2];if(val==="")return;if(!_undef(argv[3])&&["page","session","visitor"].indexOf(argv[3])!=-1)scope=argv[3];_analytics.addClientParam(key,val,scope);_analytics.dimensionCheck(key,val,scope);if(key=="page.type")_config.pageTypeFunc(val);break;case"clean":var product,i,tmpSurveyId,j,removeByProducts,cleanSurveysByProducts=true;for(product in _surveysByProducts){removeByProducts=true;for(i=0;i<_surveysByProducts[product].length;i++){tmpSurveyId=_surveysByProducts[product][i];if(!_undef(_surveys[tmpSurveyId])&&!_undef(_surveys[tmpSurveyId][product])&&_surveys[tmpSurveyId][product])for(j=0;j<_surveys[tmpSurveyId][product].length;j++){if(_surveys[tmpSurveyId][product][j].config.ignoreClean)continue;if(!_undef(_postponedSurveys[tmpSurveyId])&&_postponedSurveys[tmpSurveyId]&&!_undef(_postponedSurveys[tmpSurveyId]["product"])){if(!_undef(_postponedSurveys[tmpSurveyId].product["yourcx."+product])){_surveys[tmpSurveyId][product][j].closePostponedWidget();delete _postponedSurveys[tmpSurveyId].product["yourcx."+product]}}for(k=0;k<_surveys[tmpSurveyId][product][j].od.activeTimeouts.length;k++)clearTimeout(_surveys[tmpSurveyId][product][j].od.activeTimeouts[k]);_surveys[tmpSurveyId][product][j].clean();delete _surveys[tmpSurveyId][product][j]}if(_surveys[tmpSurveyId][product])_surveys[tmpSurveyId][product]=_surveys[tmpSurveyId][product].filter(function(item){return item!==undefined});if(!_undef(_postponedSurveys[tmpSurveyId])){if(!Object.keys(_postponedSurveys[tmpSurveyId].product).length){delete _postponedSurveys[tmpSurveyId]}}if(_surveys[tmpSurveyId][product]&&!_surveys[tmpSurveyId][product].length){delete _surveys[tmpSurveyId][product];_surveys[tmpSurveyId][product]=null}else{removeByProducts=false;cleanSurveysByProducts=false}}if(removeByProducts)_surveysByProducts[product]=[]}if(cleanSurveysByProducts){_surveysByProducts={};_surveys={};_postponedSurveys={}}break;case"close":if(argv.length<2)return;var surveyId=argv[1],product,j;if(_undef(_surveys[surveyId]))return;for(product in _surveys[surveyId]){for(j=0;j<_surveys[surveyId][product].length;j++){_surveys[surveyId][product][j].removeSurvey();delete _surveys[surveyId][product][j]}_surveys[surveyId][product]=_surveys[surveyId][product].filter(function(item){return item!==undefined});for(i=0;i<_surveysByProducts[product].length;i++){if(_surveysByProducts[product][i]==surveyId)delete _surveysByProducts[product][i]}_surveysByProducts[product]=_surveysByProducts[product].filter(function(item){return item!==undefined})}break;case"pierogi":window["_yourcx"]={surveys:_surveys,observer:_observer,storage:_storage,analytics:_analytics};break}}function _createSurvey(_argv,_clean){var surveyId=null,product=null,obj=null,surveyConfig=null,i=0,j=0,tmpId=null,tmpSurveyId=null;if(_argv.length<3)return;surveyId=_argv[1];surveyConfig=_argv[2];surveyConfigOrg=JSON.parse(JSON.stringify(_argv[2]));if(Array.isArray(surveyId))surveyId=surveyId[Math.round(Math.random()*(surveyId.length-1))];surveyId=surveyId.trim();if(!_config.allowedSurveys||_config.allowedSurveys.indexOf(surveyId)==-1){if(window.console)console.error("Not allowed surveyId :"+surveyId);return}surveyConfig.id=surveyId;if(_undef(_argv[2].product)||_config.products.acceptable.indexOf(_argv[2].product)==-1)if(!_undef(_defaultSurveyConfig[surveyId])&&!_undef(_defaultSurveyConfig[surveyId]["default"]))surveyConfig=fExtend(surveyConfig,_defaultSurveyConfig[surveyId]["default"]);else return;product=surveyConfig.product;if(_config.products.exclusive.indexOf(product)!=-1&&!_undef(_surveysByProducts[product])&&_clean){for(i=0;i<_surveysByProducts[product].length;i++){tmpSurveyId=_surveysByProducts[product][i];if(!_undef(_surveys[tmpSurveyId])&&!_undef(_surveys[tmpSurveyId][product])&&_surveys[tmpSurveyId][product])for(j=0;j<_surveys[tmpSurveyId][product].length;j++){_surveys[tmpSurveyId][product][j].clean();delete _surveys[tmpSurveyId][product][j]}delete _surveys[tmpSurveyId][product];_surveys[tmpSurveyId][product]=null}_surveysByProducts[product]=[]}if(!_undef(_defaultProductConfig[product]))surveyConfig=fExtend({},_defaultProductConfig[product],surveyConfig);if(!_undef(_defaultProductConfig["__force"])&&!_undef(_defaultProductConfig["__force"][product]))surveyConfig=fExtend(surveyConfig,_defaultProductConfig["__force"][product]);if(!_undef(_defaultSurveyConfig[surveyId])){if(!_undef(_defaultSurveyConfig[surveyId]["default"]))surveyConfig=fExtend(surveyConfig,_defaultSurveyConfig[surveyId]["default"]);if(!_undef(_defaultSurveyConfig[surveyId][product]))surveyConfig=fExtend(surveyConfig,_defaultSurveyConfig[surveyId][product])}if(!_undef(_surveys[surveyId])){if(!_undef(_surveys[surveyId][product])&&_clean&&_config.products.multiply.indexOf(product)==-1){if(_surveys[surveyId][product]){for(j=0;j<_surveys[surveyId][product].length;j++){_surveys[surveyId][product][j].clean();delete _surveys[surveyId][product][j]}}delete _surveys[surveyId][product];_surveys[surveyId][product]=[]}}else _surveys[surveyId]={};if(!_undef(_surveyPreRunCheck[surveyId])){if(!_surveyPreRunCheck[surveyId](surveyConfig))return}if(!_undef(surveyConfig["config"])&&!_undef(surveyConfig.config["blockades"])&&!_undef(surveyConfig.config["blockades"]["enable"])&&!surveyConfig.config.blockades.enable)return;switch(product){case"audit":if(typeof YourcxAudit=="undefined")return;obj=new YourcxAudit;break;case"checkout":if(typeof YourcxCheckout=="undefined")return;obj=new YourcxCheckout;break;case"quit":if(typeof YourcxQuit=="undefined")return;obj=new YourcxQuit;break;case"target":if(typeof YourcxTarget=="undefined")return;obj=new YourcxTarget;break;case"insert":if(typeof YourcxInsert=="undefined")return;obj=new YourcxInsert;break}var surveyProductIndex=0;if(_undef(_surveys[surveyId][product])||_surveys[surveyId][product]==null||!_surveys[surveyId][product].length||_surveys[surveyId][product].length&&_config.products.multiply.indexOf(product)!=-1){obj.init(surveyConfig);obj.product="yourcx."+product;obj.iframeIdBase=obj.config.blockId+"_"+obj.product+"_iframe";obj.surveyConfigOrg=surveyConfigOrg;if(!obj.productPreRunCheck(_surveys[surveyId]))return;if(obj.od.hash)obj.baseRun();if(_undef(_surveys[surveyId][product])||_surveys[surveyId][product]==null)_surveys[surveyId][product]=[];_surveys[surveyId][product].push(obj);surveyProductIndex=_surveys[surveyId][product].length-1;if(_undef(_surveysByProducts[product]))_surveysByProducts[product]=[];_surveysByProducts[product].push(surveyId);if(!_undef(surveyConfig["success"]))surveyConfig["success"](surveyConfig,obj)}surveyConfig.surveyProductIndex=surveyProductIndex;return surveyConfig}function _finalStart(){if(!_analytics||!_analytics.ready){if(((new Date).getTime()-_run_time)/1e3<30){setTimeout(function(){_finalStart()},345);return}}if(!_analytics.getUserId())return;_observer.fire("runSurveys");for(var i=0;i<window.yourcx.q.length;i++)_processYourcxCall(window.yourcx.q[i]);window.yourcx.q.push=function(){for(var i=0,l=arguments.length;i<l;i++){this[this.length]=arguments[i];_processYourcxCall(this[this.length-1])}return this.length};initGlobalPostponedSurveys();_observer.fire("afterRunSurveys")}if(typeof document.body!="undefined"&&document.body){_analytics=new _YourcxAnalytics("https://static.opiniac.com/customers/934/yourcx.alytics.min.html");_finalStart()}else document.addEventListener("DOMContentLoaded",function(){_analytics=new _YourcxAnalytics("https://static.opiniac.com/customers/934/yourcx.alytics.min.html");_finalStart()})})();
1==1;
