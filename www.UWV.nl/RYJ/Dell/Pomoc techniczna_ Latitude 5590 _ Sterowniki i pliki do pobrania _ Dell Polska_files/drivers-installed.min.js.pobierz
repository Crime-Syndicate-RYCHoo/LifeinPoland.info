function GetCookieName(n){try{var t=document.cookie.match(new RegExp("(^| )"+n+"=([^;]+)"));if(t!==undefined&&t!==null&&t.length>2)return t[2]}catch(i){console.error(i)}return""}function fillDSD(n){DellDndSA.globalDSD.tokenExpires.setValue(n.Expires);DellDndSA.globalDSD.isAliveToken.setValue(n.IsaliveToken);DellDndSA.globalDSD.getDeviceDriversToken.setValue(n.DeviceDriversToken);DellDndSA.globalDSD.checkAdminRightsToken.setValue(n.AdminRightsToken);DellDndSA.globalDSD.downloadManualInstallToken.setValue(n.DownloadManualInstallToken);DellDndSA.globalDSD.dlmCommandToken.setValue(n.CommandToken);DellDndSA.globalDSD.downloadAndAutoInstallToken.setValue(n.DownloadAndAutoInstallToken);DellDndSA.globalDSD.installFileToken.setValue(n.BeginInstallToken);DellDndSA.globalDSD.downloadFilesToken.setValue(n.DownloadFilesToken);DellDndSA.globalDSD.getClientSystemInfoToken.setValue(n.ClientSystemInfoToken);DellDndSA.globalDSD.downloadFilesAndCreateIsoToken.setValue(n.CreateISOToken);DellDndSA.globalDSD.getDeviceDriversTokenM.setValue(n.DeviceDriversTokenM);DellDndSA.globalDSD.checkAdminRightsTokenM.setValue(n.AdminRightsTokenM);DellDndSA.globalDSD.downloadManualInstallTokenM.setValue(n.DownloadManualInstallTokenM);DellDndSA.globalDSD.dlmCommandTokenM.setValue(n.CommandTokenM);DellDndSA.globalDSD.downloadAndAutoInstallTokenM.setValue(n.DownloadAndAutoInstallTokenM);DellDndSA.globalDSD.installFileTokenM.setValue(n.BeginInstallTokenM);DellDndSA.globalDSD.downloadFilesTokenM.setValue(n.DownloadFilesTokenM);DellDndSA.globalDSD.getClientSystemInfoTokenM.setValue(n.ClientSystemInfoTokenM);DellDndSA.globalDSD.downloadFilesAndCreateIsoTokenM.setValue(n.CreateISOTokenM);DellDndSA.globalDSD.runDriverScanTokenM.setValue(n.RunDriverScanTokenM);DellDndSA.globalDSD.getDriverScanStatusTokenM.setValue(n.GetDriverScanStatusTokenM);DellDndSA.globalDSD.cancelDriverScanTokenM.setValue(n.CancelDriverScanTokenM);DellDndSA.globalDSD.getInstalledDriverDetailsTokenM.setValue(n.GetInstalledDriverDetailsTokenM)}function triggerGetTokens(n,t,i){DellDnd.Utils.ajaxGet(n,function(n){n=JSON.parse(n);const i=n.Skey;i!==undefined&&i!==null&&i.length>0&&DellDnd.Utils.setSessionValue("sid",i);t(n)},function(n){console.error("Trigger Tokens fail",n);i(n)})}var DellDndSA=DellDndSA||{},getGBUrlWithCookie;DellDndSA.OnDownloadAndInstallFailureLog=function(n,t,i,r,u){var f,e,o,y,c,l,s,h,a;try{if(console.log("Logging DownloadAndInstall Failure"),typeof DellDnd.dnd_postScanProgress=="function"&&DellDnd.dnd_postScanProgress(n),f=DellDndSA.DownloadAndInstallFailureLogUrl+"?methodName="+t,typeof i!="undefined"&&i!=null&i!=""&&(f+="&stage="+i),typeof n!="undefined"&&n!=null&n!=""){if(e=null,o=null,typeof n=="string")e="Exception",o=n;else if(typeof n.Type!="undefined"&&n.Type!=null&n.Type!=""?e=n.Type:typeof n.type!="undefined"&&n.type!=null&n.type!=""&&(e=n.type),typeof n.Code!="undefined"&&n.Code!=null&n.Code!=""?o=n.Code:typeof n.errorCode!="undefined"&&n.errorCode!=null&n.errorCode!=""&&(o=n.errorCode),typeof n.responseData!="undefined"){let t=n.responseData.ICsource!==undefined?n.responseData.ICsource:"",i=n.responseData.CurrentOwner!==undefined?n.responseData.CurrentOwner:"",r=n.responseData.CurrentStage!==undefined?n.responseData.CurrentStage:"",u=n.responseData.CurrentProgress!==undefined?n.responseData.CurrentProgress:"",e=n.responseData.JobId!==undefined?n.responseData.JobId:"";typeof n.responseData.BradBuryScanErrorCode!="undefined"&&n.responseData.BradBuryScanErrorCode!==null&&(f+="&BDBErrorCode="+n.responseData.BradBuryScanErrorCode.toString());typeof n.responseData.BDBServiceVersion!="undefined"&&n.responseData.BDBServiceVersion!==null&&(f+="&BdbVer="+n.responseData.BDBServiceVersion.toString());f+="&scanSource="+t+"&currentOwner="+i+"&currentStage="+r+"&currentProgress="+u+"&jobId="+e}e!=null&&(f+="&errorType="+e);o!=null&&(f+="&errorCode="+o)}let v=DellDnd.Utils.getSessionValue("DriverScanData");for(typeof v!="undefined"&&v!=null&&v!=""&&(y=v.ProductCode,f+="&productCode="+y),c="",l=document.getElementsByClassName("checkBoxClass"),s=0;s<l.length;s++)if(l[s].type==="checkbox"&&l[s].checked)for(h=0;h<DellDndSA.processedScanData.Drivers.length;h++)for(a=0;a<DellDndSA.processedScanData.Drivers[h].AllFiles.length;a++)DellDndSA.processedScanData.Drivers[h].AllFiles[a].UniqueFileId===l[s].id&&(c+=(c.length>0?",":"")+DellDndSA.processedScanData.Drivers[h].DriverId);c.length>0&&(f+="&selectedDriverIds="+c);typeof r!="undefined"&&r.length>0&&(f+="&exitCodes="+r);typeof u!="undefined"&&u!=null&&u.length>0&&(f+="&dupArray="+JSON.stringify(u));f=urlStringCommonData(f);logSplunk(f)}catch(v){v!==null&&typeof v!="undefined"?console.error("Error in posting download and install error"+JSON.stringify(v)):console.error("Error in posting download and install error")}};DellDndSA.OnDemotedDrivers=function(n){if(typeof n!="undefined"&&n!=null&&n.length>0){let t=DellDndSA.scanDemotedLogUrl+"?methodName=Demoted_Drivers_Found&invalidid="+n;t=urlStringCommonData(t);logSplunk(t)}};DellDndSA.OnScanFailureLog=function(n,t,i){var v="Drivers",o,s,p,h,u,e,f,r;typeof n!="undefined"&&n!==null&&n!==""&&(v="SA");try{var y="",c="",l="";if(typeof DellDnd.productObj!="undefined"&&DellDnd.productObj!=null&&(y=DellDnd.productObj.productCode!==undefined?DellDnd.productObj.productCode:"",c=DellDnd.productObj.lob!==undefined?DellDnd.productObj.lob:"",l=typeof DellDnd.isScanEnabledWin11!="undefined"?DellDnd.isScanEnabledWin11:""),typeof i!="undefined"&&i){if(o="",s="",typeof n!="undefined"&&n!=null&&n.ICsource!=null&&(o=n.ICsource!==undefined?n.ICsource:""),typeof n!="undefined"&&n!=null&&typeof n.JobId!="undefined"&&n.JobId!=null&&(s=n.JobId),r=DellDndSA.scanFailureLogUrl+"?methodName="+t+"&Source="+o+"&Status=Success&JobId="+s,r+="&PC="+y,r+="&lob="+c,r+="&isWin11="+l,typeof t!="undefined"&&t.toLowerCase().includes("scanstuck")&&(p=typeof DellDndSA.scanStuckState!="undefined"&&DellDndSA.scanStuckState.lastValue!=null?DellDndSA.scanStuckState.lastValue:"0",u="ScanStuck_"+n.CurrentStage+"_"+p,r+="&errorType="+u,h="ScanStuck_Scan",r+="&errorCode="+h),typeof t!="undefined"&&t.toLowerCase().includes("scanran")&&(console.log("Inside errorcode Scan Ran"),u="Scan_Delayed_Ran",r+="&errorType="+u,r+="&errorCode="+u),typeof n!="undefined"&&n!=null&&typeof n.data!="undefined"&&n.data!=null&&(e="",n.data.UpdatesFound)){for(f=0;f<n.data.Updates.length;f++)e+=(e.length>0?",":"")+n.data.Updates[f].DriverId;r+="&drIds="+e}}else{var u=t+" failed",h="failure",o="",w="",b="",k="",d="",s="",g="",nt="",tt="",it="",rt="",ut="",ft="",et="",ot="",st="",ht="",ct="",lt="",at="",e="",vt="";if(t.indexOf("tab_load_fail")>-1&&(u=t.split("|")[1],t=t.split("|")[0]),typeof Dell!="undefined"&&typeof Dell.Metrics!="undefined"&&typeof Dell.Metrics.sc!="undefined"&&typeof Dell.Metrics.sc.supportsystem!="undefined"&&Dell.Metrics.sc.supportsystem!=null&&(g=Dell.Metrics.sc.supportsystem),typeof n!="undefined"&&n!=null&&(u=n.type!==undefined?n.type:"",h=n.errorCode!==undefined?n.errorCode:"",typeof n.responseData!="undefined"&&(o=n.responseData.ICsource!==undefined?n.responseData.ICsource:"",b=n.responseData.CurrentOwner!==undefined?n.responseData.CurrentOwner:"",k=n.responseData.CurrentStage!==undefined?n.responseData.CurrentStage:"",d=n.responseData.CurrentProgress!==undefined?n.responseData.CurrentProgress:"",s=n.responseData.JobId!==undefined?n.responseData.JobId:"",typeof n.responseData.BradBuryScanErrorCode!="undefined"&&n.responseData.BradBuryScanErrorCode!==null&&(w=n.responseData.BradBuryScanErrorCode.toString()),typeof n.responseData.BDBServiceVersion!="undefined"&&n.responseData.BDBServiceVersion!==null&&(vt=n.responseData.BDBServiceVersion.toString()),nt=typeof n.responseData.OperationName!="undefined"?n.responseData.OperationName:"",typeof n.responseData.InstallationInfo!="undefined"&&n.responseData.InstallationInfo!=null&&(tt=typeof n.responseData.InstallationInfo.TotalBytesToDownload!="undefined"&&n.responseData.InstallationInfo.TotalBytesToDownload!==null?n.responseData.InstallationInfo.TotalBytesToDownload.toString():"",it=typeof n.responseData.InstallationInfo.BytesDownloaded!="undefined"&&n.responseData.InstallationInfo.BytesDownloaded!==null?n.responseData.InstallationInfo.BytesDownloaded.toString():"",rt=typeof n.responseData.InstallationInfo.TotalItemNumber!="undefined"&&n.responseData.InstallationInfo.TotalItemNumber!==null?n.responseData.InstallationInfo.TotalItemNumber.toString():"",ut=typeof n.responseData.InstallationInfo.CurrentItemNumber!="undefined"&&n.responseData.InstallationInfo.CurrentItemNumber!==null?n.responseData.InstallationInfo.CurrentItemNumber.toString():"",ft=typeof n.responseData.InstallationInfo.ProgressItemId!="undefined"&&n.responseData.InstallationInfo.ProgressItemId!==null?n.responseData.InstallationInfo.ProgressItemId:"",et=typeof n.responseData.InstallationInfo.ProgressSequence!="undefined"&&n.responseData.InstallationInfo.ProgressSequence!==null?n.responseData.InstallationInfo.ProgressSequence.toString():"",ot=typeof n.responseData.InstallationInfo.ProgressItemName!="undefined"&&n.responseData.InstallationInfo.ProgressItemName!==null?n.responseData.InstallationInfo.ProgressItemName:"",st=typeof n.responseData.InstallationInfo.PercentCompleted!="undefined"&&n.responseData.InstallationInfo.PercentCompleted!==null?n.responseData.InstallationInfo.PercentCompleted:"",ht=typeof n.responseData.InstallationInfo.CurrentItemSize!="undefined"&&n.responseData.InstallationInfo.CurrentItemSize!==null?n.responseData.InstallationInfo.CurrentItemSize.toString():"",ct=typeof n.responseData.InstallationInfo.OverAllDriverStatus!="undefined"&&n.responseData.InstallationInfo.OverAllDriverStatus!==null?n.responseData.InstallationInfo.OverAllDriverStatus.toString():"",lt=typeof n.responseData.InstallationInfo.OverallErrorStatus!="undefined"&&n.responseData.InstallationInfo.OverallErrorStatus!==null?n.responseData.InstallationInfo.OverallErrorStatus.toString():"",at=typeof n.responseData.InstallationInfo.TotalItemSize!="undefined"&&n.responseData.InstallationInfo.TotalItemSize!==null?n.responseData.InstallationInfo.TotalItemSize.toString():"",typeof n.responseData.InstallationInfo.AllDriversProgress!="undefined"))))for(f=0;f<n.responseData.InstallationInfo.AllDriversProgress.length;f++)e+=(e.length>0?",":"")+n.responseData.InstallationInfo.AllDriversProgress[f].DriverId;console.log("error type new...",u+" "+h);r=DellDndSA.scanFailureLogUrl+"?errorType="+u+"&errorCode="+h+"&methodName="+t+"&Source="+o+"&BdbVer="+vt+"&JobId="+s+"&BDBErrorCode="+w+"&Owner="+b+"&Stage="+k+"&Progress="+d+"&PC="+g+"&lob="+c+"&isWin11="+l+"&OperationName="+nt+"&TotalBytesToDownload="+tt+"&BytesDownloaded="+it+"&TotalItemNumber="+rt+"&CurrentItemNumber="+ut+"&ProgressItemId="+ft+"&ProgressSequence="+et+"&ProgressItemName="+ot+"&PercentCompleted="+st+"&CurrentItemSize="+ht+"&OverAllDriverStatus="+ct+"&OverallErrorStatus="+lt+"&TotalItemSize="+at+"&DriverIds="+e}r+="&app="+v;r=urlStringCommonData(r);logSplunk(r)}catch(a){typeof a!="undefined"&&a!==null?console.error("Error in posting scan error"+JSON.stringify(a)):console.error("Error in posting scan error")}};urlStringCommonData=function(n){var f=window.sessionStorage.getItem("driversScanId"),t,i,r;n+="&DriverScanId="+f;t=window.sessionStorage.getItem("tagFromSA");typeof t!="undefined"&&t&&(n+="&sTag="+t);i=window.sessionStorage.getItem("clientVersion");i!==null&&(n+="&sv="+i);r=window.sessionStorage.getItem("sid");r&&(n+="&sid="+r);let u=getGBUrlWithCookie();return u!==""&&(n+="&gb="+u),n};getGBUrlWithCookie=function(){if(typeof Dell!="undefined"&&typeof Dell.Metrics!="undefined"&&typeof Dell.Metrics.sc!="undefined"&&typeof Dell.Metrics.sc.glassboxurl!="undefined"&&Dell.Metrics.sc.glassboxurl!==null&&typeof GetCookieName=="function"){let n=GetCookieName("_cls_s");if(n!==""){let t=Dell.Metrics.sc.glassboxurl.replace("Global_DellCEMSessionCookie_CSH:","GlassboxCookie:"+n);return encodeURIComponent(t)}}return""};logSplunk=function(n){DellDnd.Utils.ajaxGet(n,function(){},function(n){typeof n!="undefined"&&n!==null?console.error("Error in posting splunk log"+JSON.stringify(n)):console.error("Error in posting splunk log")})};DellDndSA=DellDndSA||{};DellDndSA.getClientTime=function(){const n=new Date,t=n.getTime()+n.getTimezoneOffset()*60;return Math.round(t/1e3)};DellDndSA.getDSD=function(n,t,i){if(!t&&DellDndSA.globalDSD)n(DellDndSA.globalDSD);else try{DellDndSA.checkClientAPI(function(t){t?DellDndSA.getTokens(DellDndSA.dsdinputParamsUrl,function(t){DellDndSA.globalDSD=new window.clientApi.eSupportClientApi(t.SuppAssistEnabled);fillDSD(t);n(DellDndSA.globalDSD)},function(n){console.error("Source: Drivers Token Failure",n);typeof i=="function"&&i(n)}):typeof i=="function"&&i("check clientapi failed")})}catch(r){console.error("Source: Failure inside getTokens",r)}};DellDndSA.checkClientAPI=function(n){try{typeof clientApi!="undefined"?n(!0):DellDndSA.loadClientAPI(function(t){n(t)})}catch(t){console.error("Source: Failure inside checkClientAPI",t);n(!1)}};DellDndSA.loadClientAPI=function(n){DellDnd.Utils.loadFile(DellDndSA.SupportAssistConfigUrl,"",function(){DellDnd.Utils.loadFile(DellDndSA.DsdApiUrlNoJQ,"",function(){console.log("Client api loaded in getdsd");n(!0)},function(t){console.error("error while loading clientapi",t);n(!1)})},function(t){console.error("Error while loading clientjson",t);n(!1)})};DellDndSA.getTokens=function(n,t,i){let f=window.sessionStorage.getItem("tagFromSA"),e=window.sessionStorage.getItem("sid"),r=0,u="";e&&(r=1);f?DellDnd.GetDriversEncryptedSvcTag(DellDndSA.ServiceTagEncryptionUrl,f).then(f=>{u=f,n+="?code="+u+"&sId="+r+"&ctime="+DellDndSA.getClientTime(),triggerGetTokens(n,t,i)}).catch(f=>{console.log(f),n+="?code="+u+"&sId="+r+"&ctime="+DellDndSA.getClientTime(),triggerGetTokens(n,t,i)}):(n+="?code="+u+"&sId="+r+"&ctime="+DellDndSA.getClientTime(),triggerGetTokens(n,t,i))};DellDndSA=DellDndSA||{};DellDndSA.getInstalledDriversfromSA=function(){try{if((typeof DellDnd!="undefined"&&typeof DellDnd.productObj!="undefined"&&DellDnd.productObj.isTag&&sessionStorage.tagFromSA&&DellDnd.productObj.serviceTag.toLowerCase()===sessionStorage.tagFromSA.toLowerCase()||typeof DellDndSA.fromDriverDetail!="undefined"&&DellDndSA.fromDriverDetail===!0)&&typeof clientApi!="undefined"&&typeof window.clientApi.canSupportInstalledDriverDetails!="undefined"&&window.clientApi.canSupportInstalledDriverDetails()&&(!sessionStorage.IsAdmin||sessionStorage.IsAdmin&&sessionStorage.getItem("IsAdmin")=="true")){const n="BDB";DellDndSA.getDSD(function(t){t.getInstalledDriverDetails(function(n){if(n!=null&&n.data!=null&&n.data.InstalledUpdates!=null&&n.data.UpdatesFound){let t=[];for(i=0;i<n.data.InstalledUpdates.length;i++)t.push(n.data.InstalledUpdates[i].DriverId);DellDnd.setInstalledDrivers(t)}},function(n){DellDndSA.OnScanFailureLog(n,"getInstalledDriverDetails")},n,DellDndSA.DomainName)},!0,function(n){console.error("Error while getting Installed Drivers get DSD",n)})}}catch(n){console.error("Error in getInstalledDrivers: ",n)}};
//# sourceMappingURL=drivers-installed.min.js.map