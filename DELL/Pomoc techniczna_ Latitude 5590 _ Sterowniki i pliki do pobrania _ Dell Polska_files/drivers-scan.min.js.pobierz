function GetCookieName(n){try{var t=document.cookie.match(new RegExp("(^| )"+n+"=([^;]+)"));if(t!==undefined&&t!==null&&t.length>2)return t[2]}catch(i){console.error(i)}return""}function fillDSD(n){DellDndSA.globalDSD.tokenExpires.setValue(n.Expires);DellDndSA.globalDSD.isAliveToken.setValue(n.IsaliveToken);DellDndSA.globalDSD.getDeviceDriversToken.setValue(n.DeviceDriversToken);DellDndSA.globalDSD.checkAdminRightsToken.setValue(n.AdminRightsToken);DellDndSA.globalDSD.downloadManualInstallToken.setValue(n.DownloadManualInstallToken);DellDndSA.globalDSD.dlmCommandToken.setValue(n.CommandToken);DellDndSA.globalDSD.downloadAndAutoInstallToken.setValue(n.DownloadAndAutoInstallToken);DellDndSA.globalDSD.installFileToken.setValue(n.BeginInstallToken);DellDndSA.globalDSD.downloadFilesToken.setValue(n.DownloadFilesToken);DellDndSA.globalDSD.getClientSystemInfoToken.setValue(n.ClientSystemInfoToken);DellDndSA.globalDSD.downloadFilesAndCreateIsoToken.setValue(n.CreateISOToken);DellDndSA.globalDSD.getDeviceDriversTokenM.setValue(n.DeviceDriversTokenM);DellDndSA.globalDSD.checkAdminRightsTokenM.setValue(n.AdminRightsTokenM);DellDndSA.globalDSD.downloadManualInstallTokenM.setValue(n.DownloadManualInstallTokenM);DellDndSA.globalDSD.dlmCommandTokenM.setValue(n.CommandTokenM);DellDndSA.globalDSD.downloadAndAutoInstallTokenM.setValue(n.DownloadAndAutoInstallTokenM);DellDndSA.globalDSD.installFileTokenM.setValue(n.BeginInstallTokenM);DellDndSA.globalDSD.downloadFilesTokenM.setValue(n.DownloadFilesTokenM);DellDndSA.globalDSD.getClientSystemInfoTokenM.setValue(n.ClientSystemInfoTokenM);DellDndSA.globalDSD.downloadFilesAndCreateIsoTokenM.setValue(n.CreateISOTokenM);DellDndSA.globalDSD.runDriverScanTokenM.setValue(n.RunDriverScanTokenM);DellDndSA.globalDSD.getDriverScanStatusTokenM.setValue(n.GetDriverScanStatusTokenM);DellDndSA.globalDSD.cancelDriverScanTokenM.setValue(n.CancelDriverScanTokenM);DellDndSA.globalDSD.getInstalledDriverDetailsTokenM.setValue(n.GetInstalledDriverDetailsTokenM)}function triggerGetTokens(n,t,i){DellDnd.Utils.ajaxGet(n,function(n){n=JSON.parse(n);const i=n.Skey;i!==undefined&&i!==null&&i.length>0&&DellDnd.Utils.setSessionValue("sid",i);t(n)},function(n){console.error("Trigger Tokens fail",n);i(n)})}function driversScanEulaAccepted(){DellDnd.Utils.addClassById("dnd-TileOptions","dds__d-none");DellDnd.Utils.removeClassById("dnd-divScanProgress","dds__d-none");let n=window.sessionStorage.getItem("SAType");DellDnd.Utils.notUndefinedNullEmpty(n)&&(n==="SecureConnectClient"||n==="SAComm")?(n==="SecureConnectClient"?DellDndSA.SetErrorMsgInHome(DellDnd.Utils.getById("ddsSecureClientMsg").innerHTML):DellDndSA.SetErrorMsgInHome(DellDnd.Utils.getById("ddsSACommMsg").innerHTML),DellDndSA.ShowScanErrorInHome()):(DellDnd.Utils.removeAttrById("dndCheckforUpdates","disabled"),DellDndSA.scanSADrivers())}function detectDriversEulaRejected(){}function updateDriverScanTableRowSelection(n){if(DellDnd.Utils.query("input",n.target).checked)DellDndSA.dndSelectedItems.push(n.detail.row.id),document.getElementById("dndbtn-download-Install").hasAttribute("disabled")&&document.getElementById("dndbtn-download-Install").removeAttribute("disabled");else{let t=-1;for(let i=0;i<DellDndSA.dndSelectedItems.length;++i)if(DellDndSA.dndSelectedItems[i]===n.detail.row.id){t=i;break}t>-1&&DellDndSA.dndSelectedItems.splice(t,1);DellDndSA.dndSelectedItems.length===0?document.getElementById("dndbtn-download-Install").setAttribute("disabled","true"):""}}function handleRetryErrorCodes(n,t){let i=t.responseData.Exception.Code.toLowerCase();typeof t.responseData.CurrentProgress=="string"&&(t.responseData.CurrentProgress=t.responseData.CurrentProgress.replace(/[^0-9]/g,"."));let r=parseFloat(t.responseData.CurrentProgress),f=parseInt(DellDndSA.DriverScanRetryCount)||8,e=typeof DellDndSA.DriverScanRetryCodes!="undefined"&&DellDndSA.DriverScanRetryCodes!==""&&DellDndSA.DriverScanRetryCodes!==null?DellDndSA.DriverScanRetryCodes.toUpperCase().split(","):null,u=typeof DellDndSA.DriverScanRetryScanUIProgressCodes!="undefined"&&DellDndSA.DriverScanRetryScanUIProgressCodes!==""&&DellDndSA.DriverScanRetryScanUIProgressCodes!==null?DellDndSA.DriverScanRetryScanUIProgressCodes.toUpperCase().split(","):null,h=typeof DellDndSA.DriverScanNonRetryCodes!="undefined"&&DellDndSA.DriverScanNonRetryCodes!==""&&DellDndSA.DriverScanNonRetryCodes!==null?DellDndSA.DriverScanNonRetryCodes.toUpperCase().split(","):null,o=typeof DellDndSA.DriverScanRetrySubsequentCodes!="undefined"&&DellDndSA.DriverScanRetrySubsequentCodes!==null&&DellDndSA.DriverScanRetrySubsequentCodes!==""?DellDndSA.DriverScanRetrySubsequentCodes.split(","):null;if(r!==null&&r<=1&&u!==null&&u.includes(i.toUpperCase())&&DellDndSA.canWait){if(DellDndSA.lastErrorCode!==null&&DellDndSA.lastErrorCode!==i&&(DellDndSA.initializeScanFired===!0||DellDndSA.initializeScanCompleteFired===!0)&&(DellDndSA.initializeScanFired=!1,DellDndSA.initializeScanCompleteFired=!1),DellDndSA.lastErrorCode=i,DellDndSA.SetProgress(r*100,!0),r<=.5){if(DellDndSA.initializeScanFired===!1){DellDndSA.initializeScanFired=!0;const n="intializescan|"+i;DellDnd.RecordDnDSAOmniture("222.100.310.140",n)}}else if(DellDndSA.initializeScanCompleteFired===!1){DellDndSA.initializeScanCompleteFired=!0;const n="intializingalmostcomplete|"+i;DellDnd.RecordDnDSAOmniture("222.100.310.140",n)}r<=0?DellDndSA.retryUICounter++:DellDndSA.retryUICounter=0;DellDndSA.retryUICounter>8?DellDndSA.SPSetScanMessageAndProgress(!1,t,null,function(n){DellDndSA.SPStopScan(t,"RetryFailed_ScanStopped",n)}):DellDndSA.SPOnRetryScan(n,t)}else if(DellDndSA.lastErrorCode!==null&&u.indexOf(DellDndSA.lastErrorCode.toUpperCase())>-1&&o.indexOf(i)>-1){if(DellDndSA.SetProgress(r*100,!0),DellDndSA.initializeScanCompleteFired===!1){DellDndSA.initializeScanCompleteFired=!0;var s="intializingalmostcomplete|"+i;DellDnd.RecordDnDSAOmniture("222.100.310.140",s)}DellDndSA.canWait=!1;DellDndSA.progressCounterArray.length>=f&&new Set(DellDndSA.progressCounterArray).size===1?(DellDndSA.progressCounterArray=[],DellDndSA.SPSetScanMessageAndProgress(!1,t,null,function(n){DellDndSA.SPStopScan(t,"RetryFailed_ScanStopped",n)})):DellDndSA.SPOnRetryScan(n,t)}else DellDndSA.canWait=!1,e!==null&&e.indexOf(t.responseData.Exception.Code.toUpperCase())>-1?DellDndSA.progressCounterArray.length>=f&&new Set(DellDndSA.progressCounterArray).size===1?(DellDndSA.progressCounterArray=[],DellDndSA.SPSetScanMessageAndProgress(!1,t,null,function(n){DellDndSA.SPStopScan(t,"RetryFailed_ScanStopped",n)})):DellDndSA.SPOnRetryScan(n,t):DellDndSA.SPSetScanMessageAndProgress(!1,t,null,function(n){DellDndSA.SPStopScan(t,"ScanErrorNotRetry",n)})}function InstallStartedUIUpdates(){DellDnd.Utils.addClassById("dnd-divDownloadCancel","dds__d-none");DellDnd.CancelDownloadShown=!1;DellDnd.Utils.removeClassById("stageDownload","dds__progress-tracker--in-progress");DellDnd.Utils.addClassById("stageDownload","dds__progress-tracker--complete");DellDnd.Utils.addClassById("stageInstall","dds__progress-tracker--in-progress");DisableBackLinkForInstallProgress()}function EnableBackLinkHideToolTip(){document.getElementById("dds-driverhomebackLink").style.pointerEvents="auto";document.getElementById("dds-driverhomebackLink").style.color="";document.getElementById("dds-driverhomebackLink").style.cursor="";DellDnd.Utils.addClassById("dds-driverhomebackLink-tooltip-content","dds__d-none")}function getPev2StatusCode(n){if(n==null)return"NL";var t="";for(let i=0;i<n.length;i++)n[i]==n[i].toUpperCase()&&(t+=n[i]);return t.length==0?t=n.slice(0,2).toUpperCase():t.length==1?t+=n[1].toUpperCase():t.length>2&&(t=t.slice(0,2)),t}function RecordDnDOmnitureDownloadAndInstallLog(n,t){var r;if(typeof dellmetricsTrack=="function"){var i="",u=sessionStorage.getItem("driversScanId"),f=JSON.parse(window.sessionStorage.getItem("clientVersion"));n!=null&&typeof n=="string"&&n!=""&&(i="ec-"+n);n!=null&&typeof n.errorCode!="undefined"&&n.errorCode!=null&&(i+="ec-"+n.errorCode);u!=null&&(i+="|dr_Id-"+u);f!=null&&(i+="|sv-"+f);n!=null&&typeof n.type!="undefined"&&n.type!=null&&(i+="|et-"+n.type);n!=null&&typeof n.responseData!="undefined"&&(r=getBDBVers(n),r!=null&&(i+="|BV-"+r));DellDndSA.hasLargeFileDownload===!0&&(i+="|ld");i+="|"+t;dellmetricsTrack("222.100.301.222",i)}}function DisableBackLinkForInstallProgress(){document.getElementById("dds-driverhomebackLink").setAttribute("disabled","true");document.getElementById("dds-driverhomebackLink").style.pointerEvents="none";document.getElementById("dds-driverhomebackLink").style.color="grey";const n=document.getElementById("dds-driverhomebackLink-tooltip-content");DellDnd.Utils.removeClassById("dds-driverhomebackLink-tooltip-content","dds__d-none");DDS.Tooltip(n,{trigger:"#dds-driverhomebackLink",placement:"right"});n.addEventListener("ddsTooltipShowEvent",()=>{typeof DellDndSA.isToolTipPropFired=="undefined"&&(DellDndSA.isToolTipPropFired=!0,DellDnd.RecordDnDSAOmniture("222.100.310.156","tooltip"))})}function DisplayProgressWhenInstallation(n,t){return n>t?n:n+(n>Math.floor(t/2)?1:3)}function SetSpinnerProgress(n,t){return'<div class="dds__loading-indicator dds__loading-indicator--sm dds__justify-content-start" id="dnISpinner"><div class="dds__loading-indicator__label dds__loading-indicator__label--end" aria-live="polite">'+t+" "+n+'%<\/div><div class="dds__loading-indicator__spinner"><\/div><\/div>'}var DellDndSA=DellDndSA||{},getGBUrlWithCookie,parseResponse,getBDBVers,lastRequestFileSize;DellDndSA.driversEulaSuccessCallBackFun=null;DellDndSA.driversEulaFailureCallBackFun=null;DellDndSA.driversEulaSuccessCallBackFunParams=null;DellDndSA.driversEulaFailureCallBackFunParams=null;DellDndSA.driversScanDevice=function(n){function i(n,t){n.innerHTML=t;Array.from(n.querySelectorAll("script")).forEach(n=>{const t=document.createElement("script");Array.from(n.attributes).forEach(n=>t.setAttribute(n.name,n.value));t.appendChild(document.createTextNode(n.innerHTML));n.parentNode.replaceChild(t,n)})}const t=new FormData;t.append("AppName","drivers");t.append("ContainerId","driversEulaContainer");t.append("Intent","N");t.append("ScanType","TMC");t.append("Type","model");t.append("Feature",n);fetch(DellDndSA.ddsEulaUrl,{method:"POST",body:t}).then(n=>n.text()).then(n=>{i(document.getElementById("driversEulaContainer"),n)}).catch(t=>{console.error("drivers eula error:",t);var r=/(\b[a-zA-Z]{2})\/(\b[a-zA-Z]{2})\/(\b[a-zA-Z0-9]{0,15})/,i=DellDndSA.ddsEulaUrl.match(r);i&&i.length===4?(DellDndSA.ddsEulaUrl=DellDndSA.ddsEulaUrl.replace(r,i[2]+"-"+i[1]),DellDndSA.driversScanDevice(n)):(DellDndSA.cancel_eula(),console.error("Eula api call failure: ",t))})};DellDndSA.driversEulaHelper=function(n,t,i,r,u){DellDnd.RecordDnDSAOmniture("222.100.111.001","sa_checking");DellDndSA.driversEulaSuccessCallBackFun=n;DellDndSA.driversEulaFailureCallBackFun=i;DellDndSA.driversEulaSuccessCallBackFunParams=t;DellDndSA.driversEulaFailureCallBackFunParams=r;DellDndSA.getDSD(function(n){n.findService(function(){var n=window.sessionStorage.getItem("SAType"),t="SupportAssist_Exists_Yes";(n==="SAComm"||n==="SecureConnectClient")&&(t+="|type-"+n);DellDnd.RecordDnDSAOmniture("222.100.111.011",t);typeof window[DellDndSA.driversEulaSuccessCallBackFun]=="function"&&window[DellDndSA.driversEulaSuccessCallBackFun](DellDndSA.driversEulaSuccessCallBackFunParams)},function(n){typeof n!="undefined"&&n!==null&&n!==""?console.error("Could not find service :- "+JSON.stringify(n)):console.error("Could not find service");DellDnd.RecordDnDSAOmniture("222.100.111.012","SupportAssist_Exists_No");DellDndSA.OnScanFailureLog(n,"findService");DellDndSA.driversScanDevice(u)})},!0,function(n){console.error("Error while Eula load get dsd",n)})};window.addEventListener("esupport-eula-mfe-analytics-tracker",n=>{const t=n.detail.info,{}=n.detail;if(t==="001"||t==="007"){if(t==="001"||DellDnd.RecordDnDSAOmniture("222.100.111.003","SupportAssist_Response_received_Yes"),typeof defaultActiveTab!="undefined"&&defaultActiveTab==="diagnose"){let n=DellDnd.Utils.getById("ode_driversEulaContainer");DellDnd.Utils.setInnerHTML(n,"")}else{let n=DellDnd.Utils.getById("driversEulaContainer");DellDnd.Utils.setInnerHTML(n,"")}typeof window[DellDndSA.driversEulaSuccessCallBackFun]=="function"&&window[DellDndSA.driversEulaSuccessCallBackFun](DellDndSA.driversEulaSuccessCallBackFunParams)}else t==="002"||t==="003"||t==="004"||(t==="005"||t==="076"||t==="077"?DellDnd.Utils.removeAttrById("dndCheckforUpdates","disabled"):t==="006"?DellDnd.RecordDnDSAOmniture("222.100.111.004","SupportAssist_Response_received_No"):t==="008"||(t==="009"?DellDnd.RecordDnDSAOmniture("222.100.111.002","eu_show"):t==="010"?DellDnd.RecordDnDSAOmniture("222.100.111.013","SupportAssist_AgreecheckboxChecked"):t==="011"))});DellDndSA.cancel_eula=function(){if(typeof defaultActiveTab!="undefined"&&defaultActiveTab==="diagnose")$("#ode_driversEulaContainer .modal-body").html(""),$("#ode_eulaPopup").modal("hide");else{let n=DellDnd.Utils.getById("driversEulaContainer");DellDnd.Utils.setInnerHTML(n,"");DellDnd.Utils.removeAttrById("dndCheckforUpdates","disabled")}typeof window[DellDndSA.driversEulaFailureCallBackFun]=="function"&&window[DellDndSA.driversEulaFailureCallBackFun](DellDndSA.driversEulaFailureCallBackFunParams)};DellDndSA=DellDndSA||{};DellDndSA.OnDownloadAndInstallFailureLog=function(n,t,i,r,u){var f,e,o,y,c,l,s,h,a;try{if(console.log("Logging DownloadAndInstall Failure"),typeof DellDnd.dnd_postScanProgress=="function"&&DellDnd.dnd_postScanProgress(n),f=DellDndSA.DownloadAndInstallFailureLogUrl+"?methodName="+t,typeof i!="undefined"&&i!=null&i!=""&&(f+="&stage="+i),typeof n!="undefined"&&n!=null&n!=""){if(e=null,o=null,typeof n=="string")e="Exception",o=n;else if(typeof n.Type!="undefined"&&n.Type!=null&n.Type!=""?e=n.Type:typeof n.type!="undefined"&&n.type!=null&n.type!=""&&(e=n.type),typeof n.Code!="undefined"&&n.Code!=null&n.Code!=""?o=n.Code:typeof n.errorCode!="undefined"&&n.errorCode!=null&n.errorCode!=""&&(o=n.errorCode),typeof n.responseData!="undefined"){let t=n.responseData.ICsource!==undefined?n.responseData.ICsource:"",i=n.responseData.CurrentOwner!==undefined?n.responseData.CurrentOwner:"",r=n.responseData.CurrentStage!==undefined?n.responseData.CurrentStage:"",u=n.responseData.CurrentProgress!==undefined?n.responseData.CurrentProgress:"",e=n.responseData.JobId!==undefined?n.responseData.JobId:"";typeof n.responseData.BradBuryScanErrorCode!="undefined"&&n.responseData.BradBuryScanErrorCode!==null&&(f+="&BDBErrorCode="+n.responseData.BradBuryScanErrorCode.toString());typeof n.responseData.BDBServiceVersion!="undefined"&&n.responseData.BDBServiceVersion!==null&&(f+="&BdbVer="+n.responseData.BDBServiceVersion.toString());f+="&scanSource="+t+"&currentOwner="+i+"&currentStage="+r+"&currentProgress="+u+"&jobId="+e}e!=null&&(f+="&errorType="+e);o!=null&&(f+="&errorCode="+o)}let v=DellDnd.Utils.getSessionValue("DriverScanData");for(typeof v!="undefined"&&v!=null&&v!=""&&(y=v.ProductCode,f+="&productCode="+y),c="",l=document.getElementsByClassName("checkBoxClass"),s=0;s<l.length;s++)if(l[s].type==="checkbox"&&l[s].checked)for(h=0;h<DellDndSA.processedScanData.Drivers.length;h++)for(a=0;a<DellDndSA.processedScanData.Drivers[h].AllFiles.length;a++)DellDndSA.processedScanData.Drivers[h].AllFiles[a].UniqueFileId===l[s].id&&(c+=(c.length>0?",":"")+DellDndSA.processedScanData.Drivers[h].DriverId);c.length>0&&(f+="&selectedDriverIds="+c);typeof r!="undefined"&&r.length>0&&(f+="&exitCodes="+r);typeof u!="undefined"&&u!=null&&u.length>0&&(f+="&dupArray="+JSON.stringify(u));f=urlStringCommonData(f);logSplunk(f)}catch(v){v!==null&&typeof v!="undefined"?console.error("Error in posting download and install error"+JSON.stringify(v)):console.error("Error in posting download and install error")}};DellDndSA.OnDemotedDrivers=function(n){if(typeof n!="undefined"&&n!=null&&n.length>0){let t=DellDndSA.scanDemotedLogUrl+"?methodName=Demoted_Drivers_Found&invalidid="+n;t=urlStringCommonData(t);logSplunk(t)}};DellDndSA.OnScanFailureLog=function(n,t,i){var v="Drivers",o,s,p,h,u,e,f,r;typeof n!="undefined"&&n!==null&&n!==""&&(v="SA");try{var y="",c="",l="";if(typeof DellDnd.productObj!="undefined"&&DellDnd.productObj!=null&&(y=DellDnd.productObj.productCode!==undefined?DellDnd.productObj.productCode:"",c=DellDnd.productObj.lob!==undefined?DellDnd.productObj.lob:"",l=typeof DellDnd.isScanEnabledWin11!="undefined"?DellDnd.isScanEnabledWin11:""),typeof i!="undefined"&&i){if(o="",s="",typeof n!="undefined"&&n!=null&&n.ICsource!=null&&(o=n.ICsource!==undefined?n.ICsource:""),typeof n!="undefined"&&n!=null&&typeof n.JobId!="undefined"&&n.JobId!=null&&(s=n.JobId),r=DellDndSA.scanFailureLogUrl+"?methodName="+t+"&Source="+o+"&Status=Success&JobId="+s,r+="&PC="+y,r+="&lob="+c,r+="&isWin11="+l,typeof t!="undefined"&&t.toLowerCase().includes("scanstuck")&&(p=typeof DellDndSA.scanStuckState!="undefined"&&DellDndSA.scanStuckState.lastValue!=null?DellDndSA.scanStuckState.lastValue:"0",u="ScanStuck_"+n.CurrentStage+"_"+p,r+="&errorType="+u,h="ScanStuck_Scan",r+="&errorCode="+h),typeof t!="undefined"&&t.toLowerCase().includes("scanran")&&(console.log("Inside errorcode Scan Ran"),u="Scan_Delayed_Ran",r+="&errorType="+u,r+="&errorCode="+u),typeof n!="undefined"&&n!=null&&typeof n.data!="undefined"&&n.data!=null&&(e="",n.data.UpdatesFound)){for(f=0;f<n.data.Updates.length;f++)e+=(e.length>0?",":"")+n.data.Updates[f].DriverId;r+="&drIds="+e}}else{var u=t+" failed",h="failure",o="",w="",b="",k="",d="",s="",g="",nt="",tt="",it="",rt="",ut="",ft="",et="",ot="",st="",ht="",ct="",lt="",at="",e="",vt="";if(t.indexOf("tab_load_fail")>-1&&(u=t.split("|")[1],t=t.split("|")[0]),typeof Dell!="undefined"&&typeof Dell.Metrics!="undefined"&&typeof Dell.Metrics.sc!="undefined"&&typeof Dell.Metrics.sc.supportsystem!="undefined"&&Dell.Metrics.sc.supportsystem!=null&&(g=Dell.Metrics.sc.supportsystem),typeof n!="undefined"&&n!=null&&(u=n.type!==undefined?n.type:"",h=n.errorCode!==undefined?n.errorCode:"",typeof n.responseData!="undefined"&&(o=n.responseData.ICsource!==undefined?n.responseData.ICsource:"",b=n.responseData.CurrentOwner!==undefined?n.responseData.CurrentOwner:"",k=n.responseData.CurrentStage!==undefined?n.responseData.CurrentStage:"",d=n.responseData.CurrentProgress!==undefined?n.responseData.CurrentProgress:"",s=n.responseData.JobId!==undefined?n.responseData.JobId:"",typeof n.responseData.BradBuryScanErrorCode!="undefined"&&n.responseData.BradBuryScanErrorCode!==null&&(w=n.responseData.BradBuryScanErrorCode.toString()),typeof n.responseData.BDBServiceVersion!="undefined"&&n.responseData.BDBServiceVersion!==null&&(vt=n.responseData.BDBServiceVersion.toString()),nt=typeof n.responseData.OperationName!="undefined"?n.responseData.OperationName:"",typeof n.responseData.InstallationInfo!="undefined"&&n.responseData.InstallationInfo!=null&&(tt=typeof n.responseData.InstallationInfo.TotalBytesToDownload!="undefined"&&n.responseData.InstallationInfo.TotalBytesToDownload!==null?n.responseData.InstallationInfo.TotalBytesToDownload.toString():"",it=typeof n.responseData.InstallationInfo.BytesDownloaded!="undefined"&&n.responseData.InstallationInfo.BytesDownloaded!==null?n.responseData.InstallationInfo.BytesDownloaded.toString():"",rt=typeof n.responseData.InstallationInfo.TotalItemNumber!="undefined"&&n.responseData.InstallationInfo.TotalItemNumber!==null?n.responseData.InstallationInfo.TotalItemNumber.toString():"",ut=typeof n.responseData.InstallationInfo.CurrentItemNumber!="undefined"&&n.responseData.InstallationInfo.CurrentItemNumber!==null?n.responseData.InstallationInfo.CurrentItemNumber.toString():"",ft=typeof n.responseData.InstallationInfo.ProgressItemId!="undefined"&&n.responseData.InstallationInfo.ProgressItemId!==null?n.responseData.InstallationInfo.ProgressItemId:"",et=typeof n.responseData.InstallationInfo.ProgressSequence!="undefined"&&n.responseData.InstallationInfo.ProgressSequence!==null?n.responseData.InstallationInfo.ProgressSequence.toString():"",ot=typeof n.responseData.InstallationInfo.ProgressItemName!="undefined"&&n.responseData.InstallationInfo.ProgressItemName!==null?n.responseData.InstallationInfo.ProgressItemName:"",st=typeof n.responseData.InstallationInfo.PercentCompleted!="undefined"&&n.responseData.InstallationInfo.PercentCompleted!==null?n.responseData.InstallationInfo.PercentCompleted:"",ht=typeof n.responseData.InstallationInfo.CurrentItemSize!="undefined"&&n.responseData.InstallationInfo.CurrentItemSize!==null?n.responseData.InstallationInfo.CurrentItemSize.toString():"",ct=typeof n.responseData.InstallationInfo.OverAllDriverStatus!="undefined"&&n.responseData.InstallationInfo.OverAllDriverStatus!==null?n.responseData.InstallationInfo.OverAllDriverStatus.toString():"",lt=typeof n.responseData.InstallationInfo.OverallErrorStatus!="undefined"&&n.responseData.InstallationInfo.OverallErrorStatus!==null?n.responseData.InstallationInfo.OverallErrorStatus.toString():"",at=typeof n.responseData.InstallationInfo.TotalItemSize!="undefined"&&n.responseData.InstallationInfo.TotalItemSize!==null?n.responseData.InstallationInfo.TotalItemSize.toString():"",typeof n.responseData.InstallationInfo.AllDriversProgress!="undefined"))))for(f=0;f<n.responseData.InstallationInfo.AllDriversProgress.length;f++)e+=(e.length>0?",":"")+n.responseData.InstallationInfo.AllDriversProgress[f].DriverId;console.log("error type new...",u+" "+h);r=DellDndSA.scanFailureLogUrl+"?errorType="+u+"&errorCode="+h+"&methodName="+t+"&Source="+o+"&BdbVer="+vt+"&JobId="+s+"&BDBErrorCode="+w+"&Owner="+b+"&Stage="+k+"&Progress="+d+"&PC="+g+"&lob="+c+"&isWin11="+l+"&OperationName="+nt+"&TotalBytesToDownload="+tt+"&BytesDownloaded="+it+"&TotalItemNumber="+rt+"&CurrentItemNumber="+ut+"&ProgressItemId="+ft+"&ProgressSequence="+et+"&ProgressItemName="+ot+"&PercentCompleted="+st+"&CurrentItemSize="+ht+"&OverAllDriverStatus="+ct+"&OverallErrorStatus="+lt+"&TotalItemSize="+at+"&DriverIds="+e}r+="&app="+v;r=urlStringCommonData(r);logSplunk(r)}catch(a){typeof a!="undefined"&&a!==null?console.error("Error in posting scan error"+JSON.stringify(a)):console.error("Error in posting scan error")}};urlStringCommonData=function(n){var f=window.sessionStorage.getItem("driversScanId"),t,i,r;n+="&DriverScanId="+f;t=window.sessionStorage.getItem("tagFromSA");typeof t!="undefined"&&t&&(n+="&sTag="+t);i=window.sessionStorage.getItem("clientVersion");i!==null&&(n+="&sv="+i);r=window.sessionStorage.getItem("sid");r&&(n+="&sid="+r);let u=getGBUrlWithCookie();return u!==""&&(n+="&gb="+u),n};getGBUrlWithCookie=function(){if(typeof Dell!="undefined"&&typeof Dell.Metrics!="undefined"&&typeof Dell.Metrics.sc!="undefined"&&typeof Dell.Metrics.sc.glassboxurl!="undefined"&&Dell.Metrics.sc.glassboxurl!==null&&typeof GetCookieName=="function"){let n=GetCookieName("_cls_s");if(n!==""){let t=Dell.Metrics.sc.glassboxurl.replace("Global_DellCEMSessionCookie_CSH:","GlassboxCookie:"+n);return encodeURIComponent(t)}}return""};logSplunk=function(n){DellDnd.Utils.ajaxGet(n,function(){},function(n){typeof n!="undefined"&&n!==null?console.error("Error in posting splunk log"+JSON.stringify(n)):console.error("Error in posting splunk log")})};DellDndSA=DellDndSA||{};DellDndSA.getClientTime=function(){const n=new Date,t=n.getTime()+n.getTimezoneOffset()*60;return Math.round(t/1e3)};DellDndSA.getDSD=function(n,t,i){if(!t&&DellDndSA.globalDSD)n(DellDndSA.globalDSD);else try{DellDndSA.checkClientAPI(function(t){t?DellDndSA.getTokens(DellDndSA.dsdinputParamsUrl,function(t){DellDndSA.globalDSD=new window.clientApi.eSupportClientApi(t.SuppAssistEnabled);fillDSD(t);n(DellDndSA.globalDSD)},function(n){console.error("Source: Drivers Token Failure",n);typeof i=="function"&&i(n)}):typeof i=="function"&&i("check clientapi failed")})}catch(r){console.error("Source: Failure inside getTokens",r)}};DellDndSA.checkClientAPI=function(n){try{typeof clientApi!="undefined"?n(!0):DellDndSA.loadClientAPI(function(t){n(t)})}catch(t){console.error("Source: Failure inside checkClientAPI",t);n(!1)}};DellDndSA.loadClientAPI=function(n){DellDnd.Utils.loadFile(DellDndSA.SupportAssistConfigUrl,"",function(){DellDnd.Utils.loadFile(DellDndSA.DsdApiUrlNoJQ,"",function(){console.log("Client api loaded in getdsd");n(!0)},function(t){console.error("error while loading clientapi",t);n(!1)})},function(t){console.error("Error while loading clientjson",t);n(!1)})};DellDndSA.getTokens=function(n,t,i){let f=window.sessionStorage.getItem("tagFromSA"),e=window.sessionStorage.getItem("sid"),r=0,u="";e&&(r=1);f?DellDnd.GetDriversEncryptedSvcTag(DellDndSA.ServiceTagEncryptionUrl,f).then(f=>{u=f,n+="?code="+u+"&sId="+r+"&ctime="+DellDndSA.getClientTime(),triggerGetTokens(n,t,i)}).catch(f=>{console.log(f),n+="?code="+u+"&sId="+r+"&ctime="+DellDndSA.getClientTime(),triggerGetTokens(n,t,i)}):(n+="?code="+u+"&sId="+r+"&ctime="+DellDndSA.getClientTime(),triggerGetTokens(n,t,i))};DellDndSA.ConverttoDateFormat=function(n){var t=new Date(n.toString()),i=t.toString().split(" ");return t.getDate()+" "+i[1]+" "+t.getFullYear()};DellDndSA.getCemCookie=function(n){let t=n+"=",r=decodeURIComponent(document.cookie),i=r.split(";");for(let n=0;n<i.length;n++){let r=i[n];while(r.charAt(0)==" ")r=r.substring(1);if(r.indexOf(t)==0)return r.substring(t.length,r.length)}return""};DellDndSA.fetchPost=function(n,t,i,r){fetch(n,{method:"POST",headers:new Headers({"X-Requested-With":"XMLHttpRequest",GBPageInfo:"url="+window.location.href+";PN="+Dell.Metrics.sc.pagename+";Sindex="+Dell.Metrics.sc.supportappindex,"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"}),body:t}).then(n=>parseResponse(n)).then(n=>{i(n)}).catch(n=>{r(n)})};DellDndSA.showBannerById=function(n){const i=DellDnd.Utils.getById(n),t=DDS.MessageBar(i);t&&t.show()};parseResponse=function(n){const t=n.headers.get("content-type");return t&&t.indexOf("json")!==-1?n.json():n.text()};DellDndSA.IsFileTypeDoc=function(n,t){var r,i;if(n&&n.length===0)return!1;for(n=n.toLowerCase(),r=!1,i=0;i<t.length;i++)if(n.indexOf(t[i])>1){r=!0;break}return r};const driverScanDownloadEvents=function(){const n=function(n){DellDndSA.HideBiosPlugInMsg();DellDndSA.showBannerById("dnd-msgDownloadAndInstallFailureMessage");DellDnd.Utils.removeClassById("dnd-msgDownloadAndInstallFailureMessage","dds__d-none");DellDnd.Utils.setInnerHTML(DellDnd.Utils.getById("dnd-msgDownloadAndInstallFailureMessage-content"),n);EnableBackLinkHideToolTip()},t=function(n){DellDndSA.HideBiosPlugInMsg();DellDnd.Utils.addClassById("dnd-divDownload","dds__d-none");DellDndSA.showBannerById("dnd-divdlmCommandError");DellDnd.Utils.setInnerHTML(DellDnd.Utils.getById("dnd-divdlmCommandError-content"),n);DellDnd.Utils.removeClassById("dnd-divdlmCommandError","dds__d-none");DellDnd.Utils.addClassById("dnd-divNoIssueMsg","dds__d-none");DellDnd.Utils.addClassById("driversScanProgressTracker","dds__d-none");DellDnd.Utils.addClassById("divDellRecommendsHeader","dds__d-none");DellDndSA.findAllDriversByProductUI("divShowOtherDriversbyProduct");DellDnd.Utils.removeClassById("divShowOtherDriversbyProduct","dds__d-none");DellDnd.Utils.removeClassById("dnd-divRunTestOptions","dds__d-none");EnableBackLinkHideToolTip()};typeof ondownloadfailed=="undefined"&&document.addEventListener("ondownloadfailed",function(t){console.log("Inside event listner DownloadFailed- ondownloadfailed");n(t.detail)});typeof ondlmcommandfailed=="undefined"&&document.addEventListener("ondlmcommandfailed",function(n){console.log("Inside event listner DownloadFailed- ondlmcommandfailed ");t(n.detail)})};driverScanDownloadEvents();DellDnd.BackFromScan='{"appcode":"222.100.310.156","btnname":"back"}';DellDndSA.globalDSD=null;DellDndSA.currentjobid=null;DellDndSA.connLostErrorOccurred=!1;DellDndSA.connLostRetryCount=0;DellDndSA.onRetryScanLogged=!1;DellDndSA.installationInstDictionary=[];DellDndSA.lastErrorCode=null;DellDndSA.canWait=!0;DellDndSA.initializeScanFired=!1;DellDndSA.initializeScanCompleteFired=!1;DellDndSA.progressCounterArray=[];DellDndSA.retryUICounter=0;DellDndSA.scanDataNullRetryStarted=!1;DellDndSA.scanResultfrmSession=!1;DellDndSA.scanStuckState={lastValue:null,lastTime:null,lastLoggedThresholdIndex:-1,thresholds:[],lastLoggedThresholds:[]};DellDndSA.scanDurationState={startTime:null,lastLoggedThresholdIndex:-1,thresholds:[]};typeof DellDndSA.ScanThresholdvalues=="string"&&(DellDndSA.scanStuckState.thresholds=DellDndSA.ScanThresholdvalues.split(",").map(function(n){return parseInt(n.trim(),10)}));typeof DellDndSA.ScanDurationThresholdvalues=="string"&&(DellDndSA.scanDurationState.thresholds=DellDndSA.ScanDurationThresholdvalues.split(",").map(function(n){return parseInt(n.trim(),10)}));DellDndSA.detectDrivers=function(n){try{typeof n=="undefined"&&DellDnd.RecordDnDSAOmniture("222.100.101.101","driver_detectdrivers");DellDndSA.setDriverScanID();DellDndSA.CheckForUpdatesClicked=!0;DellDnd.Utils.addClassById("dnd-divDetectDriverFailed","dds__d-none");DellDnd.Utils.addClassById("dnd-divNoDriverUpdates","dds__d-none");DellDnd.Utils.addClassById("dnd-divRunTestOptions","dds__d-none");DellDnd.Utils.addClassById("divShowOtherDriversbyProduct","dds__d-none");DellDnd.Utils.addClassById("dnd-divDownload","dds__d-none");DellDnd.Utils.addClassById("dnd-divScanProgressTracker","dds__d-none");DellDnd.Utils.addClassById("divScan","dds__d-none");DellDnd.Utils.removeClassById("dnd-ScanProgress","dds__d-none");DellDnd.ScanErrorMsgPresent=!1;DellDnd.isScanSessionValid()?(DellDndSA.scanResultfrmSession=!0,DellDnd.Utils.addClassById("dnd-TileOptions","dds__d-none"),DellDnd.Utils.removeAttrById("dndCheckforUpdates","disabled"),DellDndSA.ProcessScanResults(DellDnd.Utils.getSessionValue("DriverScanData"),!0)):DellDnd.productObj.isScanEnabled===!1?DellDndSA.ShowDetectDriverFailed():(DellDndSA.hideScanProgress(),DellDndSA.driversEulaHelper("driversScanEulaAccepted",null,"detectDriversEulaRejected",null,"drivers-scan"))}catch(t){console.error("Error while detecting drivers",t);DellDndSA.OnScanFailureLog(null,"tab_load_fail|"+t.toString());typeof DellDndSA.ShowDetectDriverFailed=="function"&&DellDndSA.ShowDetectDriverFailed()}};DellDndSA.setDriverScanID=function(){var n=Math.floor((new Date).getTime()/1e3),t=window.localStorage.getItem("tagFromSA");t&&(n=t+n);DellDnd.Utils.setSessionValue("driversScanId",n)};DellDndSA.scanSADrivers=function(){DellDnd.RecordDnDSAOmniture("222.100.111.005","Driver_Scan_Start");DellDndSA.SetProgress(0,!1);DellDndSA.getDSD(function(n){DellDndSA.globalDSD=n;DellDndSA.startDriverScan(n)},!0,function(n){console.error("Error While starting scan get dsd",n);typeof DellDndSA.ShowDetectDriverFailed=="function"&&DellDndSA.ShowDetectDriverFailed()})};DellDndSA.SetProgress=function(n,t){if(DellDnd.Utils.notUndefinedNullEmpty(n)&&!isNaN(parseInt(n))){const i=parseInt(n);DellDndSA.setProgressText(i,t);DellDndSA.driverScanProgressElemApi.setProgress(n)}};DellDndSA.setProgressText=function(n,t){DellDnd.Utils.addClassById("dnd-lblRetryUIText1","dds__d-none");DellDnd.Utils.addClassById("dnd-lblRetryUIText2","dds__d-none");DellDndSA.hideRetryUIBanner();DellDnd.Utils.addClassById("dnd-lblScanProgressText1","dds__d-none");DellDnd.Utils.addClassById("dnd-lblScanProgressText2","dds__d-none");t===!0&&n<=50?DellDnd.Utils.removeClassById("dnd-lblRetryUIText1","dds__d-none"):t===!0&&n>50?(DellDnd.Utils.removeClassById("dnd-lblRetryUIText2","dds__d-none"),DellDndSA.showRetryUIBanner(DellDnd.Utils.getById("ddsServiceBusyRetryMsg").innerHTML)):t===!1&&n<=50?DellDnd.Utils.removeClassById("dnd-lblScanProgressText1","dds__d-none"):t===!1&&n>50&&DellDnd.Utils.removeClassById("dnd-lblScanProgressText2","dds__d-none")};DellDndSA.hideRetryUIBanner=function(){DellDnd.Utils.addClassById("dnd-msgRetryUI","dds__d-none")};DellDndSA.hideScanProgress=function(){DellDnd.Utils.addClassById("dnd-divScanProgress","dds__d-none")};DellDndSA.showRetryUIBanner=function(n){DellDnd.Utils.setInnerHTML(DellDnd.Utils.getById("divRetryMsgBarContent"),n);DellDndSA.showBannerById("dnd-msgRetryUI");DellDnd.Utils.removeClassById("dnd-msgRetryUI","dds__d-none")};DellDndSA.SPRetryConnectionLostError=function(n,t){DellDndSA.connLostRetryCount++;const i=DellDnd.Utils.notUndefinedNullEmpty(DellDndSA.ConnectionLostRetryCount)?parseInt(DellDndSA.ConnectionLostRetryCount):12;DellDndSA.connLostRetryCount<=i&&DellDndSA.connLostErrorOccurred===!0?(console.log("Connection lost retry started",DellDndSA.connLostRetryCount),DellDndSA.showRetryUIBanner(DellDnd.Utils.getById("ddsConnectionRetryMsg").innerHTML),setTimeout(function(){DellDndSA.startDriverScan(n)},15e3)):(console.log("Connection lost retry stopped"),DellDndSA.hideRetryUIBanner(),DellDndSA.SPStopScan(t,"connectionLostError"))};DellDndSA.startDriverScan=function(n){try{DellDndSA.IsScanInProgress=!0;n.runDriverScan(function(t){DellDndSA.OnScanFailureLog(t,"Scan_Started_runDS",!0);DellDnd.Utils.setSessionValue("jobId",t.JobId);DellDndSA.currentjobid=t.JobId;DellDndSA.onRetryScanLogged&&DellDndSA.OnScanFailureLog(t,"Retry_Success_runDS",!0);DellDndSA.ClearConnectionLostRetry();setTimeout(function(){DellDndSA.scanDurationState.startTime=(new Date).getTime();DellDndSA.scanDurationState.lastLoggedThresholdIndex=-1;DellDndSA.scanPolling(n,DellDndSA.currentjobid)},1e3)},function(t){console.log("DriverScan failed:",t);DellDndSA.connLostErrorOccurred=!1;typeof t!="undefined"&&typeof t.errorCode!="undefined"&&t.errorCode=="connectionLostError"?(DellDndSA.connLostErrorOccurred=!0,DellDndSA.SPRetryConnectionLostError(n,t)):DellDnd.Utils.notUndefinedNullEmpty(t)&&DellDnd.Utils.notUndefinedNullEmpty(t.responseData)&&DellDnd.Utils.notUndefinedNullEmpty(t.responseData.JobId)?(DellDndSA.ClearConnectionLostRetry(),DellDndSA.currentjobid=t.responseData.JobId,DellDnd.Utils.setSessionValue("jobId",t.responseData.JobId),DellDnd.Utils.notUndefinedNullEmpty(t.responseData.Exception)&&t.responseData.Exception.Code=="1052"?setTimeout(function(){DellDndSA.scanPolling(n,DellDndSA.currentjobid)},1e3):DellDndSA.SPHandleScanError(n,t)):(DellDndSA.ClearConnectionLostRetry(),DellDndSA.SPHandleScanError(n,t))},"BDB",DellDndSA.DomainName)}catch(t){console.error("Error while starting driver scan",t);DellDndSA.OnScanFailureLog(null,"scan_fail|"+t.toString());typeof DellDndSA.ShowDetectDriverFailed=="function"&&DellDndSA.ShowDetectDriverFailed()}};DellDndSA.scanPolling=function(n,t){try{n.getDriverScanStatus(function(i){DellDndSA.ClearConnectionLostRetry();typeof i.CurrentProgress=="string"&&(i.CurrentProgress=i.CurrentProgress.replace(/[^0-9]/g,"."));var r=i.Progress;if(typeof r.CurrentValue=="string"&&(r.CurrentValue=r.CurrentValue.replace(/[^0-9]/g,".")),typeof DellDndSA.ScanPollingLogged=="undefined"&&(DellDndSA.ScanPollingLogged=!0,DellDndSA.OnScanFailureLog(i,"Scan_In_Progress_ScanPolling",!0)),DellDndSA.SetProgress(r.CurrentValue,!1),DellDndSA.checkScanStuck(i,r),i.FinalResponse){const u=i!==null&&i.BDBServiceVersion!==null?"Driver_Scan_Complete_SA|BV-"+i.BDBServiceVersion:"Driver_Scan_Complete_SA";if(DellDnd.RecordDnDSAOmniture("222.100.111.111",u),i!==null&&i.data!==null){const n=i.BDBServiceVersion!==null?"Driver_Scan_Complete_BDB|BV-"+i.BDBServiceVersion:"Driver_Scan_Complete_BDB";DellDnd.RecordDnDSAOmniture("222.100.112.148",n);DellDndSA.onRetryScanLogged&&DellDndSA.OnScanFailureLog(i,"Retry_Succeeded",!0);i.data.UpdatesFound?(DellDndSA.OnScanFailureLog(i,"Scan_complete_updates_ScanPolling",!0),DellDndSA.checkScanDuration(i),DellDndSA.ProcessScanResults(i.data,!1)):(DellDndSA.OnScanFailureLog(i,"Scan_complete_noupdates_ScanPolling",!0),DellDndSA.showNoDriversFound())}else if(DellDndSA.scanDataNullRetryStarted)DellDndSA.logScanDataNullAndStopScan();else{DellDndSA.OnScanFailureLog(i,"Scan_NullData_Retry_ScanPolling",!0);DellDndSA.scanDataNullRetryStarted=!0;const u=DellDndSA.SPGetRetryScanInterval(r.CurrentValue,!0);setTimeout(function(){DellDndSA.scanPolling(n,t)},u)}}else{DellDndSA.onRetryScanLogged&&DellDndSA.OnScanFailureLog(i,"Retry_In_Progress_ScanPolling",!0);const u=DellDndSA.SPGetRetryScanInterval(r.CurrentValue,!0);setTimeout(function(){DellDndSA.scanPolling(n,t)},u);DellDndSA.scanDataNullRetryStarted&&DellDndSA.logScanDataNullAndStopScan()}},function(t){console.error("DriverScanStatusError",t);DellDndSA.connLostErrorOccurred=!1;typeof t!="undefined"&&typeof t.errorCode!="undefined"&&t.errorCode=="pingFailure"?(DellDndSA.ClearConnectionLostRetry(),DellDndSA.SPStopScan(t,"PingFailure",!1)):typeof t!="undefined"&&typeof t.errorCode!="undefined"&&t.errorCode=="connectionLostError"?(DellDndSA.connLostErrorOccurred=!0,DellDndSA.SPRetryConnectionLostError(n,t)):(DellDndSA.ClearConnectionLostRetry(),DellDndSA.SPHandleScanError(n,t))},t,DellDndSA.DomainName)}catch(i){console.error("Error while scanpolling",i);DellDndSA.OnScanFailureLog(null,"scan_fail|"+i.toString());typeof DellDndSA.ShowDetectDriverFailed=="function"&&DellDndSA.ShowDetectDriverFailed()}};DellDndSA.logScanDataNullAndStopScan=function(){DellDnd.RecordDnDSAOmniture("222.100.111.111","Driver_Scan_Complete_Updates_Null");DellDndSA.OnScanFailureLog({errorCode:"ScanDataNull"},"Driver_Scan_Complete_Updates_Null",!1);DellDndSA.SPStopScan({errorCode:"ScanDataNull"},"ScanDataNull",!1)};DellDndSA.SPGetRetryScanInterval=function(n,t){var i="11000",r=t?n:parseInt(parseFloat(n)*100),u=typeof DellDndSA.ScanProgressTimeInterval!="undefined"&&DellDnd.Utils.notUndefinedNullEmpty(DellDndSA.ScanProgressTimeInterval)?DellDndSA.ScanProgressTimeInterval.split(","):null;return u!==null&&DellDnd.Utils.notUndefinedNullEmpty(r)&&(r=parseInt(r),r>90?i=u[2]:r>60?(i=u[1],DellDndSA.onRetryScanLogged&&(i=parseInt(i)*2)):(i=u[0],DellDndSA.onRetryScanLogged&&(i=parseInt(i)*1.5))),parseInt(i)};DellDndSA.SPOnRetryScan=function(n,t){t.responseData.CurrentProgress===null&&(t.responseData.CurrentProgress=0);const i=DellDndSA.SPGetRetryScanInterval(t.responseData.CurrentProgress,!1);DellDndSA.progressCounterArray.length!==0&&DellDndSA.progressCounterArray[DellDndSA.progressCounterArray.length-1]===parseFloat(t.responseData.CurrentProgress)?DellDndSA.progressCounterArray.push(parseFloat(t.responseData.CurrentProgress)):DellDndSA.progressCounterArray=[parseFloat(t.responseData.CurrentProgress)];DellDndSA.onRetryScanLogged||(DellDndSA.OnScanFailureLog(t,"Retry_Started"),DellDnd.RecordDnDSAOmniture("222.100.111.005","Driver_Scan_Restart"),DellDndSA.onRetryScanLogged=!0);setTimeout(function(){DellDndSA.startDriverScan(n)},i)};DellDndSA.ClearConnectionLostRetry=function(){DellDndSA.connLostErrorOccurred=!1;DellDndSA.connLostRetryCount=0;DellDndSA.hideRetryUIBanner()};DellDndSA.ProcessScanResults=function(n,t){if(t||DellDnd.Utils.setSessionValue("DriverScanData",n),n.ProductScanEnabled===!1){DellDndSA.ShowDetectDriverFailed();return}n.SelectedProductCode=DellDnd.productObj.productCode;n.SelectedServiceTag=DellDnd.productObj.serviceTag;DellDnd.GetDriversEncryptedSvcTag(DellDndSA.ServiceTagEncryptionUrl,n.ServiceTag).then(i=>{n.ServiceTag=i,DellDndSA.listDrivers(n,t)}).catch(n=>{console.error("Error while encrypting scan result service tag",n)})};DellDndSA.listDrivers=function(n){var i=new FormData,t=new URLSearchParams(i);t.append("scanResult",JSON.stringify(n));DellDndSA.fetchPost(DellDnd.driverbyScanUrl,t,function(n){DellDndSA.loadScanResultsOrPageRedirect(n)},function(n){console.error("driver scan res api Failure",n)})};DellDndSA.loadScanResultsOrPageRedirect=function(n){const t=DellDnd.Utils.getById("dnd-divScanProgressTracker");DellDnd.Utils.setInnerHTML(t,n,!0);DellDndSA.processedScanData=JSON.parse(DellDnd.Utils.getById("scanResultModel").value);DellDndSA.IsValidTag=DellDndSA.processedScanData.IsValidTag===!0;DellDndSA.OnDemotedDrivers(DellDndSA.processedScanData.DemotedDrivers);DellDndSA.processedScanData.IsScanErrorOccured?DellDndSA.ShowDetectDriverFailed():DellDndSA.processedScanData.ReloadRequired&&!DellDndSA.scanResultfrmSession?DellDndSA.reloadPage():(DellDndSA.RecordOmnitureforScanResults(),DellDnd.Utils.notUndefinedNullEmpty(DellDndSA.processedScanData)&&DellDnd.Utils.notUndefinedNullEmpty(DellDndSA.processedScanData.Drivers)&&DellDndSA.processedScanData.Drivers.length>0?DellDndSA.fillDriverDetails(function(n){n?(DellDndSA.GetInstallationInstructions(),DellDndSA.setDriverScanTableData(),DellDnd.showBackLink(DellDnd.BackFromScan),DellDnd.TriggerDriversMicrosurveyEvent()):(console.error("Error while forming Scan Result Data"),DellDndSA.ShowDetectDriverFailed())}):DellDndSA.showNoDriversFound())};DellDndSA.reloadPage=function(){let n=DellDndSA.processedScanData,t=new FormData;t.append("servicetag",n.EncryptedServiceTag);t.append("osCode",n.ScannedOs);DellDndSA.fetchPost(DellDndSA.esupIdUrl,t,function(){console.log("Updated EsupId")},function(n){console.error("Error in updateEsupId "+n)});window.location.href=n.RedirectUrl};DellDndSA.fillDriverDetails=function(n){var i,t,r;try{for(DellDndSA.scanResultData=[],i={},t=0;t<DellDndSA.processedScanData.Drivers.length;t++)for(r=0;r<DellDndSA.processedScanData.Drivers[t].AllFiles.length;r++)i={},i.DriverId=DellDndSA.processedScanData.Drivers[t].DriverId,i.DriverTitle=DellDndSA.processedScanData.Drivers[t].DriverTitle,i.Category=DellDndSA.processedScanData.Drivers[t].CategoryName,i.ReleaseDate=DellDndSA.processedScanData.Drivers[t].ReleaseDate,i.Description=DellDndSA.processedScanData.Drivers[t].BriefDescription,i.InstalledVersion=DellDndSA.processedScanData.Drivers[t].InstalledVersion,i.UpdatedVersion=DellDndSA.processedScanData.Drivers[t].UpdatedVersion,i.FileSize=DellDndSA.processedScanData.Drivers[t].AllFiles[r].FileSize,i.DisplayFileName=DellDndSA.processedScanData.Drivers[t].AllFiles[r].DisplayFileName,i.IsDownloadAndInstall=DellDndSA.processedScanData.Drivers[t].AllFiles[r].IsDownloadAndInstall,i.FileId=DellDndSA.processedScanData.Drivers[t].AllFiles[r].FileId,i.FileLocation=DellDndSA.processedScanData.Drivers[t].AllFiles[r].HttpFileLocation,i.ActualFileSize=DellDndSA.processedScanData.Drivers[t].AllFiles[r].ActualFileSize,i.FileName=DellDndSA.processedScanData.Drivers[t].AllFiles[r].FileName,i.IsSecure=!1,i.IsRestartRequired=DellDndSA.processedScanData.Drivers[t].IsRebootRequired,i.IsRestricted=!1,i.UniqueFileId=DellDndSA.processedScanData.Drivers[t].AllFiles[r].UniqueFileId,i.RequiredDrivers=DellDndSA.processedScanData.Drivers[t].RequiredDrivers,i.CategoryId=DellDndSA.processedScanData.Drivers[t].CategoryId,i.Importance=DellDndSA.processedScanData.Drivers[t].ImpId===1?'<span class="dds__badge dds__badge--md dds__badge--error dds__badge--light">'+DellDndSA.processedScanData.Drivers[t].Importance+"<\/span>":DellDndSA.processedScanData.Drivers[t].ImpId===2?'<span class="dds__badge dds__badge--md dds__badge--success dds__badge--light">'+DellDndSA.processedScanData.Drivers[t].Importance+"<\/span>":'<span class="dds__badge dds__badge--md dds__badge--gray dds__badge--light">'+DellDndSA.processedScanData.Drivers[t].Importance+"<\/span>",i.ImpId=DellDndSA.processedScanData.Drivers[t].ImpId,i.IsShowPowerButton=DellDndSA.processedScanData.Drivers[t].IsBiosFirmWarningToBeShown,DellDndSA.scanResultData.push(i);DellDndSA.scanResultData.length>0?n(!0):n(!1)}catch(u){console.error("Error while filling driver details",u);n(!1)}};DellDndSA.showNoDriversFound=function(){DellDndSA.hideScanProgress();DellDndSA.findAllDriversByProductUI("divShowProduct");DellDnd.Utils.removeClassById("dnd-divNoDriverUpdates","dds__d-none");DellDnd.Utils.removeClassById("dnd-divRunTestOptions","dds__d-none");DellDnd.showBackLink(DellDnd.BackFromScan)};DellDndSA.findAllDriversByProductUI=function(n){let t='<button class="dds__button dds__button--md" id="dnd-driversForProduct">'+DellDnd.Utils.getById("ddsFindOtherProdText").innerHTML+'<span class="dds__icon dds__icon--arrow-right dds__link__icon--end" aria-hidden="true"><\/span><\/button>',i=DellDnd.Utils.getById(n);DellDnd.Utils.setInnerHTML(i,t);DellDnd.Utils.attachClickEvent("[id=dnd-driversForProduct]",function(n){n.preventDefault();DellDnd.RecordDnDOmniture("222.100.310.157","findotherdriver");DellDnd.Utils.addClassById("dds-driverhomebackLink","dds__d-none");DellDnd.ManualListRedirect()},!0)};DellDndSA.checkScanStuck=function(n){try{var t=(new Date).getTime();if(DellDndSA.scanStuckState.lastTime==null||DellDndSA.scanStuckState.lastValue===null)DellDndSA.scanStuckState.lastValue=n.Progress.CurrentValue,DellDndSA.scanStuckState.lastTime=t,DellDndSA.scanStuckState.lastLoggedThresholdIndex=-1,DellDndSA.scanStuckState.lastLoggedThresholds=[];else if(DellDndSA.scanStuckState.lastValue===n.Progress.CurrentValue&&DellDndSA.scanStuckState.lastTime!==null){let n=Math.floor((t-DellDndSA.scanStuckState.lastTime)/1e3);if(DellDndSA.scanStuckState.lastLoggedThresholdIndex<DellDndSA.scanStuckState.thresholds.length-1&&n>=DellDndSA.scanStuckState.thresholds[DellDndSA.scanStuckState.lastLoggedThresholdIndex+1]&&(DellDndSA.scanStuckState.lastLoggedThresholdIndex++,DellDndSA.scanStuckState.lastLoggedThresholdIndex<DellDndSA.scanStuckState.thresholds.length)){let n=DellDndSA.scanStuckState.thresholds[DellDndSA.scanStuckState.lastLoggedThresholdIndex];DellDndSA.scanStuckState.lastLoggedThresholds.push(n)}}if(DellDndSA.scanStuckState.lastValue!==n.Progress.CurrentValue){if(DellDndSA.scanStuckState.lastLoggedThresholds.length>0){let t=DellDndSA.scanStuckState.lastLoggedThresholds[DellDndSA.scanStuckState.lastLoggedThresholds.length-1],i=`ScanStuck_${t}s`;DellDndSA.OnScanFailureLog(n,i,!0)}DellDndSA.scanStuckState.lastValue=n.Progress.CurrentValue;DellDndSA.scanStuckState.lastTime=t;DellDndSA.scanStuckState.lastLoggedThresholdIndex=-1;DellDndSA.scanStuckState.lastLoggedThresholds=[]}}catch(i){console.error("Driver Scan Failure - CheckScanStuck",i)}};DellDndSA.checkScanDuration=function(n){try{var t=(new Date).getTime(),i=(t-DellDndSA.scanDurationState.startTime)/6e4;DellDndSA.scanDurationState.lastLoggedThresholdIndex==null&&(DellDndSA.scanDurationState.lastLoggedThresholdIndex=-1);let r=-1;for(let n=0;n<DellDndSA.scanDurationState.thresholds.length;n++)if(i>=DellDndSA.scanDurationState.thresholds[n])r=n;else break;if(r>DellDndSA.scanDurationState.lastLoggedThresholdIndex){DellDndSA.scanDurationState.lastLoggedThresholdIndex=r;let t=DellDndSA.scanDurationState.thresholds[r],i=`ScanRan_${t}m`;DellDndSA.OnScanFailureLog(n,i,!0)}}catch(r){console.error("Driver Scan Duration - CheckScanDuration",r)}};DellDnd.GetDriversForAnotherDevice=function(n){DellDnd.RecordDnDSAOmniture("222.100.112.161","Drivers-For-Another-Device");window.location.href=n};DellDndSA.RunTestCTAClick=function(){sessionStorage.setItem("RunTestClicked","true");typeof DellDnd.RecordDnDSAOmniture=="function"&&typeof dellmetricsTrack=="function"&&(DellDnd.Utils.hasClass("dnd-divNoDriverUpdates","dds__d-none")?DellDnd.RecordDnDSAOmniture("222.100.310.134","tnt-click_drruntest|installcomplete"):DellDnd.RecordDnDSAOmniture("222.100.310.134","tnt-click_drruntest|noupdates"));const n=document.getElementById("dep_nav_diagnose");window.location.href=n!==null&&typeof n.dataset.redirecturl!="undefined"&&n.dataset.redirecturl!==""?n.dataset.redirecturl:DellDndSA.QuickTestJumpPageUrl};DellDndSA.visitLibraryClick=function(){typeof DellDnd.RecordDnDSAOmniture=="function"&&typeof dellmetricsTrack=="function"&&(DellDnd.Utils.hasClass("dnd-divNoDriverUpdates","dds__d-none")?DellDnd.RecordDnDSAOmniture("222.100.310.134","tnt-click_visitlibrary|installcomplete"):DellDnd.RecordDnDSAOmniture("222.100.310.134","tnt-click_visitlibrary|noupdates"))};DellDndSA.RecordOmnitureforScanResults=function(){DellDnd.Utils.notUndefinedNullEmpty(DellDndSA.processedScanData)&&(DellDnd.RecordDnDSAOmniture("222.100.112.155","recomm: "+(parseInt(DellDndSA.processedScanData.DUPFileDetails.length)+parseInt(DellDndSA.processedScanData.ManualFileDetails.length))),DellDndSA.processedScanData.DUPFileDetails.length>0||DellDndSA.processedScanData.ManualFileDetails.length>0?DellDnd.RecordDnDSAOmniture("222.100.101.333","simple_updateresults"):(!DellDndSA.processedScanData.Drivers||DellDndSA.processedScanData.Drivers&&DellDndSA.processedScanData.Drivers.length===0)&&DellDnd.RecordDnDSAOmniture("222.100.101.111","simple_updateresults"),DellDndSA.processedScanData.AppId!=="drivers"||DellDndSA.scanResultfrmSession||(DellDndSA.IsValidTag?DellDnd.RecordDnDSAOmniture("222.200.111.222","saisservicetagvalidforscan|success|drivers"):DellDnd.RecordDnDSAOmniture("222.200.111.222","saisservicetagvalidforscan|failure|drivers")))};DellDndSA.detectDrivers();DellDndSA.setDriverScanTableData=function(){DellDndSA.hideScanProgress();const r=[{value:DellDndSA.processedScanData.Content.DriversText},{value:DellDndSA.processedScanData.Content.Importance,fit:!0},{value:DellDndSA.processedScanData.Content.Size,fit:!0},{value:DellDndSA.processedScanData.Content.InstalledVersion,fit:!0},{value:DellDndSA.processedScanData.Content.LatestVersion,fit:!0}],n=document.getElementById("divScanResultTable");let t=DellDndSA.scanResultData;t.sort(function(n,t){var i=n.ImpId,r=t.ImpId;return i!=null&&r!==null&&i===r?0:i!=null&&r!==null&&i>r?1:-1});let i=[];DellDndSA.dndSelectedItems=[];let u='<span class="dds__ml-2"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><path d="M11.79 3.27V0H4.21001V3.27H2.39001V6.79C2.38597 7.37817 2.5846 7.9498 2.95248 8.40874C3.32036 8.86768 3.83506 9.18594 4.41001 9.31V12.22H7.41001V16H8.53001V12.22H11.53V9.31C12.1142 9.19608 12.6404 8.88217 13.0182 8.42226C13.396 7.96235 13.6017 7.38518 13.6 6.79V3.27H11.79ZM5.28001 1.07H10.73V3.27H5.28001V1.07ZM12.54 6.79C12.5419 7.13892 12.4222 7.47759 12.2013 7.74773C11.9805 8.01786 11.6724 8.20255 11.33 8.27L10.47 8.44V11.15H5.47001V8.44L4.62001 8.27C4.2812 8.20084 3.9767 8.01675 3.75802 7.74887C3.53935 7.481 3.41994 7.1458 3.42001 6.8V4.34H12.54V6.79Z" fill="#925400" /><\/svg><\/span>';t.forEach(function(n){let t=n.Category+" | "+n.DriverTitle+(n.IsRestartRequired===!0?'<span class="dds__badge dds__badge--md dds__badge--gray dds__badge--light dds__ml-2">'+DellDndSA.processedScanData.Content.RestartRequired+"<\/span>":""),r=n.IsShowPowerButton===!0?t+u:t,f=n.FileSize+'<span class="dds__d-none" id="'+n.UniqueFileId+'"><\/span>',e={columns:[{value:r},{value:n.Importance},{value:f},{value:n.InstalledVersion},{value:n.UpdatedVersion}],selectable:!0,expandable:!0,id:n.UniqueFileId};i.push(e);DellDndSA.dndSelectedItems.push(n.UniqueFileId);n.IsShowPowerButton===!0&&(DellDndSA.showBannerById("dnd-msgBIOSPlugin"),DellDnd.Utils.removeClassById("dnd-msgBIOSPlugin","dds__d-none"))});typeof DellDndSA.resultTableAPI!="undefined"&&DellDndSA.resultTableAPI.dispose();DellDndSA.resultTableAPI=DDS.Table(n,{data:i,columns:r,selectableRows:!0,expandableRows:!0,search:!1});DellDndSA.resultTableAPI.setRowSelection(!0,...DellDndSA.dndSelectedItems);document.getElementById("dndbtn-download-Install").removeAttribute("disabled");typeof n.hasEvents=="undefined"&&(n.addEventListener("ddsTableRowExpandedEvent",n=>{DellDndSA.bindDriverScanDetails(n)}),n.addEventListener("click",n=>{if(n.srcElement.parentElement.parentNode.children[4]!==undefined&&n.srcElement.parentElement.parentNode.children[4].children[0].children.length>0&&n.srcElement.tagName==="SPAN"){let t=n.srcElement.parentElement.parentNode.children[4].children[0].children[0].id;n.srcElement.parentElement.parentNode.children[0].children[0].classList.contains("dds__td--expandable__button--opened")?(n.srcElement.parentElement.parentNode.children[0].children[0].classList.remove("dds__td--expandable__button--opened"),n.srcElement.parentElement.parentNode.children[0].children[0].setAttribute("aria-expanded",!1),n.srcElement.parentElement.parentNode.children[0].children[0].setAttribute("aria-label","Expand the row"),DellDndSA.resultTableAPI.collapseRow(t)):(n.srcElement.parentElement.parentNode.children[0].children[0].classList.add("dds__td--expandable__button--opened"),n.srcElement.parentElement.parentNode.children[0].children[0].setAttribute("aria-expanded",!0),n.srcElement.parentElement.parentNode.children[0].children[0].setAttribute("aria-label","Collapse the row"),DellDndSA.resultTableAPI.expandRow(t))}}));DellDndSA.bindScanDownloadListEvents(n);DellDnd.Utils.attachClickEvent("[id=dndbtn-download-Install]",function(){document.getElementById("dndbtn-download-Install").setAttribute("disabled","true");document.getElementById("divScanResultTable").querySelectorAll("input").forEach(function(n){n.setAttribute("disabled","true")});DellDndSA.downloadAndInstall()},!0);DellDnd.Utils.removeClassById("divScan","dds__d-none");DellDnd.Utils.removeClassById("dnd-divScanProgressTracker","dds__d-none");DellDnd.CancelDownloadShown=!1};DellDndSA.runScripts=n=>{Array.from(n.querySelectorAll("script")).forEach(n=>{const t=document.createElement("script");Array.from(n.attributes).forEach(n=>t.setAttribute(n.name,n.value));t.appendChild(document.createTextNode(n.innerHTML));n.parentNode.replaceChild(t,n)})};DellDndSA.bindDriverScanDetails=function(n){let t=n.detail.row.id,i=DellDndSA.scanResultData.filter(n=>n.UniqueFileId==t)[0];const r=DellDndSA.setDriversScanExpandedDetails(i);DellDnd.Utils.query(".dds__td--expandable",n.srcElement)&&DellDnd.Utils.query(".dds__td--expandable",n.srcElement).remove();DellDnd.Utils.setInnerHTML(DellDnd.Utils.query(".dds__td--expandable-content",n.srcElement),r);DellDndSA.runScripts(DellDnd.Utils.query(".dds__td--expandable-content",n.srcElement));n.srcElement.style.backgroundColor="var(--gray-100-dark) !important";DellDnd.Utils.query(".dds__td--expandable-content",n.srcElement).classList.remove("dds__td")};DellDndSA.setDriversScanExpandedDetails=function(n){var i,r;const t=Math.floor(Math.random()*1e3);i="";n.CategoryId=="BI"&&(i='<div id="bios-scanpop-'+t+'" data-dds="popover" class="dds__popover" data-placement="top" role="dialog"><div class="dds__popover__content"><div class="dds__popover__header dds__d-none">Popover headline<\/div><div class="dds__popover__body dds__body-3">'+DellDndSA.processedScanData.Content.BiosFirmwareWarning+'<\/div><\/div><script asp-csp-nonce="true" asp-async-loader="true">const bios_scanpop_'+t+' = document.getElementById("bios-scanpop-'+t+'");const api_'+t+" = DDS.Popover(bios_scanpop_"+t+', { trigger: "#bios-scanpop-'+t+'-trigger" });<\/script><\/div><span id="bios-scanpop-'+t+'-trigger" class="dds__ml-2 dds__icon dds__icon--alert-notice dnd-pointer-cursor" type="button" style="color:#bb2a33"><\/span>');r="";typeof DellDndSA.installationInstDictionary[n.DriverId]!="undefined"&&typeof DellDndSA.installationInstDictionary[n.DriverId].ImportantInformation!="undefined"&&DellDndSA.installationInstDictionary[n.DriverId].ImportantInformation!==null&&DellDndSA.installationInstDictionary[n.DriverId].ImportantInformation.length>0&&(r='<div class="dds__row"><div class="dds__col-2 dds__col--sm dds__mb-3"><div class="dds__body-3 dds__font-weight-bold">'+DellDndSA.processedScanData.Content.ImpInformation+'<\/div><span class="dds__body-3" id="scanImpInfoPara-scanview-'+n.UniqueFileId+'">'+DellDndSA.installationInstDictionary[n.DriverId].ImportantInformation+"<\/span><\/div><\/div>");const u='data-metrics=\'{"appcode":"222.100.101.001","btnname":"dtctdrvrviewdets|SAVer-'+JSON.parse(window.sessionStorage.getItem("clientVersion"))+"|"+DellDnd.productObj.bkcType+"}'",f='aria-label="'+DellDndSA.processedScanData.Content.AccViewFullDetails.replace("{0}",DellDnd.Utils.dnd_replaceDoubleQuotes(n.Category+" | "+n.DriverTitle))+'"';return'<div id="drvScanExpDetails_'+n.UniqueFileId+'" class="dds__ml-2"><div class="dds__row"><div class="dds__col-1 dds__col--sm-3 dds__col--md-12 dds__mb-3"><div class="dds__row"><div class="dds__col-2 dds__col--sm dds__mb-3"><div class="dds__body-3 dds__font-weight-bold">'+DellDndSA.processedScanData.Content.FileName+'<\/div><div class="dds__body-3">'+n.DisplayFileName+i+'<\/div><\/div><\/div><div class="dds__row"><div class="dds__col-2 dds__col--sm dds__mb-3"><div class="dds__body-3 dds__font-weight-bold">'+DellDndSA.processedScanData.Content.ReleaseDate+'<\/div><div class="dds__body-3">'+DellDndSA.ConverttoDateFormat(n.ReleaseDate)+'<\/div><\/div><\/div><div class="dds__row"><div class="dds__col-2 dds__col--sm dds__mb-3"><div class="dds__body-3 dds__font-weight-bold">'+DellDndSA.processedScanData.Content.Description+'<\/div><div class="dds__body-3">'+n.Description+"<\/div><\/div><\/div>"+r+'<a class="dds__body-3 dds__link--standalone" href="'+DellDnd.driversDetailsUrl+"?driverid="+n.DriverId.toLowerCase()+"&oscode="+DellDndSA.processedScanData.ScannedOs.toLowerCase()+"&productcode="+DellDndSA.processedScanData.productCode.toLowerCase()+"&expt="+DellDnd.productObj.bkcType.charAt(3)+'"id="viewDriverDetails_'+n.DriverId+'"target="_blank"'+f+u+">"+DellDndSA.processedScanData.Content.ViewDriverDetails+"<\/a><\/div><\/div><\/div>"};DellDndSA.bindScanDownloadListEvents=function(n){n.addEventListener("ddsTableRowSelectedEvent",n=>{updateDriverScanTableRowSelection(n)});n.addEventListener("ddsTableRowDeselectedEvent",n=>{updateDriverScanTableRowSelection(n)});n.addEventListener("ddsTableHeaderSelectedAllEvent",n=>{let t=n.detail.rows.length;for(let i=0;i<t;i++)DellDndSA.dndSelectedItems.push(n.detail.rows[i].id);document.getElementById("dndbtn-download-Install").hasAttribute("disabled")&&document.getElementById("dndbtn-download-Install").removeAttribute("disabled")});n.addEventListener("ddsTableHeaderDeselectedAllEvent",()=>{DellDndSA.dndSelectedItems=[],n.Table.deselectAllRows(),DellDnd.Utils.getById("dndbtn-download-Install").setAttribute("disabled","true")})};DellDndSA.SPHandleScanError=function(n,t){if(console.log("Inside handle scan error -> scan error: ",t),DellDndSA.onRetryScanLogged&&DellDndSA.OnScanFailureLog(t,"Retry_In_Progress"),typeof t!="undefined"&&typeof t.responseData!="undefined"&&typeof t.responseData.Exception!="undefined"&&typeof t.responseData.Exception.Code!="undefined")switch(t.responseData.Exception.Code.toLowerCase()){case"5":typeof DellDndSA.SignInvalidRetried!="undefined"&&DellDndSA.SignInvalidRetried===!0?DellDndSA.SPStopScan(t,"sigInvalidError"):DellDndSA.SPOnSignatureInvalid(t);break;case"dell.asimov.update.serviceblockedexception":(t.responseData.Exception.Code.toLowerCase()=="dell.asimov.update.serviceblockedexception"&&t.responseData.Exception.Type.toLowerCase()==="system.aggregateexception"||t.responseData.Exception.Code.toLowerCase()!="dell.asimov.update.serviceblockedexception")&&DellDndSA.SPSetScanMessageAndProgress(!1,t,null,function(n){DellDndSA.SPStopScan(t,t.responseData.Exception.Code,n)});break;default:handleRetryErrorCodes(n,t)}else DellDndSA.SPStopScan(t,"UndefinedScanError")};DellDndSA.getScanProgressMessage=function(n,t,i,r,u){let e=n.toLowerCase()==="short_busy";(typeof t=="undefined"||t==null||t=="null"||t=="")&&(t="SupportAssist");(typeof i=="undefined"||i==null||i=="null"||i=="")&&(i="Scan");(typeof r=="undefined"||r==null||r=="null"||r=="")&&(r=0);(typeof u=="undefined"||u==null||u=="null"||u=="")&&(u="");var f=[],o=DellDndSA.getCemCookie("_cls_s");return new Promise((s,h)=>{const l=DellDndSA.dsdinputParamsUrl.slice(0,-11)+"getscanprogressmessage";let a=new FormData,c=new URLSearchParams(a);c.append("errorCode",n);c.append("currentOwner",t);c.append("currentStage",i);c.append("currentProgress",r);c.append("jobId",u);c.append("cem",o);DellDndSA.fetchPost(l,c,function(n){f=n!=""?[n,e]:["",e];s(f)},function(n){var t=DellDnd.Utils.getSessionValue("odeScanId");console.error("Source: DetectDriverGSPMRequestFailure","Diag_id:"+t,"DellCemCookie:"+o,"jobId:"+u,n);f=["",e];h(f)})})};DellDndSA.SPSetScanMessageAndProgress=function(n,t,i,r){var u,f;n?(typeof i!="undefined"&&i!==null&&(console.log("Success scenario show progress : progress.CurrentValue-"+i.CurrentValue+", currMaxProgress-"+currMaxProgress),f=i.CurrentValue>currMaxProgress?i.CurrentValue:currMaxProgress,SPShowScanProgress(f)),typeof r=="function"&&r(!1)):t!=null&&typeof t.responseData!="undefined"&&(u="",u=t.responseData.Exception.Code.toLowerCase()==="dell.asimov.update.serviceblockedexception"&&t.responseData.Exception.Type.toLowerCase()==="system.aggregateexception"?"aggregateexception_serviceblockedexception":t.responseData.Exception.Code,DellDndSA.getScanProgressMessage(u,t.responseData.CurrentOwner,t.responseData.CurrentStage,parseInt(parseFloat(t.responseData.CurrentProgress)*100),t.responseData.JobId).then(n=>{var i=n,u,f;i!==null&&i[1]&&(t.responseData.Exception.Code==="SHORT_BUSY"||t.responseData.Exception.Code==="SVCBUSY")?(u=t.responseData.CurrentProgress,u!==null&&(u=u>currMaxProgress?parseInt(parseFloat(u)*100):currMaxProgress,SPShowScanProgress(u))):i!==null&&i[0]!==undefined&&i[0]!==null&&i[0]!==""?(f=i[0],DellDndSA.SetErrorMsgInHome(f),typeof r=="function"&&r(!0)):typeof r=="function"&&r(!1)}).catch(n=>{console.log(n),typeof r=="function"&&r(!1)}))};DellDndSA.SetErrorMsgInHome=function(n){const t=DellDnd.Utils.getById("dnd-divscanFailMsg");DellDnd.Utils.setInnerHTML(t,n)};DellDndSA.ShowScanErrorInHome=function(){DellDnd.ScanErrorMsgPresent=!0;DellDndSA.showBannerById("dnd-msgScanErrorHome");DellDnd.Utils.setAttrById("dndCheckforUpdates","disabled",!0);DellDnd.Utils.addClassById("dnd-ScanProgress","dds__d-none");DellDnd.Utils.removeClassById("dnd-TileOptions","dds__d-none");DellDnd.Utils.removeClassById("dnd-divScanProgressFailMsg","dds__d-none");DellDnd.HomeRedirect()};DellDndSA.ShowDetectDriverFailed=function(){DellDndSA.hideScanProgress();const n=DellDnd.Utils.getById("dnd-divDetectDriverFail"),t=DellDnd.Utils.getById("dnd-divDetectDriverFailed");DellDnd.Utils.setInnerHTML(n,t.innerHTML,!0);DellDndSA.showBannerById("dnd-msgDetectDriverFail");DellDnd.backViewOption="None";DellDnd.ManualListRedirect();DellDnd.TriggerDriversMicrosurveyEvent()};DellDndSA.SPStopScan=function(n,t,i){DellDndSA.LogErrortoOmniture(n,t);DellDndSA.OnScanFailureLog(n,t);DellDndSA.OnScanDataFailure(i)};DellDndSA.LogErrortoOmniture=function(n,t){let i="S_Err|";try{DellDnd.Utils.notUndefinedNullEmpty(n)&&DellDnd.Utils.notUndefinedNullEmpty(n.responseData)?(i+=DellDnd.Utils.notUndefinedNullEmpty(n.responseData.BDBServiceVersion)?"BV-"+n.responseData.BDBServiceVersion+"|":"",i+=DellDnd.Utils.notUndefinedNullEmpty(n.errorCode)?n.errorCode+"|":t+"|",i+=DellDnd.Utils.notUndefinedNullEmpty(n.responseData.InstallationInfo)?"IC-"+n.responseData.InstallationInfo.AllDriversProgress.length+"|":"",i+=DellDnd.Utils.notUndefinedNullEmpty(n.responseData.CurrentStage)?n.responseData.CurrentStage.charAt(0).toLowerCase()+"|":"",i+=DellDnd.Utils.notUndefinedNullEmpty(n.responseData.InstallationInfo)&&DellDnd.Utils.notUndefinedNullEmpty(n.responseData.InstallationInfo.TotalItems)?n.responseData.InstallationInfo.TotalItems.toString()+"|":"",i+=DellDnd.Utils.notUndefinedNullEmpty(n.responseData.InstallationInfo)&&DellDnd.Utils.notUndefinedNullEmpty(n.responseData.InstallationInfo.CurrentItem)?n.responseData.InstallationInfo.CurrentItem.toString():""):DellDnd.Utils.notUndefinedNullEmpty(n)&&(i+=DellDnd.Utils.notUndefinedNullEmpty(n.errorCode)?n.errorCode:"")}catch(r){console.error("Error while logging scan error to omniture",r)}DellDnd.RecordDnDSAOmniture("222.100.111.111",i)};DellDndSA.OnScanDataFailure=function(n){typeof n!="undefined"&&n?DellDndSA.ShowScanErrorInHome():DellDndSA.ShowDetectDriverFailed()};DellDndSA.SPOnSignatureInvalid=function(n){DellDndSA.SignInvalidRetried=!0;DellDndSA.getDSD(function(t){DellDndSA.globalDSD=t;t.findService(function(){let t=window.sessionStorage.getItem("tagFromSA");t?(DellDndSA.scanSADrivers(),DellDndSA.OnScanFailureLog(n,"SIGINVRetrySuccessfull")):(console.error("scanSADrivers","TagUnavailable:"+t),DellDndSA.SPStopScan(n,"TagUnavailable SIGINVLD"))},function(t){typeof t!="undefined"&&t!==null?console.error(JSON.stringify(t),"findService","driversScanFallback"):console.error("findService","driversScanFallback");DellDndSA.SPStopScan(n,"TagUnavailable SIGINVLD")})},!0,function(n){console.error("Error while Signature Invalid retry get dsd",n);typeof DellDndSA.ShowDetectDriverFailed=="function"&&DellDndSA.ShowDetectDriverFailed()})};var isCancelledRetry=0,downloadAndInstallRetryCount=0,dIRetryElapsedTime=null,tokenCounter=!0,tokenCounterm=!0;DellDndSA.postInstallEventCount=0;DellDndSA.isDlmProgressStarted=!1;DellDndSA.installRunTestCTAshown=!1;DellDndSA.isInstallStarted=!1;DellDndSA.isDownloadComplete=!1;DellDndSA.bDBVersion="";DellDndSA.InitialiseScan=function(){DellDndSA.allFilesDownloadFailed=!1;DellDndSA.installComplete=!1;DellDndSA.installSuccessCount=0;DellDndSA.installFailureCount=0;DellDndSA.isFinalResponse=!1;DellDndSA.partialFilesDownloadFailed=!1;DellDndSA.dlcomplete=!1;DellDndSA.downloadPercentComplete=0;DellDndSA.InstallProgressPercent=0;DellDndSA.installPercentComplete=0;DellDndSA.hasDUPFiles=!1;DellDndSA.statusProgressReport;DellDndSA.downloadFilesArray=[];DellDndSA.dupFilesArray=[];DellDndSA.showDownloadAndInstall=!1;DellDndSA.downloadCancelled=!1;DellDndSA.installCancelled=!1;DellDndSA.canStartDup=!0;DellDndSA.initialinstallcount=0;DellDndSA.initialdriverdownloadcount=0;DellDndSA.installOmnitureNotFired=!0;DellDndSA.isCancelled=!1;DellDndSA.hasLargeFileDownload=!1;DellDndSA.processedScanData.Source="BDB";DellDndSA.Source=DellDndSA.processedScanData.Source;DellDndSA.installFailPropsFileId=[]};DellDndSA.downloadAndInstall=function(){var n,r,i,u;try{DellDndSA.InitialiseScan();n=DellDndSA.processedScanData;r=0;for(let t=0;t<n.Drivers.length;t++)for(let i=0;i<n.Drivers[t].AllFiles.length;i++){let u=n.Drivers[t].AllFiles[i],f=!1;for(let n=0;n<DellDndSA.dndSelectedItems.length;n++)if(u.UniqueFileId===DellDndSA.dndSelectedItems[n]){f=!0;break}if(f!==!1&&u.IsDownloadAndInstall&&u.IsSelectedForDownload){let t=DellDndSA.GetFileInfoFromArray(n.DUPFileDetails,u.FileId,!1);t!==null&&(DellDndSA.downloadFilesArray[r]={title:t.DriverName,category:t.CategoryId,categoryName:t.CategoryName,name:t.FileName,location:DellDnd.addUID(t.FileLocation),isSecure:!1,fileUniqueId:t.UniqueFileId,run:t.Run,installOrder:t.InstallationOrder,restricted:!1,fileId:t.FileId,fileSize:t.FileSize,fileStatus:-99,driverId:t.DriverId,dupInstallReturnCode:t.DupInstallReturnCode,isReboot:t.IsReboot,isShowPowerButton:t.IsBiosFirmWarningToBeShown},DellDndSA.dupFilesArray[r]={title:t.DriverName,category:t.CategoryId,categoryName:t.CategoryName,name:t.FileName,location:DellDnd.addUID(t.FileLocation),isSecure:!1,fileUniqueId:t.UniqueFileId,run:t.Run,installOrder:t.InstallationOrder,restricted:!1,fileId:t.FileId,fileSize:t.FileSize,fileStatus:-99,driverId:t.DriverId,dupInstallReturnCode:t.DupInstallReturnCode,isReboot:t.IsReboot,scanPNPId:t.ScanPNPId,isShowPowerButton:t.IsBiosFirmWarningToBeShown,fileInstallStatus:"",fileInstallStatusCode:0,fileInstallProgress:0},DellDndSA.hasDUPFiles=!0,r++)}}var f=parseInt(n.DUPFileDetails.length),e=n.Source!==undefined&&n.Source!==null&&n.Source.length>0?n.Source:"DND",o="recomm: "+f+"|download: "+DellDndSA.downloadFilesArray.length+"|source:"+e;if(DellDnd.RecordDnDSAOmniture("222.100.112.156",o),console.log("DownloadProgressTable"),DellDndSA.SetDownloadProgressTable(),i="",DellDndSA.hasDUPFiles)for(let n=0;n<DellDndSA.dupFilesArray.length;n++)i=DellDndSA.dupFilesArray[n].driverId+","+i;i!=""&&DellDndSA.hasDUPFiles&&DellDndSA.AddToDellMetricsForScanAI("",i,!0);DellDndSA.startDownloadDupFiles(!0,!1);DellDndSA.setDriverInstallStatus();DellDnd.Utils.removeSessionValue("DriverScanData")}catch(t){DellDnd.Utils.addClassById("dnd-divScanProgressTracker","dds__d-none");DellDnd.Utils.addClassById("divScan","dds__d-none");console.log("call to DnIFail View from downloadAndInstall",t);DellDndSA.InitializePostDnIFailedView();typeof t.name!="undefined"&&typeof t.message!="undefined"?(u="name:"+t.name+"msg:"+t.message,DellDndSA.OnDownloadAndInstallFailureLog(u,"cb_downloadAndInstall"),RecordDnDOmnitureDownloadAndInstallLog(u,"cb_downloadAndInstall")):(DellDndSA.OnDownloadAndInstallFailureLog(t,"cb_downloadAndInstall"),RecordDnDOmnitureDownloadAndInstallLog(t,"cb_downloadAndInstall"))}};DellDndSA.cancel=function(n){clearTimeout(DellDndSA.statusProgressReport);DellDnd.RecordDnDSAOmniture("222.100.112.160","Download_Cancelled");DellDndSA.cancelHandler(n,DellDndSA.downloadFilesArray)};DellDndSA.cancelHandler=function(n,t){var r,u;try{DellDndSA.getDSD(function(i){i.dlmCommand("Cancel",t,function(i){i.data!=="True"&&isCancelledRetry<15?i.data.indexOf('"Cancelled"')>0?(isCancelledRetry=0,DellDndSA.isCancelled=!0,n==="download"&&(DellDndSA.downloadCancelled=!0,DellDndSA.OnDownloadAndInstallFailureLog(null,"dlmCommand_Cancel","download cancelled"),DellDnd.RecordDnDSAOmniture("222.100.310.164","Download_CancelSuccess"),typeof DellDnd.dnd_postDriversEvent=="function"&&DellDnd.dnd_postDriversEvent("ScanCancelDownload"),DellDndSA.cancelDriverDownloadModal.close(),DellDnd.Utils.removeClassById("dnd-TileOptions","dds__d-none"),DellDnd.Utils.addClassById("dnd-divDownload","dds__d-none"),document.getElementById("divScanDownloadTable").innerHTML="",DellDnd.Utils.addClassById("dnd-divScanProgressTracker","dds__d-none"),document.getElementById("dnd-divScanProgressTracker").innerHTML="",DellDnd.Utils.addClassById("dnd-confcancldwnld-loading","dds__d-none"),DellDnd.Utils.removeClassById("dnd-CancelDownloadContent","dds__d-none"),DellDnd.Utils.removeAttrById("dnd-btncancldrvdwnldyes","disabled"),DellDnd.Utils.removeAttrById("dnd-btncancldrvdwnldno","disabled"),DellDnd.Utils.removeAttrById("dndCheckforUpdates","disabled"),DellDnd.CancelDownloadShown=!1,DellDnd.HomeRedirect())):(isCancelledRetry++,DellDndSA.OnDownloadAndInstallFailureLog(null,"dlmCommand_Cancel","cancel retry: "+isCancelledRetry),setTimeout(function(){DellDndSA.cancelHandler(n,t)},2e3)):(isCancelledRetry=0,DellDndSA.isCancelled=!0,DellDnd.RecordDnDSAOmniture("222.100.310.164","Download_CancelSuccess"),n==="download"&&(DellDndSA.downloadCancelled=!0,DellDndSA.OnDownloadAndInstallFailureLog(null,"dlmCommand_Cancel","download cancelled"),DellDnd.dnd_postDriversEvent("ScanCancelDownload"),DellDndSA.cancelDriverDownloadModal.close(),DellDnd.HomeRedirect()))},function(t){if(isCancelledRetry=0,n==="download"){DellDndSA.cancelDriverDownloadModal.close();DellDnd.RecordDnDSAOmniture("222.100.310.164","Download_CancelFail");DellDndSA.OnDownloadAndInstallFailureLog(t,"dlmCommand_safailed","Cancel_download");DellDndSA.downloadCancelled=!0;DellDnd.dnd_postDriversEvent("ScanCancelDownload");var i=new CustomEvent("ondlmcommandfailed",{detail:DellDndSA.processedScanData.Content.DownloadCancelled});document.dispatchEvent(i)}},"BDB")},!1,function(n){console.error("Error while Cancel get DSD",n);DellDndSA.cancelDriverDownloadModal.close();var t=new CustomEvent("ondlmcommandfailed",{detail:DellDndSA.processedScanData.Content.DownloadCancelled});document.dispatchEvent(t)})}catch(i){typeof i.name!="undefined"&&typeof i.message!="undefined"?(r="name:"+i.name+"msg:"+i.message,DellDndSA.OnDownloadAndInstallFailureLog(r,"cb_cancelHandler"),RecordDnDOmnitureDownloadAndInstallLog(r,"cb_cancelHandler")):(DellDndSA.OnDownloadAndInstallFailureLog(i,"cb_cancelHandler"),RecordDnDOmnitureDownloadAndInstallLog(i,"cb_cancelHandler"));DellDndSA.cancelDriverDownloadModal.close();DellDnd.RecordDnDSAOmniture("222.100.310.164","Download_CancelFail");u=new CustomEvent("ondlmcommandfailed",{detail:DellDndSA.processedScanData.Content.DownloadCancelled});document.dispatchEvent(u)}};DellDndSA.startDownloadDupFiles=function(n,t){DellDndSA.getDSD(function(t){t.downloadAndAutoInstall(DellDndSA.dupFilesArray,function(){n&&(DellDndSA.OnDownloadAndInstallFailureLog(null,"downloadAndAutoInstall","started"),console.log("ShowDownloadInstallTable"),DellDndSA.ShowDnITable(),DellDnd.dnd_postDriversEvent("DownloadAndInstall"));DellDndSA.canStartDup=!1;DellDndSA.pollDSDForDownloadProgress(1e3)},function(n){if(typeof n!="undefined"&&n!==null&&typeof n.errorCode!="undefined"&&n.errorCode!==null&&n.errorCode==="versionFailure"){DellDndSA.updateClient();DellDndSA.startDownloadDupFiles(!1,!1);return}if(typeof n!="undefined"&&n!==null&&typeof n.errorCode!="undefined"&&n.errorCode!==null&&n.errorCode.toLowerCase()==="admincheckfailed"){console.log("call to ondownloadfailed");let t=new CustomEvent("ondownloadfailed",{detail:DellDndSA.processedScanData.Content.AdminCheckFailed});document.dispatchEvent(t);RecordDnDOmnitureDownloadAndInstallLog(n,"downloadAndAutoInstall_safailed");DellDndSA.OnDownloadAndInstallFailureLog(n,"downloadAndAutoInstall_safailed")}else{if(typeof n!="undefined"&&n!==null&&typeof n.errorCode!="undefined"&&n.errorCode!==null&&(n.errorCode.toLowerCase()==="siginvd"||n.errorCode==="5")&&tokenCounterm==!0){DellDndSA.startDownloadDupFiles(!1,!0);tokenCounterm=!1;return}if(typeof n.responseData!="undefined"&&n.responseData!==null&&typeof n.responseData.CurrentOwner!="undefined"&&n.responseData.CurrentOwner!==null&&typeof n.responseData.CurrentStage!="undefined"&&n.responseData.CurrentStage!==null)typeof n.responseData.currentProgress=="string"&&(n.responseData.currentProgress=n.responseData.currentProgress.replace(/[^0-9]/g,".")),DellDndSA.getDownloadAndInstallFailureMessage(n.errorCode,n.responseData.CurrentOwner,n.responseData.CurrentStage,n.responseData.currentProgress,n.responseData.jobId,function(t){if(t==null||t=="")console.log("call to DnIFailView from startDownloadDupFiles",n.errorCode),DellDndSA.InitializePostDnIFailedView();else{console.log("call to ondownloadfailed:",t);let n=new CustomEvent("ondownloadfailed",{detail:t});document.dispatchEvent(n)}RecordDnDOmnitureDownloadAndInstallLog(n,"downloadAndAutoInstall_safailed");DellDndSA.OnDownloadAndInstallFailureLog(n,"downloadAndAutoInstall_safailed")});else if(typeof n!="undefined"&&n!==null&&typeof n.responseData!="undefined"&&n.responseData!==null&&n.responseData.Exception&&n.responseData.Exception.Code&&n.responseData.Exception.Code.toLowerCase()==="install_notapplicable")DellDnd.Utils.addClassById("dnd-divNoIssueMsg","dds__d-none"),DellDnd.Utils.addClassById("dnd-divScanProgressTracker","dds__d-none"),DellDnd.Utils.addClassById("divScan","dds__d-none"),DellDndSA.showBannerById("dnd-divNotApplicableMsg"),DellDnd.Utils.removeClassById("dnd-divNotApplicableMsg","dds__d-none"),DellDndSA.showNoDriversFound();else{console.log("call to ondownloadfailed");let t=new CustomEvent("ondownloadfailed",{detail:DellDndSA.processedScanData.Content.CommonExceptionInfo});document.dispatchEvent(t);RecordDnDOmnitureDownloadAndInstallLog(n,"downloadAndAutoInstall_safailed");DellDndSA.OnDownloadAndInstallFailureLog(n,"downloadAndAutoInstall_safailed")}}},"BDB",DellDndSA.DomainName)},t,function(n){console.error("Error while start dup download in get dsd",n);let t=new CustomEvent("ondownloadfailed",{detail:DellDndSA.processedScanData.Content.DownloadFailed});document.dispatchEvent(t)})};DellDndSA.pollDSDForDownloadProgress=function(n){DellDndSA.statusProgressReport=setTimeout(function(){DellDndSA.getFileDownloadProgress()},n)};DellDndSA.cancelDriverDownload=function(){typeof DellDndSA.cancelDriverDownloadModal!="undefined"&&DellDndSA.cancelDriverDownloadModal!==null&&DellDndSA.cancelDriverDownloadModal.open()};DellDndSA.confirmCancelDriverDownload=function(){typeof DellDndSA.cancelDriverDownloadModal!="undefined"&&DellDndSA.cancelDriverDownloadModal!==null&&(DellDnd.Utils.addClassById("dnd-CancelDownloadContent","dds__d-none"),DellDnd.Utils.removeClassById("dnd-confcancldwnld-loading","dds__d-none"),DellDnd.Utils.setAttrById("dnd-btncancldrvdwnldyes","disabled",!0),DellDnd.Utils.setAttrById("dnd-btncancldrvdwnldno","disabled",!0),DellDndSA.cancel("download"))};DellDndSA.continueDriverDownload=function(){typeof DellDndSA.cancelDriverDownloadModal!="undefined"&&DellDndSA.cancelDriverDownloadModal!==null&&DellDndSA.cancelDriverDownloadModal.close()};DellDndSA.getFileDownloadProgress=function(){var n=!1;try{DellDndSA.getDSD(function(t){t.dlmCommand("Progress",DellDndSA.downloadFilesArray,function(t){var r,e,o,s,h,c;if(console.log("fn:dlmCommand-Progress"),DellDndSA.isDlmProgressStarted||(DellDndSA.isDlmProgressStarted=!0,DellDndSA.OnDownloadAndInstallFailureLog(null,"dlmCommand_progress","started")),t!==null&&typeof t.data!="undefined"&&t.data!==null&&t.data!=="MRF"&&t.data.indexOf("PercentCompleted")>0)if(typeof DellDnd.dnd_postDlmResponse=="function"&&DellDnd.dnd_postDlmResponse(t),typeof t.BDBServiceVersion!="undefined"&&t.BDBServiceVersion!==null&&(DellDndSA.bDBVersion="|BV-"+t.BDBServiceVersion.toString()),DellDndSA.Source==="BDB"&&t.FinalResponse!==undefined&&t.FinalResponse!==null&&t.FinalResponse&&(DellDndSA.isFinalResponse=!0,console.log("fn:dlmcommand-set final response")),typeof t.CurrentStage!="undefined"&&t.CurrentStage!==null&&((t.CurrentStage.toLowerCase()=="applying"||t.CurrentStage.toLowerCase().includes("install"))&&!DellDndSA.isInstallStarted&&(console.log("dlmCommand_install"),DellDndSA.isInstallStarted=!0,DellDndSA.OnDownloadAndInstallFailureLog(null,"dlmCommand_install","started")),(t.CurrentStage.toLowerCase()=="creatingsystemrestore"||t.CurrentStage.toLowerCase().includes("download"))&&!DellDndSA.isDownloadComplete&&(DellDndSA.isDownloadComplete=!0,DellDndSA.OnDownloadAndInstallFailureLog(null,"dlmCommand_download","complete"),console.log("dlmCommand_download"))),DellDndSA.hasDUPFiles&&DellDndSA.checkDownloadFailure(t.data),n=DellDndSA.allFilesDownloadFailed?!0:DellDndSA.updateProgressFields(t.data),console.log("All files download failed",DellDndSA.allFilesDownloadFailed),console.log("canProgress-",n),n)if(clearTimeout(DellDndSA.statusProgressReport),DellDndSA.hasDUPFiles&&DellDndSA.canStartDup)setTimeout(function(){DellDndSA.startDownloadDupFiles(!1,!1)},3e3);else if(DellDndSA.allFilesDownloadFailed){DellDnd.Utils.addClassById("divScan","dds__d-none");console.log("Call to DnIFailView from allFilesDownloadFailed",DellDndSA.allFilesDownloadFailed);DellDndSA.InitializePostDnIFailedView();var f=[],u=[],i=JSON.parse(t.data);if(i!==null&&i!==undefined&&i.FileProgress!==undefined&&i.FileProgress!==null&&i.FileProgress.length>0)for(r=0;r<i.FileProgress.length;r++)e="{DriverId:"+i.FileProgress[r].DriverId+", Status:"+i.FileProgress[r].Status+", ErrMsg:"+i.FileProgress[r].ErrorMessage+"}",f.push(e),o="{"+i.FileProgress[r].DriverId+":"+getPev2StatusCode(i.FileProgress[r].Status)+"}",u.push(o);s=f.toString();console.log("Driver download failure status:"+u.toString());h=DellDndSA.bDBVersion!=""?DellDndSA.bDBVersion:"";RecordDnDOmnitureDownloadAndInstallLog("allFilesDownloadFailed","et-"+u.toString()+h);DellDndSA.OnDownloadAndInstallFailureLog(s,"dlmCommand_Progress_Failed","allFilesDownloadFailed")}else console.log("inside dlm cmnd call to postinstallview"),DellDndSA.InitializePostInstallView(),DellDndSA.RecordOmnitureCallPostScan();else DellDndSA.isCancelled||DellDndSA.isFinalResponse||DellDndSA.pollDSDForDownloadProgress(1e3);else dIRetryElapsedTime===null&&(c=(parseInt(DellDndSA.DownloadAndInstallRetryCount)||90)*1e3,dIRetryElapsedTime=new Date(Date.now()+c)),dIRetryElapsedTime>Date.now()&&!DellDndSA.isFinalResponse?(DellDndSA.OnDownloadAndInstallFailureLog(null,"dlmCommand_progress_NullData",""),clearTimeout(DellDndSA.statusProgressReport),DellDndSA.pollDSDForDownloadProgress(1e3)):(dIRetryElapsedTime=null,DellDndSA.OnDownloadAndInstallFailureLog(null,"dlmCommand_progress_NullData","dlmcommand failed"),DellDnd.Utils.addClassById("divScan","dds__d-none"),console.log("Call to DnIFailView from dlmCommand_ResponseEmpty"),DellDndSA.InitializePostDnIFailedView(),RecordDnDOmnitureDownloadAndInstallLog("NullDataRetryStopped","Progress_Retry_stopped"))},function(n){var t="";typeof n.Code!="undefined"&&n.Code!=null&n.Code!=""?t=n.Code:typeof n.errorCode!="undefined"&&n.errorCode!=null&n.errorCode!=""&&(t=n.errorCode);typeof n.responseData!="undefined"&&n.responseData!==null&&typeof n.responseData.CurrentOwner!="undefined"&&n.responseData.CurrentOwner!==null&&typeof n.responseData.CurrentStage!="undefined"&&n.responseData.CurrentStage!==null?(typeof n.responseData.currentProgress=="string"&&(n.responseData.currentProgress=n.responseData.currentProgress.replace(/[^0-9]/g,".")),DellDndSA.getDownloadAndInstallFailureMessage(n.errorCode,n.responseData.CurrentOwner,n.responseData.CurrentStage,n.responseData.currentProgress,n.responseData.jobId,function(i){if(i==null||i=="")console.log("Call to DnIFailView from getFileDownloadProgress",t),DellDndSA.InitializePostDnIFailedView();else{console.log("ondlmcommandfailed:",i);var r=new CustomEvent("ondlmcommandfailed",{detail:i});document.dispatchEvent(r)}DellDnd.Utils.addClassById("divScan","dds__d-none");RecordDnDOmnitureDownloadAndInstallLog(n,"dlmCommand_progress_safailed");DellDndSA.OnDownloadAndInstallFailureLog(n,"dlmCommand_safailed","dlmCommand error from SA")})):(console.error("Error in getFileDownloadProgress error fn"),DellDndSA.InitializePostDnIFailedView(),RecordDnDOmnitureDownloadAndInstallLog(n,"dlmCommand_progress_safailed"),DellDndSA.OnDownloadAndInstallFailureLog(n,"dlmCommand_safailed","dlmCommand error from SA"))},"BDB")},!1,function(n){console.error("Error while getting download progress get dsd",n);DellDndSA.InitializePostDnIFailedView()})}catch(t){console.error("Error in getFileDownloadProgress",t);DellDndSA.InitializePostDnIFailedView();RecordDnDOmnitureDownloadAndInstallLog(t,"dlmCommand_progress_safailed");DellDndSA.OnDownloadAndInstallFailureLog(t,"dlmCommand_safailed","dlmCommand error from SA")}};DellDndSA.updateProgressFields=function(n){var r,u,f,c,e,t,o,s;if(console.log("fn:updateProgressfields"),r=[],u=0,DellDndSA.currentdriverdownloadcount=0,DellDndSA.currentinstallcount=0,DellDndSA.currentInstallingCount=0,n!==null&&n!==undefined&&n!==""&&n!=="MRF"&&n!=="True"){var l=JSON.parse(n),i=l.FileProgress,h=0;for(t=0;t<i.length;t++)i[t].Status!=="Done"&&i[t].Status!=="NotApplicable"?(f=i[t].DownloadedMB,f!==null&&f!=="null"&&f!=undefined&&f!==""&&(c=f.split(" - "),c.length===2&&(u=u+parseFloat(c[0])))):u=u+i[t].TotalFileSize,e=DellDndSA.GetFileInfoFromArray(DellDndSA.dupFilesArray,i[t].FileUniqueId,!0),r[t]={PercentCompleted:i[t].Status==="Done"||i[t].Status==="Downloaded"?100:i[t].PercentCompleted,Status:i[t].Status,FileUniqueId:i[t].FileUniqueId,SavedFolder:i[t].SavedFolder,name:i[t].FileName,FileSize:i[t].TotalFileSize,DownloadedMB:i[t].DownloadedMB,DriverId:e.driverId,BradburyStatus:typeof i[t].BradburyStatus!="undefined"?i[t].BradburyStatus:i[t].ResultCode,InstallReturnCode:i[t].InstallReturnCode},console.log("File Array:",r[t]),DellDndSA.dlcomplete===!1&&(i[t].Status==="Downloading"||i[t].Status==="Done"||i[t].Status==="Downloaded")&&(DellDndSA.currentdriverdownloadcount++,DellDndSA.initialdriverdownloadcount===0&&DellDndSA.currentdriverdownloadcount===1&&(DellDndSA.initialdriverdownloadcount=1,DellDnd.RecordDnDSAOmniture("222.100.112.175","DownloadStart")),i[t].Status==="Downloading"&&(DellDnd.Utils.getById("dnIStatusCol_"+i[t].FileUniqueId).innerHTML=SetSpinnerProgress(i[t].PercentCompleted,DellDndSA.processedScanData.Content.Downloading)),(i[t].Status==="Done"||i[t].Status==="Downloaded")&&DellDndSA.SetFileDownloadCompletedStatus(i[t].FileUniqueId)),h=h+i[t].TotalFileSize,DellDndSA.installComplete===!1&&(i[t].Status==="Installing"||i[t].Status==="Installed"||i[t].Status==="InstallError"||i[t].Status==="Cancelled"||i[t].Status==="RestartRequired"||i[t].Status==="PendingSelfUpdate")&&(DellDndSA.currentInstallingCount++,InstallStartedUIUpdates(),e=DellDndSA.GetFileInfoFromArray(DellDndSA.dupFilesArray,i[t].FileUniqueId,!0),e.fileInstallProgress=DisplayProgressWhenInstallation(e.fileInstallProgress,99),i[t].Status==="Installing"&&(DellDnd.Utils.getById("dnIStatusCol_"+i[t].FileUniqueId).innerHTML=SetSpinnerProgress(e.fileInstallProgress,DellDndSA.processedScanData.Content.Installing)),(i[t].Status==="Installed"||i[t].Status==="InstallError"||i[t].Status==="Cancelled"||i[t].Status==="RestartRequired"||i[t].Status==="PendingSelfUpdate")&&(DellDndSA.currentinstallcount++,DellDndSA.initialinstallcount===0&&DellDndSA.currentinstallcount===1&&(DellDndSA.initialinstallcount=1,DellDnd.RecordDnDSAOmniture("","Install-Start")),i[t].Status==="Installed"&&(DellDnd.Utils.getById("dnIStatusCol_"+i[t].FileUniqueId).innerHTML='<span class="dds__badge dds__badge--success dds__badge--heavy dds__ml-2" id="filedwnldstate_'+i[t].FileUniqueId+'"><span class="dds__badge__label">'+DellDndSA.processedScanData.Content.Installed+"<\/span><\/span>")));for(t=0;t<r.length;t++)DellDndSA.UpdateDupStatus(r[t].Status,r[t].FileUniqueId,i[t].BradburyStatus,i[t].InstallReturnCode);for(o={},DellDndSA.dlcomplete?o.Installing=DellDndSA.currentInstallingCount+"-"+DellDndSA.dupFilesArray.length:o.Downloading=DellDndSA.currentdriverdownloadcount+"-"+DellDndSA.downloadFilesArray.length,h>0&&u>0&&(console.log("call to set status text for progress"),DellDndSA.SetStatusTextForProgress(h,u),DellDndSA.dlcomplete?o.InstallPercent=DellDndSA.installPercentComplete:o.DownloadPercent=DellDndSA.downloadPercentComplete),typeof DellDnd.dnd_postScanProgress=="function"&&DellDnd.dnd_postScanProgress(o),s=0,DellDndSA.finalPropTxt="",t=0;t<r.length;t++)DellDndSA.finalPropTxt+=r[t].DriverId+":"+getPev2StatusCode(r[t].BradburyStatus)+"|",DellDndSA.GetFileInfoFromArray(DellDndSA.dupFilesArray,r[t].FileUniqueId,!0)!=null?(r[t].Status==="Error"||r[t].Status==="Installed"||r[t].Status==="InstallError"||r[t].Status==="Cancelled"||r[t].Status==="RestartRequired"||r[t].Status==="NotApplicable")&&(s+=1):(r[t].FileSize===0||r[t].PercentCompleted=="100"||r[t].Status==="Cancelled"||r[t].Status==="Error"||r[t].Status==="Done"||r[t].Status==="Downloaded"||r[t].Status==="Installed"||r[t].Status==="InstallError"||r[t].Status==="NotApplicable")&&(s+=1);return(console.log("fn:updateProgressfields counter",s),s===r.length&&DellDndSA.isFinalResponse)?(DellDnd.RecordDnDSAOmniture("","IS:"+DellDndSA.installSuccessCount+"|IF:"+DellDndSA.installFailureCount+"|Src-"+DellDndSA.Source+"|"+DellDndSA.finalPropTxt),!0):(console.log("fn:updateProgressfields end"),!1)}};DellDndSA.InitializePostInstallView=function(){console.log("InitializePostInstallView started");try{DellDndSA.installSuccessCount=0;DellDndSA.installFailureCount=0;var n=!1;DellDndSA.HideBiosPlugInMsg();EnableBackLinkHideToolTip();for(let t=0;t<DellDndSA.dupFilesArray.length;t++)if(DellDndSA.dupFilesArray[t].fileStatus===5||DellDndSA.dupFilesArray[t].fileStatus===102||DellDndSA.dupFilesArray[t].fileStatus===-99?(DellDndSA.dupFilesArray[t].isReboot&&(n=!0),DellDndSA.installSuccessCount++):DellDndSA.installFailureCount++,DellDndSA.dupFilesArray[t].fileStatus=="101"||DellDndSA.dupFilesArray[t].fileStatus=="100"){let n=typeof DellDndSA.dupFilesArray[t].path!="undefined"&&DellDndSA.dupFilesArray[t].path!==null&&DellDndSA.dupFilesArray[t].path.length>0;DellDndSA.dupFilesArray[t].fileInstallStatusCode=DellDndSA.getSubtitleIndexForGroupedText(DellDndSA.dupFilesArray[t].fileInstallStatus,n)}DellDndSA.hasDUPFiles&&DellDndSA.installFailureCount<=0&&(DellDnd.Utils.removeClassById("dnd-divRunTestOptions","dds__d-none"),typeof DellDnd.RecordDnDSAOmniture=="function"&&typeof dellmetricsTrack=="function"&&DellDndSA.installRunTestCTAshown===!1&&(DellDndSA.installRunTestCTAshown=!0,DellDnd.RecordDnDSAOmniture("222.100.310.133","tnt-seen_drruntest_visitlibrary|installcomplete")),n&&(DellDndSA.showBannerById("dnd-msgRestartRequired"),DellDnd.Utils.removeClassById("dnd-msgRestartRequired","dds__d-none")));DellDndSA.findAllDriversByProductUI("divShowOtherDriversbyProduct");DellDnd.Utils.removeClassById("divShowOtherDriversbyProduct","dds__d-none");DellDndSA.installSuccessCount==1&&DellDndSA.InstallCompleteHeader(DellDndSA.installSuccessCount,DellDndSA.processedScanData.Content.DnISingleDriverSuccessHeader);DellDndSA.installSuccessCount>1&&DellDndSA.InstallCompleteHeader(DellDndSA.installSuccessCount,DellDndSA.processedScanData.Content.DownloadInstallSuccessHeader);DellDndSA.installFailureCount==1&&DellDndSA.InstallFailedMsg(DellDndSA.installFailureCount,DellDndSA.processedScanData.Content.InstallFailedMessage);DellDndSA.installFailureCount>1&&DellDndSA.InstallFailedMsg(DellDndSA.installFailureCount,DellDndSA.processedScanData.Content.InstallationsFailedMessage);DellDndSA.installComplete=!0;DellDnd.Utils.removeClassById("stageInstall","dds__progress-tracker--in-progress");DellDnd.Utils.addClassById("stageInstall","dds__progress-tracker--complete");DellDndSA.GetFormattedDataForDatatable();typeof DellDndSA.getInstalledDriversfromSA=="function"&&DellDndSA.getInstalledDriversfromSA()}catch(t){console.error("Error from catch in InitializePostInstallView",t)}};DellDndSA.InitializePostDnIFailedView=function(){DellDndSA.ShowDnITable();DellDnd.Utils.removeSessionValue("DriverScanData");DellDnd.Utils.addClassById("dnd-divDownloadCancel","dds__d-none");DellDnd.CancelDownloadShown=!1;DellDndSA.HideBiosPlugInMsg();DellDndSA.downloadFilesArray.length==1&&DellDndSA.DownloadFailedMsg(DellDndSA.downloadFilesArray.length,DellDndSA.processedScanData.Content.DriverDownloadFailMessage);DellDndSA.downloadFilesArray.length>1&&DellDndSA.DownloadFailedMsg(DellDndSA.downloadFilesArray.length,DellDndSA.processedScanData.Content.DriverDownloadsFailMessage);DellDndSA.downloadFilesArray.map(function(n){var i=DellDndSA.scanResultData.filter(function(t){return t.UniqueFileId===n.fileUniqueId})[0],t,r;DellDndSA.SetFileFailureStatus(i.UniqueFileId);t=DellDndSA.processedScanData.AllowedDownloadSizeInBytes>0&&parseInt(i.ActualFileSize)>=DellDndSA.processedScanData.AllowedDownloadSizeInBytes?!0:!1;r=(t?'<div id="dndscan-largedwnldfile-tooltip-content_'+n.fileUniqueId+'" data-dds="tooltip" class="dds__tooltip" data-placement="top" role="dialog"><div class="dds__tooltip__body">'+DellDndSA.processedScanData.Content.LargeDownloadInfoMsg+"<\/div><\/div>":"")+'<a id="manualDownloadLink_'+n.fileUniqueId+'" class="dds__link--standalone" href="#/" data-isLargeFile=\''+t+"' data-location='"+n.location+"' data-driverId='"+n.driverId+'\' name="autoFilesFailureBrwDwld" aria-label="'+DellDndSA.processedScanData.Content.AccRetryDownloading.replace("{0}",DellDnd.Utils.dnd_replaceDoubleQuotes(i.Category+" | "+n.title))+'">'+DellDndSA.processedScanData.Content.DownloadInstallManually+"<\/a>"+(t?"<\/span>":"");r.length>0&&DellDndSA.SetActionData(i.UniqueFileId,r);t&&(DellDndSA.hasLargeFileDownload=!0,DDS.Tooltip(DellDnd.Utils.getById("dndscan-largedwnldfile-tooltip-content_"+n.fileUniqueId),{trigger:"#manualDownloadLink_"+n.fileUniqueId}));document.getElementById("divScanDownloadTable").addEventListener("ddsTableRowExpandedEvent",i=>{if(i.detail.row.id==n.fileUniqueId){var r="downloadfailure";r+=t?"|ld":"";DellDnd.RecordDnDSAOmniture("222.100.302.015",r)}})});EnableBackLinkHideToolTip();DellDndSA.findAllDriversByProductUI("divShowOtherDriversbyProduct");DellDnd.Utils.removeClassById("divShowOtherDriversbyProduct","dds__d-none");DellDnd.Utils.attachAllClickEvent("a[name=autoFilesFailureBrwDwld]",function(){DellDndSA.RunManualDownload("DF",this.getAttribute("data-location"),this.getAttribute("data-driverId"),this.getAttribute("data-isLargeFile"))})};DellDndSA.InstallCompleteHeader=function(n,t){DellDnd.Utils.setInnerHTML(document.getElementById("installCompleteHeader"),n+" "+t);DellDnd.Utils.addClassById("divDellRecommendsHeader","dds__d-none");DellDnd.Utils.removeClassById("divDnICompletedHeader","dds__d-none")};DellDndSA.InstallFailedMsg=function(n,t){DellDnd.Utils.setInnerHTML(DellDnd.Utils.getById("dnd-msgDownloadAndInstallFailureMessage-content"),n+" "+t);DellDndSA.showBannerById("dnd-msgDownloadAndInstallFailureMessage");DellDnd.Utils.removeClassById("dnd-msgInstallationsFailed","dds__d-none")};DellDndSA.DownloadFailedMsg=function(n,t){DellDnd.Utils.setInnerHTML(DellDnd.Utils.getById("dnd-msgDownloadAndInstallFailureMessage-content"),DellDndSA.processedScanData.Content.DownloadFailureMessage+" "+n+" "+t);DellDndSA.showBannerById("dnd-msgDownloadAndInstallFailureMessage");DellDnd.Utils.removeClassById("dnd-msgInstallationsFailed","dds__d-none")};DellDndSA.HideBiosPlugInMsg=function(){DellDnd.Utils.hasClass("dnd-msgBIOSPlugin","dds__d-none")?"":DellDnd.Utils.addClassById("dnd-msgBIOSPlugin","dds__d-none")};DellDndSA.RunManualDownload=function(n,t,i,r){var u=n+"-RetryDownload|"+i;u+=typeof r!="undefined"&&r==="true"?"|ld":"";DellDnd.RecordDnDSAOmniture("222.100.302.112",u);t=decodeURI(t).replace("%3a",":");DellDndSA.IsFileTypeDoc(t,DellDndSA.DocFileTypes.split(","))?window.open(t,"_blank"):window.open(t,"_parent")};DellDndSA.SetDownloadProgressTable=function(){try{const i=[{value:DellDndSA.processedScanData.Content.DriversText},{value:DellDndSA.processedScanData.Content.Size},{value:DellDndSA.processedScanData.Content.Status},{value:DellDndSA.processedScanData.Content.Action}],n=document.getElementById("divScanDownloadTable");let r=DellDndSA.downloadFilesArray,u='<span class="dds__ml-2"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><path d="M11.79 3.27V0H4.21001V3.27H2.39001V6.79C2.38597 7.37817 2.5846 7.9498 2.95248 8.40874C3.32036 8.86768 3.83506 9.18594 4.41001 9.31V12.22H7.41001V16H8.53001V12.22H11.53V9.31C12.1142 9.19608 12.6404 8.88217 13.0182 8.42226C13.396 7.96235 13.6017 7.38518 13.6 6.79V3.27H11.79ZM5.28001 1.07H10.73V3.27H5.28001V1.07ZM12.54 6.79C12.5419 7.13892 12.4222 7.47759 12.2013 7.74773C11.9805 8.01786 11.6724 8.20255 11.33 8.27L10.47 8.44V11.15H5.47001V8.44L4.62001 8.27C4.2812 8.20084 3.9767 8.01675 3.75802 7.74887C3.53935 7.481 3.41994 7.1458 3.42001 6.8V4.34H12.54V6.79Z" fill="#925400" /><\/svg><\/span>',t=[],f='<div class="dds__loading-indicator dds__loading-indicator--sm dds__justify-content-start" id="dnISpinner"><div class="dds__loading-indicator__label dds__loading-indicator__label--end" aria-live="polite">'+DellDndSA.processedScanData.Content.DownloadWaiting+'<\/div><div class="dds__loading-indicator__spinner"><\/div><\/div>';r.forEach(function(n){let i=n.isShowPowerButton===!0?'<div id="divDnITitleCol_'+n.fileUniqueId+'"><span id="dnITitleCol_'+n.fileUniqueId+'">'+n.categoryName+" | "+n.title+u+'<\/span><span id="dnITitleInstallInstructionCol_'+n.fileUniqueId+'"><\/span><\/div>':'<div id="divDnITitleCol_'+n.fileUniqueId+'"><span id="dnITitleCol_'+n.fileUniqueId+'">'+n.categoryName+" | "+n.title+'<\/span><span id="dnITitleInstallInstructionCol_'+n.fileUniqueId+'"><\/span><\/div>',r='<div id="dnIStatusCol_'+n.fileUniqueId+'">'+f+"<\/div>",e='<div id="dnIActionCol_'+n.fileUniqueId+'"><\/div>',o=n.fileSize+'<span class="dds__d-none" id="'+n.fileUniqueId+'"><\/span>',s={columns:[{value:i},{value:o},{value:r},{value:e}],selectable:!1,expandable:!0,id:n.fileUniqueId};t.push(s)});typeof DellDndSA.downloadTable!="undefined"&&DellDndSA.downloadTable.dispose();DellDndSA.downloadTable=DDS.Table(n,{data:t,columns:i,selectableRows:!1,expandableRows:!0,search:!1});typeof n.hasEvents=="undefined"&&(n.addEventListener("ddsTableRowExpandedEvent",n=>{DellDndSA.bindDriverScanDetails(n)}),n.addEventListener("click",n=>{if(n.srcElement.parentElement.parentNode.children[2]!==undefined&&n.srcElement.parentElement.parentNode.children[2].children[0].children.length>0&&n.srcElement.tagName==="SPAN"){let t=n.srcElement.parentElement.parentNode.children[2].children[0].children[0].id;n.srcElement.parentElement.parentNode.children[0].children[0].classList.contains("dds__td--expandable__button--opened")?(n.srcElement.parentElement.parentNode.children[0].children[0].classList.remove("dds__td--expandable__button--opened"),n.srcElement.parentElement.parentNode.children[0].children[0].setAttribute("aria-expanded",!1),n.srcElement.parentElement.parentNode.children[0].children[0].setAttribute("aria-label","Expand the row"),DellDndSA.downloadTable.collapseRow(t)):(n.srcElement.parentElement.parentNode.children[0].children[0].classList.add("dds__td--expandable__button--opened"),n.srcElement.parentElement.parentNode.children[0].children[0].setAttribute("aria-expanded",!0),n.srcElement.parentElement.parentNode.children[0].children[0].setAttribute("aria-label","Collapse the row"),DellDndSA.downloadTable.expandRow(t))}}))}catch(n){console.log("download couldn't start: download table issue");DellDndSA.InitializePostDnIFailedView()}};DellDndSA.ShowDnITable=function(){DellDnd.Utils.addClassById("divScan","dds__d-none");document.getElementById("divScanResultTable").innerHTML="";DellDnd.Utils.removeClassById("stageDownload","dds__progress-tracker--active");DellDnd.Utils.addClassById("stageDownload","dds__progress-tracker--in-progress");DellDnd.Utils.removeClassById("dnd-divDownload","dds__d-none");DellDnd.Utils.removeClassById("dnd-divDownloadCancel","dds__d-none");DellDnd.CancelDownloadShown=!0};DellDndSA.checkDownloadFailure=function(n){var u=JSON.parse(n),t=u.FileProgress,i=0,r=!1;for(let n=0;n<t.length;n++)t[n].Status==="Error"&&(i+=1,r=!0);n.FinalResponse&&(DellDndSA.allFilesDownloadFailed=i===t.length,DellDndSA.partialFilesDownloadFailed=r&&!DellDndSA.allFilesDownloadFailed)};DellDndSA.setDriverInstallStatus=function(){var n,t;try{if(DellDndSA.IsScanRestultPostedtoODE===!0)return;n="";for(let t=0;t<DellDndSA.dndSelectedItems.length;t++)for(let i=0;i<DellDndSA.processedScanData.Drivers.length;i++)for(let r=0;r<DellDndSA.processedScanData.Drivers[i].AllFiles.length;r++)DellDndSA.processedScanData.Drivers[i].AllFiles[r].UniqueFileId===DellDndSA.dndSelectedItems[t]&&(n+=(n.length>0?",":"")+DellDndSA.processedScanData.Drivers[i].DriverId);t={ServiceTag:DellDndSA.processedScanData.EncryptedServiceTag,DriverIDs:n};n.length>0&&DellDnd.Utils.ajaxPost(DellDndSA.driverscanodeupdateurl,t,function(n){DellDndSA.IsScanRestultPostedtoODE=n},function(n){console.error("error in setDriverInstallStatus",n)})}catch(i){console.error("Error while set Install Status",i)}};DellDndSA.updateClient=function(){DellDndSA.getDSD(function(n){DellDndSA.downloadDSDDrivers(n)},!1,function(n){console.error("Error while update client get dsd",n);let t=new CustomEvent("ondownloadfailed",{detail:DellDndSA.processedScanData.Content.DownloadFailed});document.dispatchEvent(t)})};getBDBVers=function(n){return typeof n!="undefined"&&typeof n.responseData!="undefined"&&typeof n.responseData.BDBServiceVersion!="undefined"&&n.responseData.BDBServiceVersion.trim()!==""?n.responseData.BDBServiceVersion:null};DellDndSA.UpdateDupStatus=function(n,t,i){for(let r=0;r<DellDndSA.dupFilesArray.length;r++)DellDndSA.dupFilesArray[r].fileUniqueId===t&&(DellDndSA.Source==="BDB"&&(n==="RestartRequired"||n==="PendingSelfUpdate")?(DellDndSA.dupFilesArray[r].fileStatus=DellDndSA.GetStatusCode("Installed"),DellDndSA.dupFilesArray[r].isReboot=!0):DellDndSA.dupFilesArray[r].fileStatus=DellDndSA.GetStatusCode(n),n==="InstallError"&&DellDndSA.Source==="BDB"&&(DellDndSA.dupFilesArray[r].fileInstallStatus=typeof i!="undefined"&&i!==null?i.toLowerCase():""))};lastRequestFileSize=0;DellDndSA.SetStatusTextForProgress=function(n,t){var e,u,r,f;try{if(!DellDndSA.dlcomplete)if(t>lastRequestFileSize)lastRequestFileSize=t;else return;e=t/n*100;u=Math.round(e/2)*2;u<100?DellDndSA.downloadPercentComplete=u:DellDndSA.dupFilesArray.length>0&&(r=0,DellDndSA.currentinstallcount===0&&(r=DisplayProgressWhenInstallation(parseInt(DellDndSA.InstallProgressPercent),Math.floor(90/DellDndSA.dupFilesArray.length)),DellDndSA.InstallProgressPercent=parseInt(r)),DellDndSA.currentinstallcount>0&&(r=Math.round(DellDndSA.currentinstallcount/DellDndSA.dupFilesArray.length*100)),DellDndSA.dlcomplete===!1&&(DellDndSA.dlcomplete=!0,DellDnd.RecordDnDSAOmniture("","Download-Complete")),r<100?DellDndSA.installPercentComplete=r:DellDndSA.isFinalResponse&&(console.log("f: SetStatusTextForProgress final response",DellDndSA.isFinalResponse),DellDndSA.InitializePostInstallView(),DellDndSA.RecordOmnitureCallPostScan()))}catch(i){DellDnd.Utils.addClassById("divScan","dds__d-none");DellDnd.Utils.addClassById("dnd-divDownloadCancel","dds__d-none");DellDnd.CancelDownloadShown=!1;console.log("Call to DnIFailView from SetStatusTextForProgress",i.name+" "+i.message);DellDndSA.InitializePostDnIFailedView();typeof i.name!="undefined"&&typeof i.message!="undefined"?(f="name:"+i.name+"msg:"+i.message,DellDndSA.OnDownloadAndInstallFailureLog(f,"cb_setstatusTextforprogress"),RecordDnDOmnitureDownloadAndInstallLog(f,"cb_setstatusTextforprogress")):(DellDndSA.OnDownloadAndInstallFailureLog(i,"cb_setstatusTextforprogress"),RecordDnDOmnitureDownloadAndInstallLog(i,"cb_setstatusTextforprogress"))}};DellDndSA.SetFileDownloadCompletedStatus=function(n){DellDnd.Utils.getById("dnIStatusCol_"+n).innerHTML=`<span class="dds__badge dds__badge--md" id="filedwnldstate_${n}"><span class="dds__badge__label">${DellDndSA.processedScanData.Content.Downloaded}</span></span>`};DellDndSA.SetFileInstallCompletedStatus=function(n){DellDnd.Utils.getById("dnIStatusCol_"+n).innerHTML=`<span class="dds__badge dds__badge--md dds__badge--success dds__badge--heavy" id="filedwnldstate_${n}"><span class="dds__badge__label">${DellDndSA.processedScanData.Content.Installed}</span></span>`};DellDndSA.SetFileRestartRequiredStatus=function(n){DellDnd.Utils.getById("dnIStatusCol_"+n).innerHTML=`<span class="dds__badge dds__badge--md dds__badge--warning dds__badge--medium" id="filedwnldstate_${n}"><span class="dds__badge__label">${DellDndSA.processedScanData.Content.RestartReqBadge}</span></span>`;DellDndSA.SetActionData(n,"<span>"+DellDndSA.processedScanData.Content.RestartReqAction+"<\/span>")};DellDndSA.SetFileFailureStatus=function(n){DellDnd.Utils.getById("dnIStatusCol_"+n).innerHTML=`<span class="dds__badge dds__badge--md dds__badge--error dds__badge--heavy" id="filedwnldstate_${n}"><span class="dds__badge__label">${DellDndSA.processedScanData.Content.FailurePill}</span></span>`};DellDndSA.SetFileInstallCancelStatus=function(n){DellDnd.Utils.getById("dnIStatusCol_"+n).innerHTML=`<span class="dds__badge dds__badge--md dds__badge--error dds__badge--heavy" id="filedwnldstate_${n}"><span class="dds__badge__label">${DellDndSA.processedScanData.Content.InstallationCancelled}</span></span>`};DellDndSA.SetFileDownloadCancelStatus=function(n){DellDnd.Utils.getById("dnIStatusCol_"+n).innerHTML=`<span class="dds__badge dds__badge--md dds__badge--error dds__badge--heavy" id="filedwnldstate_${n}"><span class="dds__badge__label">${DellDndSA.processedScanData.Content.DownloadCancelled}</span></span>`};DellDndSA.getDownloadAndInstallFailureMessage=function(n,t,i,r,u,f){(typeof t=="undefined"||t==null||t=="null"||t=="")&&(t="SupportAssist");(typeof i=="undefined"||i==null||i=="null"||i=="")&&(i="Scan");(typeof r=="undefined"||r==null||r=="null"||r=="")&&(r=0);(typeof u=="undefined"||u==null||u=="null"||u=="")&&(u="");var e=DellDndSA.getCemCookie("_cls_s"),o=new URLSearchParams({errorCode:n,currentOwner:t,currentStage:i,currentProgress:r,jobId:u,cem:e});DellDndSA.fetchPost(DellDndSA.dsdinputParamsUrl.slice(0,-11)+"getdownloadandinstallfailuremessage",o,function(n){n!=""?f(n):(console.error("Source: GetDownloadAndInstallFailureMessageError","Response is Empty","DellCemCookie:"+e),f(""))},function(n){console.error("Source: GetDownloadAndInstallFailureMessageError",n,"DellCemCookie:"+e);f("")})};DellDndSA.AddToDellMetricsForScanAI=function(n,t,i){var r="driversbyscan";i&&(r="autoinstall");Dell.Metrics.dnd={single:n,multiple:t,scanType:r};const u=new CustomEvent("datacontext-drivers-download",{detail:{data:{singleDriver:n,multipleDriver:t}}});window.dispatchEvent(u)};DellDndSA.downloadDSDDrivers=function(n){window.open(n.clientDownloadLocation,"_self","height=0")};DellDndSA.GetStatusCode=function(n){var t=-99;return n=="Downloading"?t=1:n=="Paused"?t=2:n=="Error"?t=101:n=="Done"?t=3:n=="Installed"?t=5:n=="InstallError"?t=101:n=="Cancelled"?t=100:n=="NotApplicable"&&(t=102),t};DellDndSA.GetFileInfoFromArray=function(n,t,i){var u=null,r;for(let f=0;f<n.length;f++)if(r=n[f].FileId,i&&(r=n[f].fileUniqueId),r==t){u=n[f];break}return u};DellDndSA.getSubtitleIndexForGroupedText=function(n,t){return typeof n=="undefined"||n===null||n.length==0?0:n==="invaliddigitalsignature"||n==="invalidchecksum"||n==="exitedwitherrors"||n==="failed"?1:n==="unsuccessful"?t?2:1:n==="poweradapterrequired"?3:n==="dep_hard_error"||n==="qual_hard_error"?4:n==="update_successful_soft_depedency_not_met"?5:n==="container_power_cycle_required"||n==="container_power_cycle_required_soft_dependency_not_met"?6:0};DellDndSA.GetFormattedDataForDatatable=function(){DellDndSA.dupFilesArray.map(function(n){var e=DellDndSA.scanResultData.filter(function(t){return t.UniqueFileId===n.fileUniqueId})[0],i,f;if(n.fileStatus!="5"||n.isReboot)if(n.fileStatus=="5"&&n.isReboot)DellDndSA.SetFileRestartRequiredStatus(n.fileUniqueId);else if(n.fileStatus=="101"||n.fileStatus=="100"){DellDndSA.isInstallStarted?n.fileStatus=="101"?n.fileInstallStatusCode===5||n.fileInstallStatusCode===6?DellDndSA.SetFileRestartRequiredStatus(n.fileUniqueId):DellDndSA.SetFileFailureStatus(n.fileUniqueId):n.fileInstallStatusCode===5||n.fileInstallStatusCode===6?DellDndSA.SetFileRestartRequiredStatus(n.fileUniqueId):DellDndSA.SetFileInstallCancelStatus(n.fileUniqueId):n.fileStatus=="101"?n.fileInstallStatusCode===5||n.fileInstallStatusCode===6?DellDndSA.SetFileRestartRequiredStatus(n.fileUniqueId):DellDndSA.SetFileFailureStatus(n.fileUniqueId):n.fileInstallStatusCode===5||n.fileInstallStatusCode===6?DellDndSA.SetFileRestartRequiredStatus(n.fileUniqueId):DellDndSA.SetFileDownloadCancelStatus(n.fileUniqueId);i=typeof DellDndSA.installationInstDictionary[n.driverId]!="undefined"&&typeof DellDndSA.installationInstDictionary[n.driverId]!="undefined"&&typeof DellDndSA.installationInstDictionary[n.driverId].InstallationInstructions!="undefined"&&DellDndSA.installationInstDictionary[n.driverId].InstallationInstructions!==null&&DellDndSA.installationInstDictionary[n.driverId].InstallationInstructions.length>0?'<br><a href="" style="color: var(--blue-600);" class="dds__link dnd-pointer-cursor dds__link--standalone" data-driverId=\''+n.driverId+'\' name="manualFilesInstlInstr" aria-label="'+DellDndSA.processedScanData.Content.AccViewInstallInst.replace("{0}",DellDnd.Utils.dnd_replaceDoubleQuotes(n.categoryName+" | "+n.title))+'">'+DellDndSA.processedScanData.Content.ViewInstallationInstructions+"<\/a>":"";DellDnd.Utils.notUndefinedNullEmpty(i)&&DellDndSA.SetInstallationInstruction(n.fileUniqueId,i);var t=DellDndSA.processedScanData.AllowedDownloadSizeInBytes>0&&parseInt(e.ActualFileSize)>=DellDndSA.processedScanData.AllowedDownloadSizeInBytes?!0:!1,r=DellDndSA.getNextBestAction(n.fileInstallStatus),u=!1;r.length>0&&r==="BWR_DWLD"&&typeof n.location!="undefined"&&n.location!==null&&n.location.length>0&&(u=!0,f=(t?'<div id="dndscan-largefile-tooltip-content_'+n.fileUniqueId+'" data-dds="tooltip" class="dds__tooltip" data-placement="top" role="dialog"><div class="dds__tooltip__body">'+DellDndSA.processedScanData.Content.LargeDownloadInfoMsg+"<\/div><\/div>":"")+'<a id="manualInstallLink_'+n.fileUniqueId+'" class="dds__link--standalone" href="#/" data-isLargeFile=\''+t+"'  data-location='"+n.location+"' data-driverId='"+n.driverId+'\' name="autoFilesFailureBrwDwld" aria-label="'+DellDndSA.processedScanData.Content.AccRetryDownloading.replace("{0]",DellDnd.Utils.dnd_replaceDoubleQuotes(n.categoryName+" | "+n.title))+'">'+DellDndSA.processedScanData.Content.DownloadInstallManually+"<\/a>",DellDndSA.SetActionData(n.fileUniqueId,f),t&&(DellDndSA.hasLargeFileDownload=!0,DDS.Tooltip(DellDnd.Utils.getById("dndscan-largefile-tooltip-content_"+n.fileUniqueId),{trigger:"#manualInstallLink_"+n.fileUniqueId})));document.getElementById("divScanDownloadTable").addEventListener("ddsTableRowExpandedEvent",i=>{if(i.detail.row.id==n.fileUniqueId&&DellDndSA.installFailPropsFileId.includes(n.fileUniqueId)==!1){DellDndSA.installFailPropsFileId.push(n.fileUniqueId);var r="postinstallfailue";r+=t&&u?"|ld":"";DellDnd.RecordDnDSAOmniture("222.100.302.015",r)}})}else(n.fileStatus=="102"||n.fileStatus=="-99")&&(DellDnd.Utils.getById("dnIStatusCol_"+n.fileUniqueId).innerHTML='<span class="dds__badge dds__badge--md dds__badge--success dds__badge--heavy" id="filedwnldstate_'+n.fileUniqueId+'"><span class="dds__badge__label">'+DellDndSA.processedScanData.Content.AutoInstallBadge+"<\/span><\/span>",DellDndSA.SetActionData(n.fileUniqueId,"<span>"+DellDndSA.processedScanData.Content.AutoInstallMsg+"<\/span>"));else DellDndSA.SetFileInstallCompletedStatus(n.fileUniqueId)});DellDnd.Utils.attachAllClickEvent("a[name=autoFilesFailureBrwDwld]",function(){DellDndSA.RunManualDownload("IF",this.getAttribute("data-location"),this.getAttribute("data-driverId"),this.getAttribute("data-isLargeFile"))});DellDnd.Utils.attachAllClickEvent("a[name=manualFilesInstlInstr]",function(){return DellDndSA.ShowInstallationInstructionsModal(this.getAttribute("data-driverId")),!1})};DellDndSA.SetActionData=function(n,t){DellDnd.Utils.getById("dnIActionCol_"+n).innerHTML=t};DellDndSA.SetInstallationInstruction=function(n,t){DellDnd.Utils.getById("dnITitleInstallInstructionCol_"+n).innerHTML=t};DellDndSA.RecordOmnitureCallPostScan=function(){var u,r,e;try{if(DellDndSA.hasDUPFiles&&DellDndSA.installOmnitureNotFired){var t=[],i="",f="";for(DellDndSA.dupFilesArray.map(function(n){if(n.fileStatus=="101")if(typeof t[n.fileInstallStatus]=="undefined")t[n.fileInstallStatus]=1;else{var i=t[n.fileInstallStatus];t[n.fileInstallStatus]=i+=1}f+=(f.length>0?",":"")+n.driverId+":"+n.fileInstallStatusCode}),u=Object.keys(t),r=0;r<u.length;r++)i+=u[r]+"-"+t[u[r]]+(r<u.length-1?"|":"");typeof DellDndSA.bDBVersion!="undefined"&&DellDndSA.bDBVersion!==null&&DellDndSA.bDBVersion!=""&&(i+=DellDndSA.bDBVersion);DellDndSA.installSuccessCount===DellDndSA.dupFilesArray.length?(DellDnd.RecordDnDSAOmniture("222.100.301.333","installSuccess"),DellDndSA.OnDownloadAndInstallFailureLog(null,"postDownloadAndInstall","installSuccess")):DellDndSA.installSuccessCount>0&&DellDndSA.installSuccessCount<DellDndSA.dupFilesArray.length?(DellDndSA.hasLargeFileDownload===!0&&(i+="|ld"),DellDnd.RecordDnDSAOmniture("222.100.301.555","partialInstall|"+i),DellDndSA.OnDownloadAndInstallFailureLog(null,"postDownloadAndInstall","partialInstall",f,DellDndSA.dupFilesArray)):DellDndSA.installSuccessCount===0&&(DellDndSA.hasLargeFileDownload===!0&&(i+="|ld"),DellDnd.RecordDnDSAOmniture("222.100.301.111","allInstallFailed|"+i),DellDndSA.OnDownloadAndInstallFailureLog(null,"postDownloadAndInstall","allInstallFailed",f,DellDndSA.dupFilesArray));DellDndSA.installOmnitureNotFired=!1}}catch(n){console.log("Call to DnIFailView from RecordOmnitureCallPostScan",n.name);DellDndSA.InitializePostDnIFailedView();typeof n.name!="undefined"&&typeof n.message!="undefined"?(e="name:"+n.name+"msg:"+n.message,DellDndSA.OnDownloadAndInstallFailureLog(e,"cb_RecordOmnitureCallPostScan"),RecordDnDOmnitureDownloadAndInstallLog(e,"cb_RecordOmnitureCallPostScan")):(DellDndSA.OnDownloadAndInstallFailureLog(n,"cb_RecordOmnitureCallPostScan"),RecordDnDOmnitureDownloadAndInstallLog(n,"cb_RecordOmnitureCallPostScan"))}};DellDndSA.GetInstallationInstructions=function(){var n=[],t="",i;for(let t=0;t<DellDndSA.scanResultData.length;t++)n.indexOf(DellDndSA.scanResultData[t].DriverId)===-1&&n.push(DellDndSA.scanResultData[t].DriverId);typeof n!="undefined"&&n!==null&&n.length>0&&(i={DriverIds:n},DellDnd.Utils.ajaxPost(DellDndSA.installationInstructionsUrl,i,function(n){typeof n!="undefined"&&n!==null&&n.length>0&&(t=JSON.parse(n),t.forEach(function(n){typeof n.DriverId!="undefined"&&n.DriverId!==null&&n.DriverId.length>0&&(DellDndSA.installationInstDictionary[n.DriverId]=n)}))},function(n){console.error("drivers installationinstructions data retrievalfailed.",n)}))};DellDndSA.getNextBestAction=function(n){return typeof n=="undefined"||n===null||n.length==0?"":n==="invaliddigitalsignature"||n==="invalidchecksum"||n==="exitedwitherrors"||n==="failed"||n==="unsuccessful"?"BWR_DWLD":""};DellDndSA.ShowInstallationInstructionsModal=function(n){var i,t;console.log("retry fired for "+n);i="IF-Viewinstallationinstruction|"+n;DellDnd.RecordDnDSAOmniture("222.100.302.113",i);typeof DellDndSA.installInstructionsModal!="undefined"&&DellDndSA.installInstructionsModal!==null&&(t=document.getElementById("dnd-installation-instructions-modal-body"),t&&(t.innerHTML=DellDndSA.installationInstDictionary[n].InstallationInstructions),DellDndSA.installInstructionsModal.open())};DellDndSA.CloseInstallationInstructionsModal=function(){typeof DellDndSA.installInstructionsModal!="undefined"&&DellDndSA.installInstructionsModal!==null&&DellDndSA.installInstructionsModal.close()};
//# sourceMappingURL=drivers-scan.min.js.map