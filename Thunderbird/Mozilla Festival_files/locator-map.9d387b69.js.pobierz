!function(t){"use strict";function e(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var n=e(datawrapper.libraries.mapboxgl),r="http://www.w3.org/1999/xhtml",i={svg:"http://www.w3.org/2000/svg",xhtml:r,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function o(t){var e=t+="",n=e.indexOf(":");return n>=0&&"xmlns"!==(e=t.slice(0,n))&&(t=t.slice(n+1)),i.hasOwnProperty(e)?{space:i[e],local:t}:t}function a(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===r&&e.documentElement.namespaceURI===r?e.createElement(t):e.createElementNS(n,t)}}function s(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function u(t){var e=o(t);return(e.local?s:a)(e)}function l(){}function c(t){return null==t?l:function(){return this.querySelector(t)}}function p(){return[]}function f(t){return new Array(t.length)}function h(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}h.prototype={constructor:h,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};var d="$";function g(t,e,n,r,i,o){for(var a,s=0,u=e.length,l=o.length;s<l;++s)(a=e[s])?(a.__data__=o[s],r[s]=a):n[s]=new h(t,o[s]);for(;s<u;++s)(a=e[s])&&(i[s]=a)}function y(t,e,n,r,i,o,a){var s,u,l,c={},p=e.length,f=o.length,g=new Array(p);for(s=0;s<p;++s)(u=e[s])&&(g[s]=l=d+a.call(u,u.__data__,s,e),l in c?i[s]=u:c[l]=u);for(s=0;s<f;++s)(u=c[l=d+a.call(t,o[s],s,o)])?(r[s]=u,u.__data__=o[s],c[l]=null):n[s]=new h(t,o[s]);for(s=0;s<p;++s)(u=e[s])&&c[g[s]]===u&&(i[s]=u)}function m(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function _(t){return function(){this.removeAttribute(t)}}function v(t){return function(){this.removeAttributeNS(t.space,t.local)}}function b(t,e){return function(){this.setAttribute(t,e)}}function x(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function w(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}}function E(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function N(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function I(t){return function(){this.style.removeProperty(t)}}function C(t,e,n){return function(){this.style.setProperty(t,e,n)}}function S(t,e,n){return function(){var r=e.apply(this,arguments);null==r?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function L(t){return function(){delete this[t]}}function M(t,e){return function(){this[t]=e}}function O(t,e){return function(){var n=e.apply(this,arguments);null==n?delete this[t]:this[t]=n}}function P(t){return t.trim().split(/^|\s+/)}function R(t){return t.classList||new T(t)}function T(t){this._node=t,this._names=P(t.getAttribute("class")||"")}function A(t,e){for(var n=R(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function D(t,e){for(var n=R(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function k(t){return function(){A(this,t)}}function F(t){return function(){D(this,t)}}function j(t,e){return function(){(e.apply(this,arguments)?A:D)(this,t)}}function z(){this.textContent=""}function G(t){return function(){this.textContent=t}}function B(t){return function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}}function q(){this.innerHTML=""}function U(t){return function(){this.innerHTML=t}}function V(t){return function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}}function Y(){this.nextSibling&&this.parentNode.appendChild(this)}function X(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function H(){return null}function W(){var t=this.parentNode;t&&t.removeChild(this)}function $(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Z(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}T.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};var J={},K=null;"undefined"!=typeof document&&("onmouseenter"in document.documentElement||(J={mouseenter:"mouseover",mouseleave:"mouseout"}));function Q(t,e,n){return t=tt(t,e,n),function(e){var n=e.relatedTarget;n&&(n===this||8&n.compareDocumentPosition(this))||t.call(this,e)}}function tt(t,e,n){return function(r){var i=K;K=r;try{t.call(this,this.__data__,e,n)}finally{K=i}}}function et(t){return function(){var e=this.__on;if(e){for(var n,r=0,i=-1,o=e.length;r<o;++r)n=e[r],t.type&&n.type!==t.type||n.name!==t.name?e[++i]=n:this.removeEventListener(n.type,n.listener,n.capture);++i?e.length=i:delete this.__on}}}function nt(t,e,n){var r=J.hasOwnProperty(t.type)?Q:tt;return function(i,o,a){var s,u=this.__on,l=r(e,o,a);if(u)for(var c=0,p=u.length;c<p;++c)if((s=u[c]).type===t.type&&s.name===t.name)return this.removeEventListener(s.type,s.listener,s.capture),this.addEventListener(s.type,s.listener=l,s.capture=n),void(s.value=e);this.addEventListener(t.type,l,n),s={type:t.type,name:t.name,value:e,listener:l,capture:n},u?u.push(s):this.__on=[s]}}function rt(t,e,n){var r=N(t),i=r.CustomEvent;"function"==typeof i?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function it(t,e){return function(){return rt(this,t,e)}}function ot(t,e){return function(){return rt(this,t,e.apply(this,arguments))}}var at=[null];function st(t,e){this._groups=t,this._parents=e}function ut(){return new st([[document.documentElement]],at)}function lt(t){return"string"==typeof t?new st([[document.querySelector(t)]],[document.documentElement]):new st([[t]],at)}function ct(t){if(!t||"object"!=typeof t)return t;try{return JSON.parse(JSON.stringify(t))}catch(e){return t}}st.prototype=ut.prototype={constructor:st,select:function(t){"function"!=typeof t&&(t=c(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o,a,s=e[i],u=s.length,l=r[i]=new Array(u),p=0;p<u;++p)(o=s[p])&&(a=t.call(o,o.__data__,p,s))&&("__data__"in o&&(a.__data__=o.__data__),l[p]=a);return new st(r,this._parents)},selectAll:function(t){"function"!=typeof t&&(t=function(t){return null==t?p:function(){return this.querySelectorAll(t)}}(t));for(var e=this._groups,n=e.length,r=[],i=[],o=0;o<n;++o)for(var a,s=e[o],u=s.length,l=0;l<u;++l)(a=s[l])&&(r.push(t.call(a,a.__data__,l,s)),i.push(a));return new st(r,i)},filter:function(t){"function"!=typeof t&&(t=function(t){return function(){return this.matches(t)}}(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o,a=e[i],s=a.length,u=r[i]=[],l=0;l<s;++l)(o=a[l])&&t.call(o,o.__data__,l,a)&&u.push(o);return new st(r,this._parents)},data:function(t,e){if(!t)return d=new Array(this.size()),c=-1,this.each((function(t){d[++c]=t})),d;var n,r=e?y:g,i=this._parents,o=this._groups;"function"!=typeof t&&(n=t,t=function(){return n});for(var a=o.length,s=new Array(a),u=new Array(a),l=new Array(a),c=0;c<a;++c){var p=i[c],f=o[c],h=f.length,d=t.call(p,p&&p.__data__,c,i),m=d.length,_=u[c]=new Array(m),v=s[c]=new Array(m);r(p,f,_,v,l[c]=new Array(h),d,e);for(var b,x,w=0,E=0;w<m;++w)if(b=_[w]){for(w>=E&&(E=w+1);!(x=v[E])&&++E<m;);b._next=x||null}}return(s=new st(s,i))._enter=u,s._exit=l,s},enter:function(){return new st(this._enter||this._groups.map(f),this._parents)},exit:function(){return new st(this._exit||this._groups.map(f),this._parents)},join:function(t,e,n){var r=this.enter(),i=this,o=this.exit();return r="function"==typeof t?t(r):r.append(t+""),null!=e&&(i=e(i)),null==n?o.remove():n(o),r&&i?r.merge(i).order():i},merge:function(t){for(var e=this._groups,n=t._groups,r=e.length,i=n.length,o=Math.min(r,i),a=new Array(r),s=0;s<o;++s)for(var u,l=e[s],c=n[s],p=l.length,f=a[s]=new Array(p),h=0;h<p;++h)(u=l[h]||c[h])&&(f[h]=u);for(;s<r;++s)a[s]=e[s];return new st(a,this._parents)},order:function(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r,i=t[e],o=i.length-1,a=i[o];--o>=0;)(r=i[o])&&(a&&4^r.compareDocumentPosition(a)&&a.parentNode.insertBefore(r,a),a=r);return this},sort:function(t){function e(e,n){return e&&n?t(e.__data__,n.__data__):!e-!n}t||(t=m);for(var n=this._groups,r=n.length,i=new Array(r),o=0;o<r;++o){for(var a,s=n[o],u=s.length,l=i[o]=new Array(u),c=0;c<u;++c)(a=s[c])&&(l[c]=a);l.sort(e)}return new st(i,this._parents).order()},call:function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function(){var t=new Array(this.size()),e=-1;return this.each((function(){t[++e]=this})),t},node:function(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,o=r.length;i<o;++i){var a=r[i];if(a)return a}return null},size:function(){var t=0;return this.each((function(){++t})),t},empty:function(){return!this.node()},each:function(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i,o=e[n],a=0,s=o.length;a<s;++a)(i=o[a])&&t.call(i,i.__data__,a,o);return this},attr:function(t,e){var n=o(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((null==e?n.local?v:_:"function"==typeof e?n.local?E:w:n.local?x:b)(n,e))},style:function(t,e,n){return arguments.length>1?this.each((null==e?I:"function"==typeof e?S:C)(t,e,null==n?"":n)):function(t,e){return t.style.getPropertyValue(e)||N(t).getComputedStyle(t,null).getPropertyValue(e)}(this.node(),t)},property:function(t,e){return arguments.length>1?this.each((null==e?L:"function"==typeof e?O:M)(t,e)):this.node()[t]},classed:function(t,e){var n=P(t+"");if(arguments.length<2){for(var r=R(this.node()),i=-1,o=n.length;++i<o;)if(!r.contains(n[i]))return!1;return!0}return this.each(("function"==typeof e?j:e?k:F)(n,e))},text:function(t){return arguments.length?this.each(null==t?z:("function"==typeof t?B:G)(t)):this.node().textContent},html:function(t){return arguments.length?this.each(null==t?q:("function"==typeof t?V:U)(t)):this.node().innerHTML},raise:function(){return this.each(Y)},lower:function(){return this.each(X)},append:function(t){var e="function"==typeof t?t:u(t);return this.select((function(){return this.appendChild(e.apply(this,arguments))}))},insert:function(t,e){var n="function"==typeof t?t:u(t),r=null==e?H:"function"==typeof e?e:c(e);return this.select((function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)}))},remove:function(){return this.each(W)},clone:function(t){return this.select(t?Z:$)},datum:function(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function(t,e,n){var r,i,o=function(t){return t.trim().split(/^|\s+/).map((function(t){var e="",n=t.indexOf(".");return n>=0&&(e=t.slice(n+1),t=t.slice(0,n)),{type:t,name:e}}))}(t+""),a=o.length;if(!(arguments.length<2)){for(s=e?nt:et,null==n&&(n=!1),r=0;r<a;++r)this.each(s(o[r],e,n));return this}var s=this.node().__on;if(s)for(var u,l=0,c=s.length;l<c;++l)for(r=0,u=s[l];r<a;++r)if((i=o[r]).type===u.type&&i.name===u.name)return u.value},dispatch:function(t,e){return this.each(("function"==typeof e?ot:it)(t,e))}};var pt="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function ft(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var ht=function(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)};var dt=function(t){return t},gt=ht,yt=Math.max;var mt=function(t,e,n){return e=yt(void 0===e?t.length-1:e,0),function(){for(var r=arguments,i=-1,o=yt(r.length-e,0),a=Array(o);++i<o;)a[i]=r[e+i];i=-1;for(var s=Array(e+1);++i<e;)s[i]=r[i];return s[e]=n(a),gt(t,this,s)}};var _t=function(t){return function(){return t}},vt="object"==typeof pt&&pt&&pt.Object===Object&&pt,bt=vt,xt="object"==typeof self&&self&&self.Object===Object&&self,wt=bt||xt||Function("return this")(),Et=wt.Symbol,Nt=Et,It=Object.prototype,Ct=It.hasOwnProperty,St=It.toString,Lt=Nt?Nt.toStringTag:void 0;var Mt=function(t){var e=Ct.call(t,Lt),n=t[Lt];try{t[Lt]=void 0;var r=!0}catch(t){}var i=St.call(t);return r&&(e?t[Lt]=n:delete t[Lt]),i},Ot=Object.prototype.toString;var Pt=Mt,Rt=function(t){return Ot.call(t)},Tt=Et?Et.toStringTag:void 0;var At=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":Tt&&Tt in Object(t)?Pt(t):Rt(t)};var Dt=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)},kt=ft(Dt),Ft=At,jt=Dt;var zt,Gt=function(t){if(!jt(t))return!1;var e=Ft(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e},Bt=wt["__core-js_shared__"],qt=(zt=/[^.]+$/.exec(Bt&&Bt.keys&&Bt.keys.IE_PROTO||""))?"Symbol(src)_1."+zt:"";var Ut=function(t){return!!qt&&qt in t},Vt=Function.prototype.toString;var Yt=function(t){if(null!=t){try{return Vt.call(t)}catch(t){}try{return t+""}catch(t){}}return""},Xt=Gt,Ht=Ut,Wt=Dt,$t=Yt,Zt=/^\[object .+?Constructor\]$/,Jt=Function.prototype,Kt=Object.prototype,Qt=Jt.toString,te=Kt.hasOwnProperty,ee=RegExp("^"+Qt.call(te).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var ne=function(t,e){return null==t?void 0:t[e]},re=function(t){return!(!Wt(t)||Ht(t))&&(Xt(t)?ee:Zt).test($t(t))},ie=ne;var oe=function(t,e){var n=ie(t,e);return re(n)?n:void 0},ae=oe,se=function(){try{var t=ae(Object,"defineProperty");return t({},"",{}),t}catch(t){}}(),ue=_t,le=se,ce=le?function(t,e){return le(t,"toString",{configurable:!0,enumerable:!1,value:ue(e),writable:!0})}:dt,pe=Date.now;var fe=function(t){var e=0,n=0;return function(){var r=pe(),i=16-(r-n);if(n=r,i>0){if(++e>=800)return arguments[0]}else e=0;return t.apply(void 0,arguments)}},he=fe(ce),de=dt,ge=mt,ye=he;var me=function(t,e){return ye(ge(t,e,de),t+"")};var _e=function(){this.__data__=[],this.size=0};var ve=function(t,e){return t===e||t!=t&&e!=e},be=ve;var xe=function(t,e){for(var n=t.length;n--;)if(be(t[n][0],e))return n;return-1},we=xe,Ee=Array.prototype.splice;var Ne=xe;var Ie=xe;var Ce=xe;var Se=_e,Le=function(t){var e=this.__data__,n=we(e,t);return!(n<0)&&(n==e.length-1?e.pop():Ee.call(e,n,1),--this.size,!0)},Me=function(t){var e=this.__data__,n=Ne(e,t);return n<0?void 0:e[n][1]},Oe=function(t){return Ie(this.__data__,t)>-1},Pe=function(t,e){var n=this.__data__,r=Ce(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this};function Re(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}Re.prototype.clear=Se,Re.prototype.delete=Le,Re.prototype.get=Me,Re.prototype.has=Oe,Re.prototype.set=Pe;var Te=Re,Ae=Te;var De=function(){this.__data__=new Ae,this.size=0};var ke=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n};var Fe=function(t){return this.__data__.get(t)};var je=function(t){return this.__data__.has(t)},ze=oe(wt,"Map"),Ge=oe(Object,"create"),Be=Ge;var qe=function(){this.__data__=Be?Be(null):{},this.size=0};var Ue=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},Ve=Ge,Ye=Object.prototype.hasOwnProperty;var Xe=function(t){var e=this.__data__;if(Ve){var n=e[t];return"__lodash_hash_undefined__"===n?void 0:n}return Ye.call(e,t)?e[t]:void 0},He=Ge,We=Object.prototype.hasOwnProperty;var $e=Ge;var Ze=qe,Je=Ue,Ke=Xe,Qe=function(t){var e=this.__data__;return He?void 0!==e[t]:We.call(e,t)},tn=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=$e&&void 0===e?"__lodash_hash_undefined__":e,this};function en(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}en.prototype.clear=Ze,en.prototype.delete=Je,en.prototype.get=Ke,en.prototype.has=Qe,en.prototype.set=tn;var nn=en,rn=Te,on=ze;var an=function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t};var sn=function(t,e){var n=t.__data__;return an(e)?n["string"==typeof e?"string":"hash"]:n.map},un=sn;var ln=sn;var cn=sn;var pn=sn;var fn=function(){this.size=0,this.__data__={hash:new nn,map:new(on||rn),string:new nn}},hn=function(t){var e=un(this,t).delete(t);return this.size-=e?1:0,e},dn=function(t){return ln(this,t).get(t)},gn=function(t){return cn(this,t).has(t)},yn=function(t,e){var n=pn(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this};function mn(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}mn.prototype.clear=fn,mn.prototype.delete=hn,mn.prototype.get=dn,mn.prototype.has=gn,mn.prototype.set=yn;var _n=mn,vn=Te,bn=ze,xn=_n;var wn=Te,En=De,Nn=ke,In=Fe,Cn=je,Sn=function(t,e){var n=this.__data__;if(n instanceof vn){var r=n.__data__;if(!bn||r.length<199)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new xn(r)}return n.set(t,e),this.size=n.size,this};function Ln(t){var e=this.__data__=new wn(t);this.size=e.size}Ln.prototype.clear=En,Ln.prototype.delete=Nn,Ln.prototype.get=In,Ln.prototype.has=Cn,Ln.prototype.set=Sn;var Mn=Ln,On=se;var Pn=function(t,e,n){"__proto__"==e&&On?On(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n},Rn=Pn,Tn=ve;var An=function(t,e,n){(void 0!==n&&!Tn(t[e],n)||void 0===n&&!(e in t))&&Rn(t,e,n)};var Dn=function(t){return function(e,n,r){for(var i=-1,o=Object(e),a=r(e),s=a.length;s--;){var u=a[t?s:++i];if(!1===n(o[u],u,o))break}return e}},kn=Dn(),Fn={exports:{}};!function(t,e){var n=wt,r=e&&!e.nodeType&&e,i=r&&t&&!t.nodeType&&t,o=i&&i.exports===r?n.Buffer:void 0,a=o?o.allocUnsafe:void 0;t.exports=function(t,e){if(e)return t.slice();var n=t.length,r=a?a(n):new t.constructor(n);return t.copy(r),r}}(Fn,Fn.exports);var jn=Fn.exports,zn=wt.Uint8Array,Gn=zn;var Bn=function(t){var e=new t.constructor(t.byteLength);return new Gn(e).set(new Gn(t)),e},qn=Bn;var Un=function(t,e){var n=e?qn(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)};var Vn=function(t,e){var n=-1,r=t.length;for(e||(e=Array(r));++n<r;)e[n]=t[n];return e},Yn=Dt,Xn=Object.create,Hn=function(){function t(){}return function(e){if(!Yn(e))return{};if(Xn)return Xn(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}(),Wn=Hn;var $n=function(t,e){return function(n){return t(e(n))}},Zn=$n(Object.getPrototypeOf,Object),Jn=Object.prototype;var Kn=function(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||Jn)},Qn=Wn,tr=Zn,er=Kn;var nr=function(t){return"function"!=typeof t.constructor||er(t)?{}:Qn(tr(t))};var rr=function(t){return null!=t&&"object"==typeof t},ir=At,or=rr;var ar=function(t){return or(t)&&"[object Arguments]"==ir(t)},sr=rr,ur=Object.prototype,lr=ur.hasOwnProperty,cr=ur.propertyIsEnumerable,pr=ar(function(){return arguments}())?ar:function(t){return sr(t)&&lr.call(t,"callee")&&!cr.call(t,"callee")},fr=pr,hr=Array.isArray;var dr=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991},gr=Gt,yr=dr;var mr=function(t){return null!=t&&yr(t.length)&&!gr(t)},_r=mr,vr=rr;var br=function(t){return vr(t)&&_r(t)},xr={exports:{}};var wr=function(){return!1};!function(t,e){var n=wt,r=wr,i=e&&!e.nodeType&&e,o=i&&t&&!t.nodeType&&t,a=o&&o.exports===i?n.Buffer:void 0,s=(a?a.isBuffer:void 0)||r;t.exports=s}(xr,xr.exports);var Er=xr.exports,Nr=At,Ir=Zn,Cr=rr,Sr=Function.prototype,Lr=Object.prototype,Mr=Sr.toString,Or=Lr.hasOwnProperty,Pr=Mr.call(Object);var Rr=function(t){if(!Cr(t)||"[object Object]"!=Nr(t))return!1;var e=Ir(t);if(null===e)return!0;var n=Or.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&Mr.call(n)==Pr},Tr=At,Ar=dr,Dr=rr,kr={};kr["[object Float32Array]"]=kr["[object Float64Array]"]=kr["[object Int8Array]"]=kr["[object Int16Array]"]=kr["[object Int32Array]"]=kr["[object Uint8Array]"]=kr["[object Uint8ClampedArray]"]=kr["[object Uint16Array]"]=kr["[object Uint32Array]"]=!0,kr["[object Arguments]"]=kr["[object Array]"]=kr["[object ArrayBuffer]"]=kr["[object Boolean]"]=kr["[object DataView]"]=kr["[object Date]"]=kr["[object Error]"]=kr["[object Function]"]=kr["[object Map]"]=kr["[object Number]"]=kr["[object Object]"]=kr["[object RegExp]"]=kr["[object Set]"]=kr["[object String]"]=kr["[object WeakMap]"]=!1;var Fr=function(t){return Dr(t)&&Ar(t.length)&&!!kr[Tr(t)]};var jr=function(t){return function(e){return t(e)}},zr={exports:{}};!function(t,e){var n=vt,r=e&&!e.nodeType&&e,i=r&&t&&!t.nodeType&&t,o=i&&i.exports===r&&n.process,a=function(){try{var t=i&&i.require&&i.require("util").types;return t||o&&o.binding&&o.binding("util")}catch(t){}}();t.exports=a}(zr,zr.exports);var Gr=zr.exports,Br=Fr,qr=jr,Ur=Gr&&Gr.isTypedArray,Vr=Ur?qr(Ur):Br;var Yr=function(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]},Xr=Pn,Hr=ve,Wr=Object.prototype.hasOwnProperty;var $r=function(t,e,n){var r=t[e];Wr.call(t,e)&&Hr(r,n)&&(void 0!==n||e in t)||Xr(t,e,n)},Zr=$r,Jr=Pn;var Kr=function(t,e,n,r){var i=!n;n||(n={});for(var o=-1,a=e.length;++o<a;){var s=e[o],u=r?r(n[s],t[s],s,n,t):void 0;void 0===u&&(u=t[s]),i?Jr(n,s,u):Zr(n,s,u)}return n};var Qr=/^(?:0|[1-9]\d*)$/;var ti=function(t,e){var n=typeof t;return!!(e=null==e?9007199254740991:e)&&("number"==n||"symbol"!=n&&Qr.test(t))&&t>-1&&t%1==0&&t<e},ei=function(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r},ni=fr,ri=hr,ii=Er,oi=ti,ai=Vr,si=Object.prototype.hasOwnProperty;var ui=function(t,e){var n=ri(t),r=!n&&ni(t),i=!n&&!r&&ii(t),o=!n&&!r&&!i&&ai(t),a=n||r||i||o,s=a?ei(t.length,String):[],u=s.length;for(var l in t)!e&&!si.call(t,l)||a&&("length"==l||i&&("offset"==l||"parent"==l)||o&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||oi(l,u))||s.push(l);return s};var li=function(t){var e=[];if(null!=t)for(var n in Object(t))e.push(n);return e},ci=Dt,pi=Kn,fi=li,hi=Object.prototype.hasOwnProperty;var di=function(t){if(!ci(t))return fi(t);var e=pi(t),n=[];for(var r in t)("constructor"!=r||!e&&hi.call(t,r))&&n.push(r);return n},gi=ui,yi=di,mi=mr;var _i=function(t){return mi(t)?gi(t,!0):yi(t)},vi=Kr,bi=_i;var xi=An,wi=jn,Ei=Un,Ni=Vn,Ii=nr,Ci=fr,Si=hr,Li=br,Mi=Er,Oi=Gt,Pi=Dt,Ri=Rr,Ti=Vr,Ai=Yr,Di=function(t){return vi(t,bi(t))};var ki=function(t,e,n,r,i,o,a){var s=Ai(t,n),u=Ai(e,n),l=a.get(u);if(l)xi(t,n,l);else{var c=o?o(s,u,n+"",t,e,a):void 0,p=void 0===c;if(p){var f=Si(u),h=!f&&Mi(u),d=!f&&!h&&Ti(u);c=u,f||h||d?Si(s)?c=s:Li(s)?c=Ni(s):h?(p=!1,c=wi(u,!0)):d?(p=!1,c=Ei(u,!0)):c=[]:Ri(u)||Ci(u)?(c=s,Ci(s)?c=Di(s):Pi(s)&&!Oi(s)||(c=Ii(u))):p=!1}p&&(a.set(u,c),i(c,u,r,o,a),a.delete(u)),xi(t,n,c)}},Fi=Mn,ji=An,zi=kn,Gi=ki,Bi=Dt,qi=_i,Ui=Yr;var Vi=function t(e,n,r,i,o){e!==n&&zi(n,(function(a,s){if(o||(o=new Fi),Bi(a))Gi(e,n,s,r,t,i,o);else{var u=i?i(Ui(e,s),a,s+"",e,n,o):void 0;void 0===u&&(u=a),ji(e,s,u)}}),qi)},Yi=Vi,Xi=Dt;var Hi=function t(e,n,r,i,o,a){return Xi(e)&&Xi(n)&&(a.set(n,e),Yi(e,n,void 0,t,a),a.delete(n)),e},Wi=ve,$i=mr,Zi=ti,Ji=Dt;var Ki=function(t,e,n){if(!Ji(n))return!1;var r=typeof e;return!!("number"==r?$i(n)&&Zi(e,n.length):"string"==r&&e in n)&&Wi(n[e],t)},Qi=me,to=Ki;var eo=function(t){return Qi((function(e,n){var r=-1,i=n.length,o=i>1?n[i-1]:void 0,a=i>2?n[2]:void 0;for(o=t.length>3&&"function"==typeof o?(i--,o):void 0,a&&to(n[0],n[1],a)&&(o=i<3?void 0:o,i=1),e=Object(e);++r<i;){var s=n[r];s&&t(e,s,r,o)}return e}))},no=Vi,ro=eo((function(t,e,n,r){no(t,e,n,r)})),io=ht,oo=Hi,ao=ro,so=ft(me((function(t){return t.push(void 0,oo),io(ao,void 0,t)})));function uo(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(!e)return t;const r=Array.isArray(e)?e:e.split(".");let i=t;for(let t=0;t<r.length&&null!=i;t++)i=i[r[t]];return null==i?n:i}var lo=_n,co=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this},po=function(t){return this.__data__.has(t)};function fo(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new lo;++e<n;)this.add(t[e])}fo.prototype.add=fo.prototype.push=co,fo.prototype.has=po;var ho=fo;var go=function(t,e){return t.has(e)},yo=ho,mo=function(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1},_o=go;var vo=function(t,e,n,r,i,o){var a=1&n,s=t.length,u=e.length;if(s!=u&&!(a&&u>s))return!1;var l=o.get(t),c=o.get(e);if(l&&c)return l==e&&c==t;var p=-1,f=!0,h=2&n?new yo:void 0;for(o.set(t,e),o.set(e,t);++p<s;){var d=t[p],g=e[p];if(r)var y=a?r(g,d,p,e,t,o):r(d,g,p,t,e,o);if(void 0!==y){if(y)continue;f=!1;break}if(h){if(!mo(e,(function(t,e){if(!_o(h,e)&&(d===t||i(d,t,n,r,o)))return h.push(e)}))){f=!1;break}}else if(d!==g&&!i(d,g,n,r,o)){f=!1;break}}return o.delete(t),o.delete(e),f};var bo=function(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n},xo=zn,wo=ve,Eo=vo,No=function(t){var e=-1,n=Array(t.size);return t.forEach((function(t,r){n[++e]=[r,t]})),n},Io=bo,Co=Et?Et.prototype:void 0,So=Co?Co.valueOf:void 0;var Lo=function(t,e,n,r,i,o,a){switch(n){case"[object DataView]":if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case"[object ArrayBuffer]":return!(t.byteLength!=e.byteLength||!o(new xo(t),new xo(e)));case"[object Boolean]":case"[object Date]":case"[object Number]":return wo(+t,+e);case"[object Error]":return t.name==e.name&&t.message==e.message;case"[object RegExp]":case"[object String]":return t==e+"";case"[object Map]":var s=No;case"[object Set]":var u=1&r;if(s||(s=Io),t.size!=e.size&&!u)return!1;var l=a.get(t);if(l)return l==e;r|=2,a.set(t,e);var c=Eo(s(t),s(e),r,i,o,a);return a.delete(t),c;case"[object Symbol]":if(So)return So.call(t)==So.call(e)}return!1};var Mo=function(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t},Oo=Mo,Po=hr;var Ro=function(t,e,n){var r=e(t);return Po(t)?r:Oo(r,n(t))};var To=function(){return[]},Ao=function(t,e){for(var n=-1,r=null==t?0:t.length,i=0,o=[];++n<r;){var a=t[n];e(a,n,t)&&(o[i++]=a)}return o},Do=To,ko=Object.prototype.propertyIsEnumerable,Fo=Object.getOwnPropertySymbols,jo=Fo?function(t){return null==t?[]:(t=Object(t),Ao(Fo(t),(function(e){return ko.call(t,e)})))}:Do,zo=jo,Go=$n(Object.keys,Object),Bo=Kn,qo=Go,Uo=Object.prototype.hasOwnProperty;var Vo=function(t){if(!Bo(t))return qo(t);var e=[];for(var n in Object(t))Uo.call(t,n)&&"constructor"!=n&&e.push(n);return e},Yo=ui,Xo=Vo,Ho=mr;var Wo=function(t){return Ho(t)?Yo(t):Xo(t)},$o=Ro,Zo=zo,Jo=Wo;var Ko=function(t){return $o(t,Jo,Zo)},Qo=Ko,ta=Object.prototype.hasOwnProperty;var ea=function(t,e,n,r,i,o){var a=1&n,s=Qo(t),u=s.length;if(u!=Qo(e).length&&!a)return!1;for(var l=u;l--;){var c=s[l];if(!(a?c in e:ta.call(e,c)))return!1}var p=o.get(t),f=o.get(e);if(p&&f)return p==e&&f==t;var h=!0;o.set(t,e),o.set(e,t);for(var d=a;++l<u;){var g=t[c=s[l]],y=e[c];if(r)var m=a?r(y,g,c,e,t,o):r(g,y,c,t,e,o);if(!(void 0===m?g===y||i(g,y,n,r,o):m)){h=!1;break}d||(d="constructor"==c)}if(h&&!d){var _=t.constructor,v=e.constructor;_==v||!("constructor"in t)||!("constructor"in e)||"function"==typeof _&&_ instanceof _&&"function"==typeof v&&v instanceof v||(h=!1)}return o.delete(t),o.delete(e),h},na=oe(wt,"DataView"),ra=oe(wt,"Promise"),ia=oe(wt,"Set"),oa=na,aa=ze,sa=ra,ua=ia,la=oe(wt,"WeakMap"),ca=At,pa=Yt,fa="[object Map]",ha="[object Promise]",da="[object Set]",ga="[object WeakMap]",ya="[object DataView]",ma=pa(oa),_a=pa(aa),va=pa(sa),ba=pa(ua),xa=pa(la),wa=ca;(oa&&wa(new oa(new ArrayBuffer(1)))!=ya||aa&&wa(new aa)!=fa||sa&&wa(sa.resolve())!=ha||ua&&wa(new ua)!=da||la&&wa(new la)!=ga)&&(wa=function(t){var e=ca(t),n="[object Object]"==e?t.constructor:void 0,r=n?pa(n):"";if(r)switch(r){case ma:return ya;case _a:return fa;case va:return ha;case ba:return da;case xa:return ga}return e});var Ea=wa,Na=Mn,Ia=vo,Ca=Lo,Sa=ea,La=Ea,Ma=hr,Oa=Er,Pa=Vr,Ra="[object Arguments]",Ta="[object Array]",Aa="[object Object]",Da=Object.prototype.hasOwnProperty;var ka=function(t,e,n,r,i,o){var a=Ma(t),s=Ma(e),u=a?Ta:La(t),l=s?Ta:La(e),c=(u=u==Ra?Aa:u)==Aa,p=(l=l==Ra?Aa:l)==Aa,f=u==l;if(f&&Oa(t)){if(!Oa(e))return!1;a=!0,c=!1}if(f&&!c)return o||(o=new Na),a||Pa(t)?Ia(t,e,n,r,i,o):Ca(t,e,u,n,r,i,o);if(!(1&n)){var h=c&&Da.call(t,"__wrapped__"),d=p&&Da.call(e,"__wrapped__");if(h||d){var g=h?t.value():t,y=d?e.value():e;return o||(o=new Na),i(g,y,n,r,o)}}return!!f&&(o||(o=new Na),Sa(t,e,n,r,i,o))},Fa=ka,ja=rr;var za=function t(e,n,r,i,o){return e===n||(null==e||null==n||!ja(e)&&!ja(n)?e!=e&&n!=n:Fa(e,n,r,i,t,o))},Ga=Mn,Ba=za;var qa=function(t,e,n,r){var i=n.length,o=i,a=!r;if(null==t)return!o;for(t=Object(t);i--;){var s=n[i];if(a&&s[2]?s[1]!==t[s[0]]:!(s[0]in t))return!1}for(;++i<o;){var u=(s=n[i])[0],l=t[u],c=s[1];if(a&&s[2]){if(void 0===l&&!(u in t))return!1}else{var p=new Ga;if(r)var f=r(l,c,u,t,e,p);if(!(void 0===f?Ba(c,l,3,r,p):f))return!1}}return!0},Ua=Dt;var Va=function(t){return t==t&&!Ua(t)},Ya=Va,Xa=Wo;var Ha=function(t){for(var e=Xa(t),n=e.length;n--;){var r=e[n],i=t[r];e[n]=[r,i,Ya(i)]}return e};var Wa=function(t,e){return function(n){return null!=n&&(n[t]===e&&(void 0!==e||t in Object(n)))}},$a=qa,Za=Ha,Ja=Wa;var Ka=function(t){var e=Za(t);return 1==e.length&&e[0][2]?Ja(e[0][0],e[0][1]):function(n){return n===t||$a(n,t,e)}},Qa=At,ts=rr;var es=function(t){return"symbol"==typeof t||ts(t)&&"[object Symbol]"==Qa(t)},ns=hr,rs=es,is=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,os=/^\w*$/;var as=function(t,e){if(ns(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!rs(t))||(os.test(t)||!is.test(t)||null!=e&&t in Object(e))},ss=_n;function us(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError("Expected a function");var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=t.apply(this,r);return n.cache=o.set(i,a)||o,a};return n.cache=new(us.Cache||ss),n}us.Cache=ss;var ls=us;var cs=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ps=/\\(\\)?/g,fs=function(t){var e=ls(t,(function(t){return 500===n.size&&n.clear(),t})),n=e.cache;return e}((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(cs,(function(t,n,r,i){e.push(r?i.replace(ps,"$1"):n||t)})),e}));var hs=function(t,e){for(var n=-1,r=null==t?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i},ds=hs,gs=hr,ys=es,ms=Et?Et.prototype:void 0,_s=ms?ms.toString:void 0;var vs=function t(e){if("string"==typeof e)return e;if(gs(e))return ds(e,t)+"";if(ys(e))return _s?_s.call(e):"";var n=e+"";return"0"==n&&1/e==-Infinity?"-0":n},bs=vs;var xs=hr,ws=as,Es=fs,Ns=function(t){return null==t?"":bs(t)};var Is=function(t,e){return xs(t)?t:ws(t,e)?[t]:Es(Ns(t))},Cs=es;var Ss=function(t){if("string"==typeof t||Cs(t))return t;var e=t+"";return"0"==e&&1/t==-Infinity?"-0":e},Ls=Is,Ms=Ss;var Os=function(t,e){for(var n=0,r=(e=Ls(e,t)).length;null!=t&&n<r;)t=t[Ms(e[n++])];return n&&n==r?t:void 0},Ps=Os;var Rs=function(t,e,n){var r=null==t?void 0:Ps(t,e);return void 0===r?n:r};var Ts=function(t,e){return null!=t&&e in Object(t)},As=Is,Ds=fr,ks=hr,Fs=ti,js=dr,zs=Ss;var Gs=function(t,e,n){for(var r=-1,i=(e=As(e,t)).length,o=!1;++r<i;){var a=zs(e[r]);if(!(o=null!=t&&n(t,a)))break;t=t[a]}return o||++r!=i?o:!!(i=null==t?0:t.length)&&js(i)&&Fs(a,i)&&(ks(t)||Ds(t))},Bs=Ts,qs=Gs;var Us=function(t,e){return null!=t&&qs(t,e,Bs)},Vs=za,Ys=Rs,Xs=Us,Hs=as,Ws=Va,$s=Wa,Zs=Ss;var Js=function(t,e){return Hs(t)&&Ws(e)?$s(Zs(t),e):function(n){var r=Ys(n,t);return void 0===r&&r===e?Xs(n,t):Vs(e,r,3)}};var Ks=function(t){return function(e){return null==e?void 0:e[t]}},Qs=Os;var tu=function(t){return function(e){return Qs(e,t)}},eu=Ks,nu=tu,ru=as,iu=Ss;var ou=function(t){return ru(t)?eu(iu(t)):nu(t)},au=Ka,su=Js,uu=dt,lu=hr,cu=ou;var pu=function(t){return"function"==typeof t?t:null==t?uu:"object"==typeof t?lu(t)?su(t[0],t[1]):au(t):cu(t)},fu=pu,hu=mr,du=Wo;var gu=function(t){return function(e,n,r){var i=Object(e);if(!hu(e)){var o=fu(n);e=du(e),n=function(t){return o(i[t],t,i)}}var a=t(e,n,r);return a>-1?i[o?e[a]:a]:void 0}};var yu=function(t,e,n,r){for(var i=t.length,o=n+(r?1:-1);r?o--:++o<i;)if(e(t[o],o,t))return o;return-1},mu=/\s/;var _u=function(t){for(var e=t.length;e--&&mu.test(t.charAt(e)););return e},vu=/^\s+/;var bu=function(t){return t?t.slice(0,_u(t)+1).replace(vu,""):t},xu=Dt,wu=es,Eu=/^[-+]0x[0-9a-f]+$/i,Nu=/^0b[01]+$/i,Iu=/^0o[0-7]+$/i,Cu=parseInt;var Su=function(t){if("number"==typeof t)return t;if(wu(t))return NaN;if(xu(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=xu(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=bu(t);var n=Nu.test(t);return n||Iu.test(t)?Cu(t.slice(2),n?2:8):Eu.test(t)?NaN:+t},Lu=Su,Mu=1/0;var Ou=function(t){return t?(t=Lu(t))===Mu||t===-1/0?17976931348623157e292*(t<0?-1:1):t==t?t:0:0===t?t:0},Pu=Ou;var Ru=yu,Tu=pu,Au=function(t){var e=Pu(t),n=e%1;return e==e?n?e-n:e:0},Du=Math.max;var ku=ft(gu((function(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=null==n?0:Au(n);return i<0&&(i=Du(r+i,0)),Ru(t,Tu(e),i)})));function Fu(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function ju(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function zu(){}var Gu=.7,Bu=1/Gu,qu="\\s*([+-]?\\d+)\\s*",Uu="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",Vu="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Yu=/^#([0-9a-f]{3,8})$/,Xu=new RegExp("^rgb\\("+[qu,qu,qu]+"\\)$"),Hu=new RegExp("^rgb\\("+[Vu,Vu,Vu]+"\\)$"),Wu=new RegExp("^rgba\\("+[qu,qu,qu,Uu]+"\\)$"),$u=new RegExp("^rgba\\("+[Vu,Vu,Vu,Uu]+"\\)$"),Zu=new RegExp("^hsl\\("+[Uu,Vu,Vu]+"\\)$"),Ju=new RegExp("^hsla\\("+[Uu,Vu,Vu,Uu]+"\\)$"),Ku={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function Qu(){return this.rgb().formatHex()}function tl(){return this.rgb().formatRgb()}function el(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=Yu.exec(t))?(n=e[1].length,e=parseInt(e[1],16),6===n?nl(e):3===n?new al(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):8===n?rl(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):4===n?rl(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=Xu.exec(t))?new al(e[1],e[2],e[3],1):(e=Hu.exec(t))?new al(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=Wu.exec(t))?rl(e[1],e[2],e[3],e[4]):(e=$u.exec(t))?rl(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=Zu.exec(t))?cl(e[1],e[2]/100,e[3]/100,1):(e=Ju.exec(t))?cl(e[1],e[2]/100,e[3]/100,e[4]):Ku.hasOwnProperty(t)?nl(Ku[t]):"transparent"===t?new al(NaN,NaN,NaN,0):null}function nl(t){return new al(t>>16&255,t>>8&255,255&t,1)}function rl(t,e,n,r){return r<=0&&(t=e=n=NaN),new al(t,e,n,r)}function il(t){return t instanceof zu||(t=el(t)),t?new al((t=t.rgb()).r,t.g,t.b,t.opacity):new al}function ol(t,e,n,r){return 1===arguments.length?il(t):new al(t,e,n,null==r?1:r)}function al(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}function sl(){return"#"+ll(this.r)+ll(this.g)+ll(this.b)}function ul(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===t?")":", "+t+")")}function ll(t){return((t=Math.max(0,Math.min(255,Math.round(t)||0)))<16?"0":"")+t.toString(16)}function cl(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new hl(t,e,n,r)}function pl(t){if(t instanceof hl)return new hl(t.h,t.s,t.l,t.opacity);if(t instanceof zu||(t=el(t)),!t)return new hl;if(t instanceof hl)return t;var e=(t=t.rgb()).r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),o=Math.max(e,n,r),a=NaN,s=o-i,u=(o+i)/2;return s?(a=e===o?(n-r)/s+6*(n<r):n===o?(r-e)/s+2:(e-n)/s+4,s/=u<.5?o+i:2-o-i,a*=60):s=u>0&&u<1?0:a,new hl(a,s,u,t.opacity)}function fl(t,e,n,r){return 1===arguments.length?pl(t):new hl(t,e,n,null==r?1:r)}function hl(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}function dl(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}Fu(zu,el,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:Qu,formatHex:Qu,formatHsl:function(){return pl(this).formatHsl()},formatRgb:tl,toString:tl}),Fu(al,ol,ju(zu,{brighter:function(t){return t=null==t?Bu:Math.pow(Bu,t),new al(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?Gu:Math.pow(Gu,t),new al(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:sl,formatHex:sl,formatRgb:ul,toString:ul})),Fu(hl,fl,ju(zu,{brighter:function(t){return t=null==t?Bu:Math.pow(Bu,t),new hl(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?Gu:Math.pow(Gu,t),new hl(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new al(dl(t>=240?t-240:t+120,i,r),dl(t,i,r),dl(t<120?t+240:t-120,i,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===t?")":", "+t+")")}}));var gl=Math.PI/180,yl=180/Math.PI,ml=.96422,_l=1,vl=.82521,bl=4/29,xl=6/29,wl=3*xl*xl,El=xl*xl*xl;function Nl(t){if(t instanceof Cl)return new Cl(t.l,t.a,t.b,t.opacity);if(t instanceof Tl)return Al(t);t instanceof al||(t=il(t));var e,n,r=Ol(t.r),i=Ol(t.g),o=Ol(t.b),a=Sl((.2225045*r+.7168786*i+.0606169*o)/_l);return r===i&&i===o?e=n=a:(e=Sl((.4360747*r+.3850649*i+.1430804*o)/ml),n=Sl((.0139322*r+.0971045*i+.7141733*o)/vl)),new Cl(116*a-16,500*(e-a),200*(a-n),t.opacity)}function Il(t,e,n,r){return 1===arguments.length?Nl(t):new Cl(t,e,n,null==r?1:r)}function Cl(t,e,n,r){this.l=+t,this.a=+e,this.b=+n,this.opacity=+r}function Sl(t){return t>El?Math.pow(t,1/3):t/wl+bl}function Ll(t){return t>xl?t*t*t:wl*(t-bl)}function Ml(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function Ol(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function Pl(t){if(t instanceof Tl)return new Tl(t.h,t.c,t.l,t.opacity);if(t instanceof Cl||(t=Nl(t)),0===t.a&&0===t.b)return new Tl(NaN,0<t.l&&t.l<100?0:NaN,t.l,t.opacity);var e=Math.atan2(t.b,t.a)*yl;return new Tl(e<0?e+360:e,Math.sqrt(t.a*t.a+t.b*t.b),t.l,t.opacity)}function Rl(t,e,n,r){return 1===arguments.length?Pl(t):new Tl(n,e,t,null==r?1:r)}function Tl(t,e,n,r){this.h=+t,this.c=+e,this.l=+n,this.opacity=+r}function Al(t){if(isNaN(t.h))return new Cl(t.l,0,0,t.opacity);var e=t.h*gl;return new Cl(t.l,Math.cos(e)*t.c,Math.sin(e)*t.c,t.opacity)}function Dl(t,e){var n,r=e-t;return r?function(t,e){return function(n){return t+n*e}}(t,r):(n=isNaN(t)?e:t,function(){return n})}Fu(Cl,Il,ju(zu,{brighter:function(t){return new Cl(this.l+18*(null==t?1:t),this.a,this.b,this.opacity)},darker:function(t){return new Cl(this.l-18*(null==t?1:t),this.a,this.b,this.opacity)},rgb:function(){var t=(this.l+16)/116,e=isNaN(this.a)?t:t+this.a/500,n=isNaN(this.b)?t:t-this.b/200;return new al(Ml(3.1338561*(e=ml*Ll(e))-1.6168667*(t=_l*Ll(t))-.4906146*(n=vl*Ll(n))),Ml(-.9787684*e+1.9161415*t+.033454*n),Ml(.0719453*e-.2289914*t+1.4052427*n),this.opacity)}})),Fu(Tl,(function(t,e,n,r){return 1===arguments.length?Pl(t):new Tl(t,e,n,null==r?1:r)}),ju(zu,{brighter:function(t){return new Tl(this.h,this.c,this.l+18*(null==t?1:t),this.opacity)},darker:function(t){return new Tl(this.h,this.c,this.l-18*(null==t?1:t),this.opacity)},rgb:function(){return Al(this).rgb()}}));var kl=$r,Fl=Is,jl=ti,zl=Dt,Gl=Ss;var Bl=function(t,e,n,r){if(!zl(t))return t;for(var i=-1,o=(e=Fl(e,t)).length,a=o-1,s=t;null!=s&&++i<o;){var u=Gl(e[i]),l=n;if("__proto__"===u||"constructor"===u||"prototype"===u)return t;if(i!=a){var c=s[u];void 0===(l=r?r(c,u,s):void 0)&&(l=zl(c)?c:jl(e[i+1])?[]:{})}kl(s,u,l),s=s[u]}return t},ql=Bl;var Ul=function(t,e,n,r){return r="function"==typeof r?r:void 0,null==t?t:ql(t,e,n,r)},Vl=ft(Ul);const Yl=t=>Array.isArray(t);function Xl(t,e,n){if(!(Yl(e)?[...e]:e.split(".")).length)throw new Error("Key should not be empty");Vl(t,e,n,(t=>kt(t)?t:{}))}function Hl(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return[{label:"Light",id:"dw-light",font:"Roboto Regular",colors:t?{water:"#314246",land:"#1f201e",roads:"#141513",ice:"#303030","roads-casing":"#1f201e",green:"#353834","green-dark":"#333633","green-light":"#353834",boundary:"#4c4d4b",text:"#8e8d8d","text-halo":"#212121","text-water":"#212121","text-water-halo":"#314246",housing:"#373734",highlight:"#212121","mountains-dark":"#7a7b7a","mountains-light":"#212121","boundary-light":"#484946","housing-light":"#1f1f1f","housing-dark":"#343531","housing-3d":"#21211d","roads-light":"#212121","roads-dark":"#565656",tunnels:"#333333",markerPresets:{water:{halo:"#314246",color:"#212121"},location:{halo:"#1f201e",color:"#8e8d8d"}},miniMap:{region:{land:"#40433e"}}}:{water:"#c4d8dd",land:"#f2f3f0",roads:"#ffffff",ice:"#FDFCFD","roads-casing":"#e5e8e5",green:"#e6e9e5","green-dark":"#dee2de","green-light":"#e6e9e5",boundary:"#b6b7b5",text:"#9aa3ae","text-halo":"#ffffff","text-water":"#ffffff","text-water-halo":"#c4d8dd",housing:"#eaeae5",highlight:"#ffffff","mountains-dark":"#838483","mountains-light":"#ffffff",markerPresets:{water:{halo:"#c4d8dd",color:"#ffffff"},location:{halo:"#f2f3f0",color:"#adaaa8"}}}},{label:"Earth",id:"dw-earth",font:"Roboto Regular",colors:t?{water:"#20536f",land:"#2a2a24",roads:"#212121",green:"#233925",ice:"#363636",boundary:"#666666",text:"#989387","text-halo":"#212121","text-water":"#212121","text-water-halo":"#21536f",housing:"#494441","housing-3d":"#383630",highlight:"#212121","mountains-dark":"#ddb399","mountains-light":"#212121","boundary-light":"#575652","housing-light":"#343434","housing-dark":"#3d3b3b","green-light":"#2a3a11","green-dark":"#3e4e22","roads-light":"#212121","roads-dark":"#565656",tunnels:"#333333",markerPresets:{water:{halo:"#21536f",color:"#212121"},location:{halo:"#38362c",color:"#989387"}},miniMap:{region:{land:"#47473c"}}}:{water:"#94c1e1",land:"#e8e5d8",roads:"#ffffff",green:"#cbdca9",ice:"#ffffff",boundary:"#999999",text:"#908b78","text-halo":"#ffffff","text-water":"#ffffff","text-water-halo":"#94c1e1",housing:"#ded3be","housing-3d":"#dddad4",highlight:"#ffffff","mountains-dark":"#684731","mountains-light":"#ffffff",markerPresets:{water:{halo:"#94c1e1",color:"#ffffff"},location:{halo:"#e8e5d8",color:"#9d9d9d"}}}},{label:"Gray",id:"dw-white",font:"Roboto Regular",colors:t?{water:"#252525","water-outline":"#363636",land:"#393939",roads:"#4d4d4d",green:"#363836",ice:"#474747",boundary:"#636363",text:"#acacac","text-halo":"#212121","text-water":"#606060","text-water-halo":"#212121",housing:"#444444","housing-3d":"#343434",highlight:"#353535","mountains-dark":"#6c6c6c","mountains-light":"#212121","boundary-light":"#444444","housing-light":"#444343","housing-dark":"#353535","green-dark":"#343634","roads-light":"#343434","roads-dark":"#312f2f",tunnels:"#545454",markerPresets:{water:{halo:"#252525",color:"#606060"},location:{halo:"#393939",color:"#858585"}},miniMap:{globe:{water:"#2f2f2f"},region:{land:"#4c4c4c"}}}:{water:"#ffffff","water-outline":"#e2e2e2",land:"#f4f4f4",roads:"#d6d6d6",green:"#E8EAE8",ice:"#FDFDFD",boundary:"#a3a3a3",text:"#888888","text-halo":"#ffffff","text-water":"rgb(159, 159, 159)","text-water-halo":"#ffffff",housing:"#e7e7e7","housing-3d":"#d7d7d7",highlight:"#dddddd","mountains-dark":"#939393","mountains-light":"#ffffff",markerPresets:{water:{halo:"#ffffff",color:"rgb(159, 159, 159)"},location:{halo:"#f4f4f4",color:"#adaaa8"}},miniMap:{globe:{water:"#d8d8d8"}}}},{label:"Maritime",id:"dw-white-invert",font:"Roboto Regular",colors:t?{water:"#184e5c","water-outline":"#003441",land:"#000000",roads:"#373737",ice:"#1f1f1f","roads-casing":"#2a2a2a",green:"#11160b","green-light":"#12160f",boundary:"#636363",text:"#979797","text-halo":"#000000","text-water":"#000000","text-water-halo":"#184e5c",housing:"#373737","housing-3d":"#373737",highlight:"#212121","boundary-light":"#454545","housing-light":"#383838","housing-dark":"#343434","green-dark":"#272c24","roads-light":"#383838","roads-dark":"#696969",tunnels:"#444444",markerPresets:{water:{halo:"#184e5c",color:"#000000"},location:{halo:"#000000",color:"#979797"}},miniMap:{globe:{globeOutline:"#565656"},region:{land:"#393939"}}}:{water:"#9fd1e1",land:"#ffffff",roads:"#e7e7e7",green:"#ebf1e5",ice:"#f5f8fA","green-light":"#f3f8ef",boundary:"#a3a3a3",text:"#888888","text-halo":"#ffffff","text-water":"#ffffff","text-water-halo":"#9fd1e1",housing:"#e9e9e9","housing-3d":"#e9e9e9",highlight:"#ffffff","mountains-dark":"#676867","mountains-light":"#ffffff",markerPresets:{water:{halo:"#9fd1e1",color:"#ffffff"},location:{halo:"#ffffff",color:"#939d92"}}}}]}var Wl={version:8,name:"Positron",metadata:{copyright:"Copyright (c) 2016, KlokanTech.com & OpenMapTiles contributors. Copyright (c) 2015, CartoDB Inc. All rights reserved. Derived from 'CartoDB Basemaps' (https://github.com/CartoDB/CartoDB-basemaps) designed by Stamen and Paul Norman for CartoDB Inc., licensed under CC-BY 3.0.","mapbox:autocomposite":!1,"mapbox:type":"template","mapbox:groups":{b6371a3f2f5a9932464fa3867530a2e5:{name:"Transportation",collapsed:!1},a14c9607bc7954ba1df7205bf660433f:{name:"Boundaries"},"101da9f13b64a08fa4b6ac1168e89e5f":{name:"Places",collapsed:!1}}},bearing:0,pitch:0,transition:{duration:0,delay:0},sources:{openmaptiles:{type:"vector",tiles:[],minzoom:0,maxzoom:14},terrain:{type:"vector",tiles:[],minzoom:3,maxzoom:10}},sprite:"https://tiles.dwcdn.net/sprites/dwsprites",glyphs:"https://tiles.dwcdn.net/glyphs/{fontstack}/{range}.pbf",layers:[{id:"background",type:"background",paint:{"background-color":"%colors.land%"}},{id:"landuse_residential",type:"fill",source:"openmaptiles","source-layer":"landuse",maxzoom:22,filter:["all",["==","$type","Polygon"],["==","class","residential"]],layout:{visibility:"visible"},paint:{"fill-color":"%colors.housing-light%","fill-opacity":{base:.6,stops:[[8,.8],[9,.6]]}}},{id:"landcover_ice",type:"fill",source:"openmaptiles","source-layer":"landcover",filter:["==","class","ice"],layout:{visibility:"none"},paint:{"fill-color":"%colors.ice%","fill-outline-color":"rgba(0,0,0,0)","fill-opacity":{base:1,stops:[[0,.9],[3.99,.75],[4,.65],[6.99,.4325],[7,.5625],[7.99,.5],[8,.375],[8.99,.375],[9,.5]]}}},{id:"landcover_grass",type:"fill",source:"openmaptiles","source-layer":"landcover",filter:["==","class","grass"],layout:{visibility:"visible"},paint:{"fill-color":"%colors.green-light%","fill-opacity":{base:1,stops:[[4,.3],[6,1]]}}},{id:"park",type:"fill",source:"openmaptiles","source-layer":"park",filter:!1,layout:{visibility:"visible"},paint:{"fill-color":"%colors.green%","fill-opacity":{base:1,stops:[[4,.3],[6,1]]}}},{id:"landcover_wood",type:"fill",source:"openmaptiles","source-layer":"landcover",filter:["==","class","wood"],layout:{visibility:"visible"},paint:{"fill-color":"%colors.green-dark%","fill-opacity":{base:1,stops:[[4,.2],[6,1]]}}},{id:"mountains_1",type:"fill",source:"terrain","source-layer":"relief",filter:["==","shadow",1],maxzoom:12,paint:{"fill-color":"%colors.mountains-light%","fill-opacity":{base:0,stops:[[3,.0041],[3.1,.083],[3.2,.125],[3.3,.16],[3.4,.21],[3.5,.25],[6,.25],[11.5,.21],[11.6,.16],[11.7,.125],[11.8,.083],[11.9,.0041]]},"fill-outline-color":"rgba(0,0,0,0)"},layout:{visibility:"none"}},{id:"mountains_2",type:"fill",source:"terrain","source-layer":"relief",filter:["==","shadow",2],maxzoom:12,paint:{"fill-color":"%colors.mountains-light%","fill-opacity":{base:0,stops:[[3,.0041],[3.1,.083],[3.2,.125],[3.3,.16],[3.4,.21],[3.5,.25],[6,.25],[11.5,.21],[11.6,.16],[11.7,.125],[11.8,.083],[11.9,.0041]]},"fill-outline-color":"rgba(0,0,0,0)"},layout:{visibility:"none"}},{id:"mountains_3",type:"fill",source:"terrain","source-layer":"relief",filter:["all",["==","shadow",3],["!=","source_id",2598],["!=","source_id",4847],["!=","source_id",4851]],maxzoom:12,paint:{"fill-color":"%colors.mountains-dark%","fill-opacity":{base:0,stops:[[3,.0041],[3.1,.083],[3.2,.125],[3.3,.16],[3.4,.21],[3.5,.25],[6,.18],[11.5,.15],[11.6,.12],[11.7,.09],[11.8,.06],[11.9,.03]]},"fill-outline-color":"rgba(0,0,0,0)"},layout:{visibility:"none"}},{id:"mountains_4",type:"fill",source:"terrain","source-layer":"relief",filter:["all",["==","shadow",4],["!=","source_id",4848],["!=","source_id",4852]],maxzoom:12,paint:{"fill-color":"%colors.mountains-dark%","fill-opacity":{base:.25,stops:[[3,.0041],[3.1,.083],[3.2,.125],[3.3,.16],[3.4,.21],[3.5,.25],[6,.18],[11.5,.15],[11.6,.12],[11.7,.09],[11.8,.06],[11.9,.03]]},"fill-outline-color":"rgba(0,0,0,0)"},layout:{visibility:"none"}},{id:"mountains_5",type:"fill",source:"terrain","source-layer":"relief",filter:["all",["==","shadow",5],["!=","source_id",4849]],maxzoom:12,paint:{"fill-color":"%colors.mountains-dark%","fill-opacity":{base:.25,stops:[[3,.0041],[3.1,.083],[3.2,.125],[3.3,.16],[3.4,.21],[3.5,.25],[6,.18],[11.5,.15],[11.6,.12],[11.7,.09],[11.8,.06],[11.9,.03]]},"fill-outline-color":"rgba(0,0,0,0)"},layout:{visibility:"none"}},{id:"mountains_6",type:"fill",source:"terrain","source-layer":"relief",filter:["==","shadow",6],maxzoom:12,paint:{"fill-color":"%colors.mountains-dark%","fill-opacity":{base:.25,stops:[[3,.0041],[3.1,.083],[3.2,.125],[3.3,.16],[3.4,.21],[3.5,.25],[6,.18],[11.5,.15],[11.6,.12],[11.7,.09],[11.8,.06],[11.9,.03]]},"fill-outline-color":"rgba(0,0,0,0)"},layout:{visibility:"none"}},{id:"waterway",type:"line",source:"openmaptiles","source-layer":"waterway",filter:["==","$type","LineString"],layout:{visibility:"visible"},paint:{"line-color":"%colors.water%"}},{id:"water-outline",type:"line",source:"openmaptiles","source-layer":"water",filter:["==","$type","Polygon"],layout:{visibility:"visible"},paint:{"line-color":"%colors.water-outline%","line-width":2}},{id:"water",type:"fill",source:"openmaptiles","source-layer":"water",filter:["==","$type","Polygon"],layout:{visibility:"visible"},paint:{"fill-color":"%colors.water%","fill-antialias":!0}},{id:"ocean-outline",type:"line",source:"openmaptiles","source-layer":"water",filter:["==","class","ocean"],layout:{visibility:"visible"},paint:{"line-color":"%colors.water-outline%","line-width":2}},{id:"ocean",type:"fill",source:"openmaptiles","source-layer":"water",filter:["==","class","ocean"],layout:{visibility:"visible"},paint:{"fill-color":"%colors.water%","fill-antialias":!0}},{id:"road_path-casing",type:"line",source:"openmaptiles","source-layer":"transportation",filter:["all",["==","$type","LineString"],["in","class","path","path_construction","track","track_construction"]],layout:{"line-cap":"square","line-join":"bevel",visibility:"visible"},paint:{"line-color":"%colors.roads-casing%","line-dasharray":[1,1],"line-width":{base:1.55,stops:[[4,.25],[20,10]]}}},{id:"road_path",type:"line",source:"openmaptiles","source-layer":"transportation",filter:["all",["==","$type","LineString"],["in","class","path","path_construction","track","track_construction"]],layout:{"line-cap":"square","line-join":"bevel",visibility:"visible"},paint:{"line-color":"%colors.roads%","line-dasharray":[1,1],"line-width":{base:1.55,stops:[[4,.25],[20,10]]}}},{id:"tunnel_minor",type:"line",source:"openmaptiles","source-layer":"transportation",filter:["all",["==","$type","LineString"],["==","brunnel","tunnel"],["in","class","minor_road","minor","minor_construction"]],layout:{"line-cap":"butt","line-join":"miter",visibility:"visible"},paint:{"line-color":"%colors.roads-light%","line-width":{base:1.55,stops:[[4,.25],[20,30]]},"line-dasharray":[.36,.18]}},{id:"aeroway-area",type:"fill",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"aeroway",minzoom:4,filter:["all",["==","$type","Polygon"],["in","class","runway","taxiway"]],layout:{visibility:"visible"},paint:{"fill-opacity":{base:1,stops:[[13,0],[14,1]]},"fill-color":"%colors.roads%"}},{id:"aeroway-taxiway",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"aeroway",minzoom:12,filter:["all",["in","class","taxiway"],["==","$type","LineString"]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"%colors.roads%","line-width":{base:1.5,stops:[[12,1],[17,10]]},"line-opacity":1}},{id:"aeroway-runway",type:"line",metadata:{"mapbox:group":"1444849345966.4436"},source:"openmaptiles","source-layer":"aeroway",minzoom:4,filter:["all",["in","class","runway"],["==","$type","LineString"]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"%colors.roads%","line-width":{base:1.5,stops:[[11,4],[17,50]]},"line-opacity":1}},{id:"road_minor-casing",type:"line",source:"openmaptiles","source-layer":"transportation",minzoom:5,filter:["all",["==","$type","LineString"],["in","class","minor","minor_construction","service","service_construction"]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"%colors.roads-casing%","line-width":{base:1.55,stops:[[4,.55],[20,35]]}}},{id:"road_secondary_tertiary-casing",type:"line",source:"openmaptiles","source-layer":"transportation",minzoom:5,filter:["all",["==","$type","LineString"],["in","class","secondary","secondary_construction","tertiary","tertiary_construction"]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"%colors.roads-casing%","line-width":{base:1.4,stops:[[6,1.5],[20,25]]}}},{id:"road_primary-casing",type:"line",source:"openmaptiles","source-layer":"transportation",minzoom:7,filter:["all",["==","$type","LineString"],["in","class","primary","primary_construction"]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"%colors.roads-casing%","line-width":{base:1.4,stops:[[6,1.5],[20,33]]}}},{id:"road_trunk-casing",type:"line",source:"openmaptiles","source-layer":"transportation",minzoom:5,filter:["all",["==","$type","LineString"],["any",["in","class","trunk","trunk_construction"],["==","network","us-state"]]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"%colors.roads-casing%","line-width":{base:1.4,stops:[[6,1.5],[20,33]]}}},{id:"road_major_motorway_ramp-casing",type:"line",source:"openmaptiles","source-layer":"transportation",minzoom:4,filter:["all",["==","$type","LineString"],["in","class","motorway","motorway_construction"],["==","ramp",1]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"%colors.roads-casing%","line-width":{base:1.4,stops:[[8,1.5],[16,12]]},"line-offset":0}},{id:"road_major_motorway-casing",type:"line",source:"openmaptiles","source-layer":"transportation",minzoom:4,filter:["all",["==","$type","LineString"],["in","class","motorway","motorway_construction"],["!=","ramp",1]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"%colors.roads-casing%","line-width":{base:1.4,stops:[[8,1.5],[16,12]]},"line-offset":0}},{id:"road_minor",type:"line",source:"openmaptiles","source-layer":"transportation",minzoom:5,filter:["all",["==","$type","LineString"],["in","class","minor","minor_construction","service","service_construction"]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"%colors.roads%","line-width":{base:1.55,stops:[[4,.25],[20,30]]}}},{id:"road_secondary_tertiary",type:"line",source:"openmaptiles","source-layer":"transportation",minzoom:5,filter:["all",["==","$type","LineString"],["in","class","secondary","secondary_construction","tertiary","tertiary_construction"]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"%colors.roads%","line-width":{base:1.4,stops:[[6,.5],[20,20]]}}},{id:"road_primary",type:"line",source:"openmaptiles","source-layer":"transportation",minzoom:7,filter:["all",["==","$type","LineString"],["in","class","primary","primary_construction"]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"%colors.roads%","line-width":{base:1.4,stops:[[6,.5],[20,30]]}}},{id:"road_trunk",type:"line",source:"openmaptiles","source-layer":"transportation",minzoom:5,filter:["all",["==","$type","LineString"],["any",["in","class","trunk","trunk_construction"],["==","network","us-state"]]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"%colors.roads%","line-width":{base:1.4,stops:[[6,.5],[20,30]]}}},{id:"road_major_motorway_ramp",type:"line",source:"openmaptiles","source-layer":"transportation",minzoom:4,filter:["all",["==","$type","LineString"],["in","class","motorway","motorway_construction"],["==","ramp",1]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"%colors.roads%","line-width":{base:1.4,stops:[[8,1],[16,10]]},"line-offset":0}},{id:"road_major_motorway",type:"line",source:"openmaptiles","source-layer":"transportation",minzoom:4,filter:["all",["==","$type","LineString"],["in","class","motorway","motorway_construction"],["!=","ramp",1]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"%colors.roads%","line-width":{base:1.4,stops:[[8,1],[16,10]]},"line-offset":0}},{id:"tunnel_major",type:"line",source:"openmaptiles","source-layer":"transportation",minzoom:5,filter:["all",["==","$type","LineString"],["==","brunnel","tunnel"],["in","class","primary","primary_construction","secondary","secondary_construction","tertiary","tertiary_construction","trunk","trunk_construction"]],layout:{"line-cap":"butt","line-join":"miter",visibility:"visible"},paint:{"line-color":"%colors.tunnels%","line-width":{base:1.4,stops:[[6,.5],[20,20]]},"line-dasharray":[.28,.14]}},{id:"tunnel_motorway",type:"line",source:"openmaptiles","source-layer":"transportation",minzoom:4,filter:["all",["==","$type","LineString"],["==","brunnel","tunnel"],["in","class","motorway","motorway_construction"]],layout:{"line-cap":"butt","line-join":"miter",visibility:"visible"},paint:{"line-color":"%colors.tunnels%","line-width":{base:1.4,stops:[[8,1],[16,10]]},"line-dasharray":[.09,.3]}},{id:"railway-transit",type:"line",source:"openmaptiles","source-layer":"transportation",filter:["all",["==","class","transit"],["!=","brunnel","tunnel"]],layout:{visibility:"visible"},paint:{"line-color":"%colors.roads-dark%","line-opacity":{base:1,stops:[[11,0],[16,1]]}}},{id:"railway",type:"line",source:"openmaptiles","source-layer":"transportation",filter:["==","class","rail"],layout:{visibility:"visible"},paint:{"line-color":"%colors.roads-dark%","line-opacity":{base:1,stops:[[11,0],[16,1]]}}},{id:"building",type:"fill",source:"openmaptiles","source-layer":"building",minzoom:12,filter:["any",[">=","layer",0],["!has","layer"]],layout:{visibility:"visible"},paint:{"fill-color":"%colors.housing%","fill-outline-color":"%colors.housing-dark%","fill-antialias":!0}},{id:"waterway-bridge-case",type:"line",source:"openmaptiles","source-layer":"waterway",filter:["all",["==","$type","LineString"],["==","brunnel","bridge"]],layout:{"line-cap":"butt","line-join":"miter",visibility:"visible"},paint:{"line-color":"%colors.roads%","line-width":{base:1.6,stops:[[12,.5],[20,10]]},"line-gap-width":{base:1.55,stops:[[4,.25],[20,30]]}}},{id:"waterway-bridge",type:"line",source:"openmaptiles","source-layer":"waterway",filter:["all",["==","$type","LineString"],["==","brunnel","bridge"]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"%colors.roads%","line-width":{base:1.55,stops:[[4,.25],[20,30]]}}},{id:"bridge_minor case",type:"line",source:"openmaptiles","source-layer":"transportation",filter:["all",["==","$type","LineString"],["==","brunnel","bridge"],["in","class","minor_road","minor","minor_construction"]],layout:{"line-cap":"butt","line-join":"miter",visibility:"visible"},paint:{"line-color":"%colors.roads%","line-width":{base:1.6,stops:[[12,.5],[20,10]]},"line-gap-width":{base:1.55,stops:[[4,.25],[20,30]]}}},{id:"bridge_major_casing",type:"line",source:"openmaptiles","source-layer":"transportation",filter:["all",["==","$type","LineString"],["==","brunnel","bridge"],["in","class","primary","primary_construction","secondary","secondary_construction","tertiary","tertiary_construction","trunk"]],layout:{"line-cap":"butt","line-join":"miter",visibility:"visible"},paint:{"line-color":"%colors.roads-casing%","line-width":{base:1.6,stops:[[12,.5],[20,10]]},"line-gap-width":{base:1.55,stops:[[4,.25],[20,30]]}}},{id:"bridge_minor",type:"line",source:"openmaptiles","source-layer":"transportation",filter:["all",["==","$type","LineString"],["==","brunnel","bridge"],["in","class","minor_road","minor","minor_construction"]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"%colors.roads%","line-width":{base:1.55,stops:[[4,.25],[20,30]]}}},{id:"bridge_major",type:"line",source:"openmaptiles","source-layer":"transportation",filter:["all",["==","$type","LineString"],["==","brunnel","bridge"],["in","class","primary","primary_construction","secondary","secondary_construction","tertiary","tertiary_construction","trunk"]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"%colors.roads%","line-width":{base:1.4,stops:[[6,.5],[20,30]]}}},{id:"boundary_state",type:"line",metadata:{"mapbox:group":"a14c9607bc7954ba1df7205bf660433f"},source:"openmaptiles","source-layer":"boundary",filter:["all",["==","admin_level",4],["==","maritime",0]],layout:{"line-cap":"round","line-join":"round",visibility:"none"},paint:{"line-color":"%colors.boundary-light%","line-width":{base:1.3,stops:[[3,.5],[22,7.5]]},"line-blur":0,"line-dasharray":{base:4,stops:[[0,[1,0]],[10,[3,3]],[11,[4,4]],[12,[6,6]]]},"line-opacity":1}},{id:"boundary_country",type:"line",metadata:{"mapbox:group":"a14c9607bc7954ba1df7205bf660433f"},source:"openmaptiles","source-layer":"boundary",filter:["all",["==","admin_level",2],["==","maritime",0]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"%colors.boundary%","line-width":{base:1.1,stops:[[0,.5],[3,.5],[22,10]]},"line-blur":{base:1,stops:[[0,.2],[22,2]]},"line-opacity":1}},{id:"boundary_extras",type:"line",metadata:{"mapbox:group":"a14c9607bc7954ba1df7205bf660433f"},source:"boundary-extras",layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"%colors.boundary%","line-width":{base:1.1,stops:[[0,.5],[3,.5],[22,10]]},"line-blur":{base:1,stops:[[0,.2],[22,2]]},"line-opacity":1}},{id:"water_name",type:"symbol",source:"openmaptiles","source-layer":"water_name",filter:["==","$type","LineString"],layout:{"text-field":"{name}","symbol-placement":"line-center","text-rotation-alignment":"map","text-font":["Roboto Regular"],"text-size":12,visibility:"visible"},paint:{"text-color":"%colors.text-water%","text-halo-color":"%colors.text-water-halo%","text-halo-width":1,"text-halo-blur":1}},{id:"highway_name_other",type:"symbol",metadata:{"mapbox:group":"b6371a3f2f5a9932464fa3867530a2e5"},source:"openmaptiles","source-layer":"transportation_name",minzoom:13,filter:["all",["!in","class","motorway","motorway_construction"],["==","$type","LineString"]],layout:{"text-size":10,"text-max-angle":30,"text-transform":"%text-layout.text-transform%","text-font":["Roboto Regular"],"symbol-placement":"line-center",visibility:"visible","text-rotation-alignment":"map","text-pitch-alignment":"viewport","text-field":"{name}"},paint:{"text-color":"%colors.text%","text-halo-color":"%colors.text-halo%","text-halo-width":2,"text-halo-blur":1}},{id:"highway_name_motorway",type:"symbol",metadata:{"mapbox:group":"b6371a3f2f5a9932464fa3867530a2e5"},source:"openmaptiles","source-layer":"transportation_name",minzoom:13,filter:["all",["==","$type","LineString"],["in","class","motorway","motorway_construction"]],layout:{"text-size":10,"text-font":["Roboto Light"],"symbol-placement":"line-center",visibility:"visible","text-rotation-alignment":"viewport","text-pitch-alignment":"viewport","text-field":"{ref}"},paint:{"text-color":"%colors.text%","text-halo-color":"%colors.text-halo%","text-halo-width":1,"text-halo-blur":1}},{id:"place_other",type:"symbol",metadata:{"mapbox:group":"101da9f13b64a08fa4b6ac1168e89e5f"},source:"openmaptiles","source-layer":"place",maxzoom:14,filter:["all",["!in","class","city","suburb","town","village","province","country","state","continent"],["==","$type","Point"]],layout:{"text-size":10,"text-transform":"%text-layout.text-transform%","text-font":["Roboto Regular"],visibility:"visible","text-offset":[.5,0],"text-anchor":"center","text-field":"{name_en}"},paint:{"text-color":"%colors.text%","text-halo-color":"%colors.text-halo%","text-halo-width":1,"text-halo-blur":1}},{id:"place_suburb",type:"symbol",metadata:{"mapbox:group":"101da9f13b64a08fa4b6ac1168e89e5f"},source:"openmaptiles","source-layer":"place",maxzoom:15,filter:["all",["==","$type","Point"],["==","class","suburb"]],layout:{"text-size":10,"text-transform":"%text-layout.text-transform%","text-font":["Roboto Regular"],visibility:"visible","text-offset":[.5,0],"text-anchor":"center","text-field":"{name_en}"},paint:{"text-color":"%colors.text%","text-halo-color":"%colors.text-halo%","text-halo-width":1,"text-halo-blur":1}},{id:"place_village",type:"symbol",metadata:{"mapbox:group":"101da9f13b64a08fa4b6ac1168e89e5f"},source:"openmaptiles","source-layer":"place",maxzoom:14,filter:["all",["==","$type","Point"],["==","class","village"]],layout:{"text-size":10,"text-transform":"%text-layout.text-transform%","text-font":["Roboto Regular"],visibility:"visible","text-offset":[.5,.2],"icon-size":.4,"text-anchor":"left","text-field":"{name_en}"},paint:{"text-color":"%colors.text%","text-halo-color":"%colors.text-halo%","text-halo-width":1,"text-halo-blur":1,"icon-opacity":.7}},{id:"place_town",type:"symbol",metadata:{"mapbox:group":"101da9f13b64a08fa4b6ac1168e89e5f"},source:"openmaptiles","source-layer":"place",maxzoom:15,filter:["all",["==","$type","Point"],["==","class","town"]],layout:{"text-size":12,"icon-image":{base:1,stops:[[0,"circle-12"],[8,""]]},"text-transform":"%text-layout.text-transform%","text-font":["Roboto Regular"],visibility:"visible","text-offset":[.5,.2],"icon-size":.4,"text-anchor":{base:1,stops:[[0,"left"],[8,"center"]]},"text-justify":{base:1,stops:[[0,"left"],[8,"center"]]},"text-field":"{name_en}"},paint:{"text-color":"%colors.text%","text-halo-color":"%colors.text-halo%","text-halo-width":1,"text-halo-blur":1,"icon-opacity":.7}},{id:"place_label_city",type:"symbol",source:"openmaptiles","source-layer":"place",maxzoom:16,minzoom:5.5,filter:["all",["==","$type","Point"],["==","class","city"],["!=","capital",2],[">=","rank",4]],layout:{"text-size":10,"icon-image":{base:1,stops:[[0,"circle-12"],[8,""]]},"text-transform":"%text-layout.text-transform%","text-font":["Metropolis Regular"],visibility:"visible","text-offset":[.5,.2],"icon-size":.4,"text-anchor":{base:1,stops:[[0,"left"],[8,"center"]]},"text-field":"{name_en}"},paint:{"text-color":"%colors.text%","text-halo-color":"%colors.text-halo%","text-halo-width":1,"text-halo-blur":1,"icon-opacity":.7}},{id:"place_capital",type:"symbol",metadata:{"mapbox:group":"101da9f13b64a08fa4b6ac1168e89e5f"},source:"openmaptiles","source-layer":"place",maxzoom:12,minzoom:5,filter:["all",["==","$type","Point"],["all",["==","capital",2],["==","class","city"]]],layout:{"text-size":14,"icon-image":{base:1,stops:[[0,"square-12"],[8,""]]},"text-transform":"%text-layout.text-transform%","text-font":["Roboto Regular"],visibility:"visible","text-offset":[.5,.1],"icon-size":.8,"text-anchor":{base:1,stops:[[0,"left"],[8,"center"]]},"text-field":"{name}"},paint:{"text-color":"%colors.text%","text-halo-color":"%colors.text-halo%","text-halo-width":1,"text-halo-blur":1,"icon-opacity":.7}},{id:"place_city_large",type:"symbol",metadata:{"mapbox:group":"101da9f13b64a08fa4b6ac1168e89e5f"},source:"openmaptiles","source-layer":"place",minzoom:5,maxzoom:12,filter:["all",["==","$type","Point"],["all",["!=","capital",2],["<=","rank",4],["==","class","city"]]],layout:{"text-size":14,"icon-image":{base:1,stops:[[0,"circle-12"],[8,""]]},"text-transform":"%text-layout.text-transform%","text-font":["Roboto Regular"],visibility:"visible","text-offset":[.5,.2],"icon-size":.4,"text-anchor":{base:1,stops:[[0,"left"],[8,"center"]]},"text-field":"{name}"},paint:{"text-color":"%colors.text%","text-halo-color":"%colors.text-halo%","text-halo-width":1,"text-halo-blur":1,"icon-opacity":.7}},{id:"place_state",type:"symbol",metadata:{"mapbox:group":"101da9f13b64a08fa4b6ac1168e89e5f"},source:"openmaptiles","source-layer":"place",maxzoom:12,filter:["all",["==","$type","Point"],["==","class","state"],["<=","rank",2]],layout:{visibility:"visible","text-field":"{name_en}","text-font":["Roboto Regular"],"text-transform":"%text-layout.text-transform%","text-size":10},paint:{"text-color":"%colors.text%","text-halo-color":"%colors.text-halo%","text-halo-width":1,"text-halo-blur":1}},{id:"place_country_other",type:"symbol",metadata:{"mapbox:group":"101da9f13b64a08fa4b6ac1168e89e5f"},source:"openmaptiles","source-layer":"place",maxzoom:8,filter:["all",["==","$type","Point"],["all",["==","class","country"],[">=","rank",2]]],layout:{visibility:"visible","text-field":"{name_en}","text-font":["Roboto Regular"],"text-transform":"%text-layout.text-transform%","text-size":{base:1,stops:[[0,10],[6,12]]}},paint:{"text-halo-width":1.4,"text-halo-color":"%colors.text-halo%","text-color":"%colors.text%"}},{id:"place_country_major",type:"symbol",metadata:{"mapbox:group":"101da9f13b64a08fa4b6ac1168e89e5f"},source:"openmaptiles","source-layer":"place",maxzoom:6,filter:["all",["==","$type","Point"],["all",["<=","rank",1],["==","class","country"]]],layout:{visibility:"visible","text-field":"{name_en}","text-font":["Roboto Regular"],"text-transform":"%text-layout.text-transform%","text-size":{base:1.4,stops:[[0,10],[3,12],[4,14]]},"text-anchor":"center"},paint:{"text-halo-width":1.4,"text-halo-color":"%colors.text-halo%","text-color":"%colors.text%"}},{id:"building3d",type:"fill-extrusion",source:"openmaptiles","source-layer":"building",minzoom:14,filter:["any",[">=","layer",0],["!has","layer"]],paint:{"fill-extrusion-color":"%colors.housing-3d%","fill-extrusion-height":{property:"render_height",type:"identity"},"fill-extrusion-base":{property:"render_min_height",type:"identity"},"fill-extrusion-opacity":.7},layout:{visibility:"none"}}],id:"ciwf3o3u2008z2pmq7pmvm6xq"},$l={nb:"no",ky:"ru"},Zl={default:"Roboto Regular",ar:"Cairo Regular",zh:"Noto Sans Regular",ja:"Noto Sans Regular",bg:"Roboto Regular",ru:"Roboto Regular",el:"Roboto Regular",he:"Noto Sans Regular"};const Jl={ar:!0,hy:!0,be:!0,bg:!0,zh:!0,ka:!0,el:!0,he:!0,ja:!0,ja_kana:!0,kn:!0,kk:!0,ko:!0,mk:!0,ru:!0,sr:!0,th:!0,uk:!0};var Kl=function(t){return function(t){return!!t&&"object"==typeof t}(t)&&!function(t){var e=Object.prototype.toString.call(t);return"[object RegExp]"===e||"[object Date]"===e||function(t){return t.$$typeof===Ql}(t)}(t)};var Ql="function"==typeof Symbol&&Symbol.for?Symbol.for("react.element"):60103;function tc(t,e){return!1!==e.clone&&e.isMergeableObject(t)?oc((n=t,Array.isArray(n)?[]:{}),t,e):t;var n}function ec(t,e,n){return t.concat(e).map((function(t){return tc(t,n)}))}function nc(t){return Object.keys(t).concat(function(t){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(t).filter((function(e){return Object.propertyIsEnumerable.call(t,e)})):[]}(t))}function rc(t,e){try{return e in t}catch(t){return!1}}function ic(t,e,n){var r={};return n.isMergeableObject(t)&&nc(t).forEach((function(e){r[e]=tc(t[e],n)})),nc(e).forEach((function(i){(function(t,e){return rc(t,e)&&!(Object.hasOwnProperty.call(t,e)&&Object.propertyIsEnumerable.call(t,e))})(t,i)||(rc(t,i)&&n.isMergeableObject(e[i])?r[i]=function(t,e){if(!e.customMerge)return oc;var n=e.customMerge(t);return"function"==typeof n?n:oc}(i,n)(t[i],e[i],n):r[i]=tc(e[i],n))})),r}function oc(t,e,n){(n=n||{}).arrayMerge=n.arrayMerge||ec,n.isMergeableObject=n.isMergeableObject||Kl,n.cloneUnlessOtherwiseSpecified=tc;var r=Array.isArray(e);return r===Array.isArray(t)?r?n.arrayMerge(t,e,n):ic(t,e,n):tc(e,n)}oc.all=function(t,e){if(!Array.isArray(t))throw new Error("first argument should be an array");return t.reduce((function(t,n){return oc(t,n,e)}),{})};var ac=ft(oc);const sc=18;function uc(t,e){const n=Rl(t);return n.l+=sc*e,n+""}function lc(t,e){return uc(t,-e)}function cc(t,e){const n=Rl(t);return n.c-=sc*e,n.c<0&&(n.c=0),n+""}function pc(t,e,n){return(i=e,o=Dl((r=Il(r=t)).l,(i=Il(i)).l),a=Dl(r.a,i.a),s=Dl(r.b,i.b),u=Dl(r.opacity,i.opacity),function(t){return r.l=o(t),r.a=a(t),r.b=s(t),r.opacity=u(t),r+""})(n);var r,i,o,a,s,u}function fc(t){return Rl(t).l<30}function hc(t,e){return fc(uo(t,"colors.land",e))}function dc(t,e){for(const n of Object.values(t.sources))n.tiles&&(n.tiles=n.tiles.map((t=>t.replace("00000",e))))}function gc(t,e,n,r,i,o){const a=t.style,s=i||ct(Wl),u=uo(r,"colors.background","#ffffff"),l=fc(u);let c=l,p=Hl(l);const f=p.map((t=>t.id));if(i){const t=ct(Wl);for(const e in s.layers){const n=s.layers[e].id,r=ku(t.layers,{id:n});r&&(s.layers[e]=r)}s.layers=s.layers.filter((t=>!(t.id.indexOf(":fallback")>-1)))}so(s,n.meta.__config.defaultStyle),dc(s,n.chart().get("id")),s.sources.openmaptiles.minzoom=0,s.sources.openmaptiles.maxzoom=14;const h=(t,e)=>e,d=uo(r,"vis.locator-maps.mapStyles",[]),g=d.map((t=>{let{id:e}=t;return e})),y=g.includes(a),m=(y?g:f).find((t=>t===a))||f[0];let _=p.find((t=>t.id===m));if(y){_=d.find((t=>t.id===m));if(f.includes(_.id)){const t=hc(_,u);t!==c&&(c=t,p=Hl(t)),_=ac(p.find((t=>{let{id:e}=t;return e===m})),_)}else c=hc(_,u)}if(_.layers){const t={road_major_motorway_ramp:"road_major_motorway","road_major_motorway_ramp-casing":"road_major_motorway-casing",boundary_extras:"boundary_country"};for(const[e,n]of Object.entries(t))uo(_,["layers",n])&&!uo(_,["layers",e])&&(_.layers[e]=_.layers[n]);for(const t in _.layers){const e=ku(s.layers,{id:t});if(!e){console.error(t," layer can not be found in the dw map style");continue}const n=ac(e,_.layers[t],{arrayMerge:h});Object.assign(e,n)}}_.sprite&&(s.sprite=_.sprite);const v=c?-1:1,b={"boundary-light":()=>pc(_.colors.boundary,_.colors.land,.35),"housing-light":()=>uc(cc(_.colors.housing,2),.1*v),"housing-dark":()=>lc(_.colors.housing,.3*v),"housing-3d":()=>uc(_.colors.housing,.4*v),"green-light":()=>uc(_.colors.green,.2*v),"green-dark":()=>lc(_.colors.green,.2*v),"roads-light":()=>uc(_.colors.roads,.1*v),"roads-dark":()=>lc(_.colors.roads,1.5*v),"roads-casing":()=>"transparent","water-outline":()=>"transparent",ice:()=>function(t){const{r:e,g:n,b:r}=ol(t);return 255===e&&255===n&&255===r}(_.colors.land)?"#f5f8fa":cc(uc(_.colors.land,.15),1),tunnels:()=>lc(_.colors.roads,.8*v)};for(const[t,e]of Object.entries(b))_.colors[t]||(_.colors[t]=e());const x={"text-layout":{"text-transform":"uppercase"},colors:p[0].colors};let w=JSON.stringify(s);const E=w.match(/"%([^"%]+)%"/g);E&&E.forEach((t=>{const e=t.substring(2,t.length-2),n=uo(_,e,uo(x,e));w=w.replace(t,'"'.concat(n,'"'))}));const N=JSON.parse(w),I=[];let C=e?e.toLowerCase().split(/[-_]/)[0]:"en";C=$l[C]||C,Xl(_,"text-layout.font",[_.font||Zl.default]);const S={layout:["size","letter-spacing","font"],paint:["halo-blur","halo-width"]};N.layers.forEach((e=>{if(function(t,e){e.visibility&&("symbol"===t.type&&(t.layout.visibility=e.mapLabel?"visible":"none"),"transportation"===t["source-layer"]||"aeroway"===t["source-layer"]||t.id.indexOf("highway_name_motorway")>-1&&e.mapLabel||t.id.indexOf("highway_name_other")>-1&&e.mapLabel?t.layout.visibility=e.visibility.roads?"visible":"none":"water"===t.id||"waterway"===t.id||"water-outline"===t.id||t.id.indexOf("water_name")>-1&&e.mapLabel?t.layout.visibility=e.visibility.water?"visible":"none":"park"===t.id||"landcover_wood"===t.id||"park_outline"===t.id||"landcover_grass"===t.id?t.layout.visibility=e.visibility.green?"visible":"none":"landuse_residential"===t.id?t.layout.visibility=e.visibility.urban?"visible":"none":["boundary_country","boundary_extras"].includes(t.id)?t.layout.visibility=e.visibility.boundary_country?"visible":"none":"boundary_state"===t.id?t.layout.visibility=e.visibility.boundary_state?"visible":"none":"mountains_1"===t.id||"mountains_2"===t.id||"mountains_3"===t.id||"mountains_4"===t.id||"mountains_5"===t.id||"mountains_6"===t.id?t.layout.visibility=e.visibility.mountains?"visible":"none":"building"===t.id?t.layout.visibility=e.visibility.building?"visible":"none":"building3d"===t.id?t.layout.visibility=e.visibility.building3d?"visible":"none":"landcover_ice"===t.id&&(t.layout.visibility=e.visibility.glaciers?"visible":"none"))}(e,t),I.push(e),"symbol"===e.type&&Object.entries(S).forEach((t=>{let[n,r]=t;r.forEach((t=>{const r=uo(_,"text-layout.".concat(t),null),i=uo(_,"layers.".concat(e.id,".").concat(n,".text-").concat(t),null);null!==r&&null===i&&Xl(e,"".concat(n,".text-").concat(t),r)}))})),"symbol"===e.type&&e.layout&&e.layout["text-field"]){Zl[C]&&(e.layout["text-font"][0]=Zl[C]);const t=ct(e);t.id+=":fallback",e.layout["text-field"]="{name:".concat(C,"}"),t.layout["text-field"]="{name:".concat(function(t){return Jl[t]||!1}(C)?"nonlatin":"latin","}");const n=["has","name:"+C];e.filter?e.filter=["all",e.filter,["all",n]]:e.filter=[n];const r=["!has","name:"+C];t.filter?t.filter=["all",t.filter,["all",r]]:t.filter=[r],I.push(t)}})),N.layers=I,N.metadata.style=_,N.metadata.styleIsDark=c,N.metadata.defaultColors={...uo(r,"_computed.locator-maps",{}),mapStyle:uo(r,"_computed.locator-maps.mapStyles",[]).find((t=>{let{id:e}=t;return e===_.id})),darkMode:{...uo(r,"_computed.locator-maps.darkMode",{}),mapStyle:uo(r,"_computed.locator-maps.darkMode.mapStyles",[]).find((t=>{let{id:e}=t;return e===_.id}))}},o(N)}var yc=20;function mc(t){const e=t.getPitch(),n=yc;["mountains_1","mountains_2","mountains_3","mountains_4","mountains_5","mountains_6"].forEach((r=>{const i=ku(Wl.layers,{id:r}).paint["fill-opacity"];if(0===e)t.setPaintProperty(r,"fill-opacity",i);else if(e<=n){const a=ct(i),s={base:a.base,stops:a.stops};for(var o=0;o<s.stops.length;o++){const t=a.stops[o][1]/n*-1*e+a.stops[o][1];s.stops[o][1]=t}t.setPaintProperty(r,"fill-opacity",s)}else t.setPaintProperty(r,"fill-opacity",0)}))}function _c(t,e,r){if("number"==typeof(e=Object.assign({padding:{top:0,bottom:0,right:0,left:0},offset:[0,0],maxZoom:this.transform.maxZoom},e)).padding){const t=e.padding;e.padding={top:t,bottom:t,right:t,left:t}}t=n.default.LngLatBounds.convert(t);const i=[e.padding.left-e.padding.right,e.padding.top-e.padding.bottom],o=Math.min(e.padding.right,e.padding.left),a=Math.min(e.padding.top,e.padding.bottom);e.offset=[e.offset[0]+i[0],e.offset[1]+i[1]],e.bearing=e.bearing||this.getBearing();const s=n.default.Point.convert(e.offset),u=this.transform,l=u.project(t.getNorthWest()),c=u.project(t.getSouthEast()),p=c.sub(l),f=e.bearing*(Math.PI/180),h=p.x*Math.abs(Math.cos(f))+p.y*Math.abs(Math.sin(f)),d=p.x*Math.abs(Math.sin(f))+p.y*Math.abs(Math.cos(f)),g=(u.width-2*o-2*Math.abs(s.x))/h,y=(u.height-2*a-2*Math.abs(s.y))/d;return y<0||g<0?("undefined"!=typeof console&&console.warn("Map cannot fit within canvas with the given bounds, padding, and/or offset."),this):(e.center=u.unproject(l.add(c).div(2)),e.zoom=Math.min(u.scaleZoom(u.scale*Math.min(g,y)),e.maxZoom),e.linear?this.easeTo(e,r):this.flyTo(e,r))}function vc(t){if("string"==typeof t){var e,n={},r=t.split(/([\.#])/g);for(t=r.shift();e=r.shift();)"."==e?n.class=n.class?n.class+" "+r.shift():r.shift():"#"==e&&(n.id=r.shift());return{tag:t,attr:n}}return t}function bc(){return null}const xc=/^(allowReorder|attributeName|attributeType|autoReverse|baseFrequency|baseProfile|calcMode|clipPathUnits|contentScriptType|contentStyleType|diffuseConstant|edgeMode|externalResourcesRequired|filterRes|filterUnits|glyphRef|gradientTransform|gradientUnits|kernelMatrix|kernelUnitLength|keyPoints|keySplines|keyTimes|lengthAdjust|limitingConeAngle|markerHeight|markerUnits|markerWidth|maskContentUnits|maskUnits|numOctaves|pathLength|patternContentUnits|patternTransform|patternUnits|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|referrerPolicy|refX|refY|repeatCount|repeatDur|requiredExtensions|requiredFeatures|specularConstant|specularExponent|spreadMethod|startOffset|stdDeviation|stitchTiles|surfaceScale|systemLanguage|tableValues|targetX|targetY|textLength|viewBox|viewTarget|xChannelSelector|yChannelSelector|zoomAndPan)$/;ut.prototype.translate=function(t,e){var n=this.node();return n?n.getBBox?this.attr("transform",(function(n,r){var i="function"==typeof t?t.call(this,n,r):t;return 0===e?i=[i,0]:1===e&&(i=[0,i]),"translate("+i[0]+","+i[1]+")"})):this.style("transform",(function(n,r){var i="function"==typeof t?t.call(this,n,r):t;return 0===e?i=[i,0]:1===e&&(i=[0,i]),"translate("+i[0]+"px,"+i[1]+"px)"})):this},ut.prototype.append=function(t){var e,n;"function"==typeof t?e=t:(n=vc(t),e=u(n.tag));var r=this.select((function(){return this.appendChild(e.apply(this,arguments))}));if(n)for(var i in n.attr)r.attr(i,n.attr[i]);return r},ut.prototype.insert=function(t,e){var n=vc(t),r=u(n.tag),i=null==e?bc:"function"==typeof e?e:c(e),o=this.select((function(){return this.insertBefore(r.apply(this,arguments),i.apply(this,arguments)||null)}));for(var a in n.attr)o.attr(a,n.attr[a]);return o},ut.prototype.parent=function(){var t=[];return this.filter((function(){return!(t.indexOf(this.parentNode)>-1)&&(t.push(this.parentNode),!0)})).select((function(){return this.parentNode}))},ut.prototype.selectAppend=function(t){var e,n=c(t),r=vc(t);for(var i in t=u(r.tag),e=this.select((function(){return n.apply(this,arguments)||this.appendChild(t.apply(this,arguments))})),r.attr)e.attr(i,r.attr[i]);return e},ut.prototype.tspans=function(t,e){return this.selectAll("tspan").data((function(e,n){return("function"==typeof t?t.call(this,e,n):t).map((function(t){return{line:t,parent:e}}))})).enter().append("tspan").text((function(t){return t.line})).attr("x",0).attr("dy",(function(t,n){return n?("function"==typeof e?e.call(this,t.parent,t.line,n):e)||15:0}))},ut.prototype.appendMany=function(t,e){if("string"==typeof e){console.warn("DEPRECATED: jetpack's appendMany order of arguments has changed. It's appendMany('div', data) from now on");var n=e;e=t,t=n}return this.selectAll(null).data(e).enter().append(t)},ut.prototype.at=function(t,e){if("object"==typeof t){for(var n in t)this.attr(xc.test(n)?n:n.replace(/([a-z\d])([A-Z])/g,"$1-$2").toLowerCase(),t[n]);return this}return 1==arguments.length?this.attr(t):this.attr(t,e)},ut.prototype.st=function(t,e){if("object"==typeof t){for(var n in t)r(this,n,t[n]);return this}return 1==arguments.length?this.style(t):r(this,t,e);function r(t,e,n){e=e.replace(/([a-z\d])([A-Z])/g,"$1-$2").toLowerCase();var r;return~"top left bottom right padding-top padding-left padding-bottom padding-right border-top b-width border-left-width border-botto-width m border-right-width margin-top margin-left margin-bottom margin-right font-size width stroke-width line-height margin padding border border-radius max-width min-width max-height min-height".indexOf(e)?t.style(e,"function"==typeof n?(r=n,function(){return i(r.apply(this,arguments))}):i(n)):t.style(e,n),t}function i(t){return t.match?t:t+"px"}},ut.prototype.prop=ut.prototype.property;var wc={exports:{}};
/**
   * chroma.js - JavaScript library for color conversions
   *
   * Copyright (c) 2011-2019, Gregor Aisch
   * All rights reserved.
   *
   * Redistribution and use in source and binary forms, with or without
   * modification, are permitted provided that the following conditions are met:
   *
   * 1. Redistributions of source code must retain the above copyright notice, this
   * list of conditions and the following disclaimer.
   *
   * 2. Redistributions in binary form must reproduce the above copyright notice,
   * this list of conditions and the following disclaimer in the documentation
   * and/or other materials provided with the distribution.
   *
   * 3. The name Gregor Aisch may not be used to endorse or promote products
   * derived from this software without specific prior written permission.
   *
   * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
   * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
   * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
   * DISCLAIMED. IN NO EVENT SHALL GREGOR AISCH OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,
   * INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING,
   * BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
   * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY
   * OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
   * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE,
   * EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
   *
   * -------------------------------------------------------
   *
   * chroma.js includes colors from colorbrewer2.org, which are released under
   * the following license:
   *
   * Copyright (c) 2002 Cynthia Brewer, Mark Harrower,
   * and The Pennsylvania State University.
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   * http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing,
   * software distributed under the License is distributed on an
   * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND,
   * either express or implied. See the License for the specific
   * language governing permissions and limitations under the License.
   *
   * ------------------------------------------------------
   *
   * Named colors are taken from X11 Color Names.
   * http://www.w3.org/TR/css3-color/#svg-color
   *
   * @preserve
   */wc.exports=function(){for(var t=function(t,e,n){return void 0===e&&(e=0),void 0===n&&(n=1),t<e?e:t>n?n:t},e=t,n=function(t){t._clipped=!1,t._unclipped=t.slice(0);for(var n=0;n<=3;n++)n<3?((t[n]<0||t[n]>255)&&(t._clipped=!0),t[n]=e(t[n],0,255)):3===n&&(t[n]=e(t[n],0,1));return t},r={},i=0,o=["Boolean","Number","String","Function","Array","Date","RegExp","Undefined","Null"];i<o.length;i+=1){var a=o[i];r["[object "+a+"]"]=a.toLowerCase()}var s=function(t){return r[Object.prototype.toString.call(t)]||"object"},u=s,l=function(t,e){return void 0===e&&(e=null),t.length>=3?Array.prototype.slice.call(t):"object"==u(t[0])&&e?e.split("").filter((function(e){return void 0!==t[0][e]})).map((function(e){return t[0][e]})):t[0]},c=s,p=function(t){if(t.length<2)return null;var e=t.length-1;return"string"==c(t[e])?t[e].toLowerCase():null},f=Math.PI,h={clip_rgb:n,limit:t,type:s,unpack:l,last:p,PI:f,TWOPI:2*f,PITHIRD:f/3,DEG2RAD:f/180,RAD2DEG:180/f},d={format:{},autodetect:[]},g=h.last,y=h.clip_rgb,m=h.type,_=d,v=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var n=this;if("object"===m(t[0])&&t[0].constructor&&t[0].constructor===this.constructor)return t[0];var r=g(t),i=!1;if(!r){i=!0,_.sorted||(_.autodetect=_.autodetect.sort((function(t,e){return e.p-t.p})),_.sorted=!0);for(var o=0,a=_.autodetect;o<a.length;o+=1){var s=a[o];if(r=s.test.apply(s,t))break}}if(!_.format[r])throw new Error("unknown format: "+t);var u=_.format[r].apply(null,i?t:t.slice(0,-1));n._rgb=y(u),3===n._rgb.length&&n._rgb.push(1)};v.prototype.toString=function(){return"function"==m(this.hex)?this.hex():"["+this._rgb.join(",")+"]"};var b=v,x=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return new(Function.prototype.bind.apply(x.Color,[null].concat(t)))};x.Color=b,x.version="2.4.2";var w=x,E=h.unpack,N=Math.max,I=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var n=E(t,"rgb"),r=n[0],i=n[1],o=n[2],a=1-N(r/=255,N(i/=255,o/=255)),s=a<1?1/(1-a):0;return[(1-r-a)*s,(1-i-a)*s,(1-o-a)*s,a]},C=I,S=h.unpack,L=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var n=(t=S(t,"cmyk"))[0],r=t[1],i=t[2],o=t[3],a=t.length>4?t[4]:1;return 1===o?[0,0,0,a]:[n>=1?0:255*(1-n)*(1-o),r>=1?0:255*(1-r)*(1-o),i>=1?0:255*(1-i)*(1-o),a]},M=L,O=w,P=b,R=d,T=h.unpack,A=h.type,D=C;P.prototype.cmyk=function(){return D(this._rgb)},O.cmyk=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return new(Function.prototype.bind.apply(P,[null].concat(t,["cmyk"])))},R.format.cmyk=M,R.autodetect.push({p:2,test:function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];if(t=T(t,"cmyk"),"array"===A(t)&&4===t.length)return"cmyk"}});var k=h.unpack,F=h.last,j=function(t){return Math.round(100*t)/100},z=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var n=k(t,"hsla"),r=F(t)||"lsa";return n[0]=j(n[0]||0),n[1]=j(100*n[1])+"%",n[2]=j(100*n[2])+"%","hsla"===r||n.length>3&&n[3]<1?(n[3]=n.length>3?n[3]:1,r="hsla"):n.length=3,r+"("+n.join(",")+")"},G=z,B=h.unpack,q=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var n=(t=B(t,"rgba"))[0],r=t[1],i=t[2];n/=255,r/=255,i/=255;var o,a,s=Math.min(n,r,i),u=Math.max(n,r,i),l=(u+s)/2;return u===s?(o=0,a=Number.NaN):o=l<.5?(u-s)/(u+s):(u-s)/(2-u-s),n==u?a=(r-i)/(u-s):r==u?a=2+(i-n)/(u-s):i==u&&(a=4+(n-r)/(u-s)),(a*=60)<0&&(a+=360),t.length>3&&void 0!==t[3]?[a,o,l,t[3]]:[a,o,l]},U=q,V=h.unpack,Y=h.last,X=G,H=U,W=Math.round,$=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var n=V(t,"rgba"),r=Y(t)||"rgb";return"hsl"==r.substr(0,3)?X(H(n),r):(n[0]=W(n[0]),n[1]=W(n[1]),n[2]=W(n[2]),("rgba"===r||n.length>3&&n[3]<1)&&(n[3]=n.length>3?n[3]:1,r="rgba"),r+"("+n.slice(0,"rgb"===r?3:4).join(",")+")")},Z=$,J=h.unpack,K=Math.round,Q=function(){for(var t,e=[],n=arguments.length;n--;)e[n]=arguments[n];var r,i,o,a=(e=J(e,"hsl"))[0],s=e[1],u=e[2];if(0===s)r=i=o=255*u;else{var l=[0,0,0],c=[0,0,0],p=u<.5?u*(1+s):u+s-u*s,f=2*u-p,h=a/360;l[0]=h+1/3,l[1]=h,l[2]=h-1/3;for(var d=0;d<3;d++)l[d]<0&&(l[d]+=1),l[d]>1&&(l[d]-=1),6*l[d]<1?c[d]=f+6*(p-f)*l[d]:2*l[d]<1?c[d]=p:3*l[d]<2?c[d]=f+(p-f)*(2/3-l[d])*6:c[d]=f;r=(t=[K(255*c[0]),K(255*c[1]),K(255*c[2])])[0],i=t[1],o=t[2]}return e.length>3?[r,i,o,e[3]]:[r,i,o,1]},tt=Q,et=tt,nt=d,rt=/^rgb\(\s*(-?\d+),\s*(-?\d+)\s*,\s*(-?\d+)\s*\)$/,it=/^rgba\(\s*(-?\d+),\s*(-?\d+)\s*,\s*(-?\d+)\s*,\s*([01]|[01]?\.\d+)\)$/,ot=/^rgb\(\s*(-?\d+(?:\.\d+)?)%,\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*\)$/,at=/^rgba\(\s*(-?\d+(?:\.\d+)?)%,\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)$/,st=/^hsl\(\s*(-?\d+(?:\.\d+)?),\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*\)$/,ut=/^hsla\(\s*(-?\d+(?:\.\d+)?),\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)$/,lt=Math.round,ct=function(t){var e;if(t=t.toLowerCase().trim(),nt.format.named)try{return nt.format.named(t)}catch(t){}if(e=t.match(rt)){for(var n=e.slice(1,4),r=0;r<3;r++)n[r]=+n[r];return n[3]=1,n}if(e=t.match(it)){for(var i=e.slice(1,5),o=0;o<4;o++)i[o]=+i[o];return i}if(e=t.match(ot)){for(var a=e.slice(1,4),s=0;s<3;s++)a[s]=lt(2.55*a[s]);return a[3]=1,a}if(e=t.match(at)){for(var u=e.slice(1,5),l=0;l<3;l++)u[l]=lt(2.55*u[l]);return u[3]=+u[3],u}if(e=t.match(st)){var c=e.slice(1,4);c[1]*=.01,c[2]*=.01;var p=et(c);return p[3]=1,p}if(e=t.match(ut)){var f=e.slice(1,4);f[1]*=.01,f[2]*=.01;var h=et(f);return h[3]=+e[4],h}};ct.test=function(t){return rt.test(t)||it.test(t)||ot.test(t)||at.test(t)||st.test(t)||ut.test(t)};var pt=ct,ft=w,ht=b,dt=d,gt=h.type,yt=Z,mt=pt;ht.prototype.css=function(t){return yt(this._rgb,t)},ft.css=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return new(Function.prototype.bind.apply(ht,[null].concat(t,["css"])))},dt.format.css=mt,dt.autodetect.push({p:5,test:function(t){for(var e=[],n=arguments.length-1;n-- >0;)e[n]=arguments[n+1];if(!e.length&&"string"===gt(t)&&mt.test(t))return"css"}});var _t=b,vt=w,bt=d,xt=h.unpack;bt.format.gl=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var n=xt(t,"rgba");return n[0]*=255,n[1]*=255,n[2]*=255,n},vt.gl=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return new(Function.prototype.bind.apply(_t,[null].concat(t,["gl"])))},_t.prototype.gl=function(){var t=this._rgb;return[t[0]/255,t[1]/255,t[2]/255,t[3]]};var wt=h.unpack,Et=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var n,r=wt(t,"rgb"),i=r[0],o=r[1],a=r[2],s=Math.min(i,o,a),u=Math.max(i,o,a),l=u-s,c=100*l/255,p=s/(255-l)*100;return 0===l?n=Number.NaN:(i===u&&(n=(o-a)/l),o===u&&(n=2+(a-i)/l),a===u&&(n=4+(i-o)/l),(n*=60)<0&&(n+=360)),[n,c,p]},Nt=Et,It=h.unpack,Ct=Math.floor,St=function(){for(var t,e,n,r,i,o,a=[],s=arguments.length;s--;)a[s]=arguments[s];var u,l,c,p=(a=It(a,"hcg"))[0],f=a[1],h=a[2];h*=255;var d=255*f;if(0===f)u=l=c=h;else{360===p&&(p=0),p>360&&(p-=360),p<0&&(p+=360);var g=Ct(p/=60),y=p-g,m=h*(1-f),_=m+d*(1-y),v=m+d*y,b=m+d;switch(g){case 0:u=(t=[b,v,m])[0],l=t[1],c=t[2];break;case 1:u=(e=[_,b,m])[0],l=e[1],c=e[2];break;case 2:u=(n=[m,b,v])[0],l=n[1],c=n[2];break;case 3:u=(r=[m,_,b])[0],l=r[1],c=r[2];break;case 4:u=(i=[v,m,b])[0],l=i[1],c=i[2];break;case 5:u=(o=[b,m,_])[0],l=o[1],c=o[2]}}return[u,l,c,a.length>3?a[3]:1]},Lt=St,Mt=h.unpack,Ot=h.type,Pt=w,Rt=b,Tt=d,At=Nt;Rt.prototype.hcg=function(){return At(this._rgb)},Pt.hcg=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return new(Function.prototype.bind.apply(Rt,[null].concat(t,["hcg"])))},Tt.format.hcg=Lt,Tt.autodetect.push({p:1,test:function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];if(t=Mt(t,"hcg"),"array"===Ot(t)&&3===t.length)return"hcg"}});var Dt=h.unpack,kt=h.last,Ft=Math.round,jt=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var n=Dt(t,"rgba"),r=n[0],i=n[1],o=n[2],a=n[3],s=kt(t)||"auto";void 0===a&&(a=1),"auto"===s&&(s=a<1?"rgba":"rgb");var u="000000"+((r=Ft(r))<<16|(i=Ft(i))<<8|(o=Ft(o))).toString(16);u=u.substr(u.length-6);var l="0"+Ft(255*a).toString(16);switch(l=l.substr(l.length-2),s.toLowerCase()){case"rgba":return"#"+u+l;case"argb":return"#"+l+u;default:return"#"+u}},zt=jt,Gt=/^#?([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/,Bt=/^#?([A-Fa-f0-9]{8}|[A-Fa-f0-9]{4})$/,qt=function(t){if(t.match(Gt)){4!==t.length&&7!==t.length||(t=t.substr(1)),3===t.length&&(t=(t=t.split(""))[0]+t[0]+t[1]+t[1]+t[2]+t[2]);var e=parseInt(t,16);return[e>>16,e>>8&255,255&e,1]}if(t.match(Bt)){5!==t.length&&9!==t.length||(t=t.substr(1)),4===t.length&&(t=(t=t.split(""))[0]+t[0]+t[1]+t[1]+t[2]+t[2]+t[3]+t[3]);var n=parseInt(t,16);return[n>>24&255,n>>16&255,n>>8&255,Math.round((255&n)/255*100)/100]}throw new Error("unknown hex color: "+t)},Ut=qt,Vt=w,Yt=b,Xt=h.type,Ht=d,Wt=zt;Yt.prototype.hex=function(t){return Wt(this._rgb,t)},Vt.hex=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return new(Function.prototype.bind.apply(Yt,[null].concat(t,["hex"])))},Ht.format.hex=Ut,Ht.autodetect.push({p:4,test:function(t){for(var e=[],n=arguments.length-1;n-- >0;)e[n]=arguments[n+1];if(!e.length&&"string"===Xt(t)&&[3,4,5,6,7,8,9].indexOf(t.length)>=0)return"hex"}});var $t=h.unpack,Zt=h.TWOPI,Jt=Math.min,Kt=Math.sqrt,Qt=Math.acos,te=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var n,r=$t(t,"rgb"),i=r[0],o=r[1],a=r[2],s=Jt(i/=255,o/=255,a/=255),u=(i+o+a)/3,l=u>0?1-s/u:0;return 0===l?n=NaN:(n=(i-o+(i-a))/2,n/=Kt((i-o)*(i-o)+(i-a)*(o-a)),n=Qt(n),a>o&&(n=Zt-n),n/=Zt),[360*n,l,u]},ee=te,ne=h.unpack,re=h.limit,ie=h.TWOPI,oe=h.PITHIRD,ae=Math.cos,se=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var n,r,i,o=(t=ne(t,"hsi"))[0],a=t[1],s=t[2];return isNaN(o)&&(o=0),isNaN(a)&&(a=0),o>360&&(o-=360),o<0&&(o+=360),(o/=360)<1/3?r=1-((i=(1-a)/3)+(n=(1+a*ae(ie*o)/ae(oe-ie*o))/3)):o<2/3?i=1-((n=(1-a)/3)+(r=(1+a*ae(ie*(o-=1/3))/ae(oe-ie*o))/3)):n=1-((r=(1-a)/3)+(i=(1+a*ae(ie*(o-=2/3))/ae(oe-ie*o))/3)),[255*(n=re(s*n*3)),255*(r=re(s*r*3)),255*(i=re(s*i*3)),t.length>3?t[3]:1]},ue=se,le=h.unpack,ce=h.type,pe=w,fe=b,he=d,de=ee;fe.prototype.hsi=function(){return de(this._rgb)},pe.hsi=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return new(Function.prototype.bind.apply(fe,[null].concat(t,["hsi"])))},he.format.hsi=ue,he.autodetect.push({p:2,test:function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];if(t=le(t,"hsi"),"array"===ce(t)&&3===t.length)return"hsi"}});var ge=h.unpack,ye=h.type,me=w,_e=b,ve=d,be=U;_e.prototype.hsl=function(){return be(this._rgb)},me.hsl=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return new(Function.prototype.bind.apply(_e,[null].concat(t,["hsl"])))},ve.format.hsl=tt,ve.autodetect.push({p:2,test:function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];if(t=ge(t,"hsl"),"array"===ye(t)&&3===t.length)return"hsl"}});var xe=h.unpack,we=Math.min,Ee=Math.max,Ne=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var n,r,i,o=(t=xe(t,"rgb"))[0],a=t[1],s=t[2],u=we(o,a,s),l=Ee(o,a,s),c=l-u;return i=l/255,0===l?(n=Number.NaN,r=0):(r=c/l,o===l&&(n=(a-s)/c),a===l&&(n=2+(s-o)/c),s===l&&(n=4+(o-a)/c),(n*=60)<0&&(n+=360)),[n,r,i]},Ie=Ne,Ce=h.unpack,Se=Math.floor,Le=function(){for(var t,e,n,r,i,o,a=[],s=arguments.length;s--;)a[s]=arguments[s];var u,l,c,p=(a=Ce(a,"hsv"))[0],f=a[1],h=a[2];if(h*=255,0===f)u=l=c=h;else{360===p&&(p=0),p>360&&(p-=360),p<0&&(p+=360);var d=Se(p/=60),g=p-d,y=h*(1-f),m=h*(1-f*g),_=h*(1-f*(1-g));switch(d){case 0:u=(t=[h,_,y])[0],l=t[1],c=t[2];break;case 1:u=(e=[m,h,y])[0],l=e[1],c=e[2];break;case 2:u=(n=[y,h,_])[0],l=n[1],c=n[2];break;case 3:u=(r=[y,m,h])[0],l=r[1],c=r[2];break;case 4:u=(i=[_,y,h])[0],l=i[1],c=i[2];break;case 5:u=(o=[h,y,m])[0],l=o[1],c=o[2]}}return[u,l,c,a.length>3?a[3]:1]},Me=Le,Oe=h.unpack,Pe=h.type,Re=w,Te=b,Ae=d,De=Ie;Te.prototype.hsv=function(){return De(this._rgb)},Re.hsv=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return new(Function.prototype.bind.apply(Te,[null].concat(t,["hsv"])))},Ae.format.hsv=Me,Ae.autodetect.push({p:2,test:function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];if(t=Oe(t,"hsv"),"array"===Pe(t)&&3===t.length)return"hsv"}});var ke={Kn:18,Xn:.95047,Yn:1,Zn:1.08883,t0:.137931034,t1:.206896552,t2:.12841855,t3:.008856452},Fe=ke,je=h.unpack,ze=Math.pow,Ge=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var n=je(t,"rgb"),r=n[0],i=n[1],o=n[2],a=Ue(r,i,o),s=a[0],u=a[1],l=116*u-16;return[l<0?0:l,500*(s-u),200*(u-a[2])]},Be=function(t){return(t/=255)<=.04045?t/12.92:ze((t+.055)/1.055,2.4)},qe=function(t){return t>Fe.t3?ze(t,1/3):t/Fe.t2+Fe.t0},Ue=function(t,e,n){return t=Be(t),e=Be(e),n=Be(n),[qe((.4124564*t+.3575761*e+.1804375*n)/Fe.Xn),qe((.2126729*t+.7151522*e+.072175*n)/Fe.Yn),qe((.0193339*t+.119192*e+.9503041*n)/Fe.Zn)]},Ve=Ge,Ye=ke,Xe=h.unpack,He=Math.pow,We=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var n,r,i,o=(t=Xe(t,"lab"))[0],a=t[1],s=t[2];return r=(o+16)/116,n=isNaN(a)?r:r+a/500,i=isNaN(s)?r:r-s/200,r=Ye.Yn*Ze(r),n=Ye.Xn*Ze(n),i=Ye.Zn*Ze(i),[$e(3.2404542*n-1.5371385*r-.4985314*i),$e(-.969266*n+1.8760108*r+.041556*i),$e(.0556434*n-.2040259*r+1.0572252*i),t.length>3?t[3]:1]},$e=function(t){return 255*(t<=.00304?12.92*t:1.055*He(t,1/2.4)-.055)},Ze=function(t){return t>Ye.t1?t*t*t:Ye.t2*(t-Ye.t0)},Je=We,Ke=h.unpack,Qe=h.type,tn=w,en=b,nn=d,rn=Ve;en.prototype.lab=function(){return rn(this._rgb)},tn.lab=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return new(Function.prototype.bind.apply(en,[null].concat(t,["lab"])))},nn.format.lab=Je,nn.autodetect.push({p:2,test:function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];if(t=Ke(t,"lab"),"array"===Qe(t)&&3===t.length)return"lab"}});var on=h.unpack,an=h.RAD2DEG,sn=Math.sqrt,un=Math.atan2,ln=Math.round,cn=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var n=on(t,"lab"),r=n[0],i=n[1],o=n[2],a=sn(i*i+o*o),s=(un(o,i)*an+360)%360;return 0===ln(1e4*a)&&(s=Number.NaN),[r,a,s]},pn=cn,fn=h.unpack,hn=Ve,dn=pn,gn=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var n=fn(t,"rgb"),r=n[0],i=n[1],o=n[2],a=hn(r,i,o),s=a[0],u=a[1],l=a[2];return dn(s,u,l)},yn=gn,mn=h.unpack,_n=h.DEG2RAD,vn=Math.sin,bn=Math.cos,xn=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var n=mn(t,"lch"),r=n[0],i=n[1],o=n[2];return isNaN(o)&&(o=0),[r,bn(o*=_n)*i,vn(o)*i]},wn=xn,En=h.unpack,Nn=wn,In=Je,Cn=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var n=(t=En(t,"lch"))[0],r=t[1],i=t[2],o=Nn(n,r,i),a=o[0],s=o[1],u=o[2],l=In(a,s,u);return[l[0],l[1],l[2],t.length>3?t[3]:1]},Sn=Cn,Ln=h.unpack,Mn=Sn,On=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var n=Ln(t,"hcl").reverse();return Mn.apply(void 0,n)},Pn=On,Rn=h.unpack,Tn=h.type,An=w,Dn=b,kn=d,Fn=yn;Dn.prototype.lch=function(){return Fn(this._rgb)},Dn.prototype.hcl=function(){return Fn(this._rgb).reverse()},An.lch=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return new(Function.prototype.bind.apply(Dn,[null].concat(t,["lch"])))},An.hcl=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return new(Function.prototype.bind.apply(Dn,[null].concat(t,["hcl"])))},kn.format.lch=Sn,kn.format.hcl=Pn,["lch","hcl"].forEach((function(t){return kn.autodetect.push({p:2,test:function(){for(var e=[],n=arguments.length;n--;)e[n]=arguments[n];if(e=Rn(e,t),"array"===Tn(e)&&3===e.length)return t}})}));var jn={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflower:"#6495ed",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",laserlemon:"#ffff54",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrod:"#fafad2",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",maroon2:"#7f0000",maroon3:"#b03060",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",purple2:"#7f007f",purple3:"#a020f0",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},zn=b,Gn=d,Bn=h.type,qn=jn,Un=Ut,Vn=zt;zn.prototype.name=function(){for(var t=Vn(this._rgb,"rgb"),e=0,n=Object.keys(qn);e<n.length;e+=1){var r=n[e];if(qn[r]===t)return r.toLowerCase()}return t},Gn.format.named=function(t){if(t=t.toLowerCase(),qn[t])return Un(qn[t]);throw new Error("unknown color name: "+t)},Gn.autodetect.push({p:5,test:function(t){for(var e=[],n=arguments.length-1;n-- >0;)e[n]=arguments[n+1];if(!e.length&&"string"===Bn(t)&&qn[t.toLowerCase()])return"named"}});var Yn=h.unpack,Xn=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var n=Yn(t,"rgb");return(n[0]<<16)+(n[1]<<8)+n[2]},Hn=Xn,Wn=h.type,$n=function(t){if("number"==Wn(t)&&t>=0&&t<=16777215)return[t>>16,t>>8&255,255&t,1];throw new Error("unknown num color: "+t)},Zn=w,Jn=b,Kn=d,Qn=h.type,tr=Hn;Jn.prototype.num=function(){return tr(this._rgb)},Zn.num=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return new(Function.prototype.bind.apply(Jn,[null].concat(t,["num"])))},Kn.format.num=$n,Kn.autodetect.push({p:5,test:function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];if(1===t.length&&"number"===Qn(t[0])&&t[0]>=0&&t[0]<=16777215)return"num"}});var er=w,nr=b,rr=d,ir=h.unpack,or=h.type,ar=Math.round;nr.prototype.rgb=function(t){return void 0===t&&(t=!0),!1===t?this._rgb.slice(0,3):this._rgb.slice(0,3).map(ar)},nr.prototype.rgba=function(t){return void 0===t&&(t=!0),this._rgb.slice(0,4).map((function(e,n){return n<3?!1===t?e:ar(e):e}))},er.rgb=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return new(Function.prototype.bind.apply(nr,[null].concat(t,["rgb"])))},rr.format.rgb=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var n=ir(t,"rgba");return void 0===n[3]&&(n[3]=1),n},rr.autodetect.push({p:3,test:function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];if(t=ir(t,"rgba"),"array"===or(t)&&(3===t.length||4===t.length&&"number"==or(t[3])&&t[3]>=0&&t[3]<=1))return"rgb"}});var sr=Math.log,ur=function(t){var e,n,r,i=t/100;return i<66?(e=255,n=i<6?0:-155.25485562709179-.44596950469579133*(n=i-2)+104.49216199393888*sr(n),r=i<20?0:.8274096064007395*(r=i-10)-254.76935184120902+115.67994401066147*sr(r)):(e=351.97690566805693+.114206453784165*(e=i-55)-40.25366309332127*sr(e),n=325.4494125711974+.07943456536662342*(n=i-50)-28.0852963507957*sr(n),r=255),[e,n,r,1]},lr=ur,cr=h.unpack,pr=Math.round,fr=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];for(var n,r=cr(t,"rgb"),i=r[0],o=r[2],a=1e3,s=4e4,u=.4;s-a>u;){var l=lr(n=.5*(s+a));l[2]/l[0]>=o/i?s=n:a=n}return pr(n)},hr=w,dr=b,gr=d,yr=fr;dr.prototype.temp=dr.prototype.kelvin=dr.prototype.temperature=function(){return yr(this._rgb)},hr.temp=hr.kelvin=hr.temperature=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return new(Function.prototype.bind.apply(dr,[null].concat(t,["temp"])))},gr.format.temp=gr.format.kelvin=gr.format.temperature=ur;var mr=h.unpack,_r=Math.cbrt,vr=Math.pow,br=Math.sign,xr=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var n=mr(t,"rgb"),r=n[0],i=n[1],o=n[2],a=[Er(r/255),Er(i/255),Er(o/255)],s=a[0],u=a[1],l=a[2],c=_r(.4122214708*s+.5363325363*u+.0514459929*l),p=_r(.2119034982*s+.6806995451*u+.1073969566*l),f=_r(.0883024619*s+.2817188376*u+.6299787005*l);return[.2104542553*c+.793617785*p-.0040720468*f,1.9779984951*c-2.428592205*p+.4505937099*f,.0259040371*c+.7827717662*p-.808675766*f]},wr=xr;function Er(t){var e=Math.abs(t);return e<.04045?t/12.92:(br(t)||1)*vr((e+.055)/1.055,2.4)}var Nr=h.unpack,Ir=Math.pow,Cr=Math.sign,Sr=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var n=(t=Nr(t,"lab"))[0],r=t[1],i=t[2],o=Ir(n+.3963377774*r+.2158037573*i,3),a=Ir(n-.1055613458*r-.0638541728*i,3),s=Ir(n-.0894841775*r-1.291485548*i,3);return[255*Mr(4.0767416621*o-3.3077115913*a+.2309699292*s),255*Mr(-1.2684380046*o+2.6097574011*a-.3413193965*s),255*Mr(-.0041960863*o-.7034186147*a+1.707614701*s),t.length>3?t[3]:1]},Lr=Sr;function Mr(t){var e=Math.abs(t);return e>.0031308?(Cr(t)||1)*(1.055*Ir(e,1/2.4)-.055):12.92*t}var Or=h.unpack,Pr=h.type,Rr=w,Tr=b,Ar=d,Dr=wr;Tr.prototype.oklab=function(){return Dr(this._rgb)},Rr.oklab=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return new(Function.prototype.bind.apply(Tr,[null].concat(t,["oklab"])))},Ar.format.oklab=Lr,Ar.autodetect.push({p:3,test:function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];if(t=Or(t,"oklab"),"array"===Pr(t)&&3===t.length)return"oklab"}});var kr=h.unpack,Fr=wr,jr=pn,zr=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var n=kr(t,"rgb"),r=n[0],i=n[1],o=n[2],a=Fr(r,i,o),s=a[0],u=a[1],l=a[2];return jr(s,u,l)},Gr=zr,Br=h.unpack,qr=wn,Ur=Lr,Vr=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var n=(t=Br(t,"lch"))[0],r=t[1],i=t[2],o=qr(n,r,i),a=o[0],s=o[1],u=o[2],l=Ur(a,s,u);return[l[0],l[1],l[2],t.length>3?t[3]:1]},Yr=Vr,Xr=h.unpack,Hr=h.type,Wr=w,$r=b,Zr=d,Jr=Gr;$r.prototype.oklch=function(){return Jr(this._rgb)},Wr.oklch=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return new(Function.prototype.bind.apply($r,[null].concat(t,["oklch"])))},Zr.format.oklch=Yr,Zr.autodetect.push({p:3,test:function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];if(t=Xr(t,"oklch"),"array"===Hr(t)&&3===t.length)return"oklch"}});var Kr=b,Qr=h.type;Kr.prototype.alpha=function(t,e){return void 0===e&&(e=!1),void 0!==t&&"number"===Qr(t)?e?(this._rgb[3]=t,this):new Kr([this._rgb[0],this._rgb[1],this._rgb[2],t],"rgb"):this._rgb[3]},b.prototype.clipped=function(){return this._rgb._clipped||!1};var ti=b,ei=ke;ti.prototype.darken=function(t){void 0===t&&(t=1);var e=this,n=e.lab();return n[0]-=ei.Kn*t,new ti(n,"lab").alpha(e.alpha(),!0)},ti.prototype.brighten=function(t){return void 0===t&&(t=1),this.darken(-t)},ti.prototype.darker=ti.prototype.darken,ti.prototype.brighter=ti.prototype.brighten,b.prototype.get=function(t){var e=t.split("."),n=e[0],r=e[1],i=this[n]();if(r){var o=n.indexOf(r)-("ok"===n.substr(0,2)?2:0);if(o>-1)return i[o];throw new Error("unknown channel "+r+" in mode "+n)}return i};var ni=b,ri=h.type,ii=Math.pow,oi=1e-7,ai=20;ni.prototype.luminance=function(t){if(void 0!==t&&"number"===ri(t)){if(0===t)return new ni([0,0,0,this._rgb[3]],"rgb");if(1===t)return new ni([255,255,255,this._rgb[3]],"rgb");var e=this.luminance(),n="rgb",r=ai,i=function(e,o){var a=e.interpolate(o,.5,n),s=a.luminance();return Math.abs(t-s)<oi||!r--?a:s>t?i(e,a):i(a,o)},o=(e>t?i(new ni([0,0,0]),this):i(this,new ni([255,255,255]))).rgb();return new ni(o.concat([this._rgb[3]]))}return si.apply(void 0,this._rgb.slice(0,3))};var si=function(t,e,n){return.2126*(t=ui(t))+.7152*(e=ui(e))+.0722*(n=ui(n))},ui=function(t){return(t/=255)<=.03928?t/12.92:ii((t+.055)/1.055,2.4)},li={},ci=b,pi=h.type,fi=li,hi=function(t,e,n){void 0===n&&(n=.5);for(var r=[],i=arguments.length-3;i-- >0;)r[i]=arguments[i+3];var o=r[0]||"lrgb";if(fi[o]||r.length||(o=Object.keys(fi)[0]),!fi[o])throw new Error("interpolation mode "+o+" is not defined");return"object"!==pi(t)&&(t=new ci(t)),"object"!==pi(e)&&(e=new ci(e)),fi[o](t,e,n).alpha(t.alpha()+n*(e.alpha()-t.alpha()))},di=b,gi=hi;di.prototype.mix=di.prototype.interpolate=function(t,e){void 0===e&&(e=.5);for(var n=[],r=arguments.length-2;r-- >0;)n[r]=arguments[r+2];return gi.apply(void 0,[this,t,e].concat(n))};var yi=b;yi.prototype.premultiply=function(t){void 0===t&&(t=!1);var e=this._rgb,n=e[3];return t?(this._rgb=[e[0]*n,e[1]*n,e[2]*n,n],this):new yi([e[0]*n,e[1]*n,e[2]*n,n],"rgb")};var mi=b,_i=ke;mi.prototype.saturate=function(t){void 0===t&&(t=1);var e=this,n=e.lch();return n[1]+=_i.Kn*t,n[1]<0&&(n[1]=0),new mi(n,"lch").alpha(e.alpha(),!0)},mi.prototype.desaturate=function(t){return void 0===t&&(t=1),this.saturate(-t)};var vi=b,bi=h.type;vi.prototype.set=function(t,e,n){void 0===n&&(n=!1);var r=t.split("."),i=r[0],o=r[1],a=this[i]();if(o){var s=i.indexOf(o)-("ok"===i.substr(0,2)?2:0);if(s>-1){if("string"==bi(e))switch(e.charAt(0)){case"+":case"-":a[s]+=+e;break;case"*":a[s]*=+e.substr(1);break;case"/":a[s]/=+e.substr(1);break;default:a[s]=+e}else{if("number"!==bi(e))throw new Error("unsupported value for Color.set");a[s]=e}var u=new vi(a,i);return n?(this._rgb=u._rgb,this):u}throw new Error("unknown channel "+o+" in mode "+i)}return a};var xi=b,wi=function(t,e,n){var r=t._rgb,i=e._rgb;return new xi(r[0]+n*(i[0]-r[0]),r[1]+n*(i[1]-r[1]),r[2]+n*(i[2]-r[2]),"rgb")};li.rgb=wi;var Ei=b,Ni=Math.sqrt,Ii=Math.pow,Ci=function(t,e,n){var r=t._rgb,i=r[0],o=r[1],a=r[2],s=e._rgb,u=s[0],l=s[1],c=s[2];return new Ei(Ni(Ii(i,2)*(1-n)+Ii(u,2)*n),Ni(Ii(o,2)*(1-n)+Ii(l,2)*n),Ni(Ii(a,2)*(1-n)+Ii(c,2)*n),"rgb")};li.lrgb=Ci;var Si=b,Li=function(t,e,n){var r=t.lab(),i=e.lab();return new Si(r[0]+n*(i[0]-r[0]),r[1]+n*(i[1]-r[1]),r[2]+n*(i[2]-r[2]),"lab")};li.lab=Li;var Mi=b,Oi=function(t,e,n,r){var i,o,a,s,u,l,c,p,f,h,d,g,y;return"hsl"===r?(a=t.hsl(),s=e.hsl()):"hsv"===r?(a=t.hsv(),s=e.hsv()):"hcg"===r?(a=t.hcg(),s=e.hcg()):"hsi"===r?(a=t.hsi(),s=e.hsi()):"lch"===r||"hcl"===r?(r="hcl",a=t.hcl(),s=e.hcl()):"oklch"===r&&(a=t.oklch().reverse(),s=e.oklch().reverse()),"h"!==r.substr(0,1)&&"oklch"!==r||(u=(i=a)[0],c=i[1],f=i[2],l=(o=s)[0],p=o[1],h=o[2]),isNaN(u)||isNaN(l)?isNaN(u)?isNaN(l)?g=Number.NaN:(g=l,1!=f&&0!=f||"hsv"==r||(d=p)):(g=u,1!=h&&0!=h||"hsv"==r||(d=c)):g=u+n*(l>u&&l-u>180?l-(u+360):l<u&&u-l>180?l+360-u:l-u),void 0===d&&(d=c+n*(p-c)),y=f+n*(h-f),new Mi("oklch"===r?[y,d,g]:[g,d,y],r)},Pi=Oi,Ri=function(t,e,n){return Pi(t,e,n,"lch")};li.lch=Ri,li.hcl=Ri;var Ti=b,Ai=function(t,e,n){var r=t.num(),i=e.num();return new Ti(r+n*(i-r),"num")};li.num=Ai;var Di=Oi,ki=function(t,e,n){return Di(t,e,n,"hcg")};li.hcg=ki;var Fi=Oi,ji=function(t,e,n){return Fi(t,e,n,"hsi")};li.hsi=ji;var zi=Oi,Gi=function(t,e,n){return zi(t,e,n,"hsl")};li.hsl=Gi;var Bi=Oi,qi=function(t,e,n){return Bi(t,e,n,"hsv")};li.hsv=qi;var Ui=b,Vi=function(t,e,n){var r=t.oklab(),i=e.oklab();return new Ui(r[0]+n*(i[0]-r[0]),r[1]+n*(i[1]-r[1]),r[2]+n*(i[2]-r[2]),"oklab")};li.oklab=Vi;var Yi=Oi,Xi=function(t,e,n){return Yi(t,e,n,"oklch")};li.oklch=Xi;var Hi=b,Wi=h.clip_rgb,$i=Math.pow,Zi=Math.sqrt,Ji=Math.PI,Ki=Math.cos,Qi=Math.sin,to=Math.atan2,eo=function(t,e,n){void 0===e&&(e="lrgb"),void 0===n&&(n=null);var r=t.length;n||(n=Array.from(new Array(r)).map((function(){return 1})));var i=r/n.reduce((function(t,e){return t+e}));if(n.forEach((function(t,e){n[e]*=i})),t=t.map((function(t){return new Hi(t)})),"lrgb"===e)return no(t,n);for(var o=t.shift(),a=o.get(e),s=[],u=0,l=0,c=0;c<a.length;c++)if(a[c]=(a[c]||0)*n[0],s.push(isNaN(a[c])?0:n[0]),"h"===e.charAt(c)&&!isNaN(a[c])){var p=a[c]/180*Ji;u+=Ki(p)*n[0],l+=Qi(p)*n[0]}var f=o.alpha()*n[0];t.forEach((function(t,r){var i=t.get(e);f+=t.alpha()*n[r+1];for(var o=0;o<a.length;o++)if(!isNaN(i[o]))if(s[o]+=n[r+1],"h"===e.charAt(o)){var c=i[o]/180*Ji;u+=Ki(c)*n[r+1],l+=Qi(c)*n[r+1]}else a[o]+=i[o]*n[r+1]}));for(var h=0;h<a.length;h++)if("h"===e.charAt(h)){for(var d=to(l/s[h],u/s[h])/Ji*180;d<0;)d+=360;for(;d>=360;)d-=360;a[h]=d}else a[h]=a[h]/s[h];return f/=r,new Hi(a,e).alpha(f>.99999?1:f,!0)},no=function(t,e){for(var n=t.length,r=[0,0,0,0],i=0;i<t.length;i++){var o=t[i],a=e[i]/n,s=o._rgb;r[0]+=$i(s[0],2)*a,r[1]+=$i(s[1],2)*a,r[2]+=$i(s[2],2)*a,r[3]+=s[3]*a}return r[0]=Zi(r[0]),r[1]=Zi(r[1]),r[2]=Zi(r[2]),r[3]>.9999999&&(r[3]=1),new Hi(Wi(r))},ro=w,io=h.type,oo=Math.pow,ao=function(t){var e="rgb",n=ro("#ccc"),r=0,i=[0,1],o=[],a=[0,0],s=!1,u=[],l=!1,c=0,p=1,f=!1,h={},d=!0,g=1,y=function(t){if((t=t||["#fff","#000"])&&"string"===io(t)&&ro.brewer&&ro.brewer[t.toLowerCase()]&&(t=ro.brewer[t.toLowerCase()]),"array"===io(t)){1===t.length&&(t=[t[0],t[0]]),t=t.slice(0);for(var e=0;e<t.length;e++)t[e]=ro(t[e]);o.length=0;for(var n=0;n<t.length;n++)o.push(n/(t.length-1))}return x(),u=t},m=function(t){if(null!=s){for(var e=s.length-1,n=0;n<e&&t>=s[n];)n++;return n-1}return 0},_=function(t){return t},v=function(t){return t},b=function(t,r){var i,l;if(null==r&&(r=!1),isNaN(t)||null===t)return n;l=r?t:s&&s.length>2?m(t)/(s.length-2):p!==c?(t-c)/(p-c):1,l=v(l),r||(l=_(l)),1!==g&&(l=oo(l,g)),l=a[0]+l*(1-a[0]-a[1]),l=Math.min(1,Math.max(0,l));var f=Math.floor(1e4*l);if(d&&h[f])i=h[f];else{if("array"===io(u))for(var y=0;y<o.length;y++){var b=o[y];if(l<=b){i=u[y];break}if(l>=b&&y===o.length-1){i=u[y];break}if(l>b&&l<o[y+1]){l=(l-b)/(o[y+1]-b),i=ro.interpolate(u[y],u[y+1],l,e);break}}else"function"===io(u)&&(i=u(l));d&&(h[f]=i)}return i},x=function(){return h={}};y(t);var w=function(t){var e=ro(b(t));return l&&e[l]?e[l]():e};return w.classes=function(t){if(null!=t){if("array"===io(t))s=t,i=[t[0],t[t.length-1]];else{var e=ro.analyze(i);s=0===t?[e.min,e.max]:ro.limits(e,"e",t)}return w}return s},w.domain=function(t){if(!arguments.length)return i;c=t[0],p=t[t.length-1],o=[];var e=u.length;if(t.length===e&&c!==p)for(var n=0,r=Array.from(t);n<r.length;n+=1){var a=r[n];o.push((a-c)/(p-c))}else{for(var s=0;s<e;s++)o.push(s/(e-1));if(t.length>2){var l=t.map((function(e,n){return n/(t.length-1)})),f=t.map((function(t){return(t-c)/(p-c)}));f.every((function(t,e){return l[e]===t}))||(v=function(t){if(t<=0||t>=1)return t;for(var e=0;t>=f[e+1];)e++;var n=(t-f[e])/(f[e+1]-f[e]);return l[e]+n*(l[e+1]-l[e])})}}return i=[c,p],w},w.mode=function(t){return arguments.length?(e=t,x(),w):e},w.range=function(t,e){return y(t),w},w.out=function(t){return l=t,w},w.spread=function(t){return arguments.length?(r=t,w):r},w.correctLightness=function(t){return null==t&&(t=!0),f=t,x(),_=f?function(t){for(var e=b(0,!0).lab()[0],n=b(1,!0).lab()[0],r=e>n,i=b(t,!0).lab()[0],o=e+(n-e)*t,a=i-o,s=0,u=1,l=20;Math.abs(a)>.01&&l-- >0;)r&&(a*=-1),a<0?(s=t,t+=.5*(u-t)):(u=t,t+=.5*(s-t)),i=b(t,!0).lab()[0],a=i-o;return t}:function(t){return t},w},w.padding=function(t){return null!=t?("number"===io(t)&&(t=[t,t]),a=t,w):a},w.colors=function(e,n){arguments.length<2&&(n="hex");var r=[];if(0===arguments.length)r=u.slice(0);else if(1===e)r=[w(.5)];else if(e>1){var o=i[0],a=i[1]-o;r=so(0,e,!1).map((function(t){return w(o+t/(e-1)*a)}))}else{t=[];var l=[];if(s&&s.length>2)for(var c=1,p=s.length,f=1<=p;f?c<p:c>p;f?c++:c--)l.push(.5*(s[c-1]+s[c]));else l=i;r=l.map((function(t){return w(t)}))}return ro[n]&&(r=r.map((function(t){return t[n]()}))),r},w.cache=function(t){return null!=t?(d=t,w):d},w.gamma=function(t){return null!=t?(g=t,w):g},w.nodata=function(t){return null!=t?(n=ro(t),w):n},w};function so(t,e,n){for(var r=[],i=t<e,o=n?i?e+1:e-1:e,a=t;i?a<o:a>o;i?a++:a--)r.push(a);return r}var uo=b,lo=ao,co=function(t){for(var e=[1,1],n=1;n<t;n++){for(var r=[1],i=1;i<=e.length;i++)r[i]=(e[i]||0)+e[i-1];e=r}return e},po=function(t){var e,n,r,i,o,a,s;if(2===(t=t.map((function(t){return new uo(t)}))).length)e=t.map((function(t){return t.lab()})),o=e[0],a=e[1],i=function(t){var e=[0,1,2].map((function(e){return o[e]+t*(a[e]-o[e])}));return new uo(e,"lab")};else if(3===t.length)n=t.map((function(t){return t.lab()})),o=n[0],a=n[1],s=n[2],i=function(t){var e=[0,1,2].map((function(e){return(1-t)*(1-t)*o[e]+2*(1-t)*t*a[e]+t*t*s[e]}));return new uo(e,"lab")};else if(4===t.length){var u;r=t.map((function(t){return t.lab()})),o=r[0],a=r[1],s=r[2],u=r[3],i=function(t){var e=[0,1,2].map((function(e){return(1-t)*(1-t)*(1-t)*o[e]+3*(1-t)*(1-t)*t*a[e]+3*(1-t)*t*t*s[e]+t*t*t*u[e]}));return new uo(e,"lab")}}else{if(!(t.length>=5))throw new RangeError("No point in running bezier with only one color.");var l,c,p;l=t.map((function(t){return t.lab()})),p=t.length-1,c=co(p),i=function(t){var e=1-t,n=[0,1,2].map((function(n){return l.reduce((function(r,i,o){return r+c[o]*Math.pow(e,p-o)*Math.pow(t,o)*i[n]}),0)}));return new uo(n,"lab")}}return i},fo=function(t){var e=po(t);return e.scale=function(){return lo(e)},e},ho=w,go=function(t,e,n){if(!go[n])throw new Error("unknown blend mode "+n);return go[n](t,e)},yo=function(t){return function(e,n){var r=ho(n).rgb(),i=ho(e).rgb();return ho.rgb(t(r,i))}},mo=function(t){return function(e,n){var r=[];return r[0]=t(e[0],n[0]),r[1]=t(e[1],n[1]),r[2]=t(e[2],n[2]),r}},_o=function(t){return t},vo=function(t,e){return t*e/255},bo=function(t,e){return t>e?e:t},xo=function(t,e){return t>e?t:e},wo=function(t,e){return 255*(1-(1-t/255)*(1-e/255))},Eo=function(t,e){return e<128?2*t*e/255:255*(1-2*(1-t/255)*(1-e/255))},No=function(t,e){return 255*(1-(1-e/255)/(t/255))},Io=function(t,e){return 255===t||(t=e/255*255/(1-t/255))>255?255:t};go.normal=yo(mo(_o)),go.multiply=yo(mo(vo)),go.screen=yo(mo(wo)),go.overlay=yo(mo(Eo)),go.darken=yo(mo(bo)),go.lighten=yo(mo(xo)),go.dodge=yo(mo(Io)),go.burn=yo(mo(No));for(var Co=go,So=h.type,Lo=h.clip_rgb,Mo=h.TWOPI,Oo=Math.pow,Po=Math.sin,Ro=Math.cos,To=w,Ao=function(t,e,n,r,i){void 0===t&&(t=300),void 0===e&&(e=-1.5),void 0===n&&(n=1),void 0===r&&(r=1),void 0===i&&(i=[0,1]);var o,a=0;"array"===So(i)?o=i[1]-i[0]:(o=0,i=[i,i]);var s=function(s){var u=Mo*((t+120)/360+e*s),l=Oo(i[0]+o*s,r),c=(0!==a?n[0]+s*a:n)*l*(1-l)/2,p=Ro(u),f=Po(u);return To(Lo([255*(l+c*(-.14861*p+1.78277*f)),255*(l+c*(-.29227*p-.90649*f)),255*(l+c*(1.97294*p)),1]))};return s.start=function(e){return null==e?t:(t=e,s)},s.rotations=function(t){return null==t?e:(e=t,s)},s.gamma=function(t){return null==t?r:(r=t,s)},s.hue=function(t){return null==t?n:("array"===So(n=t)?0==(a=n[1]-n[0])&&(n=n[1]):a=0,s)},s.lightness=function(t){return null==t?i:("array"===So(t)?(i=t,o=t[1]-t[0]):(i=[t,t],o=0),s)},s.scale=function(){return To.scale(s)},s.hue(n),s},Do=b,ko="0123456789abcdef",Fo=Math.floor,jo=Math.random,zo=function(){for(var t="#",e=0;e<6;e++)t+=ko.charAt(Fo(16*jo()));return new Do(t,"hex")},Go=s,Bo=Math.log,qo=Math.pow,Uo=Math.floor,Vo=Math.abs,Yo=function(t,e){void 0===e&&(e=null);var n={min:Number.MAX_VALUE,max:-1*Number.MAX_VALUE,sum:0,values:[],count:0};return"object"===Go(t)&&(t=Object.values(t)),t.forEach((function(t){e&&"object"===Go(t)&&(t=t[e]),null==t||isNaN(t)||(n.values.push(t),n.sum+=t,t<n.min&&(n.min=t),t>n.max&&(n.max=t),n.count+=1)})),n.domain=[n.min,n.max],n.limits=function(t,e){return Xo(n,t,e)},n},Xo=function(t,e,n){void 0===e&&(e="equal"),void 0===n&&(n=7),"array"==Go(t)&&(t=Yo(t));var r=t.min,i=t.max,o=t.values.sort((function(t,e){return t-e}));if(1===n)return[r,i];var a=[];if("c"===e.substr(0,1)&&(a.push(r),a.push(i)),"e"===e.substr(0,1)){a.push(r);for(var s=1;s<n;s++)a.push(r+s/n*(i-r));a.push(i)}else if("l"===e.substr(0,1)){if(r<=0)throw new Error("Logarithmic scales are only possible for values > 0");var u=Math.LOG10E*Bo(r),l=Math.LOG10E*Bo(i);a.push(r);for(var c=1;c<n;c++)a.push(qo(10,u+c/n*(l-u)));a.push(i)}else if("q"===e.substr(0,1)){a.push(r);for(var p=1;p<n;p++){var f=(o.length-1)*p/n,h=Uo(f);if(h===f)a.push(o[h]);else{var d=f-h;a.push(o[h]*(1-d)+o[h+1]*d)}}a.push(i)}else if("k"===e.substr(0,1)){var g,y=o.length,m=new Array(y),_=new Array(n),v=!0,b=0,x=null;(x=[]).push(r);for(var w=1;w<n;w++)x.push(r+w/n*(i-r));for(x.push(i);v;){for(var E=0;E<n;E++)_[E]=0;for(var N=0;N<y;N++)for(var I=o[N],C=Number.MAX_VALUE,S=void 0,L=0;L<n;L++){var M=Vo(x[L]-I);M<C&&(C=M,S=L),_[S]++,m[N]=S}for(var O=new Array(n),P=0;P<n;P++)O[P]=null;for(var R=0;R<y;R++)null===O[g=m[R]]?O[g]=o[R]:O[g]+=o[R];for(var T=0;T<n;T++)O[T]*=1/_[T];v=!1;for(var A=0;A<n;A++)if(O[A]!==x[A]){v=!0;break}x=O,++b>200&&(v=!1)}for(var D={},k=0;k<n;k++)D[k]=[];for(var F=0;F<y;F++)D[g=m[F]].push(o[F]);for(var j=[],z=0;z<n;z++)j.push(D[z][0]),j.push(D[z][D[z].length-1]);j=j.sort((function(t,e){return t-e})),a.push(j[0]);for(var G=1;G<j.length;G+=2){var B=j[G];isNaN(B)||-1!==a.indexOf(B)||a.push(B)}}return a},Ho={analyze:Yo,limits:Xo},Wo=b,$o=function(t,e){t=new Wo(t),e=new Wo(e);var n=t.luminance(),r=e.luminance();return n>r?(n+.05)/(r+.05):(r+.05)/(n+.05)},Zo=b,Jo=Math.sqrt,Ko=Math.pow,Qo=Math.min,ta=Math.max,ea=Math.atan2,na=Math.abs,ra=Math.cos,ia=Math.sin,oa=Math.exp,aa=Math.PI,sa=function(t,e,n,r,i){void 0===n&&(n=1),void 0===r&&(r=1),void 0===i&&(i=1);var o=function(t){return 360*t/(2*aa)},a=function(t){return 2*aa*t/360};t=new Zo(t),e=new Zo(e);var s=Array.from(t.lab()),u=s[0],l=s[1],c=s[2],p=Array.from(e.lab()),f=p[0],h=p[1],d=p[2],g=(u+f)/2,y=(Jo(Ko(l,2)+Ko(c,2))+Jo(Ko(h,2)+Ko(d,2)))/2,m=.5*(1-Jo(Ko(y,7)/(Ko(y,7)+Ko(25,7)))),_=l*(1+m),v=h*(1+m),b=Jo(Ko(_,2)+Ko(c,2)),x=Jo(Ko(v,2)+Ko(d,2)),w=(b+x)/2,E=o(ea(c,_)),N=o(ea(d,v)),I=E>=0?E:E+360,C=N>=0?N:N+360,S=na(I-C)>180?(I+C+360)/2:(I+C)/2,L=1-.17*ra(a(S-30))+.24*ra(a(2*S))+.32*ra(a(3*S+6))-.2*ra(a(4*S-63)),M=C-I;M=na(M)<=180?M:C<=I?M+360:M-360,M=2*Jo(b*x)*ia(a(M)/2);var O=f-u,P=x-b,R=1+.015*Ko(g-50,2)/Jo(20+Ko(g-50,2)),T=1+.045*w,A=1+.015*w*L,D=30*oa(-Ko((S-275)/25,2)),k=-2*Jo(Ko(w,7)/(Ko(w,7)+Ko(25,7)))*ia(2*a(D)),F=Jo(Ko(O/(n*R),2)+Ko(P/(r*T),2)+Ko(M/(i*A),2)+k*(P/(r*T))*(M/(i*A)));return ta(0,Qo(100,F))},ua=b,la=function(t,e,n){void 0===n&&(n="lab"),t=new ua(t),e=new ua(e);var r=t.get(n),i=e.get(n),o=0;for(var a in r){var s=(r[a]||0)-(i[a]||0);o+=s*s}return Math.sqrt(o)},ca=b,pa=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];try{return new(Function.prototype.bind.apply(ca,[null].concat(t))),!0}catch(t){return!1}},fa=w,ha=ao,da={cool:function(){return ha([fa.hsl(180,1,.9),fa.hsl(250,.7,.4)])},hot:function(){return ha(["#000","#f00","#ff0","#fff"]).mode("rgb")}},ga={OrRd:["#fff7ec","#fee8c8","#fdd49e","#fdbb84","#fc8d59","#ef6548","#d7301f","#b30000","#7f0000"],PuBu:["#fff7fb","#ece7f2","#d0d1e6","#a6bddb","#74a9cf","#3690c0","#0570b0","#045a8d","#023858"],BuPu:["#f7fcfd","#e0ecf4","#bfd3e6","#9ebcda","#8c96c6","#8c6bb1","#88419d","#810f7c","#4d004b"],Oranges:["#fff5eb","#fee6ce","#fdd0a2","#fdae6b","#fd8d3c","#f16913","#d94801","#a63603","#7f2704"],BuGn:["#f7fcfd","#e5f5f9","#ccece6","#99d8c9","#66c2a4","#41ae76","#238b45","#006d2c","#00441b"],YlOrBr:["#ffffe5","#fff7bc","#fee391","#fec44f","#fe9929","#ec7014","#cc4c02","#993404","#662506"],YlGn:["#ffffe5","#f7fcb9","#d9f0a3","#addd8e","#78c679","#41ab5d","#238443","#006837","#004529"],Reds:["#fff5f0","#fee0d2","#fcbba1","#fc9272","#fb6a4a","#ef3b2c","#cb181d","#a50f15","#67000d"],RdPu:["#fff7f3","#fde0dd","#fcc5c0","#fa9fb5","#f768a1","#dd3497","#ae017e","#7a0177","#49006a"],Greens:["#f7fcf5","#e5f5e0","#c7e9c0","#a1d99b","#74c476","#41ab5d","#238b45","#006d2c","#00441b"],YlGnBu:["#ffffd9","#edf8b1","#c7e9b4","#7fcdbb","#41b6c4","#1d91c0","#225ea8","#253494","#081d58"],Purples:["#fcfbfd","#efedf5","#dadaeb","#bcbddc","#9e9ac8","#807dba","#6a51a3","#54278f","#3f007d"],GnBu:["#f7fcf0","#e0f3db","#ccebc5","#a8ddb5","#7bccc4","#4eb3d3","#2b8cbe","#0868ac","#084081"],Greys:["#ffffff","#f0f0f0","#d9d9d9","#bdbdbd","#969696","#737373","#525252","#252525","#000000"],YlOrRd:["#ffffcc","#ffeda0","#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c","#bd0026","#800026"],PuRd:["#f7f4f9","#e7e1ef","#d4b9da","#c994c7","#df65b0","#e7298a","#ce1256","#980043","#67001f"],Blues:["#f7fbff","#deebf7","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#08519c","#08306b"],PuBuGn:["#fff7fb","#ece2f0","#d0d1e6","#a6bddb","#67a9cf","#3690c0","#02818a","#016c59","#014636"],Viridis:["#440154","#482777","#3f4a8a","#31678e","#26838f","#1f9d8a","#6cce5a","#b6de2b","#fee825"],Spectral:["#9e0142","#d53e4f","#f46d43","#fdae61","#fee08b","#ffffbf","#e6f598","#abdda4","#66c2a5","#3288bd","#5e4fa2"],RdYlGn:["#a50026","#d73027","#f46d43","#fdae61","#fee08b","#ffffbf","#d9ef8b","#a6d96a","#66bd63","#1a9850","#006837"],RdBu:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#f7f7f7","#d1e5f0","#92c5de","#4393c3","#2166ac","#053061"],PiYG:["#8e0152","#c51b7d","#de77ae","#f1b6da","#fde0ef","#f7f7f7","#e6f5d0","#b8e186","#7fbc41","#4d9221","#276419"],PRGn:["#40004b","#762a83","#9970ab","#c2a5cf","#e7d4e8","#f7f7f7","#d9f0d3","#a6dba0","#5aae61","#1b7837","#00441b"],RdYlBu:["#a50026","#d73027","#f46d43","#fdae61","#fee090","#ffffbf","#e0f3f8","#abd9e9","#74add1","#4575b4","#313695"],BrBG:["#543005","#8c510a","#bf812d","#dfc27d","#f6e8c3","#f5f5f5","#c7eae5","#80cdc1","#35978f","#01665e","#003c30"],RdGy:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#ffffff","#e0e0e0","#bababa","#878787","#4d4d4d","#1a1a1a"],PuOr:["#7f3b08","#b35806","#e08214","#fdb863","#fee0b6","#f7f7f7","#d8daeb","#b2abd2","#8073ac","#542788","#2d004b"],Set2:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","#e5c494","#b3b3b3"],Accent:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0","#f0027f","#bf5b17","#666666"],Set1:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628","#f781bf","#999999"],Set3:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9","#bc80bd","#ccebc5","#ffed6f"],Dark2:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e","#e6ab02","#a6761d","#666666"],Paired:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a","#ffff99","#b15928"],Pastel2:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9","#fff2ae","#f1e2cc","#cccccc"],Pastel1:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc","#e5d8bd","#fddaec","#f2f2f2"]},ya=0,ma=Object.keys(ga);ya<ma.length;ya+=1){var _a=ma[ya];ga[_a.toLowerCase()]=ga[_a]}var va=ga,ba=w;ba.average=eo,ba.bezier=fo,ba.blend=Co,ba.cubehelix=Ao,ba.mix=ba.interpolate=hi,ba.random=zo,ba.scale=ao,ba.analyze=Ho.analyze,ba.contrast=$o,ba.deltaE=sa,ba.distance=la,ba.limits=Ho.limits,ba.valid=pa,ba.scales=da,ba.colors=jn,ba.brewer=va;var xa=ba;return xa}();var Ec=ft(wc.exports);const Nc={horizontal:90,vertical:0,"diagonal-up":135,"diagonal-down":45};function Ic(t){let{defs:e,id:n,stroke:r="black",strokeWidth:i=1,lineGap:o=10,patternType:a="horizontal",rotation:s=0,scale:u=1,flipV:l=!1}=t;const c=(o+i)*u;let p=Nc[a]||0;l&&(p=180-p),e.append("pattern").attr("id",n).attr("patternTransform","rotate(".concat(p-s," 0 0)")).attr("patternUnits","userSpaceOnUse").attr("height",c).attr("width",c).append("line").attr("x1",c/2).attr("y1",0).attr("x2",c/2).attr("y2",c).attr("stroke",r).attr("stroke-width",i*u)}function Cc(t,e,n){void 0===n&&(n={});var r={type:"Feature"};return(0===n.id||n.id)&&(r.id=n.id),n.bbox&&(r.bbox=n.bbox),r.properties=e||{},r.geometry=t,r}function Sc(t,e,n){void 0===n&&(n={});for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var a=0;a<o[o.length-1].length;a++)if(o[o.length-1][a]!==o[0][a])throw new Error("First and last Position are not equivalent.")}return Cc({type:"Polygon",coordinates:t},e,n)}function Lc(t,e,n){if(null!==t)for(var r,i,o,a,s,u,l,c,p=0,f=0,h=t.type,d="FeatureCollection"===h,g="Feature"===h,y=d?t.features.length:1,m=0;m<y;m++){s=(c=!!(l=d?t.features[m].geometry:g?t.geometry:t)&&"GeometryCollection"===l.type)?l.geometries.length:1;for(var _=0;_<s;_++){var v=0,b=0;if(null!==(a=c?l.geometries[_]:l)){u=a.coordinates;var x=a.type;switch(p=!n||"Polygon"!==x&&"MultiPolygon"!==x?0:1,x){case null:break;case"Point":if(!1===e(u,f,m,v,b))return!1;f++,v++;break;case"LineString":case"MultiPoint":for(r=0;r<u.length;r++){if(!1===e(u[r],f,m,v,b))return!1;f++,"MultiPoint"===x&&v++}"LineString"===x&&v++;break;case"Polygon":case"MultiLineString":for(r=0;r<u.length;r++){for(i=0;i<u[r].length-p;i++){if(!1===e(u[r][i],f,m,v,b))return!1;f++}"MultiLineString"===x&&v++,"Polygon"===x&&b++}"Polygon"===x&&v++;break;case"MultiPolygon":for(r=0;r<u.length;r++){for(b=0,i=0;i<u[r].length;i++){for(o=0;o<u[r][i].length-p;o++){if(!1===e(u[r][i][o],f,m,v,b))return!1;f++}b++}v++}break;case"GeometryCollection":for(r=0;r<a.geometries.length;r++)if(!1===Lc(a.geometries[r],e,n))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function Mc(t){var e=[1/0,1/0,-1/0,-1/0];return Lc(t,(function(t){e[0]>t[0]&&(e[0]=t[0]),e[1]>t[1]&&(e[1]=t[1]),e[2]<t[0]&&(e[2]=t[0]),e[3]<t[1]&&(e[3]=t[1])})),e}function Oc(t,e,n){if(!Rc(n=n||{}))throw new Error("options is invalid");var r=n.bbox,i=n.id;if(void 0===t)throw new Error("geometry is required");if(e&&e.constructor!==Object)throw new Error("properties must be an Object");r&&function(t){if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be an Array");if(4!==t.length&&6!==t.length)throw new Error("bbox must be an Array of 4 or 6 numbers");t.forEach((function(t){if(!Pc(t))throw new Error("bbox must only contain numbers")}))}(r),i&&function(t){if(!t)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof t))throw new Error("id must be a number or a string")}(i);var o={type:"Feature"};return i&&(o.id=i),r&&(o.bbox=r),o.properties=e||{},o.geometry=t,o}function Pc(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)}function Rc(t){return!!t&&t.constructor===Object}function Tc(t,e){if(!Rc(e=e||{}))throw new Error("options is invalid");var n=e.properties;if(!t)throw new Error("geojson is required");var r=Mc(t);return function(t,e,n){if(!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");if(t.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!Pc(t[0])||!Pc(t[1]))throw new Error("coordinates must contain numbers");return Oc({type:"Point",coordinates:t},e,n)}([(r[0]+r[2])/2,(r[1]+r[3])/2],n)}Mc.default=Mc;var Ac={exports:{}};(function(t){function e(){}function n(t){this.message=t||""}function r(t){this.message=t||""}function i(t){this.message=t||""}function o(){}function a(t){return null===t?At:t.color}function s(t){return null===t?null:t.parent}function u(t,e){null!==t&&(t.color=e)}function l(t){return null===t?null:t.left}function c(t){return null===t?null:t.right}function p(){this.root_=null,this.size_=0}function f(){}function h(){this.array_=[],arguments[0]instanceof bt&&this.addAll(arguments[0])}function d(){}function g(t){this.message=t||""}function y(){this.array_=[]}"fill"in Array.prototype||Object.defineProperty(Array.prototype,"fill",{configurable:!0,value:function(t){if(null==this)throw new TypeError(this+" is not an object");var e=Object(this),n=Math.max(Math.min(e.length,9007199254740991),0)||0,r=1 in arguments&&parseInt(Number(arguments[1]),10)||0;r=r<0?Math.max(n+r,0):Math.min(r,n);var i=2 in arguments&&void 0!==arguments[2]?parseInt(Number(arguments[2]),10)||0:n;for(i=i<0?Math.max(n+arguments[2],0):Math.min(i,n);r<i;)e[r]=t,++r;return e},writable:!0}),Number.isFinite=Number.isFinite||function(t){return"number"==typeof t&&isFinite(t)},Number.isInteger=Number.isInteger||function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t},Number.parseFloat=Number.parseFloat||parseFloat,Number.isNaN=Number.isNaN||function(t){return t!=t},Math.trunc=Math.trunc||function(t){return t<0?Math.ceil(t):Math.floor(t)};var m=function(){};m.prototype.interfaces_=function(){return[]},m.prototype.getClass=function(){return m},m.prototype.equalsWithTolerance=function(t,e,n){return Math.abs(t-e)<=n};var _=function(t){function e(e){t.call(this,e),this.name="IllegalArgumentException",this.message=e,this.stack=(new t).stack}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Error),v=function(){},b={MAX_VALUE:{configurable:!0}};v.isNaN=function(t){return Number.isNaN(t)},v.doubleToLongBits=function(t){return t},v.longBitsToDouble=function(t){return t},v.isInfinite=function(t){return!Number.isFinite(t)},b.MAX_VALUE.get=function(){return Number.MAX_VALUE},Object.defineProperties(v,b);var x=function(){},w=function(){},E=function(){},N=function t(){if(this.x=null,this.y=null,this.z=null,0===arguments.length)this.x=0,this.y=0,this.z=t.NULL_ORDINATE;else if(1===arguments.length){var e=arguments[0];this.x=e.x,this.y=e.y,this.z=e.z}else 2===arguments.length?(this.x=arguments[0],this.y=arguments[1],this.z=t.NULL_ORDINATE):3===arguments.length&&(this.x=arguments[0],this.y=arguments[1],this.z=arguments[2])},I={DimensionalComparator:{configurable:!0},serialVersionUID:{configurable:!0},NULL_ORDINATE:{configurable:!0},X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0}};N.prototype.setOrdinate=function(t,e){switch(t){case N.X:this.x=e;break;case N.Y:this.y=e;break;case N.Z:this.z=e;break;default:throw new _("Invalid ordinate index: "+t)}},N.prototype.equals2D=function(){if(1===arguments.length){var t=arguments[0];return this.x===t.x&&this.y===t.y}if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!m.equalsWithTolerance(this.x,e.x,n)&&!!m.equalsWithTolerance(this.y,e.y,n)}},N.prototype.getOrdinate=function(t){switch(t){case N.X:return this.x;case N.Y:return this.y;case N.Z:return this.z}throw new _("Invalid ordinate index: "+t)},N.prototype.equals3D=function(t){return this.x===t.x&&this.y===t.y&&(this.z===t.z||v.isNaN(this.z))&&v.isNaN(t.z)},N.prototype.equals=function(t){return t instanceof N&&this.equals2D(t)},N.prototype.equalInZ=function(t,e){return m.equalsWithTolerance(this.z,t.z,e)},N.prototype.compareTo=function(t){var e=t;return this.x<e.x?-1:this.x>e.x?1:this.y<e.y?-1:this.y>e.y?1:0},N.prototype.clone=function(){},N.prototype.copy=function(){return new N(this)},N.prototype.toString=function(){return"("+this.x+", "+this.y+", "+this.z+")"},N.prototype.distance3D=function(t){var e=this.x-t.x,n=this.y-t.y,r=this.z-t.z;return Math.sqrt(e*e+n*n+r*r)},N.prototype.distance=function(t){var e=this.x-t.x,n=this.y-t.y;return Math.sqrt(e*e+n*n)},N.prototype.hashCode=function(){var t=17;return 37*(t=37*t+N.hashCode(this.x))+N.hashCode(this.y)},N.prototype.setCoordinate=function(t){this.x=t.x,this.y=t.y,this.z=t.z},N.prototype.interfaces_=function(){return[x,w,e]},N.prototype.getClass=function(){return N},N.hashCode=function(){if(1===arguments.length){var t=arguments[0],e=v.doubleToLongBits(t);return Math.trunc((e^e)>>>32)}},I.DimensionalComparator.get=function(){return C},I.serialVersionUID.get=function(){return 0x5cbf2c235c7e5800},I.NULL_ORDINATE.get=function(){return v.NaN},I.X.get=function(){return 0},I.Y.get=function(){return 1},I.Z.get=function(){return 2},Object.defineProperties(N,I);var C=function(t){if(this._dimensionsToTest=2,0===arguments.length);else if(1===arguments.length){var e=arguments[0];if(2!==e&&3!==e)throw new _("only 2 or 3 dimensions may be specified");this._dimensionsToTest=e}};C.prototype.compare=function(t,e){var n=t,r=e,i=C.compare(n.x,r.x);if(0!==i)return i;var o=C.compare(n.y,r.y);return 0!==o?o:this._dimensionsToTest<=2?0:C.compare(n.z,r.z)},C.prototype.interfaces_=function(){return[E]},C.prototype.getClass=function(){return C},C.compare=function(t,e){return t<e?-1:t>e?1:v.isNaN(t)?v.isNaN(e)?0:-1:v.isNaN(e)?1:0};var S=function(){};S.prototype.create=function(){},S.prototype.interfaces_=function(){return[]},S.prototype.getClass=function(){return S};var L=function(){},M={INTERIOR:{configurable:!0},BOUNDARY:{configurable:!0},EXTERIOR:{configurable:!0},NONE:{configurable:!0}};L.prototype.interfaces_=function(){return[]},L.prototype.getClass=function(){return L},L.toLocationSymbol=function(t){switch(t){case L.EXTERIOR:return"e";case L.BOUNDARY:return"b";case L.INTERIOR:return"i";case L.NONE:return"-"}throw new _("Unknown location value: "+t)},M.INTERIOR.get=function(){return 0},M.BOUNDARY.get=function(){return 1},M.EXTERIOR.get=function(){return 2},M.NONE.get=function(){return-1},Object.defineProperties(L,M);var O=function(t,e){return t.interfaces_&&t.interfaces_().indexOf(e)>-1},P=function(){},R={LOG_10:{configurable:!0}};P.prototype.interfaces_=function(){return[]},P.prototype.getClass=function(){return P},P.log10=function(t){var e=Math.log(t);return v.isInfinite(e)||v.isNaN(e)?e:e/P.LOG_10},P.min=function(t,e,n,r){var i=t;return e<i&&(i=e),n<i&&(i=n),r<i&&(i=r),i},P.clamp=function(){if("number"==typeof arguments[2]&&"number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1],n=arguments[2];return t<e?e:t>n?n:t}if(Number.isInteger(arguments[2])&&Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var r=arguments[0],i=arguments[1],o=arguments[2];return r<i?i:r>o?o:r}},P.wrap=function(t,e){return t<0?e- -t%e:t%e},P.max=function(){if(3===arguments.length){var t=arguments[1],e=arguments[2],n=arguments[0];return t>n&&(n=t),e>n&&(n=e),n}if(4===arguments.length){var r=arguments[1],i=arguments[2],o=arguments[3],a=arguments[0];return r>a&&(a=r),i>a&&(a=i),o>a&&(a=o),a}},P.average=function(t,e){return(t+e)/2},R.LOG_10.get=function(){return Math.log(10)},Object.defineProperties(P,R);var T=function(t){this.str=t};T.prototype.append=function(t){this.str+=t},T.prototype.setCharAt=function(t,e){this.str=this.str.substr(0,t)+e+this.str.substr(t+1)},T.prototype.toString=function(t){return this.str};var A=function(t){this.value=t};A.prototype.intValue=function(){return this.value},A.prototype.compareTo=function(t){return this.value<t?-1:this.value>t?1:0},A.isNaN=function(t){return Number.isNaN(t)};var D=function(){};D.isWhitespace=function(t){return t<=32&&t>=0||127===t},D.toUpperCase=function(t){return t.toUpperCase()};var k=function t(){if(this._hi=0,this._lo=0,0===arguments.length)this.init(0);else if(1===arguments.length)if("number"==typeof arguments[0]){var e=arguments[0];this.init(e)}else if(arguments[0]instanceof t){var n=arguments[0];this.init(n)}else"string"==typeof arguments[0]&&t.call(this,t.parse(arguments[0]));else if(2===arguments.length){var r=arguments[0],i=arguments[1];this.init(r,i)}},F={PI:{configurable:!0},TWO_PI:{configurable:!0},PI_2:{configurable:!0},E:{configurable:!0},NaN:{configurable:!0},EPS:{configurable:!0},SPLIT:{configurable:!0},MAX_PRINT_DIGITS:{configurable:!0},TEN:{configurable:!0},ONE:{configurable:!0},SCI_NOT_EXPONENT_CHAR:{configurable:!0},SCI_NOT_ZERO:{configurable:!0}};k.prototype.le=function(t){return(this._hi<t._hi||this._hi===t._hi)&&this._lo<=t._lo},k.prototype.extractSignificantDigits=function(t,e){var n=this.abs(),r=k.magnitude(n._hi),i=k.TEN.pow(r);(n=n.divide(i)).gt(k.TEN)?(n=n.divide(k.TEN),r+=1):n.lt(k.ONE)&&(n=n.multiply(k.TEN),r-=1);for(var o=r+1,a=new T,s=k.MAX_PRINT_DIGITS-1,u=0;u<=s;u++){t&&u===o&&a.append(".");var l=Math.trunc(n._hi);if(l<0)break;var c=!1,p=0;l>9?(c=!0,p="9"):p="0"+l,a.append(p),n=n.subtract(k.valueOf(l)).multiply(k.TEN),c&&n.selfAdd(k.TEN);var f=!0,h=k.magnitude(n._hi);if(h<0&&Math.abs(h)>=s-u&&(f=!1),!f)break}return e[0]=r,a.toString()},k.prototype.sqr=function(){return this.multiply(this)},k.prototype.doubleValue=function(){return this._hi+this._lo},k.prototype.subtract=function(){if(arguments[0]instanceof k){var t=arguments[0];return this.add(t.negate())}if("number"==typeof arguments[0]){var e=arguments[0];return this.add(-e)}},k.prototype.equals=function(){if(1===arguments.length){var t=arguments[0];return this._hi===t._hi&&this._lo===t._lo}},k.prototype.isZero=function(){return 0===this._hi&&0===this._lo},k.prototype.selfSubtract=function(){if(arguments[0]instanceof k){var t=arguments[0];return this.isNaN()?this:this.selfAdd(-t._hi,-t._lo)}if("number"==typeof arguments[0]){var e=arguments[0];return this.isNaN()?this:this.selfAdd(-e,0)}},k.prototype.getSpecialNumberString=function(){return this.isZero()?"0.0":this.isNaN()?"NaN ":null},k.prototype.min=function(t){return this.le(t)?this:t},k.prototype.selfDivide=function(){if(1===arguments.length){if(arguments[0]instanceof k){var t=arguments[0];return this.selfDivide(t._hi,t._lo)}if("number"==typeof arguments[0]){var e=arguments[0];return this.selfDivide(e,0)}}else if(2===arguments.length){var n=arguments[0],r=arguments[1],i=null,o=null,a=null,s=null,u=null,l=null,c=null,p=null;return u=this._hi/n,p=(i=(l=k.SPLIT*u)-(i=l-u))*(a=(p=k.SPLIT*n)-(a=p-n))-(c=u*n)+i*(s=n-a)+(o=u-i)*a+o*s,p=u+(l=(this._hi-c-p+this._lo-u*r)/n),this._hi=p,this._lo=u-p+l,this}},k.prototype.dump=function(){return"DD<"+this._hi+", "+this._lo+">"},k.prototype.divide=function(){if(arguments[0]instanceof k){var t=arguments[0],e=null,n=null,r=null,i=null,o=null,a=null,s=null,u=null;return n=(o=this._hi/t._hi)-(e=(a=k.SPLIT*o)-(e=a-o)),u=e*(r=(u=k.SPLIT*t._hi)-(r=u-t._hi))-(s=o*t._hi)+e*(i=t._hi-r)+n*r+n*i,a=(this._hi-s-u+this._lo-o*t._lo)/t._hi,new k(u=o+a,o-u+a)}if("number"==typeof arguments[0]){var l=arguments[0];return v.isNaN(l)?k.createNaN():k.copy(this).selfDivide(l,0)}},k.prototype.ge=function(t){return(this._hi>t._hi||this._hi===t._hi)&&this._lo>=t._lo},k.prototype.pow=function(t){if(0===t)return k.valueOf(1);var e=new k(this),n=k.valueOf(1),r=Math.abs(t);if(r>1)for(;r>0;)r%2==1&&n.selfMultiply(e),(r/=2)>0&&(e=e.sqr());else n=e;return t<0?n.reciprocal():n},k.prototype.ceil=function(){if(this.isNaN())return k.NaN;var t=Math.ceil(this._hi),e=0;return t===this._hi&&(e=Math.ceil(this._lo)),new k(t,e)},k.prototype.compareTo=function(t){var e=t;return this._hi<e._hi?-1:this._hi>e._hi?1:this._lo<e._lo?-1:this._lo>e._lo?1:0},k.prototype.rint=function(){return this.isNaN()?this:this.add(.5).floor()},k.prototype.setValue=function(){if(arguments[0]instanceof k){var t=arguments[0];return this.init(t),this}if("number"==typeof arguments[0]){var e=arguments[0];return this.init(e),this}},k.prototype.max=function(t){return this.ge(t)?this:t},k.prototype.sqrt=function(){if(this.isZero())return k.valueOf(0);if(this.isNegative())return k.NaN;var t=1/Math.sqrt(this._hi),e=this._hi*t,n=k.valueOf(e),r=this.subtract(n.sqr())._hi*(.5*t);return n.add(r)},k.prototype.selfAdd=function(){if(1===arguments.length){if(arguments[0]instanceof k){var t=arguments[0];return this.selfAdd(t._hi,t._lo)}if("number"==typeof arguments[0]){var e=arguments[0],n=null,r=null,i=null,o=null,a=null,s=null;return o=(i=this._hi+e)-(a=i-this._hi),r=(s=(o=e-a+(this._hi-o))+this._lo)+(i-(n=i+s)),this._hi=n+r,this._lo=r+(n-this._hi),this}}else if(2===arguments.length){var u=arguments[0],l=arguments[1],c=null,p=null,f=null,h=null,d=null,g=null,y=null;h=this._hi+u,p=this._lo+l,d=h-(g=h-this._hi),f=p-(y=p-this._lo);var m=(c=h+(g=(d=u-g+(this._hi-d))+p))+(g=(f=l-y+(this._lo-f))+(g+(h-c))),_=g+(c-m);return this._hi=m,this._lo=_,this}},k.prototype.selfMultiply=function(){if(1===arguments.length){if(arguments[0]instanceof k){var t=arguments[0];return this.selfMultiply(t._hi,t._lo)}if("number"==typeof arguments[0]){var e=arguments[0];return this.selfMultiply(e,0)}}else if(2===arguments.length){var n=arguments[0],r=arguments[1],i=null,o=null,a=null,s=null,u=null,l=null;i=(u=k.SPLIT*this._hi)-this._hi,l=k.SPLIT*n,i=u-i,o=this._hi-i,a=l-n;var c=(u=this._hi*n)+(l=i*(a=l-a)-u+i*(s=n-a)+o*a+o*s+(this._hi*r+this._lo*n)),p=l+(i=u-c);return this._hi=c,this._lo=p,this}},k.prototype.selfSqr=function(){return this.selfMultiply(this)},k.prototype.floor=function(){if(this.isNaN())return k.NaN;var t=Math.floor(this._hi),e=0;return t===this._hi&&(e=Math.floor(this._lo)),new k(t,e)},k.prototype.negate=function(){return this.isNaN()?this:new k(-this._hi,-this._lo)},k.prototype.clone=function(){},k.prototype.multiply=function(){if(arguments[0]instanceof k){var t=arguments[0];return t.isNaN()?k.createNaN():k.copy(this).selfMultiply(t)}if("number"==typeof arguments[0]){var e=arguments[0];return v.isNaN(e)?k.createNaN():k.copy(this).selfMultiply(e,0)}},k.prototype.isNaN=function(){return v.isNaN(this._hi)},k.prototype.intValue=function(){return Math.trunc(this._hi)},k.prototype.toString=function(){var t=k.magnitude(this._hi);return t>=-3&&t<=20?this.toStandardNotation():this.toSciNotation()},k.prototype.toStandardNotation=function(){var t=this.getSpecialNumberString();if(null!==t)return t;var e=new Array(1).fill(null),n=this.extractSignificantDigits(!0,e),r=e[0]+1,i=n;if("."===n.charAt(0))i="0"+n;else if(r<0)i="0."+k.stringOfChar("0",-r)+n;else if(-1===n.indexOf(".")){var o=r-n.length;i=n+k.stringOfChar("0",o)+".0"}return this.isNegative()?"-"+i:i},k.prototype.reciprocal=function(){var t=null,e=null,n=null,r=null,i=null,o=null,a=null,s=null;e=(i=1/this._hi)-(t=(o=k.SPLIT*i)-(t=o-i)),n=(s=k.SPLIT*this._hi)-this._hi;var u=i+(o=(1-(a=i*this._hi)-(s=t*(n=s-n)-a+t*(r=this._hi-n)+e*n+e*r)-i*this._lo)/this._hi);return new k(u,i-u+o)},k.prototype.toSciNotation=function(){if(this.isZero())return k.SCI_NOT_ZERO;var t=this.getSpecialNumberString();if(null!==t)return t;var e=new Array(1).fill(null),n=this.extractSignificantDigits(!1,e),r=k.SCI_NOT_EXPONENT_CHAR+e[0];if("0"===n.charAt(0))throw new Error("Found leading zero: "+n);var i="";n.length>1&&(i=n.substring(1));var o=n.charAt(0)+"."+i;return this.isNegative()?"-"+o+r:o+r},k.prototype.abs=function(){return this.isNaN()?k.NaN:this.isNegative()?this.negate():new k(this)},k.prototype.isPositive=function(){return(this._hi>0||0===this._hi)&&this._lo>0},k.prototype.lt=function(t){return(this._hi<t._hi||this._hi===t._hi)&&this._lo<t._lo},k.prototype.add=function(){if(arguments[0]instanceof k){var t=arguments[0];return k.copy(this).selfAdd(t)}if("number"==typeof arguments[0]){var e=arguments[0];return k.copy(this).selfAdd(e)}},k.prototype.init=function(){if(1===arguments.length){if("number"==typeof arguments[0]){var t=arguments[0];this._hi=t,this._lo=0}else if(arguments[0]instanceof k){var e=arguments[0];this._hi=e._hi,this._lo=e._lo}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this._hi=n,this._lo=r}},k.prototype.gt=function(t){return(this._hi>t._hi||this._hi===t._hi)&&this._lo>t._lo},k.prototype.isNegative=function(){return(this._hi<0||0===this._hi)&&this._lo<0},k.prototype.trunc=function(){return this.isNaN()?k.NaN:this.isPositive()?this.floor():this.ceil()},k.prototype.signum=function(){return this._hi>0?1:this._hi<0?-1:this._lo>0?1:this._lo<0?-1:0},k.prototype.interfaces_=function(){return[e,x,w]},k.prototype.getClass=function(){return k},k.sqr=function(t){return k.valueOf(t).selfMultiply(t)},k.valueOf=function(){if("string"==typeof arguments[0]){var t=arguments[0];return k.parse(t)}if("number"==typeof arguments[0])return new k(arguments[0])},k.sqrt=function(t){return k.valueOf(t).sqrt()},k.parse=function(t){for(var e=0,n=t.length;D.isWhitespace(t.charAt(e));)e++;var r=!1;if(e<n){var i=t.charAt(e);"-"!==i&&"+"!==i||(e++,"-"===i&&(r=!0))}for(var o=new k,a=0,s=0,u=0;!(e>=n);){var l=t.charAt(e);if(e++,D.isDigit(l)){var c=l-"0";o.selfMultiply(k.TEN),o.selfAdd(c),a++}else{if("."!==l){if("e"===l||"E"===l){var p=t.substring(e);try{u=A.parseInt(p)}catch(e){throw e instanceof Error?new Error("Invalid exponent "+p+" in string "+t):e}break}throw new Error("Unexpected character '"+l+"' at position "+e+" in string "+t)}s=a}}var f=o,h=a-s-u;if(0===h)f=o;else if(h>0){var d=k.TEN.pow(h);f=o.divide(d)}else if(h<0){var g=k.TEN.pow(-h);f=o.multiply(g)}return r?f.negate():f},k.createNaN=function(){return new k(v.NaN,v.NaN)},k.copy=function(t){return new k(t)},k.magnitude=function(t){var e=Math.abs(t),n=Math.log(e)/Math.log(10),r=Math.trunc(Math.floor(n));return 10*Math.pow(10,r)<=e&&(r+=1),r},k.stringOfChar=function(t,e){for(var n=new T,r=0;r<e;r++)n.append(t);return n.toString()},F.PI.get=function(){return new k(3.141592653589793,12246467991473532e-32)},F.TWO_PI.get=function(){return new k(6.283185307179586,24492935982947064e-32)},F.PI_2.get=function(){return new k(1.5707963267948966,6123233995736766e-32)},F.E.get=function(){return new k(2.718281828459045,14456468917292502e-32)},F.NaN.get=function(){return new k(v.NaN,v.NaN)},F.EPS.get=function(){return 123259516440783e-46},F.SPLIT.get=function(){return 134217729},F.MAX_PRINT_DIGITS.get=function(){return 32},F.TEN.get=function(){return k.valueOf(10)},F.ONE.get=function(){return k.valueOf(1)},F.SCI_NOT_EXPONENT_CHAR.get=function(){return"E"},F.SCI_NOT_ZERO.get=function(){return"0.0E0"},Object.defineProperties(k,F);var j=function(){},z={DP_SAFE_EPSILON:{configurable:!0}};j.prototype.interfaces_=function(){return[]},j.prototype.getClass=function(){return j},j.orientationIndex=function(t,e,n){var r=j.orientationIndexFilter(t,e,n);if(r<=1)return r;var i=k.valueOf(e.x).selfAdd(-t.x),o=k.valueOf(e.y).selfAdd(-t.y),a=k.valueOf(n.x).selfAdd(-e.x),s=k.valueOf(n.y).selfAdd(-e.y);return i.selfMultiply(s).selfSubtract(o.selfMultiply(a)).signum()},j.signOfDet2x2=function(t,e,n,r){return t.multiply(r).selfSubtract(e.multiply(n)).signum()},j.intersection=function(t,e,n,r){var i=k.valueOf(r.y).selfSubtract(n.y).selfMultiply(k.valueOf(e.x).selfSubtract(t.x)),o=k.valueOf(r.x).selfSubtract(n.x).selfMultiply(k.valueOf(e.y).selfSubtract(t.y)),a=i.subtract(o),s=k.valueOf(r.x).selfSubtract(n.x).selfMultiply(k.valueOf(t.y).selfSubtract(n.y)),u=k.valueOf(r.y).selfSubtract(n.y).selfMultiply(k.valueOf(t.x).selfSubtract(n.x)),l=s.subtract(u).selfDivide(a).doubleValue(),c=k.valueOf(t.x).selfAdd(k.valueOf(e.x).selfSubtract(t.x).selfMultiply(l)).doubleValue(),p=k.valueOf(e.x).selfSubtract(t.x).selfMultiply(k.valueOf(t.y).selfSubtract(n.y)),f=k.valueOf(e.y).selfSubtract(t.y).selfMultiply(k.valueOf(t.x).selfSubtract(n.x)),h=p.subtract(f).selfDivide(a).doubleValue(),d=k.valueOf(n.y).selfAdd(k.valueOf(r.y).selfSubtract(n.y).selfMultiply(h)).doubleValue();return new N(c,d)},j.orientationIndexFilter=function(t,e,n){var r=null,i=(t.x-n.x)*(e.y-n.y),o=(t.y-n.y)*(e.x-n.x),a=i-o;if(i>0){if(o<=0)return j.signum(a);r=i+o}else{if(!(i<0))return j.signum(a);if(o>=0)return j.signum(a);r=-i-o}var s=j.DP_SAFE_EPSILON*r;return a>=s||-a>=s?j.signum(a):2},j.signum=function(t){return t>0?1:t<0?-1:0},z.DP_SAFE_EPSILON.get=function(){return 1e-15},Object.defineProperties(j,z);var G=function(){},B={X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0},M:{configurable:!0}};B.X.get=function(){return 0},B.Y.get=function(){return 1},B.Z.get=function(){return 2},B.M.get=function(){return 3},G.prototype.setOrdinate=function(t,e,n){},G.prototype.size=function(){},G.prototype.getOrdinate=function(t,e){},G.prototype.getCoordinate=function(){},G.prototype.getCoordinateCopy=function(t){},G.prototype.getDimension=function(){},G.prototype.getX=function(t){},G.prototype.clone=function(){},G.prototype.expandEnvelope=function(t){},G.prototype.copy=function(){},G.prototype.getY=function(t){},G.prototype.toCoordinateArray=function(){},G.prototype.interfaces_=function(){return[w]},G.prototype.getClass=function(){return G},Object.defineProperties(G,B);var q=function(){},U=function(t){function e(){t.call(this,"Projective point not representable on the Cartesian plane.")}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(q),V=function(){};V.arraycopy=function(t,e,n,r,i){for(var o=0,a=e;a<e+i;a++)n[r+o]=t[a],o++},V.getProperty=function(t){return{"line.separator":"\n"}[t]};var Y=function t(){if(this.x=null,this.y=null,this.w=null,0===arguments.length)this.x=0,this.y=0,this.w=1;else if(1===arguments.length){var e=arguments[0];this.x=e.x,this.y=e.y,this.w=1}else if(2===arguments.length){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var n=arguments[0],r=arguments[1];this.x=n,this.y=r,this.w=1}else if(arguments[0]instanceof t&&arguments[1]instanceof t){var i=arguments[0],o=arguments[1];this.x=i.y*o.w-o.y*i.w,this.y=o.x*i.w-i.x*o.w,this.w=i.x*o.y-o.x*i.y}else if(arguments[0]instanceof N&&arguments[1]instanceof N){var a=arguments[0],s=arguments[1];this.x=a.y-s.y,this.y=s.x-a.x,this.w=a.x*s.y-s.x*a.y}}else if(3===arguments.length){var u=arguments[0],l=arguments[1],c=arguments[2];this.x=u,this.y=l,this.w=c}else if(4===arguments.length){var p=arguments[0],f=arguments[1],h=arguments[2],d=arguments[3],g=p.y-f.y,y=f.x-p.x,m=p.x*f.y-f.x*p.y,_=h.y-d.y,v=d.x-h.x,b=h.x*d.y-d.x*h.y;this.x=y*b-v*m,this.y=_*m-g*b,this.w=g*v-_*y}};Y.prototype.getY=function(){var t=this.y/this.w;if(v.isNaN(t)||v.isInfinite(t))throw new U;return t},Y.prototype.getX=function(){var t=this.x/this.w;if(v.isNaN(t)||v.isInfinite(t))throw new U;return t},Y.prototype.getCoordinate=function(){var t=new N;return t.x=this.getX(),t.y=this.getY(),t},Y.prototype.interfaces_=function(){return[]},Y.prototype.getClass=function(){return Y},Y.intersection=function(t,e,n,r){var i=t.y-e.y,o=e.x-t.x,a=t.x*e.y-e.x*t.y,s=n.y-r.y,u=r.x-n.x,l=n.x*r.y-r.x*n.y,c=i*u-s*o,p=(o*l-u*a)/c,f=(s*a-i*l)/c;if(v.isNaN(p)||v.isInfinite(p)||v.isNaN(f)||v.isInfinite(f))throw new U;return new N(p,f)};var X=function t(){if(this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,0===arguments.length)this.init();else if(1===arguments.length){if(arguments[0]instanceof N){var e=arguments[0];this.init(e.x,e.x,e.y,e.y)}else if(arguments[0]instanceof t){var n=arguments[0];this.init(n)}}else if(2===arguments.length){var r=arguments[0],i=arguments[1];this.init(r.x,i.x,r.y,i.y)}else if(4===arguments.length){var o=arguments[0],a=arguments[1],s=arguments[2],u=arguments[3];this.init(o,a,s,u)}},H={serialVersionUID:{configurable:!0}};X.prototype.getArea=function(){return this.getWidth()*this.getHeight()},X.prototype.equals=function(t){if(!(t instanceof X))return!1;var e=t;return this.isNull()?e.isNull():this._maxx===e.getMaxX()&&this._maxy===e.getMaxY()&&this._minx===e.getMinX()&&this._miny===e.getMinY()},X.prototype.intersection=function(t){if(this.isNull()||t.isNull()||!this.intersects(t))return new X;var e=this._minx>t._minx?this._minx:t._minx,n=this._miny>t._miny?this._miny:t._miny,r=this._maxx<t._maxx?this._maxx:t._maxx,i=this._maxy<t._maxy?this._maxy:t._maxy;return new X(e,r,n,i)},X.prototype.isNull=function(){return this._maxx<this._minx},X.prototype.getMaxX=function(){return this._maxx},X.prototype.covers=function(){if(1===arguments.length){if(arguments[0]instanceof N){var t=arguments[0];return this.covers(t.x,t.y)}if(arguments[0]instanceof X){var e=arguments[0];return!this.isNull()&&!e.isNull()&&e.getMinX()>=this._minx&&e.getMaxX()<=this._maxx&&e.getMinY()>=this._miny&&e.getMaxY()<=this._maxy}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];return!this.isNull()&&n>=this._minx&&n<=this._maxx&&r>=this._miny&&r<=this._maxy}},X.prototype.intersects=function(){if(1===arguments.length){if(arguments[0]instanceof X){var t=arguments[0];return!this.isNull()&&!t.isNull()&&!(t._minx>this._maxx||t._maxx<this._minx||t._miny>this._maxy||t._maxy<this._miny)}if(arguments[0]instanceof N){var e=arguments[0];return this.intersects(e.x,e.y)}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];return!this.isNull()&&!(n>this._maxx||n<this._minx||r>this._maxy||r<this._miny)}},X.prototype.getMinY=function(){return this._miny},X.prototype.getMinX=function(){return this._minx},X.prototype.expandToInclude=function(){if(1===arguments.length){if(arguments[0]instanceof N){var t=arguments[0];this.expandToInclude(t.x,t.y)}else if(arguments[0]instanceof X){var e=arguments[0];if(e.isNull())return null;this.isNull()?(this._minx=e.getMinX(),this._maxx=e.getMaxX(),this._miny=e.getMinY(),this._maxy=e.getMaxY()):(e._minx<this._minx&&(this._minx=e._minx),e._maxx>this._maxx&&(this._maxx=e._maxx),e._miny<this._miny&&(this._miny=e._miny),e._maxy>this._maxy&&(this._maxy=e._maxy))}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this.isNull()?(this._minx=n,this._maxx=n,this._miny=r,this._maxy=r):(n<this._minx&&(this._minx=n),n>this._maxx&&(this._maxx=n),r<this._miny&&(this._miny=r),r>this._maxy&&(this._maxy=r))}},X.prototype.minExtent=function(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return t<e?t:e},X.prototype.getWidth=function(){return this.isNull()?0:this._maxx-this._minx},X.prototype.compareTo=function(t){var e=t;return this.isNull()?e.isNull()?0:-1:e.isNull()?1:this._minx<e._minx?-1:this._minx>e._minx?1:this._miny<e._miny?-1:this._miny>e._miny?1:this._maxx<e._maxx?-1:this._maxx>e._maxx?1:this._maxy<e._maxy?-1:this._maxy>e._maxy?1:0},X.prototype.translate=function(t,e){if(this.isNull())return null;this.init(this.getMinX()+t,this.getMaxX()+t,this.getMinY()+e,this.getMaxY()+e)},X.prototype.toString=function(){return"Env["+this._minx+" : "+this._maxx+", "+this._miny+" : "+this._maxy+"]"},X.prototype.setToNull=function(){this._minx=0,this._maxx=-1,this._miny=0,this._maxy=-1},X.prototype.getHeight=function(){return this.isNull()?0:this._maxy-this._miny},X.prototype.maxExtent=function(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return t>e?t:e},X.prototype.expandBy=function(){if(1===arguments.length){var t=arguments[0];this.expandBy(t,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this.isNull())return null;this._minx-=e,this._maxx+=e,this._miny-=n,this._maxy+=n,(this._minx>this._maxx||this._miny>this._maxy)&&this.setToNull()}},X.prototype.contains=function(){if(1===arguments.length){if(arguments[0]instanceof X){var t=arguments[0];return this.covers(t)}if(arguments[0]instanceof N){var e=arguments[0];return this.covers(e)}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];return this.covers(n,r)}},X.prototype.centre=function(){return this.isNull()?null:new N((this.getMinX()+this.getMaxX())/2,(this.getMinY()+this.getMaxY())/2)},X.prototype.init=function(){if(0===arguments.length)this.setToNull();else if(1===arguments.length){if(arguments[0]instanceof N){var t=arguments[0];this.init(t.x,t.x,t.y,t.y)}else if(arguments[0]instanceof X){var e=arguments[0];this._minx=e._minx,this._maxx=e._maxx,this._miny=e._miny,this._maxy=e._maxy}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this.init(n.x,r.x,n.y,r.y)}else if(4===arguments.length){var i=arguments[0],o=arguments[1],a=arguments[2],s=arguments[3];i<o?(this._minx=i,this._maxx=o):(this._minx=o,this._maxx=i),a<s?(this._miny=a,this._maxy=s):(this._miny=s,this._maxy=a)}},X.prototype.getMaxY=function(){return this._maxy},X.prototype.distance=function(t){if(this.intersects(t))return 0;var e=0;this._maxx<t._minx?e=t._minx-this._maxx:this._minx>t._maxx&&(e=this._minx-t._maxx);var n=0;return this._maxy<t._miny?n=t._miny-this._maxy:this._miny>t._maxy&&(n=this._miny-t._maxy),0===e?n:0===n?e:Math.sqrt(e*e+n*n)},X.prototype.hashCode=function(){var t=17;return 37*(t=37*(t=37*(t=37*t+N.hashCode(this._minx))+N.hashCode(this._maxx))+N.hashCode(this._miny))+N.hashCode(this._maxy)},X.prototype.interfaces_=function(){return[x,e]},X.prototype.getClass=function(){return X},X.intersects=function(){if(3===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2];return n.x>=(t.x<e.x?t.x:e.x)&&n.x<=(t.x>e.x?t.x:e.x)&&n.y>=(t.y<e.y?t.y:e.y)&&n.y<=(t.y>e.y?t.y:e.y)}if(4===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2],a=arguments[3],s=Math.min(o.x,a.x),u=Math.max(o.x,a.x),l=Math.min(r.x,i.x),c=Math.max(r.x,i.x);return!(l>u||c<s||(s=Math.min(o.y,a.y),u=Math.max(o.y,a.y),l=Math.min(r.y,i.y),c=Math.max(r.y,i.y),l>u||c<s))}},H.serialVersionUID.get=function(){return 0x51845cd552189800},Object.defineProperties(X,H);var W={typeStr:/^\s*(\w+)\s*\(\s*(.*)\s*\)\s*$/,emptyTypeStr:/^\s*(\w+)\s*EMPTY\s*$/,spaces:/\s+/,parenComma:/\)\s*,\s*\(/,doubleParenComma:/\)\s*\)\s*,\s*\(\s*\(/,trimParens:/^\s*\(?(.*?)\)?\s*$/},$=function(t){this.geometryFactory=t||new me};$.prototype.read=function(t){var e,n,r;t=t.replace(/[\n\r]/g," ");var i=W.typeStr.exec(t);if(-1!==t.search("EMPTY")&&((i=W.emptyTypeStr.exec(t))[2]=void 0),i&&(n=i[1].toLowerCase(),r=i[2],J[n]&&(e=J[n].apply(this,[r]))),void 0===e)throw new Error("Could not parse WKT "+t);return e},$.prototype.write=function(t){return this.extractGeometry(t)},$.prototype.extractGeometry=function(t){var e=t.getGeometryType().toLowerCase();if(!Z[e])return null;var n=e.toUpperCase();return t.isEmpty()?n+" EMPTY":n+"("+Z[e].apply(this,[t])+")"};var Z={coordinate:function(t){return t.x+" "+t.y},point:function(t){return Z.coordinate.call(this,t._coordinates._coordinates[0])},multipoint:function(t){for(var e=[],n=0,r=t._geometries.length;n<r;++n)e.push("("+Z.point.apply(this,[t._geometries[n]])+")");return e.join(",")},linestring:function(t){for(var e=[],n=0,r=t._points._coordinates.length;n<r;++n)e.push(Z.coordinate.apply(this,[t._points._coordinates[n]]));return e.join(",")},linearring:function(t){for(var e=[],n=0,r=t._points._coordinates.length;n<r;++n)e.push(Z.coordinate.apply(this,[t._points._coordinates[n]]));return e.join(",")},multilinestring:function(t){for(var e=[],n=0,r=t._geometries.length;n<r;++n)e.push("("+Z.linestring.apply(this,[t._geometries[n]])+")");return e.join(",")},polygon:function(t){var e=[];e.push("("+Z.linestring.apply(this,[t._shell])+")");for(var n=0,r=t._holes.length;n<r;++n)e.push("("+Z.linestring.apply(this,[t._holes[n]])+")");return e.join(",")},multipolygon:function(t){for(var e=[],n=0,r=t._geometries.length;n<r;++n)e.push("("+Z.polygon.apply(this,[t._geometries[n]])+")");return e.join(",")},geometrycollection:function(t){for(var e=[],n=0,r=t._geometries.length;n<r;++n)e.push(this.extractGeometry(t._geometries[n]));return e.join(",")}},J={point:function(t){if(void 0===t)return this.geometryFactory.createPoint();var e=t.trim().split(W.spaces);return this.geometryFactory.createPoint(new N(Number.parseFloat(e[0]),Number.parseFloat(e[1])))},multipoint:function(t){if(void 0===t)return this.geometryFactory.createMultiPoint();for(var e,n=t.trim().split(","),r=[],i=0,o=n.length;i<o;++i)e=n[i].replace(W.trimParens,"$1"),r.push(J.point.apply(this,[e]));return this.geometryFactory.createMultiPoint(r)},linestring:function(t){if(void 0===t)return this.geometryFactory.createLineString();for(var e,n=t.trim().split(","),r=[],i=0,o=n.length;i<o;++i)e=n[i].trim().split(W.spaces),r.push(new N(Number.parseFloat(e[0]),Number.parseFloat(e[1])));return this.geometryFactory.createLineString(r)},linearring:function(t){if(void 0===t)return this.geometryFactory.createLinearRing();for(var e,n=t.trim().split(","),r=[],i=0,o=n.length;i<o;++i)e=n[i].trim().split(W.spaces),r.push(new N(Number.parseFloat(e[0]),Number.parseFloat(e[1])));return this.geometryFactory.createLinearRing(r)},multilinestring:function(t){if(void 0===t)return this.geometryFactory.createMultiLineString();for(var e,n=t.trim().split(W.parenComma),r=[],i=0,o=n.length;i<o;++i)e=n[i].replace(W.trimParens,"$1"),r.push(J.linestring.apply(this,[e]));return this.geometryFactory.createMultiLineString(r)},polygon:function(t){if(void 0===t)return this.geometryFactory.createPolygon();for(var e,n,r,i,o=t.trim().split(W.parenComma),a=[],s=0,u=o.length;s<u;++s)e=o[s].replace(W.trimParens,"$1"),n=J.linestring.apply(this,[e]),r=this.geometryFactory.createLinearRing(n._points),0===s?i=r:a.push(r);return this.geometryFactory.createPolygon(i,a)},multipolygon:function(t){if(void 0===t)return this.geometryFactory.createMultiPolygon();for(var e,n=t.trim().split(W.doubleParenComma),r=[],i=0,o=n.length;i<o;++i)e=n[i].replace(W.trimParens,"$1"),r.push(J.polygon.apply(this,[e]));return this.geometryFactory.createMultiPolygon(r)},geometrycollection:function(t){if(void 0===t)return this.geometryFactory.createGeometryCollection();for(var e=(t=t.replace(/,\s*([A-Za-z])/g,"|$1")).trim().split("|"),n=[],r=0,i=e.length;r<i;++r)n.push(this.read(e[r]));return this.geometryFactory.createGeometryCollection(n)}},K=function(t){this.parser=new $(t)};K.prototype.write=function(t){return this.parser.write(t)},K.toLineString=function(t,e){if(2!==arguments.length)throw new Error("Not implemented");return"LINESTRING ( "+t.x+" "+t.y+", "+e.x+" "+e.y+" )"};var Q=function(t){function e(e){t.call(this,e),this.name="RuntimeException",this.message=e,this.stack=(new t).stack}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Error),tt=function(t){function e(){if(t.call(this),0===arguments.length)t.call(this);else if(1===arguments.length){var e=arguments[0];t.call(this,e)}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Q),et=function(){};et.prototype.interfaces_=function(){return[]},et.prototype.getClass=function(){return et},et.shouldNeverReachHere=function(){if(0===arguments.length)et.shouldNeverReachHere(null);else if(1===arguments.length){var t=arguments[0];throw new tt("Should never reach here"+(null!==t?": "+t:""))}},et.isTrue=function(){var t,e;if(1===arguments.length)t=arguments[0],et.isTrue(t,null);else if(2===arguments.length&&(e=arguments[1],!(t=arguments[0])))throw null===e?new tt:new tt(e)},et.equals=function(){var t,e,n;if(2===arguments.length)t=arguments[0],e=arguments[1],et.equals(t,e,null);else if(3===arguments.length&&(t=arguments[0],n=arguments[2],!(e=arguments[1]).equals(t)))throw new tt("Expected "+t+" but encountered "+e+(null!==n?": "+n:""))};var nt=function(){this._result=null,this._inputLines=Array(2).fill().map((function(){return Array(2)})),this._intPt=new Array(2).fill(null),this._intLineIndex=null,this._isProper=null,this._pa=null,this._pb=null,this._precisionModel=null,this._intPt[0]=new N,this._intPt[1]=new N,this._pa=this._intPt[0],this._pb=this._intPt[1],this._result=0},rt={DONT_INTERSECT:{configurable:!0},DO_INTERSECT:{configurable:!0},COLLINEAR:{configurable:!0},NO_INTERSECTION:{configurable:!0},POINT_INTERSECTION:{configurable:!0},COLLINEAR_INTERSECTION:{configurable:!0}};nt.prototype.getIndexAlongSegment=function(t,e){return this.computeIntLineIndex(),this._intLineIndex[t][e]},nt.prototype.getTopologySummary=function(){var t=new T;return this.isEndPoint()&&t.append(" endpoint"),this._isProper&&t.append(" proper"),this.isCollinear()&&t.append(" collinear"),t.toString()},nt.prototype.computeIntersection=function(t,e,n,r){this._inputLines[0][0]=t,this._inputLines[0][1]=e,this._inputLines[1][0]=n,this._inputLines[1][1]=r,this._result=this.computeIntersect(t,e,n,r)},nt.prototype.getIntersectionNum=function(){return this._result},nt.prototype.computeIntLineIndex=function(){if(0===arguments.length)null===this._intLineIndex&&(this._intLineIndex=Array(2).fill().map((function(){return Array(2)})),this.computeIntLineIndex(0),this.computeIntLineIndex(1));else if(1===arguments.length){var t=arguments[0];this.getEdgeDistance(t,0)>this.getEdgeDistance(t,1)?(this._intLineIndex[t][0]=0,this._intLineIndex[t][1]=1):(this._intLineIndex[t][0]=1,this._intLineIndex[t][1]=0)}},nt.prototype.isProper=function(){return this.hasIntersection()&&this._isProper},nt.prototype.setPrecisionModel=function(t){this._precisionModel=t},nt.prototype.isInteriorIntersection=function(){if(0===arguments.length)return!!this.isInteriorIntersection(0)||!!this.isInteriorIntersection(1);if(1===arguments.length){for(var t=arguments[0],e=0;e<this._result;e++)if(!this._intPt[e].equals2D(this._inputLines[t][0])&&!this._intPt[e].equals2D(this._inputLines[t][1]))return!0;return!1}},nt.prototype.getIntersection=function(t){return this._intPt[t]},nt.prototype.isEndPoint=function(){return this.hasIntersection()&&!this._isProper},nt.prototype.hasIntersection=function(){return this._result!==nt.NO_INTERSECTION},nt.prototype.getEdgeDistance=function(t,e){return nt.computeEdgeDistance(this._intPt[e],this._inputLines[t][0],this._inputLines[t][1])},nt.prototype.isCollinear=function(){return this._result===nt.COLLINEAR_INTERSECTION},nt.prototype.toString=function(){return K.toLineString(this._inputLines[0][0],this._inputLines[0][1])+" - "+K.toLineString(this._inputLines[1][0],this._inputLines[1][1])+this.getTopologySummary()},nt.prototype.getEndpoint=function(t,e){return this._inputLines[t][e]},nt.prototype.isIntersection=function(t){for(var e=0;e<this._result;e++)if(this._intPt[e].equals2D(t))return!0;return!1},nt.prototype.getIntersectionAlongSegment=function(t,e){return this.computeIntLineIndex(),this._intPt[this._intLineIndex[t][e]]},nt.prototype.interfaces_=function(){return[]},nt.prototype.getClass=function(){return nt},nt.computeEdgeDistance=function(t,e,n){var r=Math.abs(n.x-e.x),i=Math.abs(n.y-e.y),o=-1;if(t.equals(e))o=0;else if(t.equals(n))o=r>i?r:i;else{var a=Math.abs(t.x-e.x),s=Math.abs(t.y-e.y);0!==(o=r>i?a:s)||t.equals(e)||(o=Math.max(a,s))}return et.isTrue(!(0===o&&!t.equals(e)),"Bad distance calculation"),o},nt.nonRobustComputeEdgeDistance=function(t,e,n){var r=t.x-e.x,i=t.y-e.y,o=Math.sqrt(r*r+i*i);return et.isTrue(!(0===o&&!t.equals(e)),"Invalid distance calculation"),o},rt.DONT_INTERSECT.get=function(){return 0},rt.DO_INTERSECT.get=function(){return 1},rt.COLLINEAR.get=function(){return 2},rt.NO_INTERSECTION.get=function(){return 0},rt.POINT_INTERSECTION.get=function(){return 1},rt.COLLINEAR_INTERSECTION.get=function(){return 2},Object.defineProperties(nt,rt);var it=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.isInSegmentEnvelopes=function(t){var e=new X(this._inputLines[0][0],this._inputLines[0][1]),n=new X(this._inputLines[1][0],this._inputLines[1][1]);return e.contains(t)&&n.contains(t)},e.prototype.computeIntersection=function(){if(3!==arguments.length)return t.prototype.computeIntersection.apply(this,arguments);var e=arguments[0],n=arguments[1],r=arguments[2];if(this._isProper=!1,X.intersects(n,r,e)&&0===st.orientationIndex(n,r,e)&&0===st.orientationIndex(r,n,e))return this._isProper=!0,(e.equals(n)||e.equals(r))&&(this._isProper=!1),this._result=t.POINT_INTERSECTION,null;this._result=t.NO_INTERSECTION},e.prototype.normalizeToMinimum=function(t,e,n,r,i){i.x=this.smallestInAbsValue(t.x,e.x,n.x,r.x),i.y=this.smallestInAbsValue(t.y,e.y,n.y,r.y),t.x-=i.x,t.y-=i.y,e.x-=i.x,e.y-=i.y,n.x-=i.x,n.y-=i.y,r.x-=i.x,r.y-=i.y},e.prototype.safeHCoordinateIntersection=function(t,n,r,i){var o=null;try{o=Y.intersection(t,n,r,i)}catch(a){if(!(a instanceof U))throw a;o=e.nearestEndpoint(t,n,r,i)}return o},e.prototype.intersection=function(t,n,r,i){var o=this.intersectionWithNormalization(t,n,r,i);return this.isInSegmentEnvelopes(o)||(o=new N(e.nearestEndpoint(t,n,r,i))),null!==this._precisionModel&&this._precisionModel.makePrecise(o),o},e.prototype.smallestInAbsValue=function(t,e,n,r){var i=t,o=Math.abs(i);return Math.abs(e)<o&&(i=e,o=Math.abs(e)),Math.abs(n)<o&&(i=n,o=Math.abs(n)),Math.abs(r)<o&&(i=r),i},e.prototype.checkDD=function(t,e,n,r,i){var o=j.intersection(t,e,n,r),a=this.isInSegmentEnvelopes(o);V.out.println("DD in env = "+a+"  --------------------- "+o),i.distance(o)>1e-4&&V.out.println("Distance = "+i.distance(o))},e.prototype.intersectionWithNormalization=function(t,e,n,r){var i=new N(t),o=new N(e),a=new N(n),s=new N(r),u=new N;this.normalizeToEnvCentre(i,o,a,s,u);var l=this.safeHCoordinateIntersection(i,o,a,s);return l.x+=u.x,l.y+=u.y,l},e.prototype.computeCollinearIntersection=function(e,n,r,i){var o=X.intersects(e,n,r),a=X.intersects(e,n,i),s=X.intersects(r,i,e),u=X.intersects(r,i,n);return o&&a?(this._intPt[0]=r,this._intPt[1]=i,t.COLLINEAR_INTERSECTION):s&&u?(this._intPt[0]=e,this._intPt[1]=n,t.COLLINEAR_INTERSECTION):o&&s?(this._intPt[0]=r,this._intPt[1]=e,!r.equals(e)||a||u?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):o&&u?(this._intPt[0]=r,this._intPt[1]=n,!r.equals(n)||a||s?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):a&&s?(this._intPt[0]=i,this._intPt[1]=e,!i.equals(e)||o||u?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):a&&u?(this._intPt[0]=i,this._intPt[1]=n,!i.equals(n)||o||s?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):t.NO_INTERSECTION},e.prototype.normalizeToEnvCentre=function(t,e,n,r,i){var o=t.x<e.x?t.x:e.x,a=t.y<e.y?t.y:e.y,s=t.x>e.x?t.x:e.x,u=t.y>e.y?t.y:e.y,l=n.x<r.x?n.x:r.x,c=n.y<r.y?n.y:r.y,p=n.x>r.x?n.x:r.x,f=n.y>r.y?n.y:r.y,h=((o>l?o:l)+(s<p?s:p))/2,d=((a>c?a:c)+(u<f?u:f))/2;i.x=h,i.y=d,t.x-=i.x,t.y-=i.y,e.x-=i.x,e.y-=i.y,n.x-=i.x,n.y-=i.y,r.x-=i.x,r.y-=i.y},e.prototype.computeIntersect=function(e,n,r,i){if(this._isProper=!1,!X.intersects(e,n,r,i))return t.NO_INTERSECTION;var o=st.orientationIndex(e,n,r),a=st.orientationIndex(e,n,i);if(o>0&&a>0||o<0&&a<0)return t.NO_INTERSECTION;var s=st.orientationIndex(r,i,e),u=st.orientationIndex(r,i,n);return s>0&&u>0||s<0&&u<0?t.NO_INTERSECTION:0===o&&0===a&&0===s&&0===u?this.computeCollinearIntersection(e,n,r,i):(0===o||0===a||0===s||0===u?(this._isProper=!1,e.equals2D(r)||e.equals2D(i)?this._intPt[0]=e:n.equals2D(r)||n.equals2D(i)?this._intPt[0]=n:0===o?this._intPt[0]=new N(r):0===a?this._intPt[0]=new N(i):0===s?this._intPt[0]=new N(e):0===u&&(this._intPt[0]=new N(n))):(this._isProper=!0,this._intPt[0]=this.intersection(e,n,r,i)),t.POINT_INTERSECTION)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.nearestEndpoint=function(t,e,n,r){var i=t,o=st.distancePointLine(t,n,r),a=st.distancePointLine(e,n,r);return a<o&&(o=a,i=e),(a=st.distancePointLine(n,t,e))<o&&(o=a,i=n),(a=st.distancePointLine(r,t,e))<o&&(o=a,i=r),i},e}(nt),ot=function(){};ot.prototype.interfaces_=function(){return[]},ot.prototype.getClass=function(){return ot},ot.orientationIndex=function(t,e,n){var r=e.x-t.x,i=e.y-t.y,o=n.x-e.x,a=n.y-e.y;return ot.signOfDet2x2(r,i,o,a)},ot.signOfDet2x2=function(t,e,n,r){var i=null,o=null,a=null;if(i=1,0===t||0===r)return 0===e||0===n?0:e>0?n>0?-i:i:n>0?i:-i;if(0===e||0===n)return r>0?t>0?i:-i:t>0?-i:i;if(e>0?r>0?e<=r||(i=-i,o=t,t=n,n=o,o=e,e=r,r=o):e<=-r?(i=-i,n=-n,r=-r):(o=t,t=-n,n=o,o=e,e=-r,r=o):r>0?-e<=r?(i=-i,t=-t,e=-e):(o=-t,t=n,n=o,o=-e,e=r,r=o):e>=r?(t=-t,e=-e,n=-n,r=-r):(i=-i,o=-t,t=-n,n=o,o=-e,e=-r,r=o),t>0){if(!(n>0))return i;if(!(t<=n))return i}else{if(n>0)return-i;if(!(t>=n))return-i;i=-i,t=-t,n=-n}for(;;){if((r-=(a=Math.floor(n/t))*e)<0)return-i;if(r>e)return i;if(t>(n-=a*t)+n){if(e<r+r)return i}else{if(e>r+r)return-i;n=t-n,r=e-r,i=-i}if(0===r)return 0===n?0:-i;if(0===n)return i;if((e-=(a=Math.floor(t/n))*r)<0)return i;if(e>r)return-i;if(n>(t-=a*n)+t){if(r<e+e)return-i}else{if(r>e+e)return i;t=n-t,e=r-e,i=-i}if(0===e)return 0===t?0:i;if(0===t)return-i}};var at=function(){this._p=null,this._crossingCount=0,this._isPointOnSegment=!1;var t=arguments[0];this._p=t};at.prototype.countSegment=function(t,e){if(t.x<this._p.x&&e.x<this._p.x)return null;if(this._p.x===e.x&&this._p.y===e.y)return this._isPointOnSegment=!0,null;if(t.y===this._p.y&&e.y===this._p.y){var n=t.x,r=e.x;return n>r&&(n=e.x,r=t.x),this._p.x>=n&&this._p.x<=r&&(this._isPointOnSegment=!0),null}if(t.y>this._p.y&&e.y<=this._p.y||e.y>this._p.y&&t.y<=this._p.y){var i=t.x-this._p.x,o=t.y-this._p.y,a=e.x-this._p.x,s=e.y-this._p.y,u=ot.signOfDet2x2(i,o,a,s);if(0===u)return this._isPointOnSegment=!0,null;s<o&&(u=-u),u>0&&this._crossingCount++}},at.prototype.isPointInPolygon=function(){return this.getLocation()!==L.EXTERIOR},at.prototype.getLocation=function(){return this._isPointOnSegment?L.BOUNDARY:this._crossingCount%2==1?L.INTERIOR:L.EXTERIOR},at.prototype.isOnSegment=function(){return this._isPointOnSegment},at.prototype.interfaces_=function(){return[]},at.prototype.getClass=function(){return at},at.locatePointInRing=function(){if(arguments[0]instanceof N&&O(arguments[1],G)){for(var t=arguments[1],e=new at(arguments[0]),n=new N,r=new N,i=1;i<t.size();i++)if(t.getCoordinate(i,n),t.getCoordinate(i-1,r),e.countSegment(n,r),e.isOnSegment())return e.getLocation();return e.getLocation()}if(arguments[0]instanceof N&&arguments[1]instanceof Array){for(var o=arguments[1],a=new at(arguments[0]),s=1;s<o.length;s++){var u=o[s],l=o[s-1];if(a.countSegment(u,l),a.isOnSegment())return a.getLocation()}return a.getLocation()}};var st=function(){},ut={CLOCKWISE:{configurable:!0},RIGHT:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},LEFT:{configurable:!0},COLLINEAR:{configurable:!0},STRAIGHT:{configurable:!0}};st.prototype.interfaces_=function(){return[]},st.prototype.getClass=function(){return st},st.orientationIndex=function(t,e,n){return j.orientationIndex(t,e,n)},st.signedArea=function(){if(arguments[0]instanceof Array){var t=arguments[0];if(t.length<3)return 0;for(var e=0,n=t[0].x,r=1;r<t.length-1;r++){var i=t[r].x-n,o=t[r+1].y;e+=i*(t[r-1].y-o)}return e/2}if(O(arguments[0],G)){var a=arguments[0],s=a.size();if(s<3)return 0;var u=new N,l=new N,c=new N;a.getCoordinate(0,l),a.getCoordinate(1,c);var p=l.x;c.x-=p;for(var f=0,h=1;h<s-1;h++)u.y=l.y,l.x=c.x,l.y=c.y,a.getCoordinate(h+1,c),c.x-=p,f+=l.x*(u.y-c.y);return f/2}},st.distanceLineLine=function(t,e,n,r){if(t.equals(e))return st.distancePointLine(t,n,r);if(n.equals(r))return st.distancePointLine(r,t,e);var i=!1;if(X.intersects(t,e,n,r)){var o=(e.x-t.x)*(r.y-n.y)-(e.y-t.y)*(r.x-n.x);if(0===o)i=!0;else{var a=(t.y-n.y)*(r.x-n.x)-(t.x-n.x)*(r.y-n.y),s=((t.y-n.y)*(e.x-t.x)-(t.x-n.x)*(e.y-t.y))/o,u=a/o;(u<0||u>1||s<0||s>1)&&(i=!0)}}else i=!0;return i?P.min(st.distancePointLine(t,n,r),st.distancePointLine(e,n,r),st.distancePointLine(n,t,e),st.distancePointLine(r,t,e)):0},st.isPointInRing=function(t,e){return st.locatePointInRing(t,e)!==L.EXTERIOR},st.computeLength=function(t){var e=t.size();if(e<=1)return 0;var n=0,r=new N;t.getCoordinate(0,r);for(var i=r.x,o=r.y,a=1;a<e;a++){t.getCoordinate(a,r);var s=r.x,u=r.y,l=s-i,c=u-o;n+=Math.sqrt(l*l+c*c),i=s,o=u}return n},st.isCCW=function(t){var e=t.length-1;if(e<3)throw new _("Ring has fewer than 4 points, so orientation cannot be determined");for(var n=t[0],r=0,i=1;i<=e;i++){var o=t[i];o.y>n.y&&(n=o,r=i)}var a=r;do{(a-=1)<0&&(a=e)}while(t[a].equals2D(n)&&a!==r);var s=r;do{s=(s+1)%e}while(t[s].equals2D(n)&&s!==r);var u=t[a],l=t[s];if(u.equals2D(n)||l.equals2D(n)||u.equals2D(l))return!1;var c=st.computeOrientation(u,n,l);return 0===c?u.x>l.x:c>0},st.locatePointInRing=function(t,e){return at.locatePointInRing(t,e)},st.distancePointLinePerpendicular=function(t,e,n){var r=(n.x-e.x)*(n.x-e.x)+(n.y-e.y)*(n.y-e.y),i=((e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y))/r;return Math.abs(i)*Math.sqrt(r)},st.computeOrientation=function(t,e,n){return st.orientationIndex(t,e,n)},st.distancePointLine=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];if(0===e.length)throw new _("Line array must contain at least one vertex");for(var n=t.distance(e[0]),r=0;r<e.length-1;r++){var i=st.distancePointLine(t,e[r],e[r+1]);i<n&&(n=i)}return n}if(3===arguments.length){var o=arguments[0],a=arguments[1],s=arguments[2];if(a.x===s.x&&a.y===s.y)return o.distance(a);var u=(s.x-a.x)*(s.x-a.x)+(s.y-a.y)*(s.y-a.y),l=((o.x-a.x)*(s.x-a.x)+(o.y-a.y)*(s.y-a.y))/u;if(l<=0)return o.distance(a);if(l>=1)return o.distance(s);var c=((a.y-o.y)*(s.x-a.x)-(a.x-o.x)*(s.y-a.y))/u;return Math.abs(c)*Math.sqrt(u)}},st.isOnLine=function(t,e){for(var n=new it,r=1;r<e.length;r++){var i=e[r-1],o=e[r];if(n.computeIntersection(t,i,o),n.hasIntersection())return!0}return!1},ut.CLOCKWISE.get=function(){return-1},ut.RIGHT.get=function(){return st.CLOCKWISE},ut.COUNTERCLOCKWISE.get=function(){return 1},ut.LEFT.get=function(){return st.COUNTERCLOCKWISE},ut.COLLINEAR.get=function(){return 0},ut.STRAIGHT.get=function(){return st.COLLINEAR},Object.defineProperties(st,ut);var lt=function(){};lt.prototype.filter=function(t){},lt.prototype.interfaces_=function(){return[]},lt.prototype.getClass=function(){return lt};var ct=function(){var t=arguments[0];this._envelope=null,this._factory=null,this._SRID=null,this._userData=null,this._factory=t,this._SRID=t.getSRID()},pt={serialVersionUID:{configurable:!0},SORTINDEX_POINT:{configurable:!0},SORTINDEX_MULTIPOINT:{configurable:!0},SORTINDEX_LINESTRING:{configurable:!0},SORTINDEX_LINEARRING:{configurable:!0},SORTINDEX_MULTILINESTRING:{configurable:!0},SORTINDEX_POLYGON:{configurable:!0},SORTINDEX_MULTIPOLYGON:{configurable:!0},SORTINDEX_GEOMETRYCOLLECTION:{configurable:!0},geometryChangedFilter:{configurable:!0}};ct.prototype.isGeometryCollection=function(){return this.getSortIndex()===ct.SORTINDEX_GEOMETRYCOLLECTION},ct.prototype.getFactory=function(){return this._factory},ct.prototype.getGeometryN=function(t){return this},ct.prototype.getArea=function(){return 0},ct.prototype.isRectangle=function(){return!1},ct.prototype.equals=function(){if(arguments[0]instanceof ct){var t=arguments[0];return null!==t&&this.equalsTopo(t)}if(arguments[0]instanceof Object){var e=arguments[0];if(!(e instanceof ct))return!1;var n=e;return this.equalsExact(n)}},ct.prototype.equalsExact=function(t){return this===t||this.equalsExact(t,0)},ct.prototype.geometryChanged=function(){this.apply(ct.geometryChangedFilter)},ct.prototype.geometryChangedAction=function(){this._envelope=null},ct.prototype.equalsNorm=function(t){return null!==t&&this.norm().equalsExact(t.norm())},ct.prototype.getLength=function(){return 0},ct.prototype.getNumGeometries=function(){return 1},ct.prototype.compareTo=function(){if(1===arguments.length){var t=arguments[0],e=t;return this.getSortIndex()!==e.getSortIndex()?this.getSortIndex()-e.getSortIndex():this.isEmpty()&&e.isEmpty()?0:this.isEmpty()?-1:e.isEmpty()?1:this.compareToSameClass(t)}if(2===arguments.length){var n=arguments[0],r=arguments[1];return this.getSortIndex()!==n.getSortIndex()?this.getSortIndex()-n.getSortIndex():this.isEmpty()&&n.isEmpty()?0:this.isEmpty()?-1:n.isEmpty()?1:this.compareToSameClass(n,r)}},ct.prototype.getUserData=function(){return this._userData},ct.prototype.getSRID=function(){return this._SRID},ct.prototype.getEnvelope=function(){return this.getFactory().toGeometry(this.getEnvelopeInternal())},ct.prototype.checkNotGeometryCollection=function(t){if(t.getSortIndex()===ct.SORTINDEX_GEOMETRYCOLLECTION)throw new _("This method does not support GeometryCollection arguments")},ct.prototype.equal=function(t,e,n){return 0===n?t.equals(e):t.distance(e)<=n},ct.prototype.norm=function(){var t=this.copy();return t.normalize(),t},ct.prototype.getPrecisionModel=function(){return this._factory.getPrecisionModel()},ct.prototype.getEnvelopeInternal=function(){return null===this._envelope&&(this._envelope=this.computeEnvelopeInternal()),new X(this._envelope)},ct.prototype.setSRID=function(t){this._SRID=t},ct.prototype.setUserData=function(t){this._userData=t},ct.prototype.compare=function(t,e){for(var n=t.iterator(),r=e.iterator();n.hasNext()&&r.hasNext();){var i=n.next(),o=r.next(),a=i.compareTo(o);if(0!==a)return a}return n.hasNext()?1:r.hasNext()?-1:0},ct.prototype.hashCode=function(){return this.getEnvelopeInternal().hashCode()},ct.prototype.isGeometryCollectionOrDerived=function(){return this.getSortIndex()===ct.SORTINDEX_GEOMETRYCOLLECTION||this.getSortIndex()===ct.SORTINDEX_MULTIPOINT||this.getSortIndex()===ct.SORTINDEX_MULTILINESTRING||this.getSortIndex()===ct.SORTINDEX_MULTIPOLYGON},ct.prototype.interfaces_=function(){return[w,x,e]},ct.prototype.getClass=function(){return ct},ct.hasNonEmptyElements=function(t){for(var e=0;e<t.length;e++)if(!t[e].isEmpty())return!0;return!1},ct.hasNullElements=function(t){for(var e=0;e<t.length;e++)if(null===t[e])return!0;return!1},pt.serialVersionUID.get=function(){return 0x799ea46522854c00},pt.SORTINDEX_POINT.get=function(){return 0},pt.SORTINDEX_MULTIPOINT.get=function(){return 1},pt.SORTINDEX_LINESTRING.get=function(){return 2},pt.SORTINDEX_LINEARRING.get=function(){return 3},pt.SORTINDEX_MULTILINESTRING.get=function(){return 4},pt.SORTINDEX_POLYGON.get=function(){return 5},pt.SORTINDEX_MULTIPOLYGON.get=function(){return 6},pt.SORTINDEX_GEOMETRYCOLLECTION.get=function(){return 7},pt.geometryChangedFilter.get=function(){return ft},Object.defineProperties(ct,pt);var ft=function(){};ft.interfaces_=function(){return[lt]},ft.filter=function(t){t.geometryChangedAction()};var ht=function(){};ht.prototype.filter=function(t){},ht.prototype.interfaces_=function(){return[]},ht.prototype.getClass=function(){return ht};var dt=function(){},gt={Mod2BoundaryNodeRule:{configurable:!0},EndPointBoundaryNodeRule:{configurable:!0},MultiValentEndPointBoundaryNodeRule:{configurable:!0},MonoValentEndPointBoundaryNodeRule:{configurable:!0},MOD2_BOUNDARY_RULE:{configurable:!0},ENDPOINT_BOUNDARY_RULE:{configurable:!0},MULTIVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},MONOVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},OGC_SFS_BOUNDARY_RULE:{configurable:!0}};dt.prototype.isInBoundary=function(t){},dt.prototype.interfaces_=function(){return[]},dt.prototype.getClass=function(){return dt},gt.Mod2BoundaryNodeRule.get=function(){return yt},gt.EndPointBoundaryNodeRule.get=function(){return mt},gt.MultiValentEndPointBoundaryNodeRule.get=function(){return _t},gt.MonoValentEndPointBoundaryNodeRule.get=function(){return vt},gt.MOD2_BOUNDARY_RULE.get=function(){return new yt},gt.ENDPOINT_BOUNDARY_RULE.get=function(){return new mt},gt.MULTIVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new _t},gt.MONOVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new vt},gt.OGC_SFS_BOUNDARY_RULE.get=function(){return dt.MOD2_BOUNDARY_RULE},Object.defineProperties(dt,gt);var yt=function(){};yt.prototype.isInBoundary=function(t){return t%2==1},yt.prototype.interfaces_=function(){return[dt]},yt.prototype.getClass=function(){return yt};var mt=function(){};mt.prototype.isInBoundary=function(t){return t>0},mt.prototype.interfaces_=function(){return[dt]},mt.prototype.getClass=function(){return mt};var _t=function(){};_t.prototype.isInBoundary=function(t){return t>1},_t.prototype.interfaces_=function(){return[dt]},_t.prototype.getClass=function(){return _t};var vt=function(){};vt.prototype.isInBoundary=function(t){return 1===t},vt.prototype.interfaces_=function(){return[dt]},vt.prototype.getClass=function(){return vt};var bt=function(){};bt.prototype.add=function(){},bt.prototype.addAll=function(){},bt.prototype.isEmpty=function(){},bt.prototype.iterator=function(){},bt.prototype.size=function(){},bt.prototype.toArray=function(){},bt.prototype.remove=function(){},(n.prototype=new Error).name="IndexOutOfBoundsException";var xt=function(){};xt.prototype.hasNext=function(){},xt.prototype.next=function(){},xt.prototype.remove=function(){};var wt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(){},e.prototype.set=function(){},e.prototype.isEmpty=function(){},e}(bt);(r.prototype=new Error).name="NoSuchElementException";var Et=function(t){function e(){t.call(this),this.array_=[],arguments[0]instanceof bt&&this.addAll(arguments[0])}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.ensureCapacity=function(){},e.prototype.interfaces_=function(){return[t,bt]},e.prototype.add=function(t){return 1===arguments.length?this.array_.push(t):this.array_.splice(arguments[0],arguments[1]),!0},e.prototype.clear=function(){this.array_=[]},e.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},e.prototype.set=function(t,e){var n=this.array_[t];return this.array_[t]=e,n},e.prototype.iterator=function(){return new Nt(this)},e.prototype.get=function(t){if(t<0||t>=this.size())throw new n;return this.array_[t]},e.prototype.isEmpty=function(){return 0===this.array_.length},e.prototype.size=function(){return this.array_.length},e.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t},e.prototype.remove=function(t){for(var e=!1,n=0,r=this.array_.length;n<r;n++)if(this.array_[n]===t){this.array_.splice(n,1),e=!0;break}return e},e}(wt),Nt=function(t){function e(e){t.call(this),this.arrayList_=e,this.position_=0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.next=function(){if(this.position_===this.arrayList_.size())throw new r;return this.arrayList_.get(this.position_++)},e.prototype.hasNext=function(){return this.position_<this.arrayList_.size()},e.prototype.set=function(t){return this.arrayList_.set(this.position_-1,t)},e.prototype.remove=function(){this.arrayList_.remove(this.arrayList_.get(this.position_))},e}(xt),It=function(t){function e(){if(t.call(this),0===arguments.length);else if(1===arguments.length){var e=arguments[0];this.ensureCapacity(e.length),this.add(e,!0)}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this.ensureCapacity(n.length),this.add(n,r)}}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={coordArrayType:{configurable:!0}};return n.coordArrayType.get=function(){return new Array(0).fill(null)},e.prototype.getCoordinate=function(t){return this.get(t)},e.prototype.addAll=function(){if(2===arguments.length){for(var e=arguments[1],n=!1,r=arguments[0].iterator();r.hasNext();)this.add(r.next(),e),n=!0;return n}return t.prototype.addAll.apply(this,arguments)},e.prototype.clone=function(){for(var e=t.prototype.clone.call(this),n=0;n<this.size();n++)e.add(n,this.get(n).copy());return e},e.prototype.toCoordinateArray=function(){return this.toArray(e.coordArrayType)},e.prototype.add=function(){if(1===arguments.length){var e=arguments[0];t.prototype.add.call(this,e)}else if(2===arguments.length){if(arguments[0]instanceof Array&&"boolean"==typeof arguments[1]){var n=arguments[0],r=arguments[1];return this.add(n,r,!0),!0}if(arguments[0]instanceof N&&"boolean"==typeof arguments[1]){var i=arguments[0];if(!arguments[1]&&this.size()>=1&&this.get(this.size()-1).equals2D(i))return null;t.prototype.add.call(this,i)}else if(arguments[0]instanceof Object&&"boolean"==typeof arguments[1]){var o=arguments[0],a=arguments[1];return this.add(o,a),!0}}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&arguments[0]instanceof Array&&"boolean"==typeof arguments[1]){var s=arguments[0],u=arguments[1];if(arguments[2])for(var l=0;l<s.length;l++)this.add(s[l],u);else for(var c=s.length-1;c>=0;c--)this.add(s[c],u);return!0}if("boolean"==typeof arguments[2]&&Number.isInteger(arguments[0])&&arguments[1]instanceof N){var p=arguments[0],f=arguments[1];if(!arguments[2]){var h=this.size();if(h>0){if(p>0&&this.get(p-1).equals2D(f))return null;if(p<h&&this.get(p).equals2D(f))return null}}t.prototype.add.call(this,p,f)}}else if(4===arguments.length){var d=arguments[0],g=arguments[1],y=arguments[2],m=arguments[3],_=1;y>m&&(_=-1);for(var v=y;v!==m;v+=_)this.add(d[v],g);return!0}},e.prototype.closeRing=function(){this.size()>0&&this.add(new N(this.get(0)),!1)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},Object.defineProperties(e,n),e}(Et),Ct=function(){},St={ForwardComparator:{configurable:!0},BidirectionalComparator:{configurable:!0},coordArrayType:{configurable:!0}};St.ForwardComparator.get=function(){return Lt},St.BidirectionalComparator.get=function(){return Mt},St.coordArrayType.get=function(){return new Array(0).fill(null)},Ct.prototype.interfaces_=function(){return[]},Ct.prototype.getClass=function(){return Ct},Ct.isRing=function(t){return!(t.length<4||!t[0].equals2D(t[t.length-1]))},Ct.ptNotInList=function(t,e){for(var n=0;n<t.length;n++){var r=t[n];if(Ct.indexOf(r,e)<0)return r}return null},Ct.scroll=function(t,e){var n=Ct.indexOf(e,t);if(n<0)return null;var r=new Array(t.length).fill(null);V.arraycopy(t,n,r,0,t.length-n),V.arraycopy(t,0,r,t.length-n,n),V.arraycopy(r,0,t,0,t.length)},Ct.equals=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];if(t===e)return!0;if(null===t||null===e)return!1;if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(!t[n].equals(e[n]))return!1;return!0}if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2];if(r===i)return!0;if(null===r||null===i)return!1;if(r.length!==i.length)return!1;for(var a=0;a<r.length;a++)if(0!==o.compare(r[a],i[a]))return!1;return!0}},Ct.intersection=function(t,e){for(var n=new It,r=0;r<t.length;r++)e.intersects(t[r])&&n.add(t[r],!0);return n.toCoordinateArray()},Ct.hasRepeatedPoints=function(t){for(var e=1;e<t.length;e++)if(t[e-1].equals(t[e]))return!0;return!1},Ct.removeRepeatedPoints=function(t){return Ct.hasRepeatedPoints(t)?new It(t,!1).toCoordinateArray():t},Ct.reverse=function(t){for(var e=t.length-1,n=Math.trunc(e/2),r=0;r<=n;r++){var i=t[r];t[r]=t[e-r],t[e-r]=i}},Ct.removeNull=function(t){for(var e=0,n=0;n<t.length;n++)null!==t[n]&&e++;var r=new Array(e).fill(null);if(0===e)return r;for(var i=0,o=0;o<t.length;o++)null!==t[o]&&(r[i++]=t[o]);return r},Ct.copyDeep=function(){if(1===arguments.length){for(var t=arguments[0],e=new Array(t.length).fill(null),n=0;n<t.length;n++)e[n]=new N(t[n]);return e}if(5===arguments.length)for(var r=arguments[0],i=arguments[1],o=arguments[2],a=arguments[3],s=arguments[4],u=0;u<s;u++)o[a+u]=new N(r[i+u])},Ct.isEqualReversed=function(t,e){for(var n=0;n<t.length;n++){var r=t[n],i=e[t.length-n-1];if(0!==r.compareTo(i))return!1}return!0},Ct.envelope=function(t){for(var e=new X,n=0;n<t.length;n++)e.expandToInclude(t[n]);return e},Ct.toCoordinateArray=function(t){return t.toArray(Ct.coordArrayType)},Ct.atLeastNCoordinatesOrNothing=function(t,e){return e.length>=t?e:[]},Ct.indexOf=function(t,e){for(var n=0;n<e.length;n++)if(t.equals(e[n]))return n;return-1},Ct.increasingDirection=function(t){for(var e=0;e<Math.trunc(t.length/2);e++){var n=t.length-1-e,r=t[e].compareTo(t[n]);if(0!==r)return r}return 1},Ct.compare=function(t,e){for(var n=0;n<t.length&&n<e.length;){var r=t[n].compareTo(e[n]);if(0!==r)return r;n++}return n<e.length?-1:n<t.length?1:0},Ct.minCoordinate=function(t){for(var e=null,n=0;n<t.length;n++)(null===e||e.compareTo(t[n])>0)&&(e=t[n]);return e},Ct.extract=function(t,e,n){e=P.clamp(e,0,t.length);var r=(n=P.clamp(n,-1,t.length))-e+1;n<0&&(r=0),e>=t.length&&(r=0),n<e&&(r=0);var i=new Array(r).fill(null);if(0===r)return i;for(var o=0,a=e;a<=n;a++)i[o++]=t[a];return i},Object.defineProperties(Ct,St);var Lt=function(){};Lt.prototype.compare=function(t,e){return Ct.compare(t,e)},Lt.prototype.interfaces_=function(){return[E]},Lt.prototype.getClass=function(){return Lt};var Mt=function(){};Mt.prototype.compare=function(t,e){var n=t,r=e;if(n.length<r.length)return-1;if(n.length>r.length)return 1;if(0===n.length)return 0;var i=Ct.compare(n,r);return Ct.isEqualReversed(n,r)?0:i},Mt.prototype.OLDcompare=function(t,e){var n=t,r=e;if(n.length<r.length)return-1;if(n.length>r.length)return 1;if(0===n.length)return 0;for(var i=Ct.increasingDirection(n),o=Ct.increasingDirection(r),a=i>0?0:n.length-1,s=o>0?0:n.length-1,u=0;u<n.length;u++){var l=n[a].compareTo(r[s]);if(0!==l)return l;a+=i,s+=o}return 0},Mt.prototype.interfaces_=function(){return[E]},Mt.prototype.getClass=function(){return Mt};var Ot=function(){};Ot.prototype.get=function(){},Ot.prototype.put=function(){},Ot.prototype.size=function(){},Ot.prototype.values=function(){},Ot.prototype.entrySet=function(){};var Pt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Ot);(i.prototype=new Error).name="OperationNotSupported",(o.prototype=new bt).contains=function(){};var Rt=function(t){function e(){t.call(this),this.array_=[],arguments[0]instanceof bt&&this.addAll(arguments[0])}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.contains=function(t){for(var e=0,n=this.array_.length;e<n;e++)if(this.array_[e]===t)return!0;return!1},e.prototype.add=function(t){return!this.contains(t)&&(this.array_.push(t),!0)},e.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},e.prototype.remove=function(t){throw new Error},e.prototype.size=function(){return this.array_.length},e.prototype.isEmpty=function(){return 0===this.array_.length},e.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t},e.prototype.iterator=function(){return new Tt(this)},e}(o),Tt=function(t){function e(e){t.call(this),this.hashSet_=e,this.position_=0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.next=function(){if(this.position_===this.hashSet_.size())throw new r;return this.hashSet_.array_[this.position_++]},e.prototype.hasNext=function(){return this.position_<this.hashSet_.size()},e.prototype.remove=function(){throw new i},e}(xt),At=0;(p.prototype=new Pt).get=function(t){for(var e=this.root_;null!==e;){var n=t.compareTo(e.key);if(n<0)e=e.left;else{if(!(n>0))return e.value;e=e.right}}return null},p.prototype.put=function(t,e){if(null===this.root_)return this.root_={key:t,value:e,left:null,right:null,parent:null,color:At,getValue:function(){return this.value},getKey:function(){return this.key}},this.size_=1,null;var n,r,i=this.root_;do{if(n=i,(r=t.compareTo(i.key))<0)i=i.left;else{if(!(r>0)){var o=i.value;return i.value=e,o}i=i.right}}while(null!==i);var a={key:t,left:null,right:null,value:e,parent:n,color:At,getValue:function(){return this.value},getKey:function(){return this.key}};return r<0?n.left=a:n.right=a,this.fixAfterInsertion(a),this.size_++,null},p.prototype.fixAfterInsertion=function(t){for(t.color=1;null!=t&&t!==this.root_&&1===t.parent.color;)if(s(t)===l(s(s(t)))){var e=c(s(s(t)));1===a(e)?(u(s(t),At),u(e,At),u(s(s(t)),1),t=s(s(t))):(t===c(s(t))&&(t=s(t),this.rotateLeft(t)),u(s(t),At),u(s(s(t)),1),this.rotateRight(s(s(t))))}else{var n=l(s(s(t)));1===a(n)?(u(s(t),At),u(n,At),u(s(s(t)),1),t=s(s(t))):(t===l(s(t))&&(t=s(t),this.rotateRight(t)),u(s(t),At),u(s(s(t)),1),this.rotateLeft(s(s(t))))}this.root_.color=At},p.prototype.values=function(){var t=new Et,e=this.getFirstEntry();if(null!==e)for(t.add(e.value);null!==(e=p.successor(e));)t.add(e.value);return t},p.prototype.entrySet=function(){var t=new Rt,e=this.getFirstEntry();if(null!==e)for(t.add(e);null!==(e=p.successor(e));)t.add(e);return t},p.prototype.rotateLeft=function(t){if(null!=t){var e=t.right;t.right=e.left,null!=e.left&&(e.left.parent=t),e.parent=t.parent,null===t.parent?this.root_=e:t.parent.left===t?t.parent.left=e:t.parent.right=e,e.left=t,t.parent=e}},p.prototype.rotateRight=function(t){if(null!=t){var e=t.left;t.left=e.right,null!=e.right&&(e.right.parent=t),e.parent=t.parent,null===t.parent?this.root_=e:t.parent.right===t?t.parent.right=e:t.parent.left=e,e.right=t,t.parent=e}},p.prototype.getFirstEntry=function(){var t=this.root_;if(null!=t)for(;null!=t.left;)t=t.left;return t},p.successor=function(t){if(null===t)return null;if(null!==t.right){for(var e=t.right;null!==e.left;)e=e.left;return e}for(var n=t.parent,r=t;null!==n&&r===n.right;)r=n,n=n.parent;return n},p.prototype.size=function(){return this.size_};var Dt=function(){};Dt.prototype.interfaces_=function(){return[]},Dt.prototype.getClass=function(){return Dt},f.prototype=new o,(h.prototype=new f).contains=function(t){for(var e=0,n=this.array_.length;e<n;e++)if(0===this.array_[e].compareTo(t))return!0;return!1},h.prototype.add=function(t){if(this.contains(t))return!1;for(var e=0,n=this.array_.length;e<n;e++)if(1===this.array_[e].compareTo(t))return this.array_.splice(e,0,t),!0;return this.array_.push(t),!0},h.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},h.prototype.remove=function(t){throw new i},h.prototype.size=function(){return this.array_.length},h.prototype.isEmpty=function(){return 0===this.array_.length},h.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t},h.prototype.iterator=function(){return new kt(this)};var kt=function(t){this.treeSet_=t,this.position_=0};kt.prototype.next=function(){if(this.position_===this.treeSet_.size())throw new r;return this.treeSet_.array_[this.position_++]},kt.prototype.hasNext=function(){return this.position_<this.treeSet_.size()},kt.prototype.remove=function(){throw new i};var Ft=function(){};Ft.sort=function(){var t,e,n,r,i=arguments[0];if(1===arguments.length)r=function(t,e){return t.compareTo(e)},i.sort(r);else if(2===arguments.length)n=arguments[1],r=function(t,e){return n.compare(t,e)},i.sort(r);else if(3===arguments.length){(e=i.slice(arguments[1],arguments[2])).sort();var o=i.slice(0,arguments[1]).concat(e,i.slice(arguments[2],i.length));for(i.splice(0,i.length),t=0;t<o.length;t++)i.push(o[t])}else if(4===arguments.length)for(e=i.slice(arguments[1],arguments[2]),n=arguments[3],r=function(t,e){return n.compare(t,e)},e.sort(r),o=i.slice(0,arguments[1]).concat(e,i.slice(arguments[2],i.length)),i.splice(0,i.length),t=0;t<o.length;t++)i.push(o[t])},Ft.asList=function(t){for(var e=new Et,n=0,r=t.length;n<r;n++)e.add(t[n]);return e};var jt=function(){},zt={P:{configurable:!0},L:{configurable:!0},A:{configurable:!0},FALSE:{configurable:!0},TRUE:{configurable:!0},DONTCARE:{configurable:!0},SYM_FALSE:{configurable:!0},SYM_TRUE:{configurable:!0},SYM_DONTCARE:{configurable:!0},SYM_P:{configurable:!0},SYM_L:{configurable:!0},SYM_A:{configurable:!0}};zt.P.get=function(){return 0},zt.L.get=function(){return 1},zt.A.get=function(){return 2},zt.FALSE.get=function(){return-1},zt.TRUE.get=function(){return-2},zt.DONTCARE.get=function(){return-3},zt.SYM_FALSE.get=function(){return"F"},zt.SYM_TRUE.get=function(){return"T"},zt.SYM_DONTCARE.get=function(){return"*"},zt.SYM_P.get=function(){return"0"},zt.SYM_L.get=function(){return"1"},zt.SYM_A.get=function(){return"2"},jt.prototype.interfaces_=function(){return[]},jt.prototype.getClass=function(){return jt},jt.toDimensionSymbol=function(t){switch(t){case jt.FALSE:return jt.SYM_FALSE;case jt.TRUE:return jt.SYM_TRUE;case jt.DONTCARE:return jt.SYM_DONTCARE;case jt.P:return jt.SYM_P;case jt.L:return jt.SYM_L;case jt.A:return jt.SYM_A}throw new _("Unknown dimension value: "+t)},jt.toDimensionValue=function(t){switch(D.toUpperCase(t)){case jt.SYM_FALSE:return jt.FALSE;case jt.SYM_TRUE:return jt.TRUE;case jt.SYM_DONTCARE:return jt.DONTCARE;case jt.SYM_P:return jt.P;case jt.SYM_L:return jt.L;case jt.SYM_A:return jt.A}throw new _("Unknown dimension symbol: "+t)},Object.defineProperties(jt,zt);var Gt=function(){};Gt.prototype.filter=function(t){},Gt.prototype.interfaces_=function(){return[]},Gt.prototype.getClass=function(){return Gt};var Bt=function(){};Bt.prototype.filter=function(t,e){},Bt.prototype.isDone=function(){},Bt.prototype.isGeometryChanged=function(){},Bt.prototype.interfaces_=function(){return[]},Bt.prototype.getClass=function(){return Bt};var qt=function(t){function e(e,n){if(t.call(this,n),this._geometries=e||[],t.hasNullElements(this._geometries))throw new _("geometries must not contain null elements")}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){for(var t=new X,e=0;e<this._geometries.length;e++)t.expandToInclude(this._geometries[e].getEnvelopeInternal());return t},e.prototype.getGeometryN=function(t){return this._geometries[t]},e.prototype.getSortIndex=function(){return t.SORTINDEX_GEOMETRYCOLLECTION},e.prototype.getCoordinates=function(){for(var t=new Array(this.getNumPoints()).fill(null),e=-1,n=0;n<this._geometries.length;n++)for(var r=this._geometries[n].getCoordinates(),i=0;i<r.length;i++)t[++e]=r[i];return t},e.prototype.getArea=function(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getArea();return t},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];if(!this.isEquivalentClass(e))return!1;var r=e;if(this._geometries.length!==r._geometries.length)return!1;for(var i=0;i<this._geometries.length;i++)if(!this._geometries[i].equalsExact(r._geometries[i],n))return!1;return!0}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){for(var t=0;t<this._geometries.length;t++)this._geometries[t].normalize();Ft.sort(this._geometries)},e.prototype.getCoordinate=function(){return this.isEmpty()?null:this._geometries[0].getCoordinate()},e.prototype.getBoundaryDimension=function(){for(var t=jt.FALSE,e=0;e<this._geometries.length;e++)t=Math.max(t,this._geometries[e].getBoundaryDimension());return t},e.prototype.getDimension=function(){for(var t=jt.FALSE,e=0;e<this._geometries.length;e++)t=Math.max(t,this._geometries[e].getDimension());return t},e.prototype.getLength=function(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getLength();return t},e.prototype.getNumPoints=function(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getNumPoints();return t},e.prototype.getNumGeometries=function(){return this._geometries.length},e.prototype.reverse=function(){for(var t=this._geometries.length,e=new Array(t).fill(null),n=0;n<this._geometries.length;n++)e[n]=this._geometries[n].reverse();return this.getFactory().createGeometryCollection(e)},e.prototype.compareToSameClass=function(){if(1===arguments.length){var t=arguments[0],e=new h(Ft.asList(this._geometries)),n=new h(Ft.asList(t._geometries));return this.compare(e,n)}if(2===arguments.length){for(var r=arguments[1],i=arguments[0],o=this.getNumGeometries(),a=i.getNumGeometries(),s=0;s<o&&s<a;){var u=this.getGeometryN(s),l=i.getGeometryN(s),c=u.compareToSameClass(l,r);if(0!==c)return c;s++}return s<o?1:s<a?-1:0}},e.prototype.apply=function(){if(O(arguments[0],ht))for(var t=arguments[0],e=0;e<this._geometries.length;e++)this._geometries[e].apply(t);else if(O(arguments[0],Bt)){var n=arguments[0];if(0===this._geometries.length)return null;for(var r=0;r<this._geometries.length&&(this._geometries[r].apply(n),!n.isDone());r++);n.isGeometryChanged()&&this.geometryChanged()}else if(O(arguments[0],Gt)){var i=arguments[0];i.filter(this);for(var o=0;o<this._geometries.length;o++)this._geometries[o].apply(i)}else if(O(arguments[0],lt)){var a=arguments[0];a.filter(this);for(var s=0;s<this._geometries.length;s++)this._geometries[s].apply(a)}},e.prototype.getBoundary=function(){return this.checkNotGeometryCollection(this),et.shouldNeverReachHere(),null},e.prototype.clone=function(){var e=t.prototype.clone.call(this);e._geometries=new Array(this._geometries.length).fill(null);for(var n=0;n<this._geometries.length;n++)e._geometries[n]=this._geometries[n].clone();return e},e.prototype.getGeometryType=function(){return"GeometryCollection"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),n=0;n<t.length;n++)t[n]=this._geometries[n].copy();return new e(t,this._factory)},e.prototype.isEmpty=function(){for(var t=0;t<this._geometries.length;t++)if(!this._geometries[t].isEmpty())return!1;return!0},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return-0x4f07bcb1f857d800},Object.defineProperties(e,n),e}(ct),Ut=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return ct.SORTINDEX_MULTILINESTRING},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!this.isEquivalentClass(e)&&t.prototype.equalsExact.call(this,e,n)}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.getBoundaryDimension=function(){return this.isClosed()?jt.FALSE:0},e.prototype.isClosed=function(){if(this.isEmpty())return!1;for(var t=0;t<this._geometries.length;t++)if(!this._geometries[t].isClosed())return!1;return!0},e.prototype.getDimension=function(){return 1},e.prototype.reverse=function(){for(var t=this._geometries.length,e=new Array(t).fill(null),n=0;n<this._geometries.length;n++)e[t-1-n]=this._geometries[n].reverse();return this.getFactory().createMultiLineString(e)},e.prototype.getBoundary=function(){return new Vt(this).getBoundary()},e.prototype.getGeometryType=function(){return"MultiLineString"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),n=0;n<t.length;n++)t[n]=this._geometries[n].copy();return new e(t,this._factory)},e.prototype.interfaces_=function(){return[Dt]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return 0x7155d2ab4afa8000},Object.defineProperties(e,n),e}(qt),Vt=function(){if(this._geom=null,this._geomFact=null,this._bnRule=null,this._endpointMap=null,1===arguments.length){var t=arguments[0],e=dt.MOD2_BOUNDARY_RULE;this._geom=t,this._geomFact=t.getFactory(),this._bnRule=e}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this._geom=n,this._geomFact=n.getFactory(),this._bnRule=r}};Vt.prototype.boundaryMultiLineString=function(t){if(this._geom.isEmpty())return this.getEmptyMultiPoint();var e=this.computeBoundaryCoordinates(t);return 1===e.length?this._geomFact.createPoint(e[0]):this._geomFact.createMultiPointFromCoords(e)},Vt.prototype.getBoundary=function(){return this._geom instanceof $t?this.boundaryLineString(this._geom):this._geom instanceof Ut?this.boundaryMultiLineString(this._geom):this._geom.getBoundary()},Vt.prototype.boundaryLineString=function(t){return this._geom.isEmpty()?this.getEmptyMultiPoint():t.isClosed()?this._bnRule.isInBoundary(2)?t.getStartPoint():this._geomFact.createMultiPoint():this._geomFact.createMultiPoint([t.getStartPoint(),t.getEndPoint()])},Vt.prototype.getEmptyMultiPoint=function(){return this._geomFact.createMultiPoint()},Vt.prototype.computeBoundaryCoordinates=function(t){var e=new Et;this._endpointMap=new p;for(var n=0;n<t.getNumGeometries();n++){var r=t.getGeometryN(n);0!==r.getNumPoints()&&(this.addEndpoint(r.getCoordinateN(0)),this.addEndpoint(r.getCoordinateN(r.getNumPoints()-1)))}for(var i=this._endpointMap.entrySet().iterator();i.hasNext();){var o=i.next(),a=o.getValue().count;this._bnRule.isInBoundary(a)&&e.add(o.getKey())}return Ct.toCoordinateArray(e)},Vt.prototype.addEndpoint=function(t){var e=this._endpointMap.get(t);null===e&&(e=new Yt,this._endpointMap.put(t,e)),e.count++},Vt.prototype.interfaces_=function(){return[]},Vt.prototype.getClass=function(){return Vt},Vt.getBoundary=function(){return 1===arguments.length?new Vt(arguments[0]).getBoundary():2===arguments.length?new Vt(arguments[0],arguments[1]).getBoundary():void 0};var Yt=function(){this.count=null};Yt.prototype.interfaces_=function(){return[]},Yt.prototype.getClass=function(){return Yt};var Xt=function(){},Ht={NEWLINE:{configurable:!0},SIMPLE_ORDINATE_FORMAT:{configurable:!0}};Xt.prototype.interfaces_=function(){return[]},Xt.prototype.getClass=function(){return Xt},Xt.chars=function(t,e){for(var n=new Array(e).fill(null),r=0;r<e;r++)n[r]=t;return String(n)},Xt.getStackTrace=function(){if(1===arguments.length){var t=arguments[0],e=new function(){},n=new function(){};return t.printStackTrace(n),e.toString()}if(2===arguments.length){for(var r=arguments[0],i=arguments[1],o="",a=new function(){}(new function(){}(Xt.getStackTrace(r))),s=0;s<i;s++)try{o+=a.readLine()+Xt.NEWLINE}catch(t){if(!(t instanceof d))throw t;et.shouldNeverReachHere()}return o}},Xt.split=function(t,e){for(var n=e.length,r=new Et,i=""+t,o=i.indexOf(e);o>=0;){var a=i.substring(0,o);r.add(a),o=(i=i.substring(o+n)).indexOf(e)}i.length>0&&r.add(i);for(var s=new Array(r.size()).fill(null),u=0;u<s.length;u++)s[u]=r.get(u);return s},Xt.toString=function(){if(1===arguments.length){var t=arguments[0];return Xt.SIMPLE_ORDINATE_FORMAT.format(t)}},Xt.spaces=function(t){return Xt.chars(" ",t)},Ht.NEWLINE.get=function(){return V.getProperty("line.separator")},Ht.SIMPLE_ORDINATE_FORMAT.get=function(){return new function(){}},Object.defineProperties(Xt,Ht);var Wt=function(){};Wt.prototype.interfaces_=function(){return[]},Wt.prototype.getClass=function(){return Wt},Wt.copyCoord=function(t,e,n,r){for(var i=Math.min(t.getDimension(),n.getDimension()),o=0;o<i;o++)n.setOrdinate(r,o,t.getOrdinate(e,o))},Wt.isRing=function(t){var e=t.size();return 0===e||!(e<=3)&&t.getOrdinate(0,G.X)===t.getOrdinate(e-1,G.X)&&t.getOrdinate(0,G.Y)===t.getOrdinate(e-1,G.Y)},Wt.isEqual=function(t,e){var n=t.size();if(n!==e.size())return!1;for(var r=Math.min(t.getDimension(),e.getDimension()),i=0;i<n;i++)for(var o=0;o<r;o++){var a=t.getOrdinate(i,o),s=e.getOrdinate(i,o);if(!(t.getOrdinate(i,o)===e.getOrdinate(i,o)||v.isNaN(a)&&v.isNaN(s)))return!1}return!0},Wt.extend=function(t,e,n){var r=t.create(n,e.getDimension()),i=e.size();if(Wt.copy(e,0,r,0,i),i>0)for(var o=i;o<n;o++)Wt.copy(e,i-1,r,o,1);return r},Wt.reverse=function(t){for(var e=t.size()-1,n=Math.trunc(e/2),r=0;r<=n;r++)Wt.swap(t,r,e-r)},Wt.swap=function(t,e,n){if(e===n)return null;for(var r=0;r<t.getDimension();r++){var i=t.getOrdinate(e,r);t.setOrdinate(e,r,t.getOrdinate(n,r)),t.setOrdinate(n,r,i)}},Wt.copy=function(t,e,n,r,i){for(var o=0;o<i;o++)Wt.copyCoord(t,e+o,n,r+o)},Wt.toString=function(){if(1===arguments.length){var t=arguments[0],e=t.size();if(0===e)return"()";var n=t.getDimension(),r=new T;r.append("(");for(var i=0;i<e;i++){i>0&&r.append(" ");for(var o=0;o<n;o++)o>0&&r.append(","),r.append(Xt.toString(t.getOrdinate(i,o)))}return r.append(")"),r.toString()}},Wt.ensureValidRing=function(t,e){var n=e.size();return 0===n?e:n<=3?Wt.createClosedRing(t,e,4):e.getOrdinate(0,G.X)===e.getOrdinate(n-1,G.X)&&e.getOrdinate(0,G.Y)===e.getOrdinate(n-1,G.Y)?e:Wt.createClosedRing(t,e,n+1)},Wt.createClosedRing=function(t,e,n){var r=t.create(n,e.getDimension()),i=e.size();Wt.copy(e,0,r,0,i);for(var o=i;o<n;o++)Wt.copy(e,0,r,o,1);return r};var $t=function(t){function e(e,n){t.call(this,n),this._points=null,this.init(e)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){return this.isEmpty()?new X:this._points.expandEnvelope(new X)},e.prototype.isRing=function(){return this.isClosed()&&this.isSimple()},e.prototype.getSortIndex=function(){return t.SORTINDEX_LINESTRING},e.prototype.getCoordinates=function(){return this._points.toCoordinateArray()},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];if(!this.isEquivalentClass(e))return!1;var r=e;if(this._points.size()!==r._points.size())return!1;for(var i=0;i<this._points.size();i++)if(!this.equal(this._points.getCoordinate(i),r._points.getCoordinate(i),n))return!1;return!0}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){for(var t=0;t<Math.trunc(this._points.size()/2);t++){var e=this._points.size()-1-t;if(!this._points.getCoordinate(t).equals(this._points.getCoordinate(e)))return this._points.getCoordinate(t).compareTo(this._points.getCoordinate(e))>0&&Wt.reverse(this._points),null}},e.prototype.getCoordinate=function(){return this.isEmpty()?null:this._points.getCoordinate(0)},e.prototype.getBoundaryDimension=function(){return this.isClosed()?jt.FALSE:0},e.prototype.isClosed=function(){return!this.isEmpty()&&this.getCoordinateN(0).equals2D(this.getCoordinateN(this.getNumPoints()-1))},e.prototype.getEndPoint=function(){return this.isEmpty()?null:this.getPointN(this.getNumPoints()-1)},e.prototype.getDimension=function(){return 1},e.prototype.getLength=function(){return st.computeLength(this._points)},e.prototype.getNumPoints=function(){return this._points.size()},e.prototype.reverse=function(){var t=this._points.copy();return Wt.reverse(t),this.getFactory().createLineString(t)},e.prototype.compareToSameClass=function(){if(1===arguments.length){for(var t=arguments[0],e=0,n=0;e<this._points.size()&&n<t._points.size();){var r=this._points.getCoordinate(e).compareTo(t._points.getCoordinate(n));if(0!==r)return r;e++,n++}return e<this._points.size()?1:n<t._points.size()?-1:0}if(2===arguments.length){var i=arguments[0];return arguments[1].compare(this._points,i._points)}},e.prototype.apply=function(){if(O(arguments[0],ht))for(var t=arguments[0],e=0;e<this._points.size();e++)t.filter(this._points.getCoordinate(e));else if(O(arguments[0],Bt)){var n=arguments[0];if(0===this._points.size())return null;for(var r=0;r<this._points.size()&&(n.filter(this._points,r),!n.isDone());r++);n.isGeometryChanged()&&this.geometryChanged()}else(O(arguments[0],Gt)||O(arguments[0],lt))&&arguments[0].filter(this)},e.prototype.getBoundary=function(){return new Vt(this).getBoundary()},e.prototype.isEquivalentClass=function(t){return t instanceof e},e.prototype.clone=function(){var e=t.prototype.clone.call(this);return e._points=this._points.clone(),e},e.prototype.getCoordinateN=function(t){return this._points.getCoordinate(t)},e.prototype.getGeometryType=function(){return"LineString"},e.prototype.copy=function(){return new e(this._points.copy(),this._factory)},e.prototype.getCoordinateSequence=function(){return this._points},e.prototype.isEmpty=function(){return 0===this._points.size()},e.prototype.init=function(t){if(null===t&&(t=this.getFactory().getCoordinateSequenceFactory().create([])),1===t.size())throw new _("Invalid number of points in LineString (found "+t.size()+" - must be 0 or >= 2)");this._points=t},e.prototype.isCoordinate=function(t){for(var e=0;e<this._points.size();e++)if(this._points.getCoordinate(e).equals(t))return!0;return!1},e.prototype.getStartPoint=function(){return this.isEmpty()?null:this.getPointN(0)},e.prototype.getPointN=function(t){return this.getFactory().createPoint(this._points.getCoordinate(t))},e.prototype.interfaces_=function(){return[Dt]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return 0x2b2b51ba435c8e00},Object.defineProperties(e,n),e}(ct),Zt=function(){};Zt.prototype.interfaces_=function(){return[]},Zt.prototype.getClass=function(){return Zt};var Jt=function(t){function e(e,n){t.call(this,n),this._coordinates=e||null,this.init(this._coordinates)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){if(this.isEmpty())return new X;var t=new X;return t.expandToInclude(this._coordinates.getX(0),this._coordinates.getY(0)),t},e.prototype.getSortIndex=function(){return t.SORTINDEX_POINT},e.prototype.getCoordinates=function(){return this.isEmpty()?[]:[this.getCoordinate()]},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!this.isEquivalentClass(e)&&(!(!this.isEmpty()||!e.isEmpty())||this.isEmpty()===e.isEmpty()&&this.equal(e.getCoordinate(),this.getCoordinate(),n))}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){},e.prototype.getCoordinate=function(){return 0!==this._coordinates.size()?this._coordinates.getCoordinate(0):null},e.prototype.getBoundaryDimension=function(){return jt.FALSE},e.prototype.getDimension=function(){return 0},e.prototype.getNumPoints=function(){return this.isEmpty()?0:1},e.prototype.reverse=function(){return this.copy()},e.prototype.getX=function(){if(null===this.getCoordinate())throw new Error("getX called on empty Point");return this.getCoordinate().x},e.prototype.compareToSameClass=function(){if(1===arguments.length){var t=arguments[0];return this.getCoordinate().compareTo(t.getCoordinate())}if(2===arguments.length){var e=arguments[0];return arguments[1].compare(this._coordinates,e._coordinates)}},e.prototype.apply=function(){if(O(arguments[0],ht)){var t=arguments[0];if(this.isEmpty())return null;t.filter(this.getCoordinate())}else if(O(arguments[0],Bt)){var e=arguments[0];if(this.isEmpty())return null;e.filter(this._coordinates,0),e.isGeometryChanged()&&this.geometryChanged()}else(O(arguments[0],Gt)||O(arguments[0],lt))&&arguments[0].filter(this)},e.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},e.prototype.clone=function(){var e=t.prototype.clone.call(this);return e._coordinates=this._coordinates.clone(),e},e.prototype.getGeometryType=function(){return"Point"},e.prototype.copy=function(){return new e(this._coordinates.copy(),this._factory)},e.prototype.getCoordinateSequence=function(){return this._coordinates},e.prototype.getY=function(){if(null===this.getCoordinate())throw new Error("getY called on empty Point");return this.getCoordinate().y},e.prototype.isEmpty=function(){return 0===this._coordinates.size()},e.prototype.init=function(t){null===t&&(t=this.getFactory().getCoordinateSequenceFactory().create([])),et.isTrue(t.size()<=1),this._coordinates=t},e.prototype.isSimple=function(){return!0},e.prototype.interfaces_=function(){return[Zt]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return 0x44077bad161cbc00},Object.defineProperties(e,n),e}(ct),Kt=function(){};Kt.prototype.interfaces_=function(){return[]},Kt.prototype.getClass=function(){return Kt};var Qt=function(t){function e(e,n,r){if(t.call(this,r),this._shell=null,this._holes=null,null===e&&(e=this.getFactory().createLinearRing()),null===n&&(n=[]),t.hasNullElements(n))throw new _("holes must not contain null elements");if(e.isEmpty()&&t.hasNonEmptyElements(n))throw new _("shell is empty but holes are not");this._shell=e,this._holes=n}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){return this._shell.getEnvelopeInternal()},e.prototype.getSortIndex=function(){return t.SORTINDEX_POLYGON},e.prototype.getCoordinates=function(){if(this.isEmpty())return[];for(var t=new Array(this.getNumPoints()).fill(null),e=-1,n=this._shell.getCoordinates(),r=0;r<n.length;r++)t[++e]=n[r];for(var i=0;i<this._holes.length;i++)for(var o=this._holes[i].getCoordinates(),a=0;a<o.length;a++)t[++e]=o[a];return t},e.prototype.getArea=function(){var t=0;t+=Math.abs(st.signedArea(this._shell.getCoordinateSequence()));for(var e=0;e<this._holes.length;e++)t-=Math.abs(st.signedArea(this._holes[e].getCoordinateSequence()));return t},e.prototype.isRectangle=function(){if(0!==this.getNumInteriorRing())return!1;if(null===this._shell)return!1;if(5!==this._shell.getNumPoints())return!1;for(var t=this._shell.getCoordinateSequence(),e=this.getEnvelopeInternal(),n=0;n<5;n++){var r=t.getX(n);if(r!==e.getMinX()&&r!==e.getMaxX())return!1;var i=t.getY(n);if(i!==e.getMinY()&&i!==e.getMaxY())return!1}for(var o=t.getX(0),a=t.getY(0),s=1;s<=4;s++){var u=t.getX(s),l=t.getY(s);if(u!==o==(l!==a))return!1;o=u,a=l}return!0},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];if(!this.isEquivalentClass(e))return!1;var r=e,i=this._shell,o=r._shell;if(!i.equalsExact(o,n))return!1;if(this._holes.length!==r._holes.length)return!1;for(var a=0;a<this._holes.length;a++)if(!this._holes[a].equalsExact(r._holes[a],n))return!1;return!0}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){if(0===arguments.length){this.normalize(this._shell,!0);for(var t=0;t<this._holes.length;t++)this.normalize(this._holes[t],!1);Ft.sort(this._holes)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(e.isEmpty())return null;var r=new Array(e.getCoordinates().length-1).fill(null);V.arraycopy(e.getCoordinates(),0,r,0,r.length);var i=Ct.minCoordinate(e.getCoordinates());Ct.scroll(r,i),V.arraycopy(r,0,e.getCoordinates(),0,r.length),e.getCoordinates()[r.length]=r[0],st.isCCW(e.getCoordinates())===n&&Ct.reverse(e.getCoordinates())}},e.prototype.getCoordinate=function(){return this._shell.getCoordinate()},e.prototype.getNumInteriorRing=function(){return this._holes.length},e.prototype.getBoundaryDimension=function(){return 1},e.prototype.getDimension=function(){return 2},e.prototype.getLength=function(){var t=0;t+=this._shell.getLength();for(var e=0;e<this._holes.length;e++)t+=this._holes[e].getLength();return t},e.prototype.getNumPoints=function(){for(var t=this._shell.getNumPoints(),e=0;e<this._holes.length;e++)t+=this._holes[e].getNumPoints();return t},e.prototype.reverse=function(){var t=this.copy();t._shell=this._shell.copy().reverse(),t._holes=new Array(this._holes.length).fill(null);for(var e=0;e<this._holes.length;e++)t._holes[e]=this._holes[e].copy().reverse();return t},e.prototype.convexHull=function(){return this.getExteriorRing().convexHull()},e.prototype.compareToSameClass=function(){if(1===arguments.length){var t=arguments[0],e=this._shell,n=t._shell;return e.compareToSameClass(n)}if(2===arguments.length){var r=arguments[1],i=arguments[0],o=this._shell,a=i._shell,s=o.compareToSameClass(a,r);if(0!==s)return s;for(var u=this.getNumInteriorRing(),l=i.getNumInteriorRing(),c=0;c<u&&c<l;){var p=this.getInteriorRingN(c),f=i.getInteriorRingN(c),h=p.compareToSameClass(f,r);if(0!==h)return h;c++}return c<u?1:c<l?-1:0}},e.prototype.apply=function(t){if(O(t,ht)){this._shell.apply(t);for(var e=0;e<this._holes.length;e++)this._holes[e].apply(t)}else if(O(t,Bt)){if(this._shell.apply(t),!t.isDone())for(var n=0;n<this._holes.length&&(this._holes[n].apply(t),!t.isDone());n++);t.isGeometryChanged()&&this.geometryChanged()}else if(O(t,Gt))t.filter(this);else if(O(t,lt)){t.filter(this),this._shell.apply(t);for(var r=0;r<this._holes.length;r++)this._holes[r].apply(t)}},e.prototype.getBoundary=function(){if(this.isEmpty())return this.getFactory().createMultiLineString();var t=new Array(this._holes.length+1).fill(null);t[0]=this._shell;for(var e=0;e<this._holes.length;e++)t[e+1]=this._holes[e];return t.length<=1?this.getFactory().createLinearRing(t[0].getCoordinateSequence()):this.getFactory().createMultiLineString(t)},e.prototype.clone=function(){var e=t.prototype.clone.call(this);e._shell=this._shell.clone(),e._holes=new Array(this._holes.length).fill(null);for(var n=0;n<this._holes.length;n++)e._holes[n]=this._holes[n].clone();return e},e.prototype.getGeometryType=function(){return"Polygon"},e.prototype.copy=function(){for(var t=this._shell.copy(),n=new Array(this._holes.length).fill(null),r=0;r<n.length;r++)n[r]=this._holes[r].copy();return new e(t,n,this._factory)},e.prototype.getExteriorRing=function(){return this._shell},e.prototype.isEmpty=function(){return this._shell.isEmpty()},e.prototype.getInteriorRingN=function(t){return this._holes[t]},e.prototype.interfaces_=function(){return[Kt]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return-0x307ffefd8dc97200},Object.defineProperties(e,n),e}(ct),te=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return ct.SORTINDEX_MULTIPOINT},e.prototype.isValid=function(){return!0},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!this.isEquivalentClass(e)&&t.prototype.equalsExact.call(this,e,n)}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.getCoordinate=function(){if(1===arguments.length){var e=arguments[0];return this._geometries[e].getCoordinate()}return t.prototype.getCoordinate.apply(this,arguments)},e.prototype.getBoundaryDimension=function(){return jt.FALSE},e.prototype.getDimension=function(){return 0},e.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},e.prototype.getGeometryType=function(){return"MultiPoint"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),n=0;n<t.length;n++)t[n]=this._geometries[n].copy();return new e(t,this._factory)},e.prototype.interfaces_=function(){return[Zt]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return-0x6fb1ed4162e0fc00},Object.defineProperties(e,n),e}(qt),ee=function(t){function e(e,n){e instanceof N&&n instanceof me&&(e=n.getCoordinateSequenceFactory().create(e)),t.call(this,e,n),this.validateConstruction()}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={MINIMUM_VALID_SIZE:{configurable:!0},serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return ct.SORTINDEX_LINEARRING},e.prototype.getBoundaryDimension=function(){return jt.FALSE},e.prototype.isClosed=function(){return!!this.isEmpty()||t.prototype.isClosed.call(this)},e.prototype.reverse=function(){var t=this._points.copy();return Wt.reverse(t),this.getFactory().createLinearRing(t)},e.prototype.validateConstruction=function(){if(!this.isEmpty()&&!t.prototype.isClosed.call(this))throw new _("Points of LinearRing do not form a closed linestring");if(this.getCoordinateSequence().size()>=1&&this.getCoordinateSequence().size()<e.MINIMUM_VALID_SIZE)throw new _("Invalid number of points in LinearRing (found "+this.getCoordinateSequence().size()+" - must be 0 or >= 4)")},e.prototype.getGeometryType=function(){return"LinearRing"},e.prototype.copy=function(){return new e(this._points.copy(),this._factory)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},n.MINIMUM_VALID_SIZE.get=function(){return 4},n.serialVersionUID.get=function(){return-0x3b229e262367a600},Object.defineProperties(e,n),e}($t),ne=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return ct.SORTINDEX_MULTIPOLYGON},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!this.isEquivalentClass(e)&&t.prototype.equalsExact.call(this,e,n)}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.getBoundaryDimension=function(){return 1},e.prototype.getDimension=function(){return 2},e.prototype.reverse=function(){for(var t=this._geometries.length,e=new Array(t).fill(null),n=0;n<this._geometries.length;n++)e[n]=this._geometries[n].reverse();return this.getFactory().createMultiPolygon(e)},e.prototype.getBoundary=function(){if(this.isEmpty())return this.getFactory().createMultiLineString();for(var t=new Et,e=0;e<this._geometries.length;e++)for(var n=this._geometries[e].getBoundary(),r=0;r<n.getNumGeometries();r++)t.add(n.getGeometryN(r));var i=new Array(t.size()).fill(null);return this.getFactory().createMultiLineString(t.toArray(i))},e.prototype.getGeometryType=function(){return"MultiPolygon"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),n=0;n<t.length;n++)t[n]=this._geometries[n].copy();return new e(t,this._factory)},e.prototype.interfaces_=function(){return[Kt]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return-0x7a5aa1369171980},Object.defineProperties(e,n),e}(qt),re=function(t){this._factory=t||null,this._isUserDataCopied=!1},ie={NoOpGeometryOperation:{configurable:!0},CoordinateOperation:{configurable:!0},CoordinateSequenceOperation:{configurable:!0}};re.prototype.setCopyUserData=function(t){this._isUserDataCopied=t},re.prototype.edit=function(t,e){if(null===t)return null;var n=this.editInternal(t,e);return this._isUserDataCopied&&n.setUserData(t.getUserData()),n},re.prototype.editInternal=function(t,e){return null===this._factory&&(this._factory=t.getFactory()),t instanceof qt?this.editGeometryCollection(t,e):t instanceof Qt?this.editPolygon(t,e):t instanceof Jt||t instanceof $t?e.edit(t,this._factory):(et.shouldNeverReachHere("Unsupported Geometry class: "+t.getClass().getName()),null)},re.prototype.editGeometryCollection=function(t,e){for(var n=e.edit(t,this._factory),r=new Et,i=0;i<n.getNumGeometries();i++){var o=this.edit(n.getGeometryN(i),e);null===o||o.isEmpty()||r.add(o)}return n.getClass()===te?this._factory.createMultiPoint(r.toArray([])):n.getClass()===Ut?this._factory.createMultiLineString(r.toArray([])):n.getClass()===ne?this._factory.createMultiPolygon(r.toArray([])):this._factory.createGeometryCollection(r.toArray([]))},re.prototype.editPolygon=function(t,e){var n=e.edit(t,this._factory);if(null===n&&(n=this._factory.createPolygon(null)),n.isEmpty())return n;var r=this.edit(n.getExteriorRing(),e);if(null===r||r.isEmpty())return this._factory.createPolygon();for(var i=new Et,o=0;o<n.getNumInteriorRing();o++){var a=this.edit(n.getInteriorRingN(o),e);null===a||a.isEmpty()||i.add(a)}return this._factory.createPolygon(r,i.toArray([]))},re.prototype.interfaces_=function(){return[]},re.prototype.getClass=function(){return re},re.GeometryEditorOperation=function(){},ie.NoOpGeometryOperation.get=function(){return oe},ie.CoordinateOperation.get=function(){return ae},ie.CoordinateSequenceOperation.get=function(){return se},Object.defineProperties(re,ie);var oe=function(){};oe.prototype.edit=function(t,e){return t},oe.prototype.interfaces_=function(){return[re.GeometryEditorOperation]},oe.prototype.getClass=function(){return oe};var ae=function(){};ae.prototype.edit=function(t,e){var n=this.editCoordinates(t.getCoordinates(),t);return null===n?t:t instanceof ee?e.createLinearRing(n):t instanceof $t?e.createLineString(n):t instanceof Jt?n.length>0?e.createPoint(n[0]):e.createPoint():t},ae.prototype.interfaces_=function(){return[re.GeometryEditorOperation]},ae.prototype.getClass=function(){return ae};var se=function(){};se.prototype.edit=function(t,e){return t instanceof ee?e.createLinearRing(this.edit(t.getCoordinateSequence(),t)):t instanceof $t?e.createLineString(this.edit(t.getCoordinateSequence(),t)):t instanceof Jt?e.createPoint(this.edit(t.getCoordinateSequence(),t)):t},se.prototype.interfaces_=function(){return[re.GeometryEditorOperation]},se.prototype.getClass=function(){return se};var ue=function(){if(this._dimension=3,this._coordinates=null,1===arguments.length){if(arguments[0]instanceof Array)this._coordinates=arguments[0],this._dimension=3;else if(Number.isInteger(arguments[0])){var t=arguments[0];this._coordinates=new Array(t).fill(null);for(var e=0;e<t;e++)this._coordinates[e]=new N}else if(O(arguments[0],G)){var n=arguments[0];if(null===n)return this._coordinates=new Array(0).fill(null),null;this._dimension=n.getDimension(),this._coordinates=new Array(n.size()).fill(null);for(var r=0;r<this._coordinates.length;r++)this._coordinates[r]=n.getCoordinateCopy(r)}}else if(2===arguments.length)if(arguments[0]instanceof Array&&Number.isInteger(arguments[1])){var i=arguments[0],o=arguments[1];this._coordinates=i,this._dimension=o,null===i&&(this._coordinates=new Array(0).fill(null))}else if(Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var a=arguments[0],s=arguments[1];this._coordinates=new Array(a).fill(null),this._dimension=s;for(var u=0;u<a;u++)this._coordinates[u]=new N}},le={serialVersionUID:{configurable:!0}};ue.prototype.setOrdinate=function(t,e,n){switch(e){case G.X:this._coordinates[t].x=n;break;case G.Y:this._coordinates[t].y=n;break;case G.Z:this._coordinates[t].z=n;break;default:throw new _("invalid ordinateIndex")}},ue.prototype.size=function(){return this._coordinates.length},ue.prototype.getOrdinate=function(t,e){switch(e){case G.X:return this._coordinates[t].x;case G.Y:return this._coordinates[t].y;case G.Z:return this._coordinates[t].z}return v.NaN},ue.prototype.getCoordinate=function(){if(1===arguments.length){var t=arguments[0];return this._coordinates[t]}if(2===arguments.length){var e=arguments[0],n=arguments[1];n.x=this._coordinates[e].x,n.y=this._coordinates[e].y,n.z=this._coordinates[e].z}},ue.prototype.getCoordinateCopy=function(t){return new N(this._coordinates[t])},ue.prototype.getDimension=function(){return this._dimension},ue.prototype.getX=function(t){return this._coordinates[t].x},ue.prototype.clone=function(){for(var t=new Array(this.size()).fill(null),e=0;e<this._coordinates.length;e++)t[e]=this._coordinates[e].clone();return new ue(t,this._dimension)},ue.prototype.expandEnvelope=function(t){for(var e=0;e<this._coordinates.length;e++)t.expandToInclude(this._coordinates[e]);return t},ue.prototype.copy=function(){for(var t=new Array(this.size()).fill(null),e=0;e<this._coordinates.length;e++)t[e]=this._coordinates[e].copy();return new ue(t,this._dimension)},ue.prototype.toString=function(){if(this._coordinates.length>0){var t=new T(17*this._coordinates.length);t.append("("),t.append(this._coordinates[0]);for(var e=1;e<this._coordinates.length;e++)t.append(", "),t.append(this._coordinates[e]);return t.append(")"),t.toString()}return"()"},ue.prototype.getY=function(t){return this._coordinates[t].y},ue.prototype.toCoordinateArray=function(){return this._coordinates},ue.prototype.interfaces_=function(){return[G,e]},ue.prototype.getClass=function(){return ue},le.serialVersionUID.get=function(){return-0xcb44a778db18e00},Object.defineProperties(ue,le);var ce=function(){},pe={serialVersionUID:{configurable:!0},instanceObject:{configurable:!0}};ce.prototype.readResolve=function(){return ce.instance()},ce.prototype.create=function(){if(1===arguments.length){if(arguments[0]instanceof Array)return new ue(arguments[0]);if(O(arguments[0],G))return new ue(arguments[0])}else if(2===arguments.length){var t=arguments[0],e=arguments[1];return e>3&&(e=3),e<2?new ue(t):new ue(t,e)}},ce.prototype.interfaces_=function(){return[S,e]},ce.prototype.getClass=function(){return ce},ce.instance=function(){return ce.instanceObject},pe.serialVersionUID.get=function(){return-0x38e49fa6cf6f2e00},pe.instanceObject.get=function(){return new ce},Object.defineProperties(ce,pe);var fe=function(t){function e(){t.call(this),this.map_=new Map}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(t){return this.map_.get(t)||null},e.prototype.put=function(t,e){return this.map_.set(t,e),e},e.prototype.values=function(){for(var t=new Et,e=this.map_.values(),n=e.next();!n.done;)t.add(n.value),n=e.next();return t},e.prototype.entrySet=function(){var t=new Rt;return this.map_.entries().forEach((function(e){return t.add(e)})),t},e.prototype.size=function(){return this.map_.size()},e}(Ot),he=function t(){if(this._modelType=null,this._scale=null,0===arguments.length)this._modelType=t.FLOATING;else if(1===arguments.length)if(arguments[0]instanceof ge){var e=arguments[0];this._modelType=e,e===t.FIXED&&this.setScale(1)}else if("number"==typeof arguments[0]){var n=arguments[0];this._modelType=t.FIXED,this.setScale(n)}else if(arguments[0]instanceof t){var r=arguments[0];this._modelType=r._modelType,this._scale=r._scale}},de={serialVersionUID:{configurable:!0},maximumPreciseValue:{configurable:!0}};he.prototype.equals=function(t){if(!(t instanceof he))return!1;var e=t;return this._modelType===e._modelType&&this._scale===e._scale},he.prototype.compareTo=function(t){var e=t,n=this.getMaximumSignificantDigits(),r=e.getMaximumSignificantDigits();return new A(n).compareTo(new A(r))},he.prototype.getScale=function(){return this._scale},he.prototype.isFloating=function(){return this._modelType===he.FLOATING||this._modelType===he.FLOATING_SINGLE},he.prototype.getType=function(){return this._modelType},he.prototype.toString=function(){var t="UNKNOWN";return this._modelType===he.FLOATING?t="Floating":this._modelType===he.FLOATING_SINGLE?t="Floating-Single":this._modelType===he.FIXED&&(t="Fixed (Scale="+this.getScale()+")"),t},he.prototype.makePrecise=function(){if("number"==typeof arguments[0]){var t=arguments[0];return v.isNaN(t)||this._modelType===he.FLOATING_SINGLE?t:this._modelType===he.FIXED?Math.round(t*this._scale)/this._scale:t}if(arguments[0]instanceof N){var e=arguments[0];if(this._modelType===he.FLOATING)return null;e.x=this.makePrecise(e.x),e.y=this.makePrecise(e.y)}},he.prototype.getMaximumSignificantDigits=function(){var t=16;return this._modelType===he.FLOATING?t=16:this._modelType===he.FLOATING_SINGLE?t=6:this._modelType===he.FIXED&&(t=1+Math.trunc(Math.ceil(Math.log(this.getScale())/Math.log(10)))),t},he.prototype.setScale=function(t){this._scale=Math.abs(t)},he.prototype.interfaces_=function(){return[e,x]},he.prototype.getClass=function(){return he},he.mostPrecise=function(t,e){return t.compareTo(e)>=0?t:e},de.serialVersionUID.get=function(){return 0x6bee6404e9a25c00},de.maximumPreciseValue.get=function(){return 9007199254740992},Object.defineProperties(he,de);var ge=function t(e){this._name=e||null,t.nameToTypeMap.put(e,this)},ye={serialVersionUID:{configurable:!0},nameToTypeMap:{configurable:!0}};ge.prototype.readResolve=function(){return ge.nameToTypeMap.get(this._name)},ge.prototype.toString=function(){return this._name},ge.prototype.interfaces_=function(){return[e]},ge.prototype.getClass=function(){return ge},ye.serialVersionUID.get=function(){return-552860263173159e4},ye.nameToTypeMap.get=function(){return new fe},Object.defineProperties(ge,ye),he.Type=ge,he.FIXED=new ge("FIXED"),he.FLOATING=new ge("FLOATING"),he.FLOATING_SINGLE=new ge("FLOATING SINGLE");var me=function t(){this._precisionModel=new he,this._SRID=0,this._coordinateSequenceFactory=t.getDefaultCoordinateSequenceFactory(),0===arguments.length||(1===arguments.length?O(arguments[0],S)?this._coordinateSequenceFactory=arguments[0]:arguments[0]instanceof he&&(this._precisionModel=arguments[0]):2===arguments.length?(this._precisionModel=arguments[0],this._SRID=arguments[1]):3===arguments.length&&(this._precisionModel=arguments[0],this._SRID=arguments[1],this._coordinateSequenceFactory=arguments[2]))},_e={serialVersionUID:{configurable:!0}};me.prototype.toGeometry=function(t){return t.isNull()?this.createPoint(null):t.getMinX()===t.getMaxX()&&t.getMinY()===t.getMaxY()?this.createPoint(new N(t.getMinX(),t.getMinY())):t.getMinX()===t.getMaxX()||t.getMinY()===t.getMaxY()?this.createLineString([new N(t.getMinX(),t.getMinY()),new N(t.getMaxX(),t.getMaxY())]):this.createPolygon(this.createLinearRing([new N(t.getMinX(),t.getMinY()),new N(t.getMinX(),t.getMaxY()),new N(t.getMaxX(),t.getMaxY()),new N(t.getMaxX(),t.getMinY()),new N(t.getMinX(),t.getMinY())]),null)},me.prototype.createLineString=function(t){return t?t instanceof Array?new $t(this.getCoordinateSequenceFactory().create(t),this):O(t,G)?new $t(t,this):void 0:new $t(this.getCoordinateSequenceFactory().create([]),this)},me.prototype.createMultiLineString=function(){return 0===arguments.length?new Ut(null,this):1===arguments.length?new Ut(arguments[0],this):void 0},me.prototype.buildGeometry=function(t){for(var e=null,n=!1,r=!1,i=t.iterator();i.hasNext();){var o=i.next(),a=o.getClass();null===e&&(e=a),a!==e&&(n=!0),o.isGeometryCollectionOrDerived()&&(r=!0)}if(null===e)return this.createGeometryCollection();if(n||r)return this.createGeometryCollection(me.toGeometryArray(t));var s=t.iterator().next();if(t.size()>1){if(s instanceof Qt)return this.createMultiPolygon(me.toPolygonArray(t));if(s instanceof $t)return this.createMultiLineString(me.toLineStringArray(t));if(s instanceof Jt)return this.createMultiPoint(me.toPointArray(t));et.shouldNeverReachHere("Unhandled class: "+s.getClass().getName())}return s},me.prototype.createMultiPointFromCoords=function(t){return this.createMultiPoint(null!==t?this.getCoordinateSequenceFactory().create(t):null)},me.prototype.createPoint=function(){if(0===arguments.length)return this.createPoint(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof N){var t=arguments[0];return this.createPoint(null!==t?this.getCoordinateSequenceFactory().create([t]):null)}if(O(arguments[0],G))return new Jt(arguments[0],this)}},me.prototype.getCoordinateSequenceFactory=function(){return this._coordinateSequenceFactory},me.prototype.createPolygon=function(){if(0===arguments.length)return new Qt(null,null,this);if(1===arguments.length){if(O(arguments[0],G)){var t=arguments[0];return this.createPolygon(this.createLinearRing(t))}if(arguments[0]instanceof Array){var e=arguments[0];return this.createPolygon(this.createLinearRing(e))}if(arguments[0]instanceof ee){var n=arguments[0];return this.createPolygon(n,null)}}else if(2===arguments.length)return new Qt(arguments[0],arguments[1],this)},me.prototype.getSRID=function(){return this._SRID},me.prototype.createGeometryCollection=function(){return 0===arguments.length?new qt(null,this):1===arguments.length?new qt(arguments[0],this):void 0},me.prototype.createGeometry=function(t){return new re(this).edit(t,{edit:function(){if(2===arguments.length){var t=arguments[0];return this._coordinateSequenceFactory.create(t)}}})},me.prototype.getPrecisionModel=function(){return this._precisionModel},me.prototype.createLinearRing=function(){if(0===arguments.length)return this.createLinearRing(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof Array){var t=arguments[0];return this.createLinearRing(null!==t?this.getCoordinateSequenceFactory().create(t):null)}if(O(arguments[0],G))return new ee(arguments[0],this)}},me.prototype.createMultiPolygon=function(){return 0===arguments.length?new ne(null,this):1===arguments.length?new ne(arguments[0],this):void 0},me.prototype.createMultiPoint=function(){if(0===arguments.length)return new te(null,this);if(1===arguments.length){if(arguments[0]instanceof Array)return new te(arguments[0],this);if(arguments[0]instanceof Array){var t=arguments[0];return this.createMultiPoint(null!==t?this.getCoordinateSequenceFactory().create(t):null)}if(O(arguments[0],G)){var e=arguments[0];if(null===e)return this.createMultiPoint(new Array(0).fill(null));for(var n=new Array(e.size()).fill(null),r=0;r<e.size();r++){var i=this.getCoordinateSequenceFactory().create(1,e.getDimension());Wt.copy(e,r,i,0,1),n[r]=this.createPoint(i)}return this.createMultiPoint(n)}}},me.prototype.interfaces_=function(){return[e]},me.prototype.getClass=function(){return me},me.toMultiPolygonArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},me.toGeometryArray=function(t){if(null===t)return null;var e=new Array(t.size()).fill(null);return t.toArray(e)},me.getDefaultCoordinateSequenceFactory=function(){return ce.instance()},me.toMultiLineStringArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},me.toLineStringArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},me.toMultiPointArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},me.toLinearRingArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},me.toPointArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},me.toPolygonArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},me.createPointFromInternalCoord=function(t,e){return e.getPrecisionModel().makePrecise(t),e.getFactory().createPoint(t)},_e.serialVersionUID.get=function(){return-0x5ea75f2051eeb400},Object.defineProperties(me,_e);var ve=["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"],be=function(t){this.geometryFactory=t||new me};be.prototype.read=function(t){var e,n=(e="string"==typeof t?JSON.parse(t):t).type;if(!xe[n])throw new Error("Unknown GeoJSON type: "+e.type);return-1!==ve.indexOf(n)?xe[n].apply(this,[e.coordinates]):"GeometryCollection"===n?xe[n].apply(this,[e.geometries]):xe[n].apply(this,[e])},be.prototype.write=function(t){var e=t.getGeometryType();if(!we[e])throw new Error("Geometry is not supported");return we[e].apply(this,[t])};var xe={Feature:function(t){var e={};for(var n in t)e[n]=t[n];if(t.geometry){var r=t.geometry.type;if(!xe[r])throw new Error("Unknown GeoJSON type: "+t.type);e.geometry=this.read(t.geometry)}return t.bbox&&(e.bbox=xe.bbox.apply(this,[t.bbox])),e},FeatureCollection:function(t){var e={};if(t.features){e.features=[];for(var n=0;n<t.features.length;++n)e.features.push(this.read(t.features[n]))}return t.bbox&&(e.bbox=this.parse.bbox.apply(this,[t.bbox])),e},coordinates:function(t){for(var e=[],n=0;n<t.length;++n){var r=t[n];e.push(new N(r[0],r[1]))}return e},bbox:function(t){return this.geometryFactory.createLinearRing([new N(t[0],t[1]),new N(t[2],t[1]),new N(t[2],t[3]),new N(t[0],t[3]),new N(t[0],t[1])])},Point:function(t){var e=new N(t[0],t[1]);return this.geometryFactory.createPoint(e)},MultiPoint:function(t){for(var e=[],n=0;n<t.length;++n)e.push(xe.Point.apply(this,[t[n]]));return this.geometryFactory.createMultiPoint(e)},LineString:function(t){var e=xe.coordinates.apply(this,[t]);return this.geometryFactory.createLineString(e)},MultiLineString:function(t){for(var e=[],n=0;n<t.length;++n)e.push(xe.LineString.apply(this,[t[n]]));return this.geometryFactory.createMultiLineString(e)},Polygon:function(t){for(var e=xe.coordinates.apply(this,[t[0]]),n=this.geometryFactory.createLinearRing(e),r=[],i=1;i<t.length;++i){var o=t[i],a=xe.coordinates.apply(this,[o]),s=this.geometryFactory.createLinearRing(a);r.push(s)}return this.geometryFactory.createPolygon(n,r)},MultiPolygon:function(t){for(var e=[],n=0;n<t.length;++n){var r=t[n];e.push(xe.Polygon.apply(this,[r]))}return this.geometryFactory.createMultiPolygon(e)},GeometryCollection:function(t){for(var e=[],n=0;n<t.length;++n){var r=t[n];e.push(this.read(r))}return this.geometryFactory.createGeometryCollection(e)}},we={coordinate:function(t){return[t.x,t.y]},Point:function(t){return{type:"Point",coordinates:we.coordinate.apply(this,[t.getCoordinate()])}},MultiPoint:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var r=t._geometries[n],i=we.Point.apply(this,[r]);e.push(i.coordinates)}return{type:"MultiPoint",coordinates:e}},LineString:function(t){for(var e=[],n=t.getCoordinates(),r=0;r<n.length;++r){var i=n[r];e.push(we.coordinate.apply(this,[i]))}return{type:"LineString",coordinates:e}},MultiLineString:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var r=t._geometries[n],i=we.LineString.apply(this,[r]);e.push(i.coordinates)}return{type:"MultiLineString",coordinates:e}},Polygon:function(t){var e=[],n=we.LineString.apply(this,[t._shell]);e.push(n.coordinates);for(var r=0;r<t._holes.length;++r){var i=t._holes[r],o=we.LineString.apply(this,[i]);e.push(o.coordinates)}return{type:"Polygon",coordinates:e}},MultiPolygon:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var r=t._geometries[n],i=we.Polygon.apply(this,[r]);e.push(i.coordinates)}return{type:"MultiPolygon",coordinates:e}},GeometryCollection:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var r=t._geometries[n],i=r.getGeometryType();e.push(we[i].apply(this,[r]))}return{type:"GeometryCollection",geometries:e}}},Ee=function(t){this.geometryFactory=t||new me,this.precisionModel=this.geometryFactory.getPrecisionModel(),this.parser=new be(this.geometryFactory)};Ee.prototype.read=function(t){var e=this.parser.read(t);return this.precisionModel.getType()===he.FIXED&&this.reducePrecision(e),e},Ee.prototype.reducePrecision=function(t){var e,n;if(t.coordinate)this.precisionModel.makePrecise(t.coordinate);else if(t.points)for(e=0,n=t.points.length;e<n;e++)this.precisionModel.makePrecise(t.points[e]);else if(t.geometries)for(e=0,n=t.geometries.length;e<n;e++)this.reducePrecision(t.geometries[e])};var Ne=function(){this.parser=new be(this.geometryFactory)};Ne.prototype.write=function(t){return this.parser.write(t)};var Ie=function(){},Ce={ON:{configurable:!0},LEFT:{configurable:!0},RIGHT:{configurable:!0}};Ie.prototype.interfaces_=function(){return[]},Ie.prototype.getClass=function(){return Ie},Ie.opposite=function(t){return t===Ie.LEFT?Ie.RIGHT:t===Ie.RIGHT?Ie.LEFT:t},Ce.ON.get=function(){return 0},Ce.LEFT.get=function(){return 1},Ce.RIGHT.get=function(){return 2},Object.defineProperties(Ie,Ce),(g.prototype=new Error).name="EmptyStackException",(y.prototype=new wt).add=function(t){return this.array_.push(t),!0},y.prototype.get=function(t){if(t<0||t>=this.size())throw new Error;return this.array_[t]},y.prototype.push=function(t){return this.array_.push(t),t},y.prototype.pop=function(t){if(0===this.array_.length)throw new g;return this.array_.pop()},y.prototype.peek=function(){if(0===this.array_.length)throw new g;return this.array_[this.array_.length-1]},y.prototype.empty=function(){return 0===this.array_.length},y.prototype.isEmpty=function(){return this.empty()},y.prototype.search=function(t){return this.array_.indexOf(t)},y.prototype.size=function(){return this.array_.length},y.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t};var Se=function(){this._minIndex=-1,this._minCoord=null,this._minDe=null,this._orientedDe=null};Se.prototype.getCoordinate=function(){return this._minCoord},Se.prototype.getRightmostSide=function(t,e){var n=this.getRightmostSideOfSegment(t,e);return n<0&&(n=this.getRightmostSideOfSegment(t,e-1)),n<0&&(this._minCoord=null,this.checkForRightmostCoordinate(t)),n},Se.prototype.findRightmostEdgeAtVertex=function(){var t=this._minDe.getEdge().getCoordinates();et.isTrue(this._minIndex>0&&this._minIndex<t.length,"rightmost point expected to be interior vertex of edge");var e=t[this._minIndex-1],n=t[this._minIndex+1],r=st.computeOrientation(this._minCoord,n,e),i=!1;(e.y<this._minCoord.y&&n.y<this._minCoord.y&&r===st.COUNTERCLOCKWISE||e.y>this._minCoord.y&&n.y>this._minCoord.y&&r===st.CLOCKWISE)&&(i=!0),i&&(this._minIndex=this._minIndex-1)},Se.prototype.getRightmostSideOfSegment=function(t,e){var n=t.getEdge().getCoordinates();if(e<0||e+1>=n.length)return-1;if(n[e].y===n[e+1].y)return-1;var r=Ie.LEFT;return n[e].y<n[e+1].y&&(r=Ie.RIGHT),r},Se.prototype.getEdge=function(){return this._orientedDe},Se.prototype.checkForRightmostCoordinate=function(t){for(var e=t.getEdge().getCoordinates(),n=0;n<e.length-1;n++)(null===this._minCoord||e[n].x>this._minCoord.x)&&(this._minDe=t,this._minIndex=n,this._minCoord=e[n])},Se.prototype.findRightmostEdgeAtNode=function(){var t=this._minDe.getNode().getEdges();this._minDe=t.getRightmostEdge(),this._minDe.isForward()||(this._minDe=this._minDe.getSym(),this._minIndex=this._minDe.getEdge().getCoordinates().length-1)},Se.prototype.findEdge=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();n.isForward()&&this.checkForRightmostCoordinate(n)}et.isTrue(0!==this._minIndex||this._minCoord.equals(this._minDe.getCoordinate()),"inconsistency in rightmost processing"),0===this._minIndex?this.findRightmostEdgeAtNode():this.findRightmostEdgeAtVertex(),this._orientedDe=this._minDe,this.getRightmostSide(this._minDe,this._minIndex)===Ie.LEFT&&(this._orientedDe=this._minDe.getSym())},Se.prototype.interfaces_=function(){return[]},Se.prototype.getClass=function(){return Se};var Le=function(t){function e(n,r){t.call(this,e.msgWithCoord(n,r)),this.pt=r?new N(r):null,this.name="TopologyException"}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getCoordinate=function(){return this.pt},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.msgWithCoord=function(t,e){return e?t:t+" [ "+e+" ]"},e}(Q),Me=function(){this.array_=[]};Me.prototype.addLast=function(t){this.array_.push(t)},Me.prototype.removeFirst=function(){return this.array_.shift()},Me.prototype.isEmpty=function(){return 0===this.array_.length};var Oe=function(){this._finder=null,this._dirEdgeList=new Et,this._nodes=new Et,this._rightMostCoord=null,this._env=null,this._finder=new Se};Oe.prototype.clearVisitedEdges=function(){for(var t=this._dirEdgeList.iterator();t.hasNext();)t.next().setVisited(!1)},Oe.prototype.getRightmostCoordinate=function(){return this._rightMostCoord},Oe.prototype.computeNodeDepth=function(t){for(var e=null,n=t.getEdges().iterator();n.hasNext();){var r=n.next();if(r.isVisited()||r.getSym().isVisited()){e=r;break}}if(null===e)throw new Le("unable to find edge to compute depths at "+t.getCoordinate());t.getEdges().computeDepths(e);for(var i=t.getEdges().iterator();i.hasNext();){var o=i.next();o.setVisited(!0),this.copySymDepths(o)}},Oe.prototype.computeDepth=function(t){this.clearVisitedEdges();var e=this._finder.getEdge();e.setEdgeDepths(Ie.RIGHT,t),this.copySymDepths(e),this.computeDepths(e)},Oe.prototype.create=function(t){this.addReachable(t),this._finder.findEdge(this._dirEdgeList),this._rightMostCoord=this._finder.getCoordinate()},Oe.prototype.findResultEdges=function(){for(var t=this._dirEdgeList.iterator();t.hasNext();){var e=t.next();e.getDepth(Ie.RIGHT)>=1&&e.getDepth(Ie.LEFT)<=0&&!e.isInteriorAreaEdge()&&e.setInResult(!0)}},Oe.prototype.computeDepths=function(t){var e=new Rt,n=new Me,r=t.getNode();for(n.addLast(r),e.add(r),t.setVisited(!0);!n.isEmpty();){var i=n.removeFirst();e.add(i),this.computeNodeDepth(i);for(var o=i.getEdges().iterator();o.hasNext();){var a=o.next().getSym();if(!a.isVisited()){var s=a.getNode();e.contains(s)||(n.addLast(s),e.add(s))}}}},Oe.prototype.compareTo=function(t){var e=t;return this._rightMostCoord.x<e._rightMostCoord.x?-1:this._rightMostCoord.x>e._rightMostCoord.x?1:0},Oe.prototype.getEnvelope=function(){if(null===this._env){for(var t=new X,e=this._dirEdgeList.iterator();e.hasNext();)for(var n=e.next().getEdge().getCoordinates(),r=0;r<n.length-1;r++)t.expandToInclude(n[r]);this._env=t}return this._env},Oe.prototype.addReachable=function(t){var e=new y;for(e.add(t);!e.empty();){var n=e.pop();this.add(n,e)}},Oe.prototype.copySymDepths=function(t){var e=t.getSym();e.setDepth(Ie.LEFT,t.getDepth(Ie.RIGHT)),e.setDepth(Ie.RIGHT,t.getDepth(Ie.LEFT))},Oe.prototype.add=function(t,e){t.setVisited(!0),this._nodes.add(t);for(var n=t.getEdges().iterator();n.hasNext();){var r=n.next();this._dirEdgeList.add(r);var i=r.getSym().getNode();i.isVisited()||e.push(i)}},Oe.prototype.getNodes=function(){return this._nodes},Oe.prototype.getDirectedEdges=function(){return this._dirEdgeList},Oe.prototype.interfaces_=function(){return[x]},Oe.prototype.getClass=function(){return Oe};var Pe=function t(){if(this.location=null,1===arguments.length){if(arguments[0]instanceof Array){var e=arguments[0];this.init(e.length)}else if(Number.isInteger(arguments[0])){var n=arguments[0];this.init(1),this.location[Ie.ON]=n}else if(arguments[0]instanceof t){var r=arguments[0];if(this.init(r.location.length),null!==r)for(var i=0;i<this.location.length;i++)this.location[i]=r.location[i]}}else if(3===arguments.length){var o=arguments[0],a=arguments[1],s=arguments[2];this.init(3),this.location[Ie.ON]=o,this.location[Ie.LEFT]=a,this.location[Ie.RIGHT]=s}};Pe.prototype.setAllLocations=function(t){for(var e=0;e<this.location.length;e++)this.location[e]=t},Pe.prototype.isNull=function(){for(var t=0;t<this.location.length;t++)if(this.location[t]!==L.NONE)return!1;return!0},Pe.prototype.setAllLocationsIfNull=function(t){for(var e=0;e<this.location.length;e++)this.location[e]===L.NONE&&(this.location[e]=t)},Pe.prototype.isLine=function(){return 1===this.location.length},Pe.prototype.merge=function(t){if(t.location.length>this.location.length){var e=new Array(3).fill(null);e[Ie.ON]=this.location[Ie.ON],e[Ie.LEFT]=L.NONE,e[Ie.RIGHT]=L.NONE,this.location=e}for(var n=0;n<this.location.length;n++)this.location[n]===L.NONE&&n<t.location.length&&(this.location[n]=t.location[n])},Pe.prototype.getLocations=function(){return this.location},Pe.prototype.flip=function(){if(this.location.length<=1)return null;var t=this.location[Ie.LEFT];this.location[Ie.LEFT]=this.location[Ie.RIGHT],this.location[Ie.RIGHT]=t},Pe.prototype.toString=function(){var t=new T;return this.location.length>1&&t.append(L.toLocationSymbol(this.location[Ie.LEFT])),t.append(L.toLocationSymbol(this.location[Ie.ON])),this.location.length>1&&t.append(L.toLocationSymbol(this.location[Ie.RIGHT])),t.toString()},Pe.prototype.setLocations=function(t,e,n){this.location[Ie.ON]=t,this.location[Ie.LEFT]=e,this.location[Ie.RIGHT]=n},Pe.prototype.get=function(t){return t<this.location.length?this.location[t]:L.NONE},Pe.prototype.isArea=function(){return this.location.length>1},Pe.prototype.isAnyNull=function(){for(var t=0;t<this.location.length;t++)if(this.location[t]===L.NONE)return!0;return!1},Pe.prototype.setLocation=function(){if(1===arguments.length){var t=arguments[0];this.setLocation(Ie.ON,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.location[e]=n}},Pe.prototype.init=function(t){this.location=new Array(t).fill(null),this.setAllLocations(L.NONE)},Pe.prototype.isEqualOnSide=function(t,e){return this.location[e]===t.location[e]},Pe.prototype.allPositionsEqual=function(t){for(var e=0;e<this.location.length;e++)if(this.location[e]!==t)return!1;return!0},Pe.prototype.interfaces_=function(){return[]},Pe.prototype.getClass=function(){return Pe};var Re=function t(){if(this.elt=new Array(2).fill(null),1===arguments.length){if(Number.isInteger(arguments[0])){var e=arguments[0];this.elt[0]=new Pe(e),this.elt[1]=new Pe(e)}else if(arguments[0]instanceof t){var n=arguments[0];this.elt[0]=new Pe(n.elt[0]),this.elt[1]=new Pe(n.elt[1])}}else if(2===arguments.length){var r=arguments[0],i=arguments[1];this.elt[0]=new Pe(L.NONE),this.elt[1]=new Pe(L.NONE),this.elt[r].setLocation(i)}else if(3===arguments.length){var o=arguments[0],a=arguments[1],s=arguments[2];this.elt[0]=new Pe(o,a,s),this.elt[1]=new Pe(o,a,s)}else if(4===arguments.length){var u=arguments[0],l=arguments[1],c=arguments[2],p=arguments[3];this.elt[0]=new Pe(L.NONE,L.NONE,L.NONE),this.elt[1]=new Pe(L.NONE,L.NONE,L.NONE),this.elt[u].setLocations(l,c,p)}};Re.prototype.getGeometryCount=function(){var t=0;return this.elt[0].isNull()||t++,this.elt[1].isNull()||t++,t},Re.prototype.setAllLocations=function(t,e){this.elt[t].setAllLocations(e)},Re.prototype.isNull=function(t){return this.elt[t].isNull()},Re.prototype.setAllLocationsIfNull=function(){if(1===arguments.length){var t=arguments[0];this.setAllLocationsIfNull(0,t),this.setAllLocationsIfNull(1,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.elt[e].setAllLocationsIfNull(n)}},Re.prototype.isLine=function(t){return this.elt[t].isLine()},Re.prototype.merge=function(t){for(var e=0;e<2;e++)null===this.elt[e]&&null!==t.elt[e]?this.elt[e]=new Pe(t.elt[e]):this.elt[e].merge(t.elt[e])},Re.prototype.flip=function(){this.elt[0].flip(),this.elt[1].flip()},Re.prototype.getLocation=function(){if(1===arguments.length){var t=arguments[0];return this.elt[t].get(Ie.ON)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return this.elt[e].get(n)}},Re.prototype.toString=function(){var t=new T;return null!==this.elt[0]&&(t.append("A:"),t.append(this.elt[0].toString())),null!==this.elt[1]&&(t.append(" B:"),t.append(this.elt[1].toString())),t.toString()},Re.prototype.isArea=function(){if(0===arguments.length)return this.elt[0].isArea()||this.elt[1].isArea();if(1===arguments.length){var t=arguments[0];return this.elt[t].isArea()}},Re.prototype.isAnyNull=function(t){return this.elt[t].isAnyNull()},Re.prototype.setLocation=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];this.elt[t].setLocation(Ie.ON,e)}else if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];this.elt[n].setLocation(r,i)}},Re.prototype.isEqualOnSide=function(t,e){return this.elt[0].isEqualOnSide(t.elt[0],e)&&this.elt[1].isEqualOnSide(t.elt[1],e)},Re.prototype.allPositionsEqual=function(t,e){return this.elt[t].allPositionsEqual(e)},Re.prototype.toLine=function(t){this.elt[t].isArea()&&(this.elt[t]=new Pe(this.elt[t].location[0]))},Re.prototype.interfaces_=function(){return[]},Re.prototype.getClass=function(){return Re},Re.toLineLabel=function(t){for(var e=new Re(L.NONE),n=0;n<2;n++)e.setLocation(n,t.getLocation(n));return e};var Te=function(){this._startDe=null,this._maxNodeDegree=-1,this._edges=new Et,this._pts=new Et,this._label=new Re(L.NONE),this._ring=null,this._isHole=null,this._shell=null,this._holes=new Et,this._geometryFactory=null;var t=arguments[0],e=arguments[1];this._geometryFactory=e,this.computePoints(t),this.computeRing()};Te.prototype.computeRing=function(){if(null!==this._ring)return null;for(var t=new Array(this._pts.size()).fill(null),e=0;e<this._pts.size();e++)t[e]=this._pts.get(e);this._ring=this._geometryFactory.createLinearRing(t),this._isHole=st.isCCW(this._ring.getCoordinates())},Te.prototype.isIsolated=function(){return 1===this._label.getGeometryCount()},Te.prototype.computePoints=function(t){this._startDe=t;var e=t,n=!0;do{if(null===e)throw new Le("Found null DirectedEdge");if(e.getEdgeRing()===this)throw new Le("Directed Edge visited twice during ring-building at "+e.getCoordinate());this._edges.add(e);var r=e.getLabel();et.isTrue(r.isArea()),this.mergeLabel(r),this.addPoints(e.getEdge(),e.isForward(),n),n=!1,this.setEdgeRing(e,this),e=this.getNext(e)}while(e!==this._startDe)},Te.prototype.getLinearRing=function(){return this._ring},Te.prototype.getCoordinate=function(t){return this._pts.get(t)},Te.prototype.computeMaxNodeDegree=function(){this._maxNodeDegree=0;var t=this._startDe;do{var e=t.getNode().getEdges().getOutgoingDegree(this);e>this._maxNodeDegree&&(this._maxNodeDegree=e),t=this.getNext(t)}while(t!==this._startDe);this._maxNodeDegree*=2},Te.prototype.addPoints=function(t,e,n){var r=t.getCoordinates();if(e){var i=1;n&&(i=0);for(var o=i;o<r.length;o++)this._pts.add(r[o])}else{var a=r.length-2;n&&(a=r.length-1);for(var s=a;s>=0;s--)this._pts.add(r[s])}},Te.prototype.isHole=function(){return this._isHole},Te.prototype.setInResult=function(){var t=this._startDe;do{t.getEdge().setInResult(!0),t=t.getNext()}while(t!==this._startDe)},Te.prototype.containsPoint=function(t){var e=this.getLinearRing();if(!e.getEnvelopeInternal().contains(t))return!1;if(!st.isPointInRing(t,e.getCoordinates()))return!1;for(var n=this._holes.iterator();n.hasNext();)if(n.next().containsPoint(t))return!1;return!0},Te.prototype.addHole=function(t){this._holes.add(t)},Te.prototype.isShell=function(){return null===this._shell},Te.prototype.getLabel=function(){return this._label},Te.prototype.getEdges=function(){return this._edges},Te.prototype.getMaxNodeDegree=function(){return this._maxNodeDegree<0&&this.computeMaxNodeDegree(),this._maxNodeDegree},Te.prototype.getShell=function(){return this._shell},Te.prototype.mergeLabel=function(){if(1===arguments.length){var t=arguments[0];this.mergeLabel(t,0),this.mergeLabel(t,1)}else if(2===arguments.length){var e=arguments[1],n=arguments[0].getLocation(e,Ie.RIGHT);if(n===L.NONE)return null;if(this._label.getLocation(e)===L.NONE)return this._label.setLocation(e,n),null}},Te.prototype.setShell=function(t){this._shell=t,null!==t&&t.addHole(this)},Te.prototype.toPolygon=function(t){for(var e=new Array(this._holes.size()).fill(null),n=0;n<this._holes.size();n++)e[n]=this._holes.get(n).getLinearRing();return t.createPolygon(this.getLinearRing(),e)},Te.prototype.interfaces_=function(){return[]},Te.prototype.getClass=function(){return Te};var Ae=function(t){function e(){var e=arguments[0],n=arguments[1];t.call(this,e,n)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.setEdgeRing=function(t,e){t.setMinEdgeRing(e)},e.prototype.getNext=function(t){return t.getNextMin()},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Te),De=function(t){function e(){var e=arguments[0],n=arguments[1];t.call(this,e,n)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.buildMinimalRings=function(){var t=new Et,e=this._startDe;do{if(null===e.getMinEdgeRing()){var n=new Ae(e,this._geometryFactory);t.add(n)}e=e.getNext()}while(e!==this._startDe);return t},e.prototype.setEdgeRing=function(t,e){t.setEdgeRing(e)},e.prototype.linkDirectedEdgesForMinimalEdgeRings=function(){var t=this._startDe;do{t.getNode().getEdges().linkMinimalDirectedEdges(this),t=t.getNext()}while(t!==this._startDe)},e.prototype.getNext=function(t){return t.getNext()},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Te),ke=function(){if(this._label=null,this._isInResult=!1,this._isCovered=!1,this._isCoveredSet=!1,this._isVisited=!1,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this._label=t}};ke.prototype.setVisited=function(t){this._isVisited=t},ke.prototype.setInResult=function(t){this._isInResult=t},ke.prototype.isCovered=function(){return this._isCovered},ke.prototype.isCoveredSet=function(){return this._isCoveredSet},ke.prototype.setLabel=function(t){this._label=t},ke.prototype.getLabel=function(){return this._label},ke.prototype.setCovered=function(t){this._isCovered=t,this._isCoveredSet=!0},ke.prototype.updateIM=function(t){et.isTrue(this._label.getGeometryCount()>=2,"found partial label"),this.computeIM(t)},ke.prototype.isInResult=function(){return this._isInResult},ke.prototype.isVisited=function(){return this._isVisited},ke.prototype.interfaces_=function(){return[]},ke.prototype.getClass=function(){return ke};var Fe=function(t){function e(){t.call(this),this._coord=null,this._edges=null;var e=arguments[0],n=arguments[1];this._coord=e,this._edges=n,this._label=new Re(0,L.NONE)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.isIncidentEdgeInResult=function(){for(var t=this.getEdges().getEdges().iterator();t.hasNext();)if(t.next().getEdge().isInResult())return!0;return!1},e.prototype.isIsolated=function(){return 1===this._label.getGeometryCount()},e.prototype.getCoordinate=function(){return this._coord},e.prototype.print=function(t){t.println("node "+this._coord+" lbl: "+this._label)},e.prototype.computeIM=function(t){},e.prototype.computeMergedLocation=function(t,e){var n=L.NONE;if(n=this._label.getLocation(e),!t.isNull(e)){var r=t.getLocation(e);n!==L.BOUNDARY&&(n=r)}return n},e.prototype.setLabel=function(){if(2!==arguments.length)return t.prototype.setLabel.apply(this,arguments);var e=arguments[0],n=arguments[1];null===this._label?this._label=new Re(e,n):this._label.setLocation(e,n)},e.prototype.getEdges=function(){return this._edges},e.prototype.mergeLabel=function(){if(arguments[0]instanceof e){var t=arguments[0];this.mergeLabel(t._label)}else if(arguments[0]instanceof Re)for(var n=arguments[0],r=0;r<2;r++){var i=this.computeMergedLocation(n,r);this._label.getLocation(r)===L.NONE&&this._label.setLocation(r,i)}},e.prototype.add=function(t){this._edges.insert(t),t.setNode(this)},e.prototype.setLabelBoundary=function(t){if(null===this._label)return null;var e=L.NONE;null!==this._label&&(e=this._label.getLocation(t));var n=null;switch(e){case L.BOUNDARY:n=L.INTERIOR;break;case L.INTERIOR:default:n=L.BOUNDARY}this._label.setLocation(t,n)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(ke),je=function(){this.nodeMap=new p,this.nodeFact=null;var t=arguments[0];this.nodeFact=t};je.prototype.find=function(t){return this.nodeMap.get(t)},je.prototype.addNode=function(){if(arguments[0]instanceof N){var t=arguments[0],e=this.nodeMap.get(t);return null===e&&(e=this.nodeFact.createNode(t),this.nodeMap.put(t,e)),e}if(arguments[0]instanceof Fe){var n=arguments[0],r=this.nodeMap.get(n.getCoordinate());return null===r?(this.nodeMap.put(n.getCoordinate(),n),n):(r.mergeLabel(n),r)}},je.prototype.print=function(t){for(var e=this.iterator();e.hasNext();)e.next().print(t)},je.prototype.iterator=function(){return this.nodeMap.values().iterator()},je.prototype.values=function(){return this.nodeMap.values()},je.prototype.getBoundaryNodes=function(t){for(var e=new Et,n=this.iterator();n.hasNext();){var r=n.next();r.getLabel().getLocation(t)===L.BOUNDARY&&e.add(r)}return e},je.prototype.add=function(t){var e=t.getCoordinate();this.addNode(e).add(t)},je.prototype.interfaces_=function(){return[]},je.prototype.getClass=function(){return je};var ze=function(){},Ge={NE:{configurable:!0},NW:{configurable:!0},SW:{configurable:!0},SE:{configurable:!0}};ze.prototype.interfaces_=function(){return[]},ze.prototype.getClass=function(){return ze},ze.isNorthern=function(t){return t===ze.NE||t===ze.NW},ze.isOpposite=function(t,e){return t!==e&&2==(t-e+4)%4},ze.commonHalfPlane=function(t,e){if(t===e)return t;if(2==(t-e+4)%4)return-1;var n=t<e?t:e;return 0===n&&3===(t>e?t:e)?3:n},ze.isInHalfPlane=function(t,e){return e===ze.SE?t===ze.SE||t===ze.SW:t===e||t===e+1},ze.quadrant=function(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1];if(0===t&&0===e)throw new _("Cannot compute the quadrant for point ( "+t+", "+e+" )");return t>=0?e>=0?ze.NE:ze.SE:e>=0?ze.NW:ze.SW}if(arguments[0]instanceof N&&arguments[1]instanceof N){var n=arguments[0],r=arguments[1];if(r.x===n.x&&r.y===n.y)throw new _("Cannot compute the quadrant for two identical points "+n);return r.x>=n.x?r.y>=n.y?ze.NE:ze.SE:r.y>=n.y?ze.NW:ze.SW}},Ge.NE.get=function(){return 0},Ge.NW.get=function(){return 1},Ge.SW.get=function(){return 2},Ge.SE.get=function(){return 3},Object.defineProperties(ze,Ge);var Be=function(){if(this._edge=null,this._label=null,this._node=null,this._p0=null,this._p1=null,this._dx=null,this._dy=null,this._quadrant=null,1===arguments.length){var t=arguments[0];this._edge=t}else if(3===arguments.length){var e=arguments[0],n=arguments[1],r=arguments[2];this._edge=e,this.init(n,r),this._label=null}else if(4===arguments.length){var i=arguments[0],o=arguments[1],a=arguments[2],s=arguments[3];this._edge=i,this.init(o,a),this._label=s}};Be.prototype.compareDirection=function(t){return this._dx===t._dx&&this._dy===t._dy?0:this._quadrant>t._quadrant?1:this._quadrant<t._quadrant?-1:st.computeOrientation(t._p0,t._p1,this._p1)},Be.prototype.getDy=function(){return this._dy},Be.prototype.getCoordinate=function(){return this._p0},Be.prototype.setNode=function(t){this._node=t},Be.prototype.print=function(t){var e=Math.atan2(this._dy,this._dx),n=this.getClass().getName(),r=n.lastIndexOf("."),i=n.substring(r+1);t.print("  "+i+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+e+"   "+this._label)},Be.prototype.compareTo=function(t){var e=t;return this.compareDirection(e)},Be.prototype.getDirectedCoordinate=function(){return this._p1},Be.prototype.getDx=function(){return this._dx},Be.prototype.getLabel=function(){return this._label},Be.prototype.getEdge=function(){return this._edge},Be.prototype.getQuadrant=function(){return this._quadrant},Be.prototype.getNode=function(){return this._node},Be.prototype.toString=function(){var t=Math.atan2(this._dy,this._dx),e=this.getClass().getName(),n=e.lastIndexOf(".");return"  "+e.substring(n+1)+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+t+"   "+this._label},Be.prototype.computeLabel=function(t){},Be.prototype.init=function(t,e){this._p0=t,this._p1=e,this._dx=e.x-t.x,this._dy=e.y-t.y,this._quadrant=ze.quadrant(this._dx,this._dy),et.isTrue(!(0===this._dx&&0===this._dy),"EdgeEnd with identical endpoints found")},Be.prototype.interfaces_=function(){return[x]},Be.prototype.getClass=function(){return Be};var qe=function(t){function e(){var e=arguments[0],n=arguments[1];if(t.call(this,e),this._isForward=null,this._isInResult=!1,this._isVisited=!1,this._sym=null,this._next=null,this._nextMin=null,this._edgeRing=null,this._minEdgeRing=null,this._depth=[0,-999,-999],this._isForward=n,n)this.init(e.getCoordinate(0),e.getCoordinate(1));else{var r=e.getNumPoints()-1;this.init(e.getCoordinate(r),e.getCoordinate(r-1))}this.computeDirectedLabel()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getNextMin=function(){return this._nextMin},e.prototype.getDepth=function(t){return this._depth[t]},e.prototype.setVisited=function(t){this._isVisited=t},e.prototype.computeDirectedLabel=function(){this._label=new Re(this._edge.getLabel()),this._isForward||this._label.flip()},e.prototype.getNext=function(){return this._next},e.prototype.setDepth=function(t,e){if(-999!==this._depth[t]&&this._depth[t]!==e)throw new Le("assigned depths do not match",this.getCoordinate());this._depth[t]=e},e.prototype.isInteriorAreaEdge=function(){for(var t=!0,e=0;e<2;e++)this._label.isArea(e)&&this._label.getLocation(e,Ie.LEFT)===L.INTERIOR&&this._label.getLocation(e,Ie.RIGHT)===L.INTERIOR||(t=!1);return t},e.prototype.setNextMin=function(t){this._nextMin=t},e.prototype.print=function(e){t.prototype.print.call(this,e),e.print(" "+this._depth[Ie.LEFT]+"/"+this._depth[Ie.RIGHT]),e.print(" ("+this.getDepthDelta()+")"),this._isInResult&&e.print(" inResult")},e.prototype.setMinEdgeRing=function(t){this._minEdgeRing=t},e.prototype.isLineEdge=function(){var t=this._label.isLine(0)||this._label.isLine(1),e=!this._label.isArea(0)||this._label.allPositionsEqual(0,L.EXTERIOR),n=!this._label.isArea(1)||this._label.allPositionsEqual(1,L.EXTERIOR);return t&&e&&n},e.prototype.setEdgeRing=function(t){this._edgeRing=t},e.prototype.getMinEdgeRing=function(){return this._minEdgeRing},e.prototype.getDepthDelta=function(){var t=this._edge.getDepthDelta();return this._isForward||(t=-t),t},e.prototype.setInResult=function(t){this._isInResult=t},e.prototype.getSym=function(){return this._sym},e.prototype.isForward=function(){return this._isForward},e.prototype.getEdge=function(){return this._edge},e.prototype.printEdge=function(t){this.print(t),t.print(" "),this._isForward?this._edge.print(t):this._edge.printReverse(t)},e.prototype.setSym=function(t){this._sym=t},e.prototype.setVisitedEdge=function(t){this.setVisited(t),this._sym.setVisited(t)},e.prototype.setEdgeDepths=function(t,e){var n=this.getEdge().getDepthDelta();this._isForward||(n=-n);var r=1;t===Ie.LEFT&&(r=-1);var i=Ie.opposite(t),o=e+n*r;this.setDepth(t,e),this.setDepth(i,o)},e.prototype.getEdgeRing=function(){return this._edgeRing},e.prototype.isInResult=function(){return this._isInResult},e.prototype.setNext=function(t){this._next=t},e.prototype.isVisited=function(){return this._isVisited},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.depthFactor=function(t,e){return t===L.EXTERIOR&&e===L.INTERIOR?1:t===L.INTERIOR&&e===L.EXTERIOR?-1:0},e}(Be),Ue=function(){};Ue.prototype.createNode=function(t){return new Fe(t,null)},Ue.prototype.interfaces_=function(){return[]},Ue.prototype.getClass=function(){return Ue};var Ve=function(){if(this._edges=new Et,this._nodes=null,this._edgeEndList=new Et,0===arguments.length)this._nodes=new je(new Ue);else if(1===arguments.length){var t=arguments[0];this._nodes=new je(t)}};Ve.prototype.printEdges=function(t){t.println("Edges:");for(var e=0;e<this._edges.size();e++){t.println("edge "+e+":");var n=this._edges.get(e);n.print(t),n.eiList.print(t)}},Ve.prototype.find=function(t){return this._nodes.find(t)},Ve.prototype.addNode=function(){if(arguments[0]instanceof Fe){var t=arguments[0];return this._nodes.addNode(t)}if(arguments[0]instanceof N){var e=arguments[0];return this._nodes.addNode(e)}},Ve.prototype.getNodeIterator=function(){return this._nodes.iterator()},Ve.prototype.linkResultDirectedEdges=function(){for(var t=this._nodes.iterator();t.hasNext();)t.next().getEdges().linkResultDirectedEdges()},Ve.prototype.debugPrintln=function(t){V.out.println(t)},Ve.prototype.isBoundaryNode=function(t,e){var n=this._nodes.find(e);if(null===n)return!1;var r=n.getLabel();return null!==r&&r.getLocation(t)===L.BOUNDARY},Ve.prototype.linkAllDirectedEdges=function(){for(var t=this._nodes.iterator();t.hasNext();)t.next().getEdges().linkAllDirectedEdges()},Ve.prototype.matchInSameDirection=function(t,e,n,r){return!!t.equals(n)&&st.computeOrientation(t,e,r)===st.COLLINEAR&&ze.quadrant(t,e)===ze.quadrant(n,r)},Ve.prototype.getEdgeEnds=function(){return this._edgeEndList},Ve.prototype.debugPrint=function(t){V.out.print(t)},Ve.prototype.getEdgeIterator=function(){return this._edges.iterator()},Ve.prototype.findEdgeInSameDirection=function(t,e){for(var n=0;n<this._edges.size();n++){var r=this._edges.get(n),i=r.getCoordinates();if(this.matchInSameDirection(t,e,i[0],i[1]))return r;if(this.matchInSameDirection(t,e,i[i.length-1],i[i.length-2]))return r}return null},Ve.prototype.insertEdge=function(t){this._edges.add(t)},Ve.prototype.findEdgeEnd=function(t){for(var e=this.getEdgeEnds().iterator();e.hasNext();){var n=e.next();if(n.getEdge()===t)return n}return null},Ve.prototype.addEdges=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();this._edges.add(n);var r=new qe(n,!0),i=new qe(n,!1);r.setSym(i),i.setSym(r),this.add(r),this.add(i)}},Ve.prototype.add=function(t){this._nodes.add(t),this._edgeEndList.add(t)},Ve.prototype.getNodes=function(){return this._nodes.values()},Ve.prototype.findEdge=function(t,e){for(var n=0;n<this._edges.size();n++){var r=this._edges.get(n),i=r.getCoordinates();if(t.equals(i[0])&&e.equals(i[1]))return r}return null},Ve.prototype.interfaces_=function(){return[]},Ve.prototype.getClass=function(){return Ve},Ve.linkResultDirectedEdges=function(t){for(var e=t.iterator();e.hasNext();)e.next().getEdges().linkResultDirectedEdges()};var Ye=function(){this._geometryFactory=null,this._shellList=new Et;var t=arguments[0];this._geometryFactory=t};Ye.prototype.sortShellsAndHoles=function(t,e,n){for(var r=t.iterator();r.hasNext();){var i=r.next();i.isHole()?n.add(i):e.add(i)}},Ye.prototype.computePolygons=function(t){for(var e=new Et,n=t.iterator();n.hasNext();){var r=n.next().toPolygon(this._geometryFactory);e.add(r)}return e},Ye.prototype.placeFreeHoles=function(t,e){for(var n=e.iterator();n.hasNext();){var r=n.next();if(null===r.getShell()){var i=this.findEdgeRingContaining(r,t);if(null===i)throw new Le("unable to assign hole to a shell",r.getCoordinate(0));r.setShell(i)}}},Ye.prototype.buildMinimalEdgeRings=function(t,e,n){for(var r=new Et,i=t.iterator();i.hasNext();){var o=i.next();if(o.getMaxNodeDegree()>2){o.linkDirectedEdgesForMinimalEdgeRings();var a=o.buildMinimalRings(),s=this.findShell(a);null!==s?(this.placePolygonHoles(s,a),e.add(s)):n.addAll(a)}else r.add(o)}return r},Ye.prototype.containsPoint=function(t){for(var e=this._shellList.iterator();e.hasNext();)if(e.next().containsPoint(t))return!0;return!1},Ye.prototype.buildMaximalEdgeRings=function(t){for(var e=new Et,n=t.iterator();n.hasNext();){var r=n.next();if(r.isInResult()&&r.getLabel().isArea()&&null===r.getEdgeRing()){var i=new De(r,this._geometryFactory);e.add(i),i.setInResult()}}return e},Ye.prototype.placePolygonHoles=function(t,e){for(var n=e.iterator();n.hasNext();){var r=n.next();r.isHole()&&r.setShell(t)}},Ye.prototype.getPolygons=function(){return this.computePolygons(this._shellList)},Ye.prototype.findEdgeRingContaining=function(t,e){for(var n=t.getLinearRing(),r=n.getEnvelopeInternal(),i=n.getCoordinateN(0),o=null,a=null,s=e.iterator();s.hasNext();){var u=s.next(),l=u.getLinearRing(),c=l.getEnvelopeInternal();null!==o&&(a=o.getLinearRing().getEnvelopeInternal());var p=!1;c.contains(r)&&st.isPointInRing(i,l.getCoordinates())&&(p=!0),p&&(null===o||a.contains(c))&&(o=u)}return o},Ye.prototype.findShell=function(t){for(var e=0,n=null,r=t.iterator();r.hasNext();){var i=r.next();i.isHole()||(n=i,e++)}return et.isTrue(e<=1,"found two shells in MinimalEdgeRing list"),n},Ye.prototype.add=function(){if(1===arguments.length){var t=arguments[0];this.add(t.getEdgeEnds(),t.getNodes())}else if(2===arguments.length){var e=arguments[0],n=arguments[1];Ve.linkResultDirectedEdges(n);var r=this.buildMaximalEdgeRings(e),i=new Et,o=this.buildMinimalEdgeRings(r,this._shellList,i);this.sortShellsAndHoles(o,this._shellList,i),this.placeFreeHoles(this._shellList,i)}},Ye.prototype.interfaces_=function(){return[]},Ye.prototype.getClass=function(){return Ye};var Xe=function(){};Xe.prototype.getBounds=function(){},Xe.prototype.interfaces_=function(){return[]},Xe.prototype.getClass=function(){return Xe};var He=function(){this._bounds=null,this._item=null;var t=arguments[0],e=arguments[1];this._bounds=t,this._item=e};He.prototype.getItem=function(){return this._item},He.prototype.getBounds=function(){return this._bounds},He.prototype.interfaces_=function(){return[Xe,e]},He.prototype.getClass=function(){return He};var We=function(){this._size=null,this._items=null,this._size=0,this._items=new Et,this._items.add(null)};We.prototype.poll=function(){if(this.isEmpty())return null;var t=this._items.get(1);return this._items.set(1,this._items.get(this._size)),this._size-=1,this.reorder(1),t},We.prototype.size=function(){return this._size},We.prototype.reorder=function(t){for(var e=null,n=this._items.get(t);2*t<=this._size&&((e=2*t)!==this._size&&this._items.get(e+1).compareTo(this._items.get(e))<0&&e++,this._items.get(e).compareTo(n)<0);t=e)this._items.set(t,this._items.get(e));this._items.set(t,n)},We.prototype.clear=function(){this._size=0,this._items.clear()},We.prototype.isEmpty=function(){return 0===this._size},We.prototype.add=function(t){this._items.add(null),this._size+=1;var e=this._size;for(this._items.set(0,t);t.compareTo(this._items.get(Math.trunc(e/2)))<0;e/=2)this._items.set(e,this._items.get(Math.trunc(e/2)));this._items.set(e,t)},We.prototype.interfaces_=function(){return[]},We.prototype.getClass=function(){return We};var $e=function(){};$e.prototype.visitItem=function(t){},$e.prototype.interfaces_=function(){return[]},$e.prototype.getClass=function(){return $e};var Ze=function(){};Ze.prototype.insert=function(t,e){},Ze.prototype.remove=function(t,e){},Ze.prototype.query=function(){},Ze.prototype.interfaces_=function(){return[]},Ze.prototype.getClass=function(){return Ze};var Je=function(){if(this._childBoundables=new Et,this._bounds=null,this._level=null,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this._level=t}},Ke={serialVersionUID:{configurable:!0}};Je.prototype.getLevel=function(){return this._level},Je.prototype.size=function(){return this._childBoundables.size()},Je.prototype.getChildBoundables=function(){return this._childBoundables},Je.prototype.addChildBoundable=function(t){et.isTrue(null===this._bounds),this._childBoundables.add(t)},Je.prototype.isEmpty=function(){return this._childBoundables.isEmpty()},Je.prototype.getBounds=function(){return null===this._bounds&&(this._bounds=this.computeBounds()),this._bounds},Je.prototype.interfaces_=function(){return[Xe,e]},Je.prototype.getClass=function(){return Je},Ke.serialVersionUID.get=function(){return 0x5a1e55ec41369800},Object.defineProperties(Je,Ke);var Qe=function(){};Qe.reverseOrder=function(){return{compare:function(t,e){return e.compareTo(t)}}},Qe.min=function(t){return Qe.sort(t),t.get(0)},Qe.sort=function(t,e){var n=t.toArray();e?Ft.sort(n,e):Ft.sort(n);for(var r=t.iterator(),i=0,o=n.length;i<o;i++)r.next(),r.set(n[i])},Qe.singletonList=function(t){var e=new Et;return e.add(t),e};var tn=function(){this._boundable1=null,this._boundable2=null,this._distance=null,this._itemDistance=null;var t=arguments[0],e=arguments[1],n=arguments[2];this._boundable1=t,this._boundable2=e,this._itemDistance=n,this._distance=this.distance()};tn.prototype.expandToQueue=function(t,e){var n=tn.isComposite(this._boundable1),r=tn.isComposite(this._boundable2);if(n&&r)return tn.area(this._boundable1)>tn.area(this._boundable2)?(this.expand(this._boundable1,this._boundable2,t,e),null):(this.expand(this._boundable2,this._boundable1,t,e),null);if(n)return this.expand(this._boundable1,this._boundable2,t,e),null;if(r)return this.expand(this._boundable2,this._boundable1,t,e),null;throw new _("neither boundable is composite")},tn.prototype.isLeaves=function(){return!(tn.isComposite(this._boundable1)||tn.isComposite(this._boundable2))},tn.prototype.compareTo=function(t){var e=t;return this._distance<e._distance?-1:this._distance>e._distance?1:0},tn.prototype.expand=function(t,e,n,r){for(var i=t.getChildBoundables().iterator();i.hasNext();){var o=i.next(),a=new tn(o,e,this._itemDistance);a.getDistance()<r&&n.add(a)}},tn.prototype.getBoundable=function(t){return 0===t?this._boundable1:this._boundable2},tn.prototype.getDistance=function(){return this._distance},tn.prototype.distance=function(){return this.isLeaves()?this._itemDistance.distance(this._boundable1,this._boundable2):this._boundable1.getBounds().distance(this._boundable2.getBounds())},tn.prototype.interfaces_=function(){return[x]},tn.prototype.getClass=function(){return tn},tn.area=function(t){return t.getBounds().getArea()},tn.isComposite=function(t){return t instanceof Je};var en=function t(){if(this._root=null,this._built=!1,this._itemBoundables=new Et,this._nodeCapacity=null,0===arguments.length){var e=t.DEFAULT_NODE_CAPACITY;this._nodeCapacity=e}else if(1===arguments.length){var n=arguments[0];et.isTrue(n>1,"Node capacity must be greater than 1"),this._nodeCapacity=n}},nn={IntersectsOp:{configurable:!0},serialVersionUID:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}};en.prototype.getNodeCapacity=function(){return this._nodeCapacity},en.prototype.lastNode=function(t){return t.get(t.size()-1)},en.prototype.size=function(){if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.size(this._root));if(1===arguments.length){for(var t=0,e=arguments[0].getChildBoundables().iterator();e.hasNext();){var n=e.next();n instanceof Je?t+=this.size(n):n instanceof He&&(t+=1)}return t}},en.prototype.removeItem=function(t,e){for(var n=null,r=t.getChildBoundables().iterator();r.hasNext();){var i=r.next();i instanceof He&&i.getItem()===e&&(n=i)}return null!==n&&(t.getChildBoundables().remove(n),!0)},en.prototype.itemsTree=function(){if(0===arguments.length){this.build();var t=this.itemsTree(this._root);return null===t?new Et:t}if(1===arguments.length){for(var e=arguments[0],n=new Et,r=e.getChildBoundables().iterator();r.hasNext();){var i=r.next();if(i instanceof Je){var o=this.itemsTree(i);null!==o&&n.add(o)}else i instanceof He?n.add(i.getItem()):et.shouldNeverReachHere()}return n.size()<=0?null:n}},en.prototype.insert=function(t,e){et.isTrue(!this._built,"Cannot insert items into an STR packed R-tree after it has been built."),this._itemBoundables.add(new He(t,e))},en.prototype.boundablesAtLevel=function(){if(1===arguments.length){var t=arguments[0],e=new Et;return this.boundablesAtLevel(t,this._root,e),e}if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];if(et.isTrue(n>-2),r.getLevel()===n)return i.add(r),null;for(var o=r.getChildBoundables().iterator();o.hasNext();){var a=o.next();a instanceof Je?this.boundablesAtLevel(n,a,i):(et.isTrue(a instanceof He),-1===n&&i.add(a))}return null}},en.prototype.query=function(){if(1===arguments.length){var t=arguments[0];this.build();var e=new Et;return this.isEmpty()||this.getIntersectsOp().intersects(this._root.getBounds(),t)&&this.query(t,this._root,e),e}if(2===arguments.length){var n=arguments[0],r=arguments[1];if(this.build(),this.isEmpty())return null;this.getIntersectsOp().intersects(this._root.getBounds(),n)&&this.query(n,this._root,r)}else if(3===arguments.length)if(O(arguments[2],$e)&&arguments[0]instanceof Object&&arguments[1]instanceof Je)for(var i=arguments[0],o=arguments[2],a=arguments[1].getChildBoundables(),s=0;s<a.size();s++){var u=a.get(s);this.getIntersectsOp().intersects(u.getBounds(),i)&&(u instanceof Je?this.query(i,u,o):u instanceof He?o.visitItem(u.getItem()):et.shouldNeverReachHere())}else if(O(arguments[2],wt)&&arguments[0]instanceof Object&&arguments[1]instanceof Je)for(var l=arguments[0],c=arguments[2],p=arguments[1].getChildBoundables(),f=0;f<p.size();f++){var h=p.get(f);this.getIntersectsOp().intersects(h.getBounds(),l)&&(h instanceof Je?this.query(l,h,c):h instanceof He?c.add(h.getItem()):et.shouldNeverReachHere())}},en.prototype.build=function(){if(this._built)return null;this._root=this._itemBoundables.isEmpty()?this.createNode(0):this.createHigherLevels(this._itemBoundables,-1),this._itemBoundables=null,this._built=!0},en.prototype.getRoot=function(){return this.build(),this._root},en.prototype.remove=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return this.build(),!!this.getIntersectsOp().intersects(this._root.getBounds(),t)&&this.remove(t,this._root,e)}if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2],o=this.removeItem(r,i);if(o)return!0;for(var a=null,s=r.getChildBoundables().iterator();s.hasNext();){var u=s.next();if(this.getIntersectsOp().intersects(u.getBounds(),n)&&u instanceof Je&&(o=this.remove(n,u,i))){a=u;break}}return null!==a&&a.getChildBoundables().isEmpty()&&r.getChildBoundables().remove(a),o}},en.prototype.createHigherLevels=function(t,e){et.isTrue(!t.isEmpty());var n=this.createParentBoundables(t,e+1);return 1===n.size()?n.get(0):this.createHigherLevels(n,e+1)},en.prototype.depth=function(){if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.depth(this._root));if(1===arguments.length){for(var t=0,e=arguments[0].getChildBoundables().iterator();e.hasNext();){var n=e.next();if(n instanceof Je){var r=this.depth(n);r>t&&(t=r)}}return t+1}},en.prototype.createParentBoundables=function(t,e){et.isTrue(!t.isEmpty());var n=new Et;n.add(this.createNode(e));var r=new Et(t);Qe.sort(r,this.getComparator());for(var i=r.iterator();i.hasNext();){var o=i.next();this.lastNode(n).getChildBoundables().size()===this.getNodeCapacity()&&n.add(this.createNode(e)),this.lastNode(n).addChildBoundable(o)}return n},en.prototype.isEmpty=function(){return this._built?this._root.isEmpty():this._itemBoundables.isEmpty()},en.prototype.interfaces_=function(){return[e]},en.prototype.getClass=function(){return en},en.compareDoubles=function(t,e){return t>e?1:t<e?-1:0},nn.IntersectsOp.get=function(){return rn},nn.serialVersionUID.get=function(){return-0x35ef64c82d4c5400},nn.DEFAULT_NODE_CAPACITY.get=function(){return 10},Object.defineProperties(en,nn);var rn=function(){},on=function(){};on.prototype.distance=function(t,e){},on.prototype.interfaces_=function(){return[]},on.prototype.getClass=function(){return on};var an=function(t){function n(e){e=e||n.DEFAULT_NODE_CAPACITY,t.call(this,e)}t&&(n.__proto__=t),(n.prototype=Object.create(t&&t.prototype)).constructor=n;var r={STRtreeNode:{configurable:!0},serialVersionUID:{configurable:!0},xComparator:{configurable:!0},yComparator:{configurable:!0},intersectsOp:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}};return n.prototype.createParentBoundablesFromVerticalSlices=function(t,e){et.isTrue(t.length>0);for(var n=new Et,r=0;r<t.length;r++)n.addAll(this.createParentBoundablesFromVerticalSlice(t[r],e));return n},n.prototype.createNode=function(t){return new sn(t)},n.prototype.size=function(){return 0===arguments.length?t.prototype.size.call(this):t.prototype.size.apply(this,arguments)},n.prototype.insert=function(){if(2!==arguments.length)return t.prototype.insert.apply(this,arguments);var e=arguments[0],n=arguments[1];if(e.isNull())return null;t.prototype.insert.call(this,e,n)},n.prototype.getIntersectsOp=function(){return n.intersectsOp},n.prototype.verticalSlices=function(t,e){for(var n=Math.trunc(Math.ceil(t.size()/e)),r=new Array(e).fill(null),i=t.iterator(),o=0;o<e;o++){r[o]=new Et;for(var a=0;i.hasNext()&&a<n;){var s=i.next();r[o].add(s),a++}}return r},n.prototype.query=function(){if(1===arguments.length){var e=arguments[0];return t.prototype.query.call(this,e)}if(2===arguments.length){var n=arguments[0],r=arguments[1];t.prototype.query.call(this,n,r)}else if(3===arguments.length)if(O(arguments[2],$e)&&arguments[0]instanceof Object&&arguments[1]instanceof Je){var i=arguments[0],o=arguments[1],a=arguments[2];t.prototype.query.call(this,i,o,a)}else if(O(arguments[2],wt)&&arguments[0]instanceof Object&&arguments[1]instanceof Je){var s=arguments[0],u=arguments[1],l=arguments[2];t.prototype.query.call(this,s,u,l)}},n.prototype.getComparator=function(){return n.yComparator},n.prototype.createParentBoundablesFromVerticalSlice=function(e,n){return t.prototype.createParentBoundables.call(this,e,n)},n.prototype.remove=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return t.prototype.remove.call(this,e,n)}return t.prototype.remove.apply(this,arguments)},n.prototype.depth=function(){return 0===arguments.length?t.prototype.depth.call(this):t.prototype.depth.apply(this,arguments)},n.prototype.createParentBoundables=function(t,e){et.isTrue(!t.isEmpty());var r=Math.trunc(Math.ceil(t.size()/this.getNodeCapacity())),i=new Et(t);Qe.sort(i,n.xComparator);var o=this.verticalSlices(i,Math.trunc(Math.ceil(Math.sqrt(r))));return this.createParentBoundablesFromVerticalSlices(o,e)},n.prototype.nearestNeighbour=function(){if(1===arguments.length){if(O(arguments[0],on)){var t=arguments[0],e=new tn(this.getRoot(),this.getRoot(),t);return this.nearestNeighbour(e)}if(arguments[0]instanceof tn){var r=arguments[0];return this.nearestNeighbour(r,v.POSITIVE_INFINITY)}}else if(2===arguments.length){if(arguments[0]instanceof n&&O(arguments[1],on)){var i=arguments[0],o=arguments[1],a=new tn(this.getRoot(),i.getRoot(),o);return this.nearestNeighbour(a)}if(arguments[0]instanceof tn&&"number"==typeof arguments[1]){var s=arguments[0],u=arguments[1],l=null,c=new We;for(c.add(s);!c.isEmpty()&&u>0;){var p=c.poll(),f=p.getDistance();if(f>=u)break;p.isLeaves()?(u=f,l=p):p.expandToQueue(c,u)}return[l.getBoundable(0).getItem(),l.getBoundable(1).getItem()]}}else if(3===arguments.length){var h=arguments[2],d=new He(arguments[0],arguments[1]),g=new tn(this.getRoot(),d,h);return this.nearestNeighbour(g)[0]}},n.prototype.interfaces_=function(){return[Ze,e]},n.prototype.getClass=function(){return n},n.centreX=function(t){return n.avg(t.getMinX(),t.getMaxX())},n.avg=function(t,e){return(t+e)/2},n.centreY=function(t){return n.avg(t.getMinY(),t.getMaxY())},r.STRtreeNode.get=function(){return sn},r.serialVersionUID.get=function(){return 0x39920f7d5f261e0},r.xComparator.get=function(){return{interfaces_:function(){return[E]},compare:function(e,r){return t.compareDoubles(n.centreX(e.getBounds()),n.centreX(r.getBounds()))}}},r.yComparator.get=function(){return{interfaces_:function(){return[E]},compare:function(e,r){return t.compareDoubles(n.centreY(e.getBounds()),n.centreY(r.getBounds()))}}},r.intersectsOp.get=function(){return{interfaces_:function(){return[t.IntersectsOp]},intersects:function(t,e){return t.intersects(e)}}},r.DEFAULT_NODE_CAPACITY.get=function(){return 10},Object.defineProperties(n,r),n}(en),sn=function(t){function e(){var e=arguments[0];t.call(this,e)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.computeBounds=function(){for(var t=null,e=this.getChildBoundables().iterator();e.hasNext();){var n=e.next();null===t?t=new X(n.getBounds()):t.expandToInclude(n.getBounds())}return t},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Je),un=function(){};un.prototype.interfaces_=function(){return[]},un.prototype.getClass=function(){return un},un.relativeSign=function(t,e){return t<e?-1:t>e?1:0},un.compare=function(t,e,n){if(e.equals2D(n))return 0;var r=un.relativeSign(e.x,n.x),i=un.relativeSign(e.y,n.y);switch(t){case 0:return un.compareValue(r,i);case 1:return un.compareValue(i,r);case 2:return un.compareValue(i,-r);case 3:return un.compareValue(-r,i);case 4:return un.compareValue(-r,-i);case 5:return un.compareValue(-i,-r);case 6:return un.compareValue(-i,r);case 7:return un.compareValue(r,-i)}return et.shouldNeverReachHere("invalid octant value"),0},un.compareValue=function(t,e){return t<0?-1:t>0?1:e<0?-1:e>0?1:0};var ln=function(){this._segString=null,this.coord=null,this.segmentIndex=null,this._segmentOctant=null,this._isInterior=null;var t=arguments[0],e=arguments[1],n=arguments[2],r=arguments[3];this._segString=t,this.coord=new N(e),this.segmentIndex=n,this._segmentOctant=r,this._isInterior=!e.equals2D(t.getCoordinate(n))};ln.prototype.getCoordinate=function(){return this.coord},ln.prototype.print=function(t){t.print(this.coord),t.print(" seg # = "+this.segmentIndex)},ln.prototype.compareTo=function(t){var e=t;return this.segmentIndex<e.segmentIndex?-1:this.segmentIndex>e.segmentIndex?1:this.coord.equals2D(e.coord)?0:un.compare(this._segmentOctant,this.coord,e.coord)},ln.prototype.isEndPoint=function(t){return 0===this.segmentIndex&&!this._isInterior||this.segmentIndex===t},ln.prototype.isInterior=function(){return this._isInterior},ln.prototype.interfaces_=function(){return[x]},ln.prototype.getClass=function(){return ln};var cn=function(){this._nodeMap=new p,this._edge=null;var t=arguments[0];this._edge=t};cn.prototype.getSplitCoordinates=function(){var t=new It;this.addEndpoints();for(var e=this.iterator(),n=e.next();e.hasNext();){var r=e.next();this.addEdgeCoordinates(n,r,t),n=r}return t.toCoordinateArray()},cn.prototype.addCollapsedNodes=function(){var t=new Et;this.findCollapsesFromInsertedNodes(t),this.findCollapsesFromExistingVertices(t);for(var e=t.iterator();e.hasNext();){var n=e.next().intValue();this.add(this._edge.getCoordinate(n),n)}},cn.prototype.print=function(t){t.println("Intersections:");for(var e=this.iterator();e.hasNext();)e.next().print(t)},cn.prototype.findCollapsesFromExistingVertices=function(t){for(var e=0;e<this._edge.size()-2;e++){var n=this._edge.getCoordinate(e),r=this._edge.getCoordinate(e+2);n.equals2D(r)&&t.add(new A(e+1))}},cn.prototype.addEdgeCoordinates=function(t,e,n){var r=this._edge.getCoordinate(e.segmentIndex),i=e.isInterior()||!e.coord.equals2D(r);n.add(new N(t.coord),!1);for(var o=t.segmentIndex+1;o<=e.segmentIndex;o++)n.add(this._edge.getCoordinate(o));i&&n.add(new N(e.coord))},cn.prototype.iterator=function(){return this._nodeMap.values().iterator()},cn.prototype.addSplitEdges=function(t){this.addEndpoints(),this.addCollapsedNodes();for(var e=this.iterator(),n=e.next();e.hasNext();){var r=e.next(),i=this.createSplitEdge(n,r);t.add(i),n=r}},cn.prototype.findCollapseIndex=function(t,e,n){if(!t.coord.equals2D(e.coord))return!1;var r=e.segmentIndex-t.segmentIndex;return e.isInterior()||r--,1===r&&(n[0]=t.segmentIndex+1,!0)},cn.prototype.findCollapsesFromInsertedNodes=function(t){for(var e=new Array(1).fill(null),n=this.iterator(),r=n.next();n.hasNext();){var i=n.next();this.findCollapseIndex(r,i,e)&&t.add(new A(e[0])),r=i}},cn.prototype.getEdge=function(){return this._edge},cn.prototype.addEndpoints=function(){var t=this._edge.size()-1;this.add(this._edge.getCoordinate(0),0),this.add(this._edge.getCoordinate(t),t)},cn.prototype.createSplitEdge=function(t,e){var n=e.segmentIndex-t.segmentIndex+2,r=this._edge.getCoordinate(e.segmentIndex),i=e.isInterior()||!e.coord.equals2D(r);i||n--;var o=new Array(n).fill(null),a=0;o[a++]=new N(t.coord);for(var s=t.segmentIndex+1;s<=e.segmentIndex;s++)o[a++]=this._edge.getCoordinate(s);return i&&(o[a]=new N(e.coord)),new dn(o,this._edge.getData())},cn.prototype.add=function(t,e){var n=new ln(this._edge,t,e,this._edge.getSegmentOctant(e)),r=this._nodeMap.get(n);return null!==r?(et.isTrue(r.coord.equals2D(t),"Found equal nodes with different coordinates"),r):(this._nodeMap.put(n,n),n)},cn.prototype.checkSplitEdgesCorrectness=function(t){var e=this._edge.getCoordinates(),n=t.get(0).getCoordinate(0);if(!n.equals2D(e[0]))throw new Q("bad split edge start point at "+n);var r=t.get(t.size()-1).getCoordinates(),i=r[r.length-1];if(!i.equals2D(e[e.length-1]))throw new Q("bad split edge end point at "+i)},cn.prototype.interfaces_=function(){return[]},cn.prototype.getClass=function(){return cn};var pn=function(){};pn.prototype.interfaces_=function(){return[]},pn.prototype.getClass=function(){return pn},pn.octant=function(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1];if(0===t&&0===e)throw new _("Cannot compute the octant for point ( "+t+", "+e+" )");var n=Math.abs(t),r=Math.abs(e);return t>=0?e>=0?n>=r?0:1:n>=r?7:6:e>=0?n>=r?3:2:n>=r?4:5}if(arguments[0]instanceof N&&arguments[1]instanceof N){var i=arguments[0],o=arguments[1],a=o.x-i.x,s=o.y-i.y;if(0===a&&0===s)throw new _("Cannot compute the octant for two identical points "+i);return pn.octant(a,s)}};var fn=function(){};fn.prototype.getCoordinates=function(){},fn.prototype.size=function(){},fn.prototype.getCoordinate=function(t){},fn.prototype.isClosed=function(){},fn.prototype.setData=function(t){},fn.prototype.getData=function(){},fn.prototype.interfaces_=function(){return[]},fn.prototype.getClass=function(){return fn};var hn=function(){};hn.prototype.addIntersection=function(t,e){},hn.prototype.interfaces_=function(){return[fn]},hn.prototype.getClass=function(){return hn};var dn=function(){this._nodeList=new cn(this),this._pts=null,this._data=null;var t=arguments[0],e=arguments[1];this._pts=t,this._data=e};dn.prototype.getCoordinates=function(){return this._pts},dn.prototype.size=function(){return this._pts.length},dn.prototype.getCoordinate=function(t){return this._pts[t]},dn.prototype.isClosed=function(){return this._pts[0].equals(this._pts[this._pts.length-1])},dn.prototype.getSegmentOctant=function(t){return t===this._pts.length-1?-1:this.safeOctant(this.getCoordinate(t),this.getCoordinate(t+1))},dn.prototype.setData=function(t){this._data=t},dn.prototype.safeOctant=function(t,e){return t.equals2D(e)?0:pn.octant(t,e)},dn.prototype.getData=function(){return this._data},dn.prototype.addIntersection=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];this.addIntersectionNode(t,e)}else if(4===arguments.length){var n=arguments[1],r=arguments[3],i=new N(arguments[0].getIntersection(r));this.addIntersection(i,n)}},dn.prototype.toString=function(){return K.toLineString(new ue(this._pts))},dn.prototype.getNodeList=function(){return this._nodeList},dn.prototype.addIntersectionNode=function(t,e){var n=e,r=n+1;if(r<this._pts.length){var i=this._pts[r];t.equals2D(i)&&(n=r)}return this._nodeList.add(t,n)},dn.prototype.addIntersections=function(t,e,n){for(var r=0;r<t.getIntersectionNum();r++)this.addIntersection(t,e,n,r)},dn.prototype.interfaces_=function(){return[hn]},dn.prototype.getClass=function(){return dn},dn.getNodedSubstrings=function(){if(1===arguments.length){var t=arguments[0],e=new Et;return dn.getNodedSubstrings(t,e),e}if(2===arguments.length)for(var n=arguments[1],r=arguments[0].iterator();r.hasNext();)r.next().getNodeList().addSplitEdges(n)};var gn=function(){if(this.p0=null,this.p1=null,0===arguments.length)this.p0=new N,this.p1=new N;else if(1===arguments.length){var t=arguments[0];this.p0=new N(t.p0),this.p1=new N(t.p1)}else if(2===arguments.length)this.p0=arguments[0],this.p1=arguments[1];else if(4===arguments.length){var e=arguments[0],n=arguments[1],r=arguments[2],i=arguments[3];this.p0=new N(e,n),this.p1=new N(r,i)}},yn={serialVersionUID:{configurable:!0}};gn.prototype.minX=function(){return Math.min(this.p0.x,this.p1.x)},gn.prototype.orientationIndex=function(){if(arguments[0]instanceof gn){var t=arguments[0],e=st.orientationIndex(this.p0,this.p1,t.p0),n=st.orientationIndex(this.p0,this.p1,t.p1);return e>=0&&n>=0||e<=0&&n<=0?Math.max(e,n):0}if(arguments[0]instanceof N){var r=arguments[0];return st.orientationIndex(this.p0,this.p1,r)}},gn.prototype.toGeometry=function(t){return t.createLineString([this.p0,this.p1])},gn.prototype.isVertical=function(){return this.p0.x===this.p1.x},gn.prototype.equals=function(t){if(!(t instanceof gn))return!1;var e=t;return this.p0.equals(e.p0)&&this.p1.equals(e.p1)},gn.prototype.intersection=function(t){var e=new it;return e.computeIntersection(this.p0,this.p1,t.p0,t.p1),e.hasIntersection()?e.getIntersection(0):null},gn.prototype.project=function(){if(arguments[0]instanceof N){var t=arguments[0];if(t.equals(this.p0)||t.equals(this.p1))return new N(t);var e=this.projectionFactor(t),n=new N;return n.x=this.p0.x+e*(this.p1.x-this.p0.x),n.y=this.p0.y+e*(this.p1.y-this.p0.y),n}if(arguments[0]instanceof gn){var r=arguments[0],i=this.projectionFactor(r.p0),o=this.projectionFactor(r.p1);if(i>=1&&o>=1)return null;if(i<=0&&o<=0)return null;var a=this.project(r.p0);i<0&&(a=this.p0),i>1&&(a=this.p1);var s=this.project(r.p1);return o<0&&(s=this.p0),o>1&&(s=this.p1),new gn(a,s)}},gn.prototype.normalize=function(){this.p1.compareTo(this.p0)<0&&this.reverse()},gn.prototype.angle=function(){return Math.atan2(this.p1.y-this.p0.y,this.p1.x-this.p0.x)},gn.prototype.getCoordinate=function(t){return 0===t?this.p0:this.p1},gn.prototype.distancePerpendicular=function(t){return st.distancePointLinePerpendicular(t,this.p0,this.p1)},gn.prototype.minY=function(){return Math.min(this.p0.y,this.p1.y)},gn.prototype.midPoint=function(){return gn.midPoint(this.p0,this.p1)},gn.prototype.projectionFactor=function(t){if(t.equals(this.p0))return 0;if(t.equals(this.p1))return 1;var e=this.p1.x-this.p0.x,n=this.p1.y-this.p0.y,r=e*e+n*n;return r<=0?v.NaN:((t.x-this.p0.x)*e+(t.y-this.p0.y)*n)/r},gn.prototype.closestPoints=function(t){var e=this.intersection(t);if(null!==e)return[e,e];var n=new Array(2).fill(null),r=v.MAX_VALUE,i=null,o=this.closestPoint(t.p0);r=o.distance(t.p0),n[0]=o,n[1]=t.p0;var a=this.closestPoint(t.p1);(i=a.distance(t.p1))<r&&(r=i,n[0]=a,n[1]=t.p1);var s=t.closestPoint(this.p0);(i=s.distance(this.p0))<r&&(r=i,n[0]=this.p0,n[1]=s);var u=t.closestPoint(this.p1);return(i=u.distance(this.p1))<r&&(r=i,n[0]=this.p1,n[1]=u),n},gn.prototype.closestPoint=function(t){var e=this.projectionFactor(t);return e>0&&e<1?this.project(t):this.p0.distance(t)<this.p1.distance(t)?this.p0:this.p1},gn.prototype.maxX=function(){return Math.max(this.p0.x,this.p1.x)},gn.prototype.getLength=function(){return this.p0.distance(this.p1)},gn.prototype.compareTo=function(t){var e=t,n=this.p0.compareTo(e.p0);return 0!==n?n:this.p1.compareTo(e.p1)},gn.prototype.reverse=function(){var t=this.p0;this.p0=this.p1,this.p1=t},gn.prototype.equalsTopo=function(t){return this.p0.equals(t.p0)&&(this.p1.equals(t.p1)||this.p0.equals(t.p1))&&this.p1.equals(t.p0)},gn.prototype.lineIntersection=function(t){try{return Y.intersection(this.p0,this.p1,t.p0,t.p1)}catch(t){if(!(t instanceof U))throw t}return null},gn.prototype.maxY=function(){return Math.max(this.p0.y,this.p1.y)},gn.prototype.pointAlongOffset=function(t,e){var n=this.p0.x+t*(this.p1.x-this.p0.x),r=this.p0.y+t*(this.p1.y-this.p0.y),i=this.p1.x-this.p0.x,o=this.p1.y-this.p0.y,a=Math.sqrt(i*i+o*o),s=0,u=0;if(0!==e){if(a<=0)throw new Error("Cannot compute offset from zero-length line segment");s=e*i/a,u=e*o/a}return new N(n-u,r+s)},gn.prototype.setCoordinates=function(){if(1===arguments.length){var t=arguments[0];this.setCoordinates(t.p0,t.p1)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.p0.x=e.x,this.p0.y=e.y,this.p1.x=n.x,this.p1.y=n.y}},gn.prototype.segmentFraction=function(t){var e=this.projectionFactor(t);return e<0?e=0:(e>1||v.isNaN(e))&&(e=1),e},gn.prototype.toString=function(){return"LINESTRING( "+this.p0.x+" "+this.p0.y+", "+this.p1.x+" "+this.p1.y+")"},gn.prototype.isHorizontal=function(){return this.p0.y===this.p1.y},gn.prototype.distance=function(){if(arguments[0]instanceof gn){var t=arguments[0];return st.distanceLineLine(this.p0,this.p1,t.p0,t.p1)}if(arguments[0]instanceof N){var e=arguments[0];return st.distancePointLine(e,this.p0,this.p1)}},gn.prototype.pointAlong=function(t){var e=new N;return e.x=this.p0.x+t*(this.p1.x-this.p0.x),e.y=this.p0.y+t*(this.p1.y-this.p0.y),e},gn.prototype.hashCode=function(){var t=v.doubleToLongBits(this.p0.x);t^=31*v.doubleToLongBits(this.p0.y);var e=Math.trunc(t)^Math.trunc(t>>32),n=v.doubleToLongBits(this.p1.x);return n^=31*v.doubleToLongBits(this.p1.y),e^Math.trunc(n)^Math.trunc(n>>32)},gn.prototype.interfaces_=function(){return[x,e]},gn.prototype.getClass=function(){return gn},gn.midPoint=function(t,e){return new N((t.x+e.x)/2,(t.y+e.y)/2)},yn.serialVersionUID.get=function(){return 0x2d2172135f411c00},Object.defineProperties(gn,yn);var mn=function(){this.tempEnv1=new X,this.tempEnv2=new X,this._overlapSeg1=new gn,this._overlapSeg2=new gn};mn.prototype.overlap=function(){if(2===arguments.length);else if(4===arguments.length){var t=arguments[1],e=arguments[2],n=arguments[3];arguments[0].getLineSegment(t,this._overlapSeg1),e.getLineSegment(n,this._overlapSeg2),this.overlap(this._overlapSeg1,this._overlapSeg2)}},mn.prototype.interfaces_=function(){return[]},mn.prototype.getClass=function(){return mn};var _n=function(){this._pts=null,this._start=null,this._end=null,this._env=null,this._context=null,this._id=null;var t=arguments[0],e=arguments[1],n=arguments[2],r=arguments[3];this._pts=t,this._start=e,this._end=n,this._context=r};_n.prototype.getLineSegment=function(t,e){e.p0=this._pts[t],e.p1=this._pts[t+1]},_n.prototype.computeSelect=function(t,e,n,r){var i=this._pts[e],o=this._pts[n];if(r.tempEnv1.init(i,o),n-e==1)return r.select(this,e),null;if(!t.intersects(r.tempEnv1))return null;var a=Math.trunc((e+n)/2);e<a&&this.computeSelect(t,e,a,r),a<n&&this.computeSelect(t,a,n,r)},_n.prototype.getCoordinates=function(){for(var t=new Array(this._end-this._start+1).fill(null),e=0,n=this._start;n<=this._end;n++)t[e++]=this._pts[n];return t},_n.prototype.computeOverlaps=function(t,e){this.computeOverlapsInternal(this._start,this._end,t,t._start,t._end,e)},_n.prototype.setId=function(t){this._id=t},_n.prototype.select=function(t,e){this.computeSelect(t,this._start,this._end,e)},_n.prototype.getEnvelope=function(){if(null===this._env){var t=this._pts[this._start],e=this._pts[this._end];this._env=new X(t,e)}return this._env},_n.prototype.getEndIndex=function(){return this._end},_n.prototype.getStartIndex=function(){return this._start},_n.prototype.getContext=function(){return this._context},_n.prototype.getId=function(){return this._id},_n.prototype.computeOverlapsInternal=function(t,e,n,r,i,o){var a=this._pts[t],s=this._pts[e],u=n._pts[r],l=n._pts[i];if(e-t==1&&i-r==1)return o.overlap(this,t,n,r),null;if(o.tempEnv1.init(a,s),o.tempEnv2.init(u,l),!o.tempEnv1.intersects(o.tempEnv2))return null;var c=Math.trunc((t+e)/2),p=Math.trunc((r+i)/2);t<c&&(r<p&&this.computeOverlapsInternal(t,c,n,r,p,o),p<i&&this.computeOverlapsInternal(t,c,n,p,i,o)),c<e&&(r<p&&this.computeOverlapsInternal(c,e,n,r,p,o),p<i&&this.computeOverlapsInternal(c,e,n,p,i,o))},_n.prototype.interfaces_=function(){return[]},_n.prototype.getClass=function(){return _n};var vn=function(){};vn.prototype.interfaces_=function(){return[]},vn.prototype.getClass=function(){return vn},vn.getChainStartIndices=function(t){var e=0,n=new Et;n.add(new A(e));do{var r=vn.findChainEnd(t,e);n.add(new A(r)),e=r}while(e<t.length-1);return vn.toIntArray(n)},vn.findChainEnd=function(t,e){for(var n=e;n<t.length-1&&t[n].equals2D(t[n+1]);)n++;if(n>=t.length-1)return t.length-1;for(var r=ze.quadrant(t[n],t[n+1]),i=e+1;i<t.length&&(t[i-1].equals2D(t[i])||ze.quadrant(t[i-1],t[i])===r);)i++;return i-1},vn.getChains=function(){if(1===arguments.length){var t=arguments[0];return vn.getChains(t,null)}if(2===arguments.length){for(var e=arguments[0],n=arguments[1],r=new Et,i=vn.getChainStartIndices(e),o=0;o<i.length-1;o++){var a=new _n(e,i[o],i[o+1],n);r.add(a)}return r}},vn.toIntArray=function(t){for(var e=new Array(t.size()).fill(null),n=0;n<e.length;n++)e[n]=t.get(n).intValue();return e};var bn=function(){};bn.prototype.computeNodes=function(t){},bn.prototype.getNodedSubstrings=function(){},bn.prototype.interfaces_=function(){return[]},bn.prototype.getClass=function(){return bn};var xn=function(){if(this._segInt=null,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this.setSegmentIntersector(t)}};xn.prototype.setSegmentIntersector=function(t){this._segInt=t},xn.prototype.interfaces_=function(){return[bn]},xn.prototype.getClass=function(){return xn};var wn=function(t){function e(e){e?t.call(this,e):t.call(this),this._monoChains=new Et,this._index=new an,this._idCounter=0,this._nodedSegStrings=null,this._nOverlaps=0}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={SegmentOverlapAction:{configurable:!0}};return e.prototype.getMonotoneChains=function(){return this._monoChains},e.prototype.getNodedSubstrings=function(){return dn.getNodedSubstrings(this._nodedSegStrings)},e.prototype.getIndex=function(){return this._index},e.prototype.add=function(t){for(var e=vn.getChains(t.getCoordinates(),t).iterator();e.hasNext();){var n=e.next();n.setId(this._idCounter++),this._index.insert(n.getEnvelope(),n),this._monoChains.add(n)}},e.prototype.computeNodes=function(t){this._nodedSegStrings=t;for(var e=t.iterator();e.hasNext();)this.add(e.next());this.intersectChains()},e.prototype.intersectChains=function(){for(var t=new En(this._segInt),e=this._monoChains.iterator();e.hasNext();)for(var n=e.next(),r=this._index.query(n.getEnvelope()).iterator();r.hasNext();){var i=r.next();if(i.getId()>n.getId()&&(n.computeOverlaps(i,t),this._nOverlaps++),this._segInt.isDone())return null}},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},n.SegmentOverlapAction.get=function(){return En},Object.defineProperties(e,n),e}(xn),En=function(t){function e(){t.call(this),this._si=null;var e=arguments[0];this._si=e}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.overlap=function(){if(4!==arguments.length)return t.prototype.overlap.apply(this,arguments);var e=arguments[1],n=arguments[2],r=arguments[3],i=arguments[0].getContext(),o=n.getContext();this._si.processIntersections(i,e,o,r)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(mn),Nn=function t(){if(this._quadrantSegments=t.DEFAULT_QUADRANT_SEGMENTS,this._endCapStyle=t.CAP_ROUND,this._joinStyle=t.JOIN_ROUND,this._mitreLimit=t.DEFAULT_MITRE_LIMIT,this._isSingleSided=!1,this._simplifyFactor=t.DEFAULT_SIMPLIFY_FACTOR,0===arguments.length);else if(1===arguments.length){var e=arguments[0];this.setQuadrantSegments(e)}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this.setQuadrantSegments(n),this.setEndCapStyle(r)}else if(4===arguments.length){var i=arguments[0],o=arguments[1],a=arguments[2],s=arguments[3];this.setQuadrantSegments(i),this.setEndCapStyle(o),this.setJoinStyle(a),this.setMitreLimit(s)}},In={CAP_ROUND:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},JOIN_ROUND:{configurable:!0},JOIN_MITRE:{configurable:!0},JOIN_BEVEL:{configurable:!0},DEFAULT_QUADRANT_SEGMENTS:{configurable:!0},DEFAULT_MITRE_LIMIT:{configurable:!0},DEFAULT_SIMPLIFY_FACTOR:{configurable:!0}};Nn.prototype.getEndCapStyle=function(){return this._endCapStyle},Nn.prototype.isSingleSided=function(){return this._isSingleSided},Nn.prototype.setQuadrantSegments=function(t){this._quadrantSegments=t,0===this._quadrantSegments&&(this._joinStyle=Nn.JOIN_BEVEL),this._quadrantSegments<0&&(this._joinStyle=Nn.JOIN_MITRE,this._mitreLimit=Math.abs(this._quadrantSegments)),t<=0&&(this._quadrantSegments=1),this._joinStyle!==Nn.JOIN_ROUND&&(this._quadrantSegments=Nn.DEFAULT_QUADRANT_SEGMENTS)},Nn.prototype.getJoinStyle=function(){return this._joinStyle},Nn.prototype.setJoinStyle=function(t){this._joinStyle=t},Nn.prototype.setSimplifyFactor=function(t){this._simplifyFactor=t<0?0:t},Nn.prototype.getSimplifyFactor=function(){return this._simplifyFactor},Nn.prototype.getQuadrantSegments=function(){return this._quadrantSegments},Nn.prototype.setEndCapStyle=function(t){this._endCapStyle=t},Nn.prototype.getMitreLimit=function(){return this._mitreLimit},Nn.prototype.setMitreLimit=function(t){this._mitreLimit=t},Nn.prototype.setSingleSided=function(t){this._isSingleSided=t},Nn.prototype.interfaces_=function(){return[]},Nn.prototype.getClass=function(){return Nn},Nn.bufferDistanceError=function(t){var e=Math.PI/2/t;return 1-Math.cos(e/2)},In.CAP_ROUND.get=function(){return 1},In.CAP_FLAT.get=function(){return 2},In.CAP_SQUARE.get=function(){return 3},In.JOIN_ROUND.get=function(){return 1},In.JOIN_MITRE.get=function(){return 2},In.JOIN_BEVEL.get=function(){return 3},In.DEFAULT_QUADRANT_SEGMENTS.get=function(){return 8},In.DEFAULT_MITRE_LIMIT.get=function(){return 5},In.DEFAULT_SIMPLIFY_FACTOR.get=function(){return.01},Object.defineProperties(Nn,In);var Cn=function(t){this._distanceTol=null,this._isDeleted=null,this._angleOrientation=st.COUNTERCLOCKWISE,this._inputLine=t||null},Sn={INIT:{configurable:!0},DELETE:{configurable:!0},KEEP:{configurable:!0},NUM_PTS_TO_CHECK:{configurable:!0}};Cn.prototype.isDeletable=function(t,e,n,r){var i=this._inputLine[t],o=this._inputLine[e],a=this._inputLine[n];return!!this.isConcave(i,o,a)&&!!this.isShallow(i,o,a,r)&&this.isShallowSampled(i,o,t,n,r)},Cn.prototype.deleteShallowConcavities=function(){for(var t=1,e=this.findNextNonDeletedIndex(t),n=this.findNextNonDeletedIndex(e),r=!1;n<this._inputLine.length;){var i=!1;this.isDeletable(t,e,n,this._distanceTol)&&(this._isDeleted[e]=Cn.DELETE,i=!0,r=!0),t=i?n:e,e=this.findNextNonDeletedIndex(t),n=this.findNextNonDeletedIndex(e)}return r},Cn.prototype.isShallowConcavity=function(t,e,n,r){return st.computeOrientation(t,e,n)===this._angleOrientation&&st.distancePointLine(e,t,n)<r},Cn.prototype.isShallowSampled=function(t,e,n,r,i){var o=Math.trunc((r-n)/Cn.NUM_PTS_TO_CHECK);o<=0&&(o=1);for(var a=n;a<r;a+=o)if(!this.isShallow(t,e,this._inputLine[a],i))return!1;return!0},Cn.prototype.isConcave=function(t,e,n){return st.computeOrientation(t,e,n)===this._angleOrientation},Cn.prototype.simplify=function(t){this._distanceTol=Math.abs(t),t<0&&(this._angleOrientation=st.CLOCKWISE),this._isDeleted=new Array(this._inputLine.length).fill(null);var e=!1;do{e=this.deleteShallowConcavities()}while(e);return this.collapseLine()},Cn.prototype.findNextNonDeletedIndex=function(t){for(var e=t+1;e<this._inputLine.length&&this._isDeleted[e]===Cn.DELETE;)e++;return e},Cn.prototype.isShallow=function(t,e,n,r){return st.distancePointLine(e,t,n)<r},Cn.prototype.collapseLine=function(){for(var t=new It,e=0;e<this._inputLine.length;e++)this._isDeleted[e]!==Cn.DELETE&&t.add(this._inputLine[e]);return t.toCoordinateArray()},Cn.prototype.interfaces_=function(){return[]},Cn.prototype.getClass=function(){return Cn},Cn.simplify=function(t,e){return new Cn(t).simplify(e)},Sn.INIT.get=function(){return 0},Sn.DELETE.get=function(){return 1},Sn.KEEP.get=function(){return 1},Sn.NUM_PTS_TO_CHECK.get=function(){return 10},Object.defineProperties(Cn,Sn);var Ln=function(){this._ptList=null,this._precisionModel=null,this._minimimVertexDistance=0,this._ptList=new Et},Mn={COORDINATE_ARRAY_TYPE:{configurable:!0}};Ln.prototype.getCoordinates=function(){return this._ptList.toArray(Ln.COORDINATE_ARRAY_TYPE)},Ln.prototype.setPrecisionModel=function(t){this._precisionModel=t},Ln.prototype.addPt=function(t){var e=new N(t);if(this._precisionModel.makePrecise(e),this.isRedundant(e))return null;this._ptList.add(e)},Ln.prototype.revere=function(){},Ln.prototype.addPts=function(t,e){if(e)for(var n=0;n<t.length;n++)this.addPt(t[n]);else for(var r=t.length-1;r>=0;r--)this.addPt(t[r])},Ln.prototype.isRedundant=function(t){if(this._ptList.size()<1)return!1;var e=this._ptList.get(this._ptList.size()-1);return t.distance(e)<this._minimimVertexDistance},Ln.prototype.toString=function(){return(new me).createLineString(this.getCoordinates()).toString()},Ln.prototype.closeRing=function(){if(this._ptList.size()<1)return null;var t=new N(this._ptList.get(0)),e=this._ptList.get(this._ptList.size()-1);if(t.equals(e))return null;this._ptList.add(t)},Ln.prototype.setMinimumVertexDistance=function(t){this._minimimVertexDistance=t},Ln.prototype.interfaces_=function(){return[]},Ln.prototype.getClass=function(){return Ln},Mn.COORDINATE_ARRAY_TYPE.get=function(){return new Array(0).fill(null)},Object.defineProperties(Ln,Mn);var On=function(){},Pn={PI_TIMES_2:{configurable:!0},PI_OVER_2:{configurable:!0},PI_OVER_4:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},CLOCKWISE:{configurable:!0},NONE:{configurable:!0}};On.prototype.interfaces_=function(){return[]},On.prototype.getClass=function(){return On},On.toDegrees=function(t){return 180*t/Math.PI},On.normalize=function(t){for(;t>Math.PI;)t-=On.PI_TIMES_2;for(;t<=-Math.PI;)t+=On.PI_TIMES_2;return t},On.angle=function(){if(1===arguments.length){var t=arguments[0];return Math.atan2(t.y,t.x)}if(2===arguments.length){var e=arguments[0],n=arguments[1],r=n.x-e.x,i=n.y-e.y;return Math.atan2(i,r)}},On.isAcute=function(t,e,n){var r=t.x-e.x,i=t.y-e.y;return r*(n.x-e.x)+i*(n.y-e.y)>0},On.isObtuse=function(t,e,n){var r=t.x-e.x,i=t.y-e.y;return r*(n.x-e.x)+i*(n.y-e.y)<0},On.interiorAngle=function(t,e,n){var r=On.angle(e,t),i=On.angle(e,n);return Math.abs(i-r)},On.normalizePositive=function(t){if(t<0){for(;t<0;)t+=On.PI_TIMES_2;t>=On.PI_TIMES_2&&(t=0)}else{for(;t>=On.PI_TIMES_2;)t-=On.PI_TIMES_2;t<0&&(t=0)}return t},On.angleBetween=function(t,e,n){var r=On.angle(e,t),i=On.angle(e,n);return On.diff(r,i)},On.diff=function(t,e){var n=null;return(n=t<e?e-t:t-e)>Math.PI&&(n=2*Math.PI-n),n},On.toRadians=function(t){return t*Math.PI/180},On.getTurn=function(t,e){var n=Math.sin(e-t);return n>0?On.COUNTERCLOCKWISE:n<0?On.CLOCKWISE:On.NONE},On.angleBetweenOriented=function(t,e,n){var r=On.angle(e,t),i=On.angle(e,n)-r;return i<=-Math.PI?i+On.PI_TIMES_2:i>Math.PI?i-On.PI_TIMES_2:i},Pn.PI_TIMES_2.get=function(){return 2*Math.PI},Pn.PI_OVER_2.get=function(){return Math.PI/2},Pn.PI_OVER_4.get=function(){return Math.PI/4},Pn.COUNTERCLOCKWISE.get=function(){return st.COUNTERCLOCKWISE},Pn.CLOCKWISE.get=function(){return st.CLOCKWISE},Pn.NONE.get=function(){return st.COLLINEAR},Object.defineProperties(On,Pn);var Rn=function t(){this._maxCurveSegmentError=0,this._filletAngleQuantum=null,this._closingSegLengthFactor=1,this._segList=null,this._distance=0,this._precisionModel=null,this._bufParams=null,this._li=null,this._s0=null,this._s1=null,this._s2=null,this._seg0=new gn,this._seg1=new gn,this._offset0=new gn,this._offset1=new gn,this._side=0,this._hasNarrowConcaveAngle=!1;var e=arguments[0],n=arguments[1],r=arguments[2];this._precisionModel=e,this._bufParams=n,this._li=new it,this._filletAngleQuantum=Math.PI/2/n.getQuadrantSegments(),n.getQuadrantSegments()>=8&&n.getJoinStyle()===Nn.JOIN_ROUND&&(this._closingSegLengthFactor=t.MAX_CLOSING_SEG_LEN_FACTOR),this.init(r)},Tn={OFFSET_SEGMENT_SEPARATION_FACTOR:{configurable:!0},INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},CURVE_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},MAX_CLOSING_SEG_LEN_FACTOR:{configurable:!0}};Rn.prototype.addNextSegment=function(t,e){if(this._s0=this._s1,this._s1=this._s2,this._s2=t,this._seg0.setCoordinates(this._s0,this._s1),this.computeOffsetSegment(this._seg0,this._side,this._distance,this._offset0),this._seg1.setCoordinates(this._s1,this._s2),this.computeOffsetSegment(this._seg1,this._side,this._distance,this._offset1),this._s1.equals(this._s2))return null;var n=st.computeOrientation(this._s0,this._s1,this._s2),r=n===st.CLOCKWISE&&this._side===Ie.LEFT||n===st.COUNTERCLOCKWISE&&this._side===Ie.RIGHT;0===n?this.addCollinear(e):r?this.addOutsideTurn(n,e):this.addInsideTurn(n,e)},Rn.prototype.addLineEndCap=function(t,e){var n=new gn(t,e),r=new gn;this.computeOffsetSegment(n,Ie.LEFT,this._distance,r);var i=new gn;this.computeOffsetSegment(n,Ie.RIGHT,this._distance,i);var o=e.x-t.x,a=e.y-t.y,s=Math.atan2(a,o);switch(this._bufParams.getEndCapStyle()){case Nn.CAP_ROUND:this._segList.addPt(r.p1),this.addFilletArc(e,s+Math.PI/2,s-Math.PI/2,st.CLOCKWISE,this._distance),this._segList.addPt(i.p1);break;case Nn.CAP_FLAT:this._segList.addPt(r.p1),this._segList.addPt(i.p1);break;case Nn.CAP_SQUARE:var u=new N;u.x=Math.abs(this._distance)*Math.cos(s),u.y=Math.abs(this._distance)*Math.sin(s);var l=new N(r.p1.x+u.x,r.p1.y+u.y),c=new N(i.p1.x+u.x,i.p1.y+u.y);this._segList.addPt(l),this._segList.addPt(c)}},Rn.prototype.getCoordinates=function(){return this._segList.getCoordinates()},Rn.prototype.addMitreJoin=function(t,e,n,r){var i=!0,o=null;try{o=Y.intersection(e.p0,e.p1,n.p0,n.p1),(r<=0?1:o.distance(t)/Math.abs(r))>this._bufParams.getMitreLimit()&&(i=!1)}catch(t){if(!(t instanceof U))throw t;o=new N(0,0),i=!1}i?this._segList.addPt(o):this.addLimitedMitreJoin(e,n,r,this._bufParams.getMitreLimit())},Rn.prototype.addFilletCorner=function(t,e,n,r,i){var o=e.x-t.x,a=e.y-t.y,s=Math.atan2(a,o),u=n.x-t.x,l=n.y-t.y,c=Math.atan2(l,u);r===st.CLOCKWISE?s<=c&&(s+=2*Math.PI):s>=c&&(s-=2*Math.PI),this._segList.addPt(e),this.addFilletArc(t,s,c,r,i),this._segList.addPt(n)},Rn.prototype.addOutsideTurn=function(t,e){if(this._offset0.p1.distance(this._offset1.p0)<this._distance*Rn.OFFSET_SEGMENT_SEPARATION_FACTOR)return this._segList.addPt(this._offset0.p1),null;this._bufParams.getJoinStyle()===Nn.JOIN_MITRE?this.addMitreJoin(this._s1,this._offset0,this._offset1,this._distance):this._bufParams.getJoinStyle()===Nn.JOIN_BEVEL?this.addBevelJoin(this._offset0,this._offset1):(e&&this._segList.addPt(this._offset0.p1),this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,t,this._distance),this._segList.addPt(this._offset1.p0))},Rn.prototype.createSquare=function(t){this._segList.addPt(new N(t.x+this._distance,t.y+this._distance)),this._segList.addPt(new N(t.x+this._distance,t.y-this._distance)),this._segList.addPt(new N(t.x-this._distance,t.y-this._distance)),this._segList.addPt(new N(t.x-this._distance,t.y+this._distance)),this._segList.closeRing()},Rn.prototype.addSegments=function(t,e){this._segList.addPts(t,e)},Rn.prototype.addFirstSegment=function(){this._segList.addPt(this._offset1.p0)},Rn.prototype.addLastSegment=function(){this._segList.addPt(this._offset1.p1)},Rn.prototype.initSideSegments=function(t,e,n){this._s1=t,this._s2=e,this._side=n,this._seg1.setCoordinates(t,e),this.computeOffsetSegment(this._seg1,n,this._distance,this._offset1)},Rn.prototype.addLimitedMitreJoin=function(t,e,n,r){var i=this._seg0.p1,o=On.angle(i,this._seg0.p0),a=On.angleBetweenOriented(this._seg0.p0,i,this._seg1.p1)/2,s=On.normalize(o+a),u=On.normalize(s+Math.PI),l=r*n,c=n-l*Math.abs(Math.sin(a)),p=i.x+l*Math.cos(u),f=i.y+l*Math.sin(u),h=new N(p,f),d=new gn(i,h),g=d.pointAlongOffset(1,c),y=d.pointAlongOffset(1,-c);this._side===Ie.LEFT?(this._segList.addPt(g),this._segList.addPt(y)):(this._segList.addPt(y),this._segList.addPt(g))},Rn.prototype.computeOffsetSegment=function(t,e,n,r){var i=e===Ie.LEFT?1:-1,o=t.p1.x-t.p0.x,a=t.p1.y-t.p0.y,s=Math.sqrt(o*o+a*a),u=i*n*o/s,l=i*n*a/s;r.p0.x=t.p0.x-l,r.p0.y=t.p0.y+u,r.p1.x=t.p1.x-l,r.p1.y=t.p1.y+u},Rn.prototype.addFilletArc=function(t,e,n,r,i){var o=r===st.CLOCKWISE?-1:1,a=Math.abs(e-n),s=Math.trunc(a/this._filletAngleQuantum+.5);if(s<1)return null;for(var u=a/s,l=0,c=new N;l<a;){var p=e+o*l;c.x=t.x+i*Math.cos(p),c.y=t.y+i*Math.sin(p),this._segList.addPt(c),l+=u}},Rn.prototype.addInsideTurn=function(t,e){if(this._li.computeIntersection(this._offset0.p0,this._offset0.p1,this._offset1.p0,this._offset1.p1),this._li.hasIntersection())this._segList.addPt(this._li.getIntersection(0));else if(this._hasNarrowConcaveAngle=!0,this._offset0.p1.distance(this._offset1.p0)<this._distance*Rn.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR)this._segList.addPt(this._offset0.p1);else{if(this._segList.addPt(this._offset0.p1),this._closingSegLengthFactor>0){var n=new N((this._closingSegLengthFactor*this._offset0.p1.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset0.p1.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(n);var r=new N((this._closingSegLengthFactor*this._offset1.p0.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset1.p0.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(r)}else this._segList.addPt(this._s1);this._segList.addPt(this._offset1.p0)}},Rn.prototype.createCircle=function(t){var e=new N(t.x+this._distance,t.y);this._segList.addPt(e),this.addFilletArc(t,0,2*Math.PI,-1,this._distance),this._segList.closeRing()},Rn.prototype.addBevelJoin=function(t,e){this._segList.addPt(t.p1),this._segList.addPt(e.p0)},Rn.prototype.init=function(t){this._distance=t,this._maxCurveSegmentError=t*(1-Math.cos(this._filletAngleQuantum/2)),this._segList=new Ln,this._segList.setPrecisionModel(this._precisionModel),this._segList.setMinimumVertexDistance(t*Rn.CURVE_VERTEX_SNAP_DISTANCE_FACTOR)},Rn.prototype.addCollinear=function(t){this._li.computeIntersection(this._s0,this._s1,this._s1,this._s2),this._li.getIntersectionNum()>=2&&(this._bufParams.getJoinStyle()===Nn.JOIN_BEVEL||this._bufParams.getJoinStyle()===Nn.JOIN_MITRE?(t&&this._segList.addPt(this._offset0.p1),this._segList.addPt(this._offset1.p0)):this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,st.CLOCKWISE,this._distance))},Rn.prototype.closeRing=function(){this._segList.closeRing()},Rn.prototype.hasNarrowConcaveAngle=function(){return this._hasNarrowConcaveAngle},Rn.prototype.interfaces_=function(){return[]},Rn.prototype.getClass=function(){return Rn},Tn.OFFSET_SEGMENT_SEPARATION_FACTOR.get=function(){return.001},Tn.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return.001},Tn.CURVE_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return 1e-6},Tn.MAX_CLOSING_SEG_LEN_FACTOR.get=function(){return 80},Object.defineProperties(Rn,Tn);var An=function(){this._distance=0,this._precisionModel=null,this._bufParams=null;var t=arguments[0],e=arguments[1];this._precisionModel=t,this._bufParams=e};An.prototype.getOffsetCurve=function(t,e){if(this._distance=e,0===e)return null;var n=e<0,r=Math.abs(e),i=this.getSegGen(r);t.length<=1?this.computePointCurve(t[0],i):this.computeOffsetCurve(t,n,i);var o=i.getCoordinates();return n&&Ct.reverse(o),o},An.prototype.computeSingleSidedBufferCurve=function(t,e,n){var r=this.simplifyTolerance(this._distance);if(e){n.addSegments(t,!0);var i=Cn.simplify(t,-r),o=i.length-1;n.initSideSegments(i[o],i[o-1],Ie.LEFT),n.addFirstSegment();for(var a=o-2;a>=0;a--)n.addNextSegment(i[a],!0)}else{n.addSegments(t,!1);var s=Cn.simplify(t,r),u=s.length-1;n.initSideSegments(s[0],s[1],Ie.LEFT),n.addFirstSegment();for(var l=2;l<=u;l++)n.addNextSegment(s[l],!0)}n.addLastSegment(),n.closeRing()},An.prototype.computeRingBufferCurve=function(t,e,n){var r=this.simplifyTolerance(this._distance);e===Ie.RIGHT&&(r=-r);var i=Cn.simplify(t,r),o=i.length-1;n.initSideSegments(i[o-1],i[0],e);for(var a=1;a<=o;a++){var s=1!==a;n.addNextSegment(i[a],s)}n.closeRing()},An.prototype.computeLineBufferCurve=function(t,e){var n=this.simplifyTolerance(this._distance),r=Cn.simplify(t,n),i=r.length-1;e.initSideSegments(r[0],r[1],Ie.LEFT);for(var o=2;o<=i;o++)e.addNextSegment(r[o],!0);e.addLastSegment(),e.addLineEndCap(r[i-1],r[i]);var a=Cn.simplify(t,-n),s=a.length-1;e.initSideSegments(a[s],a[s-1],Ie.LEFT);for(var u=s-2;u>=0;u--)e.addNextSegment(a[u],!0);e.addLastSegment(),e.addLineEndCap(a[1],a[0]),e.closeRing()},An.prototype.computePointCurve=function(t,e){switch(this._bufParams.getEndCapStyle()){case Nn.CAP_ROUND:e.createCircle(t);break;case Nn.CAP_SQUARE:e.createSquare(t)}},An.prototype.getLineCurve=function(t,e){if(this._distance=e,e<0&&!this._bufParams.isSingleSided())return null;if(0===e)return null;var n=Math.abs(e),r=this.getSegGen(n);if(t.length<=1)this.computePointCurve(t[0],r);else if(this._bufParams.isSingleSided()){var i=e<0;this.computeSingleSidedBufferCurve(t,i,r)}else this.computeLineBufferCurve(t,r);return r.getCoordinates()},An.prototype.getBufferParameters=function(){return this._bufParams},An.prototype.simplifyTolerance=function(t){return t*this._bufParams.getSimplifyFactor()},An.prototype.getRingCurve=function(t,e,n){if(this._distance=n,t.length<=2)return this.getLineCurve(t,n);if(0===n)return An.copyCoordinates(t);var r=this.getSegGen(n);return this.computeRingBufferCurve(t,e,r),r.getCoordinates()},An.prototype.computeOffsetCurve=function(t,e,n){var r=this.simplifyTolerance(this._distance);if(e){var i=Cn.simplify(t,-r),o=i.length-1;n.initSideSegments(i[o],i[o-1],Ie.LEFT),n.addFirstSegment();for(var a=o-2;a>=0;a--)n.addNextSegment(i[a],!0)}else{var s=Cn.simplify(t,r),u=s.length-1;n.initSideSegments(s[0],s[1],Ie.LEFT),n.addFirstSegment();for(var l=2;l<=u;l++)n.addNextSegment(s[l],!0)}n.addLastSegment()},An.prototype.getSegGen=function(t){return new Rn(this._precisionModel,this._bufParams,t)},An.prototype.interfaces_=function(){return[]},An.prototype.getClass=function(){return An},An.copyCoordinates=function(t){for(var e=new Array(t.length).fill(null),n=0;n<e.length;n++)e[n]=new N(t[n]);return e};var Dn=function(){this._subgraphs=null,this._seg=new gn,this._cga=new st;var t=arguments[0];this._subgraphs=t},kn={DepthSegment:{configurable:!0}};Dn.prototype.findStabbedSegments=function(){if(1===arguments.length){for(var t=arguments[0],e=new Et,n=this._subgraphs.iterator();n.hasNext();){var r=n.next(),i=r.getEnvelope();t.y<i.getMinY()||t.y>i.getMaxY()||this.findStabbedSegments(t,r.getDirectedEdges(),e)}return e}if(3===arguments.length)if(O(arguments[2],wt)&&arguments[0]instanceof N&&arguments[1]instanceof qe){for(var o=arguments[0],a=arguments[1],s=arguments[2],u=a.getEdge().getCoordinates(),l=0;l<u.length-1;l++)if(this._seg.p0=u[l],this._seg.p1=u[l+1],this._seg.p0.y>this._seg.p1.y&&this._seg.reverse(),!(Math.max(this._seg.p0.x,this._seg.p1.x)<o.x||this._seg.isHorizontal()||o.y<this._seg.p0.y||o.y>this._seg.p1.y||st.computeOrientation(this._seg.p0,this._seg.p1,o)===st.RIGHT)){var c=a.getDepth(Ie.LEFT);this._seg.p0.equals(u[l])||(c=a.getDepth(Ie.RIGHT));var p=new Fn(this._seg,c);s.add(p)}}else if(O(arguments[2],wt)&&arguments[0]instanceof N&&O(arguments[1],wt))for(var f=arguments[0],h=arguments[2],d=arguments[1].iterator();d.hasNext();){var g=d.next();g.isForward()&&this.findStabbedSegments(f,g,h)}},Dn.prototype.getDepth=function(t){var e=this.findStabbedSegments(t);return 0===e.size()?0:Qe.min(e)._leftDepth},Dn.prototype.interfaces_=function(){return[]},Dn.prototype.getClass=function(){return Dn},kn.DepthSegment.get=function(){return Fn},Object.defineProperties(Dn,kn);var Fn=function(){this._upwardSeg=null,this._leftDepth=null;var t=arguments[0],e=arguments[1];this._upwardSeg=new gn(t),this._leftDepth=e};Fn.prototype.compareTo=function(t){var e=t;if(this._upwardSeg.minX()>=e._upwardSeg.maxX())return 1;if(this._upwardSeg.maxX()<=e._upwardSeg.minX())return-1;var n=this._upwardSeg.orientationIndex(e._upwardSeg);return 0!==n||0!=(n=-1*e._upwardSeg.orientationIndex(this._upwardSeg))?n:this._upwardSeg.compareTo(e._upwardSeg)},Fn.prototype.compareX=function(t,e){var n=t.p0.compareTo(e.p0);return 0!==n?n:t.p1.compareTo(e.p1)},Fn.prototype.toString=function(){return this._upwardSeg.toString()},Fn.prototype.interfaces_=function(){return[x]},Fn.prototype.getClass=function(){return Fn};var jn=function(t,e,n){this.p0=t||null,this.p1=e||null,this.p2=n||null};jn.prototype.area=function(){return jn.area(this.p0,this.p1,this.p2)},jn.prototype.signedArea=function(){return jn.signedArea(this.p0,this.p1,this.p2)},jn.prototype.interpolateZ=function(t){if(null===t)throw new _("Supplied point is null.");return jn.interpolateZ(t,this.p0,this.p1,this.p2)},jn.prototype.longestSideLength=function(){return jn.longestSideLength(this.p0,this.p1,this.p2)},jn.prototype.isAcute=function(){return jn.isAcute(this.p0,this.p1,this.p2)},jn.prototype.circumcentre=function(){return jn.circumcentre(this.p0,this.p1,this.p2)},jn.prototype.area3D=function(){return jn.area3D(this.p0,this.p1,this.p2)},jn.prototype.centroid=function(){return jn.centroid(this.p0,this.p1,this.p2)},jn.prototype.inCentre=function(){return jn.inCentre(this.p0,this.p1,this.p2)},jn.prototype.interfaces_=function(){return[]},jn.prototype.getClass=function(){return jn},jn.area=function(t,e,n){return Math.abs(((n.x-t.x)*(e.y-t.y)-(e.x-t.x)*(n.y-t.y))/2)},jn.signedArea=function(t,e,n){return((n.x-t.x)*(e.y-t.y)-(e.x-t.x)*(n.y-t.y))/2},jn.det=function(t,e,n,r){return t*r-e*n},jn.interpolateZ=function(t,e,n,r){var i=e.x,o=e.y,a=n.x-i,s=r.x-i,u=n.y-o,l=r.y-o,c=a*l-s*u,p=t.x-i,f=t.y-o,h=(l*p-s*f)/c,d=(-u*p+a*f)/c;return e.z+h*(n.z-e.z)+d*(r.z-e.z)},jn.longestSideLength=function(t,e,n){var r=t.distance(e),i=e.distance(n),o=n.distance(t),a=r;return i>a&&(a=i),o>a&&(a=o),a},jn.isAcute=function(t,e,n){return!!On.isAcute(t,e,n)&&!!On.isAcute(e,n,t)&&!!On.isAcute(n,t,e)},jn.circumcentre=function(t,e,n){var r=n.x,i=n.y,o=t.x-r,a=t.y-i,s=e.x-r,u=e.y-i,l=2*jn.det(o,a,s,u),c=jn.det(a,o*o+a*a,u,s*s+u*u),p=jn.det(o,o*o+a*a,s,s*s+u*u);return new N(r-c/l,i+p/l)},jn.perpendicularBisector=function(t,e){var n=e.x-t.x,r=e.y-t.y,i=new Y(t.x+n/2,t.y+r/2,1),o=new Y(t.x-r+n/2,t.y+n+r/2,1);return new Y(i,o)},jn.angleBisector=function(t,e,n){var r=e.distance(t),i=r/(r+e.distance(n)),o=n.x-t.x,a=n.y-t.y;return new N(t.x+i*o,t.y+i*a)},jn.area3D=function(t,e,n){var r=e.x-t.x,i=e.y-t.y,o=e.z-t.z,a=n.x-t.x,s=n.y-t.y,u=n.z-t.z,l=i*u-o*s,c=o*a-r*u,p=r*s-i*a,f=l*l+c*c+p*p;return Math.sqrt(f)/2},jn.centroid=function(t,e,n){var r=(t.x+e.x+n.x)/3,i=(t.y+e.y+n.y)/3;return new N(r,i)},jn.inCentre=function(t,e,n){var r=e.distance(n),i=t.distance(n),o=t.distance(e),a=r+i+o,s=(r*t.x+i*e.x+o*n.x)/a,u=(r*t.y+i*e.y+o*n.y)/a;return new N(s,u)};var zn=function(){this._inputGeom=null,this._distance=null,this._curveBuilder=null,this._curveList=new Et;var t=arguments[0],e=arguments[1],n=arguments[2];this._inputGeom=t,this._distance=e,this._curveBuilder=n};zn.prototype.addPoint=function(t){if(this._distance<=0)return null;var e=t.getCoordinates(),n=this._curveBuilder.getLineCurve(e,this._distance);this.addCurve(n,L.EXTERIOR,L.INTERIOR)},zn.prototype.addPolygon=function(t){var e=this._distance,n=Ie.LEFT;this._distance<0&&(e=-this._distance,n=Ie.RIGHT);var r=t.getExteriorRing(),i=Ct.removeRepeatedPoints(r.getCoordinates());if(this._distance<0&&this.isErodedCompletely(r,this._distance))return null;if(this._distance<=0&&i.length<3)return null;this.addPolygonRing(i,e,n,L.EXTERIOR,L.INTERIOR);for(var o=0;o<t.getNumInteriorRing();o++){var a=t.getInteriorRingN(o),s=Ct.removeRepeatedPoints(a.getCoordinates());this._distance>0&&this.isErodedCompletely(a,-this._distance)||this.addPolygonRing(s,e,Ie.opposite(n),L.INTERIOR,L.EXTERIOR)}},zn.prototype.isTriangleErodedCompletely=function(t,e){var n=new jn(t[0],t[1],t[2]),r=n.inCentre();return st.distancePointLine(r,n.p0,n.p1)<Math.abs(e)},zn.prototype.addLineString=function(t){if(this._distance<=0&&!this._curveBuilder.getBufferParameters().isSingleSided())return null;var e=Ct.removeRepeatedPoints(t.getCoordinates()),n=this._curveBuilder.getLineCurve(e,this._distance);this.addCurve(n,L.EXTERIOR,L.INTERIOR)},zn.prototype.addCurve=function(t,e,n){if(null===t||t.length<2)return null;var r=new dn(t,new Re(0,L.BOUNDARY,e,n));this._curveList.add(r)},zn.prototype.getCurves=function(){return this.add(this._inputGeom),this._curveList},zn.prototype.addPolygonRing=function(t,e,n,r,i){if(0===e&&t.length<ee.MINIMUM_VALID_SIZE)return null;var o=r,a=i;t.length>=ee.MINIMUM_VALID_SIZE&&st.isCCW(t)&&(o=i,a=r,n=Ie.opposite(n));var s=this._curveBuilder.getRingCurve(t,n,e);this.addCurve(s,o,a)},zn.prototype.add=function(t){if(t.isEmpty())return null;t instanceof Qt?this.addPolygon(t):t instanceof $t?this.addLineString(t):t instanceof Jt?this.addPoint(t):(t instanceof te||t instanceof Ut||t instanceof ne||t instanceof qt)&&this.addCollection(t)},zn.prototype.isErodedCompletely=function(t,e){var n=t.getCoordinates();if(n.length<4)return e<0;if(4===n.length)return this.isTriangleErodedCompletely(n,e);var r=t.getEnvelopeInternal(),i=Math.min(r.getHeight(),r.getWidth());return e<0&&2*Math.abs(e)>i},zn.prototype.addCollection=function(t){for(var e=0;e<t.getNumGeometries();e++){var n=t.getGeometryN(e);this.add(n)}},zn.prototype.interfaces_=function(){return[]},zn.prototype.getClass=function(){return zn};var Gn=function(){};Gn.prototype.locate=function(t){},Gn.prototype.interfaces_=function(){return[]},Gn.prototype.getClass=function(){return Gn};var Bn=function(){this._parent=null,this._atStart=null,this._max=null,this._index=null,this._subcollectionIterator=null;var t=arguments[0];this._parent=t,this._atStart=!0,this._index=0,this._max=t.getNumGeometries()};Bn.prototype.next=function(){if(this._atStart)return this._atStart=!1,Bn.isAtomic(this._parent)&&this._index++,this._parent;if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return this._subcollectionIterator.next();this._subcollectionIterator=null}if(this._index>=this._max)throw new r;var t=this._parent.getGeometryN(this._index++);return t instanceof qt?(this._subcollectionIterator=new Bn(t),this._subcollectionIterator.next()):t},Bn.prototype.remove=function(){throw new Error(this.getClass().getName())},Bn.prototype.hasNext=function(){if(this._atStart)return!0;if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return!0;this._subcollectionIterator=null}return!(this._index>=this._max)},Bn.prototype.interfaces_=function(){return[xt]},Bn.prototype.getClass=function(){return Bn},Bn.isAtomic=function(t){return!(t instanceof qt)};var qn=function(){this._geom=null;var t=arguments[0];this._geom=t};qn.prototype.locate=function(t){return qn.locate(t,this._geom)},qn.prototype.interfaces_=function(){return[Gn]},qn.prototype.getClass=function(){return qn},qn.isPointInRing=function(t,e){return!!e.getEnvelopeInternal().intersects(t)&&st.isPointInRing(t,e.getCoordinates())},qn.containsPointInPolygon=function(t,e){if(e.isEmpty())return!1;var n=e.getExteriorRing();if(!qn.isPointInRing(t,n))return!1;for(var r=0;r<e.getNumInteriorRing();r++){var i=e.getInteriorRingN(r);if(qn.isPointInRing(t,i))return!1}return!0},qn.containsPoint=function(t,e){if(e instanceof Qt)return qn.containsPointInPolygon(t,e);if(e instanceof qt)for(var n=new Bn(e);n.hasNext();){var r=n.next();if(r!==e&&qn.containsPoint(t,r))return!0}return!1},qn.locate=function(t,e){return e.isEmpty()?L.EXTERIOR:qn.containsPoint(t,e)?L.INTERIOR:L.EXTERIOR};var Un=function(){this._edgeMap=new p,this._edgeList=null,this._ptInAreaLocation=[L.NONE,L.NONE]};Un.prototype.getNextCW=function(t){this.getEdges();var e=this._edgeList.indexOf(t),n=e-1;return 0===e&&(n=this._edgeList.size()-1),this._edgeList.get(n)},Un.prototype.propagateSideLabels=function(t){for(var e=L.NONE,n=this.iterator();n.hasNext();){var r=n.next().getLabel();r.isArea(t)&&r.getLocation(t,Ie.LEFT)!==L.NONE&&(e=r.getLocation(t,Ie.LEFT))}if(e===L.NONE)return null;for(var i=e,o=this.iterator();o.hasNext();){var a=o.next(),s=a.getLabel();if(s.getLocation(t,Ie.ON)===L.NONE&&s.setLocation(t,Ie.ON,i),s.isArea(t)){var u=s.getLocation(t,Ie.LEFT),l=s.getLocation(t,Ie.RIGHT);if(l!==L.NONE){if(l!==i)throw new Le("side location conflict",a.getCoordinate());u===L.NONE&&et.shouldNeverReachHere("found single null side (at "+a.getCoordinate()+")"),i=u}else et.isTrue(s.getLocation(t,Ie.LEFT)===L.NONE,"found single null side"),s.setLocation(t,Ie.RIGHT,i),s.setLocation(t,Ie.LEFT,i)}}},Un.prototype.getCoordinate=function(){var t=this.iterator();return t.hasNext()?t.next().getCoordinate():null},Un.prototype.print=function(t){V.out.println("EdgeEndStar:   "+this.getCoordinate());for(var e=this.iterator();e.hasNext();)e.next().print(t)},Un.prototype.isAreaLabelsConsistent=function(t){return this.computeEdgeEndLabels(t.getBoundaryNodeRule()),this.checkAreaLabelsConsistent(0)},Un.prototype.checkAreaLabelsConsistent=function(t){var e=this.getEdges();if(e.size()<=0)return!0;var n=e.size()-1,r=e.get(n).getLabel().getLocation(t,Ie.LEFT);et.isTrue(r!==L.NONE,"Found unlabelled area edge");for(var i=r,o=this.iterator();o.hasNext();){var a=o.next().getLabel();et.isTrue(a.isArea(t),"Found non-area edge");var s=a.getLocation(t,Ie.LEFT),u=a.getLocation(t,Ie.RIGHT);if(s===u)return!1;if(u!==i)return!1;i=s}return!0},Un.prototype.findIndex=function(t){this.iterator();for(var e=0;e<this._edgeList.size();e++)if(this._edgeList.get(e)===t)return e;return-1},Un.prototype.iterator=function(){return this.getEdges().iterator()},Un.prototype.getEdges=function(){return null===this._edgeList&&(this._edgeList=new Et(this._edgeMap.values())),this._edgeList},Un.prototype.getLocation=function(t,e,n){return this._ptInAreaLocation[t]===L.NONE&&(this._ptInAreaLocation[t]=qn.locate(e,n[t].getGeometry())),this._ptInAreaLocation[t]},Un.prototype.toString=function(){var t=new T;t.append("EdgeEndStar:   "+this.getCoordinate()),t.append("\n");for(var e=this.iterator();e.hasNext();){var n=e.next();t.append(n),t.append("\n")}return t.toString()},Un.prototype.computeEdgeEndLabels=function(t){for(var e=this.iterator();e.hasNext();)e.next().computeLabel(t)},Un.prototype.computeLabelling=function(t){this.computeEdgeEndLabels(t[0].getBoundaryNodeRule()),this.propagateSideLabels(0),this.propagateSideLabels(1);for(var e=[!1,!1],n=this.iterator();n.hasNext();)for(var r=n.next().getLabel(),i=0;i<2;i++)r.isLine(i)&&r.getLocation(i)===L.BOUNDARY&&(e[i]=!0);for(var o=this.iterator();o.hasNext();)for(var a=o.next(),s=a.getLabel(),u=0;u<2;u++)if(s.isAnyNull(u)){var l=L.NONE;if(e[u])l=L.EXTERIOR;else{var c=a.getCoordinate();l=this.getLocation(u,c,t)}s.setAllLocationsIfNull(u,l)}},Un.prototype.getDegree=function(){return this._edgeMap.size()},Un.prototype.insertEdgeEnd=function(t,e){this._edgeMap.put(t,e),this._edgeList=null},Un.prototype.interfaces_=function(){return[]},Un.prototype.getClass=function(){return Un};var Vn=function(t){function e(){t.call(this),this._resultAreaEdgeList=null,this._label=null,this._SCANNING_FOR_INCOMING=1,this._LINKING_TO_OUTGOING=2}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.linkResultDirectedEdges=function(){this.getResultAreaEdges();for(var t=null,e=null,n=this._SCANNING_FOR_INCOMING,r=0;r<this._resultAreaEdgeList.size();r++){var i=this._resultAreaEdgeList.get(r),o=i.getSym();if(i.getLabel().isArea())switch(null===t&&i.isInResult()&&(t=i),n){case this._SCANNING_FOR_INCOMING:if(!o.isInResult())continue;e=o,n=this._LINKING_TO_OUTGOING;break;case this._LINKING_TO_OUTGOING:if(!i.isInResult())continue;e.setNext(i),n=this._SCANNING_FOR_INCOMING}}if(n===this._LINKING_TO_OUTGOING){if(null===t)throw new Le("no outgoing dirEdge found",this.getCoordinate());et.isTrue(t.isInResult(),"unable to link last incoming dirEdge"),e.setNext(t)}},e.prototype.insert=function(t){var e=t;this.insertEdgeEnd(e,e)},e.prototype.getRightmostEdge=function(){var t=this.getEdges(),e=t.size();if(e<1)return null;var n=t.get(0);if(1===e)return n;var r=t.get(e-1),i=n.getQuadrant(),o=r.getQuadrant();return ze.isNorthern(i)&&ze.isNorthern(o)?n:ze.isNorthern(i)||ze.isNorthern(o)?0!==n.getDy()?n:0!==r.getDy()?r:(et.shouldNeverReachHere("found two horizontal edges incident on node"),null):r},e.prototype.print=function(t){V.out.println("DirectedEdgeStar: "+this.getCoordinate());for(var e=this.iterator();e.hasNext();){var n=e.next();t.print("out "),n.print(t),t.println(),t.print("in "),n.getSym().print(t),t.println()}},e.prototype.getResultAreaEdges=function(){if(null!==this._resultAreaEdgeList)return this._resultAreaEdgeList;this._resultAreaEdgeList=new Et;for(var t=this.iterator();t.hasNext();){var e=t.next();(e.isInResult()||e.getSym().isInResult())&&this._resultAreaEdgeList.add(e)}return this._resultAreaEdgeList},e.prototype.updateLabelling=function(t){for(var e=this.iterator();e.hasNext();){var n=e.next().getLabel();n.setAllLocationsIfNull(0,t.getLocation(0)),n.setAllLocationsIfNull(1,t.getLocation(1))}},e.prototype.linkAllDirectedEdges=function(){this.getEdges();for(var t=null,e=null,n=this._edgeList.size()-1;n>=0;n--){var r=this._edgeList.get(n),i=r.getSym();null===e&&(e=i),null!==t&&i.setNext(t),t=r}e.setNext(t)},e.prototype.computeDepths=function(){if(1===arguments.length){var t=arguments[0],e=this.findIndex(t),n=t.getDepth(Ie.LEFT),r=t.getDepth(Ie.RIGHT),i=this.computeDepths(e+1,this._edgeList.size(),n);if(this.computeDepths(0,e,i)!==r)throw new Le("depth mismatch at "+t.getCoordinate())}else if(3===arguments.length){for(var o=arguments[1],a=arguments[2],s=arguments[0];s<o;s++){var u=this._edgeList.get(s);u.setEdgeDepths(Ie.RIGHT,a),a=u.getDepth(Ie.LEFT)}return a}},e.prototype.mergeSymLabels=function(){for(var t=this.iterator();t.hasNext();){var e=t.next();e.getLabel().merge(e.getSym().getLabel())}},e.prototype.linkMinimalDirectedEdges=function(t){for(var e=null,n=null,r=this._SCANNING_FOR_INCOMING,i=this._resultAreaEdgeList.size()-1;i>=0;i--){var o=this._resultAreaEdgeList.get(i),a=o.getSym();switch(null===e&&o.getEdgeRing()===t&&(e=o),r){case this._SCANNING_FOR_INCOMING:if(a.getEdgeRing()!==t)continue;n=a,r=this._LINKING_TO_OUTGOING;break;case this._LINKING_TO_OUTGOING:if(o.getEdgeRing()!==t)continue;n.setNextMin(o),r=this._SCANNING_FOR_INCOMING}}r===this._LINKING_TO_OUTGOING&&(et.isTrue(null!==e,"found null for first outgoing dirEdge"),et.isTrue(e.getEdgeRing()===t,"unable to link last incoming dirEdge"),n.setNextMin(e))},e.prototype.getOutgoingDegree=function(){if(0===arguments.length){for(var t=0,e=this.iterator();e.hasNext();)e.next().isInResult()&&t++;return t}if(1===arguments.length){for(var n=arguments[0],r=0,i=this.iterator();i.hasNext();)i.next().getEdgeRing()===n&&r++;return r}},e.prototype.getLabel=function(){return this._label},e.prototype.findCoveredLineEdges=function(){for(var t=L.NONE,e=this.iterator();e.hasNext();){var n=e.next(),r=n.getSym();if(!n.isLineEdge()){if(n.isInResult()){t=L.INTERIOR;break}if(r.isInResult()){t=L.EXTERIOR;break}}}if(t===L.NONE)return null;for(var i=t,o=this.iterator();o.hasNext();){var a=o.next(),s=a.getSym();a.isLineEdge()?a.getEdge().setCovered(i===L.INTERIOR):(a.isInResult()&&(i=L.EXTERIOR),s.isInResult()&&(i=L.INTERIOR))}},e.prototype.computeLabelling=function(e){t.prototype.computeLabelling.call(this,e),this._label=new Re(L.NONE);for(var n=this.iterator();n.hasNext();)for(var r=n.next().getEdge().getLabel(),i=0;i<2;i++){var o=r.getLocation(i);o!==L.INTERIOR&&o!==L.BOUNDARY||this._label.setLocation(i,L.INTERIOR)}},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Un),Yn=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createNode=function(t){return new Fe(t,new Vn)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Ue),Xn=function t(){this._pts=null,this._orientation=null;var e=arguments[0];this._pts=e,this._orientation=t.orientation(e)};Xn.prototype.compareTo=function(t){var e=t;return Xn.compareOriented(this._pts,this._orientation,e._pts,e._orientation)},Xn.prototype.interfaces_=function(){return[x]},Xn.prototype.getClass=function(){return Xn},Xn.orientation=function(t){return 1===Ct.increasingDirection(t)},Xn.compareOriented=function(t,e,n,r){for(var i=e?1:-1,o=r?1:-1,a=e?t.length:-1,s=r?n.length:-1,u=e?0:t.length-1,l=r?0:n.length-1;;){var c=t[u].compareTo(n[l]);if(0!==c)return c;var p=(u+=i)===a,f=(l+=o)===s;if(p&&!f)return-1;if(!p&&f)return 1;if(p&&f)return 0}};var Hn=function(){this._edges=new Et,this._ocaMap=new p};Hn.prototype.print=function(t){t.print("MULTILINESTRING ( ");for(var e=0;e<this._edges.size();e++){var n=this._edges.get(e);e>0&&t.print(","),t.print("(");for(var r=n.getCoordinates(),i=0;i<r.length;i++)i>0&&t.print(","),t.print(r[i].x+" "+r[i].y);t.println(")")}t.print(")  ")},Hn.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next())},Hn.prototype.findEdgeIndex=function(t){for(var e=0;e<this._edges.size();e++)if(this._edges.get(e).equals(t))return e;return-1},Hn.prototype.iterator=function(){return this._edges.iterator()},Hn.prototype.getEdges=function(){return this._edges},Hn.prototype.get=function(t){return this._edges.get(t)},Hn.prototype.findEqualEdge=function(t){var e=new Xn(t.getCoordinates());return this._ocaMap.get(e)},Hn.prototype.add=function(t){this._edges.add(t);var e=new Xn(t.getCoordinates());this._ocaMap.put(e,t)},Hn.prototype.interfaces_=function(){return[]},Hn.prototype.getClass=function(){return Hn};var Wn=function(){};Wn.prototype.processIntersections=function(t,e,n,r){},Wn.prototype.isDone=function(){},Wn.prototype.interfaces_=function(){return[]},Wn.prototype.getClass=function(){return Wn};var $n=function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._hasInterior=!1,this._properIntersectionPoint=null,this._li=null,this._isSelfIntersection=null,this.numIntersections=0,this.numInteriorIntersections=0,this.numProperIntersections=0,this.numTests=0;var t=arguments[0];this._li=t};$n.prototype.isTrivialIntersection=function(t,e,n,r){if(t===n&&1===this._li.getIntersectionNum()){if($n.isAdjacentSegments(e,r))return!0;if(t.isClosed()){var i=t.size()-1;if(0===e&&r===i||0===r&&e===i)return!0}}return!1},$n.prototype.getProperIntersectionPoint=function(){return this._properIntersectionPoint},$n.prototype.hasProperInteriorIntersection=function(){return this._hasProperInterior},$n.prototype.getLineIntersector=function(){return this._li},$n.prototype.hasProperIntersection=function(){return this._hasProper},$n.prototype.processIntersections=function(t,e,n,r){if(t===n&&e===r)return null;this.numTests++;var i=t.getCoordinates()[e],o=t.getCoordinates()[e+1],a=n.getCoordinates()[r],s=n.getCoordinates()[r+1];this._li.computeIntersection(i,o,a,s),this._li.hasIntersection()&&(this.numIntersections++,this._li.isInteriorIntersection()&&(this.numInteriorIntersections++,this._hasInterior=!0),this.isTrivialIntersection(t,e,n,r)||(this._hasIntersection=!0,t.addIntersections(this._li,e,0),n.addIntersections(this._li,r,1),this._li.isProper()&&(this.numProperIntersections++,this._hasProper=!0,this._hasProperInterior=!0)))},$n.prototype.hasIntersection=function(){return this._hasIntersection},$n.prototype.isDone=function(){return!1},$n.prototype.hasInteriorIntersection=function(){return this._hasInterior},$n.prototype.interfaces_=function(){return[Wn]},$n.prototype.getClass=function(){return $n},$n.isAdjacentSegments=function(t,e){return 1===Math.abs(t-e)};var Zn=function(){this.coord=null,this.segmentIndex=null,this.dist=null;var t=arguments[0],e=arguments[1],n=arguments[2];this.coord=new N(t),this.segmentIndex=e,this.dist=n};Zn.prototype.getSegmentIndex=function(){return this.segmentIndex},Zn.prototype.getCoordinate=function(){return this.coord},Zn.prototype.print=function(t){t.print(this.coord),t.print(" seg # = "+this.segmentIndex),t.println(" dist = "+this.dist)},Zn.prototype.compareTo=function(t){var e=t;return this.compare(e.segmentIndex,e.dist)},Zn.prototype.isEndPoint=function(t){return 0===this.segmentIndex&&0===this.dist||this.segmentIndex===t},Zn.prototype.toString=function(){return this.coord+" seg # = "+this.segmentIndex+" dist = "+this.dist},Zn.prototype.getDistance=function(){return this.dist},Zn.prototype.compare=function(t,e){return this.segmentIndex<t?-1:this.segmentIndex>t?1:this.dist<e?-1:this.dist>e?1:0},Zn.prototype.interfaces_=function(){return[x]},Zn.prototype.getClass=function(){return Zn};var Jn=function(){this._nodeMap=new p,this.edge=null;var t=arguments[0];this.edge=t};Jn.prototype.print=function(t){t.println("Intersections:");for(var e=this.iterator();e.hasNext();)e.next().print(t)},Jn.prototype.iterator=function(){return this._nodeMap.values().iterator()},Jn.prototype.addSplitEdges=function(t){this.addEndpoints();for(var e=this.iterator(),n=e.next();e.hasNext();){var r=e.next(),i=this.createSplitEdge(n,r);t.add(i),n=r}},Jn.prototype.addEndpoints=function(){var t=this.edge.pts.length-1;this.add(this.edge.pts[0],0,0),this.add(this.edge.pts[t],t,0)},Jn.prototype.createSplitEdge=function(t,e){var n=e.segmentIndex-t.segmentIndex+2,r=this.edge.pts[e.segmentIndex],i=e.dist>0||!e.coord.equals2D(r);i||n--;var o=new Array(n).fill(null),a=0;o[a++]=new N(t.coord);for(var s=t.segmentIndex+1;s<=e.segmentIndex;s++)o[a++]=this.edge.pts[s];return i&&(o[a]=e.coord),new nr(o,new Re(this.edge._label))},Jn.prototype.add=function(t,e,n){var r=new Zn(t,e,n),i=this._nodeMap.get(r);return null!==i?i:(this._nodeMap.put(r,r),r)},Jn.prototype.isIntersection=function(t){for(var e=this.iterator();e.hasNext();)if(e.next().coord.equals(t))return!0;return!1},Jn.prototype.interfaces_=function(){return[]},Jn.prototype.getClass=function(){return Jn};var Kn=function(){};Kn.prototype.getChainStartIndices=function(t){var e=0,n=new Et;n.add(new A(e));do{var r=this.findChainEnd(t,e);n.add(new A(r)),e=r}while(e<t.length-1);return Kn.toIntArray(n)},Kn.prototype.findChainEnd=function(t,e){for(var n=ze.quadrant(t[e],t[e+1]),r=e+1;r<t.length&&ze.quadrant(t[r-1],t[r])===n;)r++;return r-1},Kn.prototype.interfaces_=function(){return[]},Kn.prototype.getClass=function(){return Kn},Kn.toIntArray=function(t){for(var e=new Array(t.size()).fill(null),n=0;n<e.length;n++)e[n]=t.get(n).intValue();return e};var Qn=function(){this.e=null,this.pts=null,this.startIndex=null,this.env1=new X,this.env2=new X;var t=arguments[0];this.e=t,this.pts=t.getCoordinates();var e=new Kn;this.startIndex=e.getChainStartIndices(this.pts)};Qn.prototype.getCoordinates=function(){return this.pts},Qn.prototype.getMaxX=function(t){var e=this.pts[this.startIndex[t]].x,n=this.pts[this.startIndex[t+1]].x;return e>n?e:n},Qn.prototype.getMinX=function(t){var e=this.pts[this.startIndex[t]].x,n=this.pts[this.startIndex[t+1]].x;return e<n?e:n},Qn.prototype.computeIntersectsForChain=function(){if(4===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2],r=arguments[3];this.computeIntersectsForChain(this.startIndex[t],this.startIndex[t+1],e,e.startIndex[n],e.startIndex[n+1],r)}else if(6===arguments.length){var i=arguments[0],o=arguments[1],a=arguments[2],s=arguments[3],u=arguments[4],l=arguments[5],c=this.pts[i],p=this.pts[o],f=a.pts[s],h=a.pts[u];if(o-i==1&&u-s==1)return l.addIntersections(this.e,i,a.e,s),null;if(this.env1.init(c,p),this.env2.init(f,h),!this.env1.intersects(this.env2))return null;var d=Math.trunc((i+o)/2),g=Math.trunc((s+u)/2);i<d&&(s<g&&this.computeIntersectsForChain(i,d,a,s,g,l),g<u&&this.computeIntersectsForChain(i,d,a,g,u,l)),d<o&&(s<g&&this.computeIntersectsForChain(d,o,a,s,g,l),g<u&&this.computeIntersectsForChain(d,o,a,g,u,l))}},Qn.prototype.getStartIndexes=function(){return this.startIndex},Qn.prototype.computeIntersects=function(t,e){for(var n=0;n<this.startIndex.length-1;n++)for(var r=0;r<t.startIndex.length-1;r++)this.computeIntersectsForChain(n,t,r,e)},Qn.prototype.interfaces_=function(){return[]},Qn.prototype.getClass=function(){return Qn};var tr=function t(){this._depth=Array(2).fill().map((function(){return Array(3)}));for(var e=0;e<2;e++)for(var n=0;n<3;n++)this._depth[e][n]=t.NULL_VALUE},er={NULL_VALUE:{configurable:!0}};tr.prototype.getDepth=function(t,e){return this._depth[t][e]},tr.prototype.setDepth=function(t,e,n){this._depth[t][e]=n},tr.prototype.isNull=function(){if(0===arguments.length){for(var t=0;t<2;t++)for(var e=0;e<3;e++)if(this._depth[t][e]!==tr.NULL_VALUE)return!1;return!0}if(1===arguments.length){var n=arguments[0];return this._depth[n][1]===tr.NULL_VALUE}if(2===arguments.length){var r=arguments[0],i=arguments[1];return this._depth[r][i]===tr.NULL_VALUE}},tr.prototype.normalize=function(){for(var t=0;t<2;t++)if(!this.isNull(t)){var e=this._depth[t][1];this._depth[t][2]<e&&(e=this._depth[t][2]),e<0&&(e=0);for(var n=1;n<3;n++){var r=0;this._depth[t][n]>e&&(r=1),this._depth[t][n]=r}}},tr.prototype.getDelta=function(t){return this._depth[t][Ie.RIGHT]-this._depth[t][Ie.LEFT]},tr.prototype.getLocation=function(t,e){return this._depth[t][e]<=0?L.EXTERIOR:L.INTERIOR},tr.prototype.toString=function(){return"A: "+this._depth[0][1]+","+this._depth[0][2]+" B: "+this._depth[1][1]+","+this._depth[1][2]},tr.prototype.add=function(){if(1===arguments.length)for(var t=arguments[0],e=0;e<2;e++)for(var n=1;n<3;n++){var r=t.getLocation(e,n);r!==L.EXTERIOR&&r!==L.INTERIOR||(this.isNull(e,n)?this._depth[e][n]=tr.depthAtLocation(r):this._depth[e][n]+=tr.depthAtLocation(r))}else if(3===arguments.length){var i=arguments[0],o=arguments[1];arguments[2]===L.INTERIOR&&this._depth[i][o]++}},tr.prototype.interfaces_=function(){return[]},tr.prototype.getClass=function(){return tr},tr.depthAtLocation=function(t){return t===L.EXTERIOR?0:t===L.INTERIOR?1:tr.NULL_VALUE},er.NULL_VALUE.get=function(){return-1},Object.defineProperties(tr,er);var nr=function(t){function e(){if(t.call(this),this.pts=null,this._env=null,this.eiList=new Jn(this),this._name=null,this._mce=null,this._isIsolated=!0,this._depth=new tr,this._depthDelta=0,1===arguments.length){var n=arguments[0];e.call(this,n,null)}else if(2===arguments.length){var r=arguments[0],i=arguments[1];this.pts=r,this._label=i}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDepth=function(){return this._depth},e.prototype.getCollapsedEdge=function(){var t=new Array(2).fill(null);return t[0]=this.pts[0],t[1]=this.pts[1],new e(t,Re.toLineLabel(this._label))},e.prototype.isIsolated=function(){return this._isIsolated},e.prototype.getCoordinates=function(){return this.pts},e.prototype.setIsolated=function(t){this._isIsolated=t},e.prototype.setName=function(t){this._name=t},e.prototype.equals=function(t){if(!(t instanceof e))return!1;var n=t;if(this.pts.length!==n.pts.length)return!1;for(var r=!0,i=!0,o=this.pts.length,a=0;a<this.pts.length;a++)if(this.pts[a].equals2D(n.pts[a])||(r=!1),this.pts[a].equals2D(n.pts[--o])||(i=!1),!r&&!i)return!1;return!0},e.prototype.getCoordinate=function(){if(0===arguments.length)return this.pts.length>0?this.pts[0]:null;if(1===arguments.length){var t=arguments[0];return this.pts[t]}},e.prototype.print=function(t){t.print("edge "+this._name+": "),t.print("LINESTRING (");for(var e=0;e<this.pts.length;e++)e>0&&t.print(","),t.print(this.pts[e].x+" "+this.pts[e].y);t.print(")  "+this._label+" "+this._depthDelta)},e.prototype.computeIM=function(t){e.updateIM(this._label,t)},e.prototype.isCollapsed=function(){return!!this._label.isArea()&&3===this.pts.length&&!!this.pts[0].equals(this.pts[2])},e.prototype.isClosed=function(){return this.pts[0].equals(this.pts[this.pts.length-1])},e.prototype.getMaximumSegmentIndex=function(){return this.pts.length-1},e.prototype.getDepthDelta=function(){return this._depthDelta},e.prototype.getNumPoints=function(){return this.pts.length},e.prototype.printReverse=function(t){t.print("edge "+this._name+": ");for(var e=this.pts.length-1;e>=0;e--)t.print(this.pts[e]+" ");t.println("")},e.prototype.getMonotoneChainEdge=function(){return null===this._mce&&(this._mce=new Qn(this)),this._mce},e.prototype.getEnvelope=function(){if(null===this._env){this._env=new X;for(var t=0;t<this.pts.length;t++)this._env.expandToInclude(this.pts[t])}return this._env},e.prototype.addIntersection=function(t,e,n,r){var i=new N(t.getIntersection(r)),o=e,a=t.getEdgeDistance(n,r),s=o+1;if(s<this.pts.length){var u=this.pts[s];i.equals2D(u)&&(o=s,a=0)}this.eiList.add(i,o,a)},e.prototype.toString=function(){var t=new T;t.append("edge "+this._name+": "),t.append("LINESTRING (");for(var e=0;e<this.pts.length;e++)e>0&&t.append(","),t.append(this.pts[e].x+" "+this.pts[e].y);return t.append(")  "+this._label+" "+this._depthDelta),t.toString()},e.prototype.isPointwiseEqual=function(t){if(this.pts.length!==t.pts.length)return!1;for(var e=0;e<this.pts.length;e++)if(!this.pts[e].equals2D(t.pts[e]))return!1;return!0},e.prototype.setDepthDelta=function(t){this._depthDelta=t},e.prototype.getEdgeIntersectionList=function(){return this.eiList},e.prototype.addIntersections=function(t,e,n){for(var r=0;r<t.getIntersectionNum();r++)this.addIntersection(t,e,n,r)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.updateIM=function(){if(2!==arguments.length)return t.prototype.updateIM.apply(this,arguments);var e=arguments[0],n=arguments[1];n.setAtLeastIfValid(e.getLocation(0,Ie.ON),e.getLocation(1,Ie.ON),1),e.isArea()&&(n.setAtLeastIfValid(e.getLocation(0,Ie.LEFT),e.getLocation(1,Ie.LEFT),2),n.setAtLeastIfValid(e.getLocation(0,Ie.RIGHT),e.getLocation(1,Ie.RIGHT),2))},e}(ke),rr=function(t){this._workingPrecisionModel=null,this._workingNoder=null,this._geomFact=null,this._graph=null,this._edgeList=new Hn,this._bufParams=t||null};rr.prototype.setWorkingPrecisionModel=function(t){this._workingPrecisionModel=t},rr.prototype.insertUniqueEdge=function(t){var e=this._edgeList.findEqualEdge(t);if(null!==e){var n=e.getLabel(),r=t.getLabel();e.isPointwiseEqual(t)||(r=new Re(t.getLabel())).flip(),n.merge(r);var i=rr.depthDelta(r),o=e.getDepthDelta()+i;e.setDepthDelta(o)}else this._edgeList.add(t),t.setDepthDelta(rr.depthDelta(t.getLabel()))},rr.prototype.buildSubgraphs=function(t,e){for(var n=new Et,r=t.iterator();r.hasNext();){var i=r.next(),o=i.getRightmostCoordinate(),a=new Dn(n).getDepth(o);i.computeDepth(a),i.findResultEdges(),n.add(i),e.add(i.getDirectedEdges(),i.getNodes())}},rr.prototype.createSubgraphs=function(t){for(var e=new Et,n=t.getNodes().iterator();n.hasNext();){var r=n.next();if(!r.isVisited()){var i=new Oe;i.create(r),e.add(i)}}return Qe.sort(e,Qe.reverseOrder()),e},rr.prototype.createEmptyResultGeometry=function(){return this._geomFact.createPolygon()},rr.prototype.getNoder=function(t){if(null!==this._workingNoder)return this._workingNoder;var e=new wn,n=new it;return n.setPrecisionModel(t),e.setSegmentIntersector(new $n(n)),e},rr.prototype.buffer=function(t,e){var n=this._workingPrecisionModel;null===n&&(n=t.getPrecisionModel()),this._geomFact=t.getFactory();var r=new An(n,this._bufParams),i=new zn(t,e,r).getCurves();if(i.size()<=0)return this.createEmptyResultGeometry();this.computeNodedEdges(i,n),this._graph=new Ve(new Yn),this._graph.addEdges(this._edgeList.getEdges());var o=this.createSubgraphs(this._graph),a=new Ye(this._geomFact);this.buildSubgraphs(o,a);var s=a.getPolygons();return s.size()<=0?this.createEmptyResultGeometry():this._geomFact.buildGeometry(s)},rr.prototype.computeNodedEdges=function(t,e){var n=this.getNoder(e);n.computeNodes(t);for(var r=n.getNodedSubstrings().iterator();r.hasNext();){var i=r.next(),o=i.getCoordinates();if(2!==o.length||!o[0].equals2D(o[1])){var a=i.getData(),s=new nr(i.getCoordinates(),new Re(a));this.insertUniqueEdge(s)}}},rr.prototype.setNoder=function(t){this._workingNoder=t},rr.prototype.interfaces_=function(){return[]},rr.prototype.getClass=function(){return rr},rr.depthDelta=function(t){var e=t.getLocation(0,Ie.LEFT),n=t.getLocation(0,Ie.RIGHT);return e===L.INTERIOR&&n===L.EXTERIOR?1:e===L.EXTERIOR&&n===L.INTERIOR?-1:0},rr.convertSegStrings=function(t){for(var e=new me,n=new Et;t.hasNext();){var r=t.next(),i=e.createLineString(r.getCoordinates());n.add(i)}return e.buildGeometry(n)};var ir=function(){if(this._noder=null,this._scaleFactor=null,this._offsetX=null,this._offsetY=null,this._isScaled=!1,2===arguments.length){var t=arguments[0],e=arguments[1];this._noder=t,this._scaleFactor=e,this._offsetX=0,this._offsetY=0,this._isScaled=!this.isIntegerPrecision()}else if(4===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2],o=arguments[3];this._noder=n,this._scaleFactor=r,this._offsetX=i,this._offsetY=o,this._isScaled=!this.isIntegerPrecision()}};ir.prototype.rescale=function(){if(O(arguments[0],bt))for(var t=arguments[0].iterator();t.hasNext();){var e=t.next();this.rescale(e.getCoordinates())}else if(arguments[0]instanceof Array){for(var n=arguments[0],r=0;r<n.length;r++)n[r].x=n[r].x/this._scaleFactor+this._offsetX,n[r].y=n[r].y/this._scaleFactor+this._offsetY;2===n.length&&n[0].equals2D(n[1])&&V.out.println(n)}},ir.prototype.scale=function(){if(O(arguments[0],bt)){for(var t=arguments[0],e=new Et,n=t.iterator();n.hasNext();){var r=n.next();e.add(new dn(this.scale(r.getCoordinates()),r.getData()))}return e}if(arguments[0]instanceof Array){for(var i=arguments[0],o=new Array(i.length).fill(null),a=0;a<i.length;a++)o[a]=new N(Math.round((i[a].x-this._offsetX)*this._scaleFactor),Math.round((i[a].y-this._offsetY)*this._scaleFactor),i[a].z);return Ct.removeRepeatedPoints(o)}},ir.prototype.isIntegerPrecision=function(){return 1===this._scaleFactor},ir.prototype.getNodedSubstrings=function(){var t=this._noder.getNodedSubstrings();return this._isScaled&&this.rescale(t),t},ir.prototype.computeNodes=function(t){var e=t;this._isScaled&&(e=this.scale(t)),this._noder.computeNodes(e)},ir.prototype.interfaces_=function(){return[bn]},ir.prototype.getClass=function(){return ir};var or=function(){this._li=new it,this._segStrings=null;var t=arguments[0];this._segStrings=t},ar={fact:{configurable:!0}};or.prototype.checkEndPtVertexIntersections=function(){if(0===arguments.length)for(var t=this._segStrings.iterator();t.hasNext();){var e=t.next().getCoordinates();this.checkEndPtVertexIntersections(e[0],this._segStrings),this.checkEndPtVertexIntersections(e[e.length-1],this._segStrings)}else if(2===arguments.length)for(var n=arguments[0],r=arguments[1].iterator();r.hasNext();)for(var i=r.next().getCoordinates(),o=1;o<i.length-1;o++)if(i[o].equals(n))throw new Q("found endpt/interior pt intersection at index "+o+" :pt "+n)},or.prototype.checkInteriorIntersections=function(){if(0===arguments.length)for(var t=this._segStrings.iterator();t.hasNext();)for(var e=t.next(),n=this._segStrings.iterator();n.hasNext();){var r=n.next();this.checkInteriorIntersections(e,r)}else if(2===arguments.length)for(var i=arguments[0],o=arguments[1],a=i.getCoordinates(),s=o.getCoordinates(),u=0;u<a.length-1;u++)for(var l=0;l<s.length-1;l++)this.checkInteriorIntersections(i,u,o,l);else if(4===arguments.length){var c=arguments[0],p=arguments[1],f=arguments[2],h=arguments[3];if(c===f&&p===h)return null;var d=c.getCoordinates()[p],g=c.getCoordinates()[p+1],y=f.getCoordinates()[h],m=f.getCoordinates()[h+1];if(this._li.computeIntersection(d,g,y,m),this._li.hasIntersection()&&(this._li.isProper()||this.hasInteriorIntersection(this._li,d,g)||this.hasInteriorIntersection(this._li,y,m)))throw new Q("found non-noded intersection at "+d+"-"+g+" and "+y+"-"+m)}},or.prototype.checkValid=function(){this.checkEndPtVertexIntersections(),this.checkInteriorIntersections(),this.checkCollapses()},or.prototype.checkCollapses=function(){if(0===arguments.length)for(var t=this._segStrings.iterator();t.hasNext();){var e=t.next();this.checkCollapses(e)}else if(1===arguments.length)for(var n=arguments[0].getCoordinates(),r=0;r<n.length-2;r++)this.checkCollapse(n[r],n[r+1],n[r+2])},or.prototype.hasInteriorIntersection=function(t,e,n){for(var r=0;r<t.getIntersectionNum();r++){var i=t.getIntersection(r);if(!i.equals(e)&&!i.equals(n))return!0}return!1},or.prototype.checkCollapse=function(t,e,n){if(t.equals(n))throw new Q("found non-noded collapse at "+or.fact.createLineString([t,e,n]))},or.prototype.interfaces_=function(){return[]},or.prototype.getClass=function(){return or},ar.fact.get=function(){return new me},Object.defineProperties(or,ar);var sr=function(){this._li=null,this._pt=null,this._originalPt=null,this._ptScaled=null,this._p0Scaled=null,this._p1Scaled=null,this._scaleFactor=null,this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,this._corner=new Array(4).fill(null),this._safeEnv=null;var t=arguments[0],e=arguments[1],n=arguments[2];if(this._originalPt=t,this._pt=t,this._scaleFactor=e,this._li=n,e<=0)throw new _("Scale factor must be non-zero");1!==e&&(this._pt=new N(this.scale(t.x),this.scale(t.y)),this._p0Scaled=new N,this._p1Scaled=new N),this.initCorners(this._pt)},ur={SAFE_ENV_EXPANSION_FACTOR:{configurable:!0}};sr.prototype.intersectsScaled=function(t,e){var n=Math.min(t.x,e.x),r=Math.max(t.x,e.x),i=Math.min(t.y,e.y),o=Math.max(t.y,e.y),a=this._maxx<n||this._minx>r||this._maxy<i||this._miny>o;if(a)return!1;var s=this.intersectsToleranceSquare(t,e);return et.isTrue(!(a&&s),"Found bad envelope test"),s},sr.prototype.initCorners=function(t){this._minx=t.x-.5,this._maxx=t.x+.5,this._miny=t.y-.5,this._maxy=t.y+.5,this._corner[0]=new N(this._maxx,this._maxy),this._corner[1]=new N(this._minx,this._maxy),this._corner[2]=new N(this._minx,this._miny),this._corner[3]=new N(this._maxx,this._miny)},sr.prototype.intersects=function(t,e){return 1===this._scaleFactor?this.intersectsScaled(t,e):(this.copyScaled(t,this._p0Scaled),this.copyScaled(e,this._p1Scaled),this.intersectsScaled(this._p0Scaled,this._p1Scaled))},sr.prototype.scale=function(t){return Math.round(t*this._scaleFactor)},sr.prototype.getCoordinate=function(){return this._originalPt},sr.prototype.copyScaled=function(t,e){e.x=this.scale(t.x),e.y=this.scale(t.y)},sr.prototype.getSafeEnvelope=function(){if(null===this._safeEnv){var t=sr.SAFE_ENV_EXPANSION_FACTOR/this._scaleFactor;this._safeEnv=new X(this._originalPt.x-t,this._originalPt.x+t,this._originalPt.y-t,this._originalPt.y+t)}return this._safeEnv},sr.prototype.intersectsPixelClosure=function(t,e){return this._li.computeIntersection(t,e,this._corner[0],this._corner[1]),!!(this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[1],this._corner[2]),this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[2],this._corner[3]),this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[3],this._corner[0]),this._li.hasIntersection()))))},sr.prototype.intersectsToleranceSquare=function(t,e){var n=!1,r=!1;return this._li.computeIntersection(t,e,this._corner[0],this._corner[1]),!!(this._li.isProper()||(this._li.computeIntersection(t,e,this._corner[1],this._corner[2]),this._li.isProper()||(this._li.hasIntersection()&&(n=!0),this._li.computeIntersection(t,e,this._corner[2],this._corner[3]),this._li.isProper()||(this._li.hasIntersection()&&(r=!0),this._li.computeIntersection(t,e,this._corner[3],this._corner[0]),this._li.isProper()||n&&r||t.equals(this._pt)||e.equals(this._pt)))))},sr.prototype.addSnappedNode=function(t,e){var n=t.getCoordinate(e),r=t.getCoordinate(e+1);return!!this.intersects(n,r)&&(t.addIntersection(this.getCoordinate(),e),!0)},sr.prototype.interfaces_=function(){return[]},sr.prototype.getClass=function(){return sr},ur.SAFE_ENV_EXPANSION_FACTOR.get=function(){return.75},Object.defineProperties(sr,ur);var lr=function(){this.tempEnv1=new X,this.selectedSegment=new gn};lr.prototype.select=function(){if(1===arguments.length);else if(2===arguments.length){var t=arguments[1];arguments[0].getLineSegment(t,this.selectedSegment),this.select(this.selectedSegment)}},lr.prototype.interfaces_=function(){return[]},lr.prototype.getClass=function(){return lr};var cr=function(){this._index=null;var t=arguments[0];this._index=t},pr={HotPixelSnapAction:{configurable:!0}};cr.prototype.snap=function(){if(1===arguments.length){var t=arguments[0];return this.snap(t,null,-1)}if(3===arguments.length){var e=arguments[0],n=arguments[1],r=arguments[2],i=e.getSafeEnvelope(),o=new fr(e,n,r);return this._index.query(i,{interfaces_:function(){return[$e]},visitItem:function(t){t.select(i,o)}}),o.isNodeAdded()}},cr.prototype.interfaces_=function(){return[]},cr.prototype.getClass=function(){return cr},pr.HotPixelSnapAction.get=function(){return fr},Object.defineProperties(cr,pr);var fr=function(t){function e(){t.call(this),this._hotPixel=null,this._parentEdge=null,this._hotPixelVertexIndex=null,this._isNodeAdded=!1;var e=arguments[0],n=arguments[1],r=arguments[2];this._hotPixel=e,this._parentEdge=n,this._hotPixelVertexIndex=r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.isNodeAdded=function(){return this._isNodeAdded},e.prototype.select=function(){if(2!==arguments.length)return t.prototype.select.apply(this,arguments);var e=arguments[1],n=arguments[0].getContext();if(null!==this._parentEdge&&n===this._parentEdge&&e===this._hotPixelVertexIndex)return null;this._isNodeAdded=this._hotPixel.addSnappedNode(n,e)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(lr),hr=function(){this._li=null,this._interiorIntersections=null;var t=arguments[0];this._li=t,this._interiorIntersections=new Et};hr.prototype.processIntersections=function(t,e,n,r){if(t===n&&e===r)return null;var i=t.getCoordinates()[e],o=t.getCoordinates()[e+1],a=n.getCoordinates()[r],s=n.getCoordinates()[r+1];if(this._li.computeIntersection(i,o,a,s),this._li.hasIntersection()&&this._li.isInteriorIntersection()){for(var u=0;u<this._li.getIntersectionNum();u++)this._interiorIntersections.add(this._li.getIntersection(u));t.addIntersections(this._li,e,0),n.addIntersections(this._li,r,1)}},hr.prototype.isDone=function(){return!1},hr.prototype.getInteriorIntersections=function(){return this._interiorIntersections},hr.prototype.interfaces_=function(){return[Wn]},hr.prototype.getClass=function(){return hr};var dr=function(){this._pm=null,this._li=null,this._scaleFactor=null,this._noder=null,this._pointSnapper=null,this._nodedSegStrings=null;var t=arguments[0];this._pm=t,this._li=new it,this._li.setPrecisionModel(t),this._scaleFactor=t.getScale()};dr.prototype.checkCorrectness=function(t){var e=dn.getNodedSubstrings(t),n=new or(e);try{n.checkValid()}catch(t){if(!(t instanceof q))throw t;t.printStackTrace()}},dr.prototype.getNodedSubstrings=function(){return dn.getNodedSubstrings(this._nodedSegStrings)},dr.prototype.snapRound=function(t,e){var n=this.findInteriorIntersections(t,e);this.computeIntersectionSnaps(n),this.computeVertexSnaps(t)},dr.prototype.findInteriorIntersections=function(t,e){var n=new hr(e);return this._noder.setSegmentIntersector(n),this._noder.computeNodes(t),n.getInteriorIntersections()},dr.prototype.computeVertexSnaps=function(){if(O(arguments[0],bt))for(var t=arguments[0].iterator();t.hasNext();){var e=t.next();this.computeVertexSnaps(e)}else if(arguments[0]instanceof dn)for(var n=arguments[0],r=n.getCoordinates(),i=0;i<r.length;i++){var o=new sr(r[i],this._scaleFactor,this._li);this._pointSnapper.snap(o,n,i)&&n.addIntersection(r[i],i)}},dr.prototype.computeNodes=function(t){this._nodedSegStrings=t,this._noder=new wn,this._pointSnapper=new cr(this._noder.getIndex()),this.snapRound(t,this._li)},dr.prototype.computeIntersectionSnaps=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next(),r=new sr(n,this._scaleFactor,this._li);this._pointSnapper.snap(r)}},dr.prototype.interfaces_=function(){return[bn]},dr.prototype.getClass=function(){return dr};var gr=function(){if(this._argGeom=null,this._distance=null,this._bufParams=new Nn,this._resultGeometry=null,this._saveException=null,1===arguments.length){var t=arguments[0];this._argGeom=t}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this._argGeom=e,this._bufParams=n}},yr={CAP_ROUND:{configurable:!0},CAP_BUTT:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},MAX_PRECISION_DIGITS:{configurable:!0}};gr.prototype.bufferFixedPrecision=function(t){var e=new ir(new dr(new he(1)),t.getScale()),n=new rr(this._bufParams);n.setWorkingPrecisionModel(t),n.setNoder(e),this._resultGeometry=n.buffer(this._argGeom,this._distance)},gr.prototype.bufferReducedPrecision=function(){var t=this;if(0===arguments.length){for(var e=gr.MAX_PRECISION_DIGITS;e>=0;e--){try{t.bufferReducedPrecision(e)}catch(e){if(!(e instanceof Le))throw e;t._saveException=e}if(null!==t._resultGeometry)return null}throw this._saveException}if(1===arguments.length){var n=arguments[0],r=gr.precisionScaleFactor(this._argGeom,this._distance,n),i=new he(r);this.bufferFixedPrecision(i)}},gr.prototype.computeGeometry=function(){if(this.bufferOriginalPrecision(),null!==this._resultGeometry)return null;var t=this._argGeom.getFactory().getPrecisionModel();t.getType()===he.FIXED?this.bufferFixedPrecision(t):this.bufferReducedPrecision()},gr.prototype.setQuadrantSegments=function(t){this._bufParams.setQuadrantSegments(t)},gr.prototype.bufferOriginalPrecision=function(){try{var t=new rr(this._bufParams);this._resultGeometry=t.buffer(this._argGeom,this._distance)}catch(t){if(!(t instanceof Q))throw t;this._saveException=t}},gr.prototype.getResultGeometry=function(t){return this._distance=t,this.computeGeometry(),this._resultGeometry},gr.prototype.setEndCapStyle=function(t){this._bufParams.setEndCapStyle(t)},gr.prototype.interfaces_=function(){return[]},gr.prototype.getClass=function(){return gr},gr.bufferOp=function(){if(2===arguments.length){var t=arguments[1];return new gr(arguments[0]).getResultGeometry(t)}if(3===arguments.length){if(Number.isInteger(arguments[2])&&arguments[0]instanceof ct&&"number"==typeof arguments[1]){var e=arguments[1],n=arguments[2],r=new gr(arguments[0]);return r.setQuadrantSegments(n),r.getResultGeometry(e)}if(arguments[2]instanceof Nn&&arguments[0]instanceof ct&&"number"==typeof arguments[1]){var i=arguments[1];return new gr(arguments[0],arguments[2]).getResultGeometry(i)}}else if(4===arguments.length){var o=arguments[1],a=arguments[2],s=arguments[3],u=new gr(arguments[0]);return u.setQuadrantSegments(a),u.setEndCapStyle(s),u.getResultGeometry(o)}},gr.precisionScaleFactor=function(t,e,n){var r=t.getEnvelopeInternal(),i=P.max(Math.abs(r.getMaxX()),Math.abs(r.getMaxY()),Math.abs(r.getMinX()),Math.abs(r.getMinY()))+2*(e>0?e:0),o=n-Math.trunc(Math.log(i)/Math.log(10)+1);return Math.pow(10,o)},yr.CAP_ROUND.get=function(){return Nn.CAP_ROUND},yr.CAP_BUTT.get=function(){return Nn.CAP_FLAT},yr.CAP_FLAT.get=function(){return Nn.CAP_FLAT},yr.CAP_SQUARE.get=function(){return Nn.CAP_SQUARE},yr.MAX_PRECISION_DIGITS.get=function(){return 12},Object.defineProperties(gr,yr);var mr=function(){this._pt=[new N,new N],this._distance=v.NaN,this._isNull=!0};mr.prototype.getCoordinates=function(){return this._pt},mr.prototype.getCoordinate=function(t){return this._pt[t]},mr.prototype.setMinimum=function(){if(1===arguments.length){var t=arguments[0];this.setMinimum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var r=e.distance(n);r<this._distance&&this.initialize(e,n,r)}},mr.prototype.initialize=function(){if(0===arguments.length)this._isNull=!0;else if(2===arguments.length){var t=arguments[0],e=arguments[1];this._pt[0].setCoordinate(t),this._pt[1].setCoordinate(e),this._distance=t.distance(e),this._isNull=!1}else if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];this._pt[0].setCoordinate(n),this._pt[1].setCoordinate(r),this._distance=i,this._isNull=!1}},mr.prototype.getDistance=function(){return this._distance},mr.prototype.setMaximum=function(){if(1===arguments.length){var t=arguments[0];this.setMaximum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var r=e.distance(n);r>this._distance&&this.initialize(e,n,r)}},mr.prototype.interfaces_=function(){return[]},mr.prototype.getClass=function(){return mr};var _r=function(){};_r.prototype.interfaces_=function(){return[]},_r.prototype.getClass=function(){return _r},_r.computeDistance=function(){if(arguments[2]instanceof mr&&arguments[0]instanceof $t&&arguments[1]instanceof N)for(var t=arguments[1],e=arguments[2],n=arguments[0].getCoordinates(),r=new gn,i=0;i<n.length-1;i++){r.setCoordinates(n[i],n[i+1]);var o=r.closestPoint(t);e.setMinimum(o,t)}else if(arguments[2]instanceof mr&&arguments[0]instanceof Qt&&arguments[1]instanceof N){var a=arguments[0],s=arguments[1],u=arguments[2];_r.computeDistance(a.getExteriorRing(),s,u);for(var l=0;l<a.getNumInteriorRing();l++)_r.computeDistance(a.getInteriorRingN(l),s,u)}else if(arguments[2]instanceof mr&&arguments[0]instanceof ct&&arguments[1]instanceof N){var c=arguments[0],p=arguments[1],f=arguments[2];if(c instanceof $t)_r.computeDistance(c,p,f);else if(c instanceof Qt)_r.computeDistance(c,p,f);else if(c instanceof qt)for(var h=c,d=0;d<h.getNumGeometries();d++){var g=h.getGeometryN(d);_r.computeDistance(g,p,f)}else f.setMinimum(c.getCoordinate(),p)}else if(arguments[2]instanceof mr&&arguments[0]instanceof gn&&arguments[1]instanceof N){var y=arguments[1],m=arguments[2],_=arguments[0].closestPoint(y);m.setMinimum(_,y)}};var vr=function(t){this._maxPtDist=new mr,this._inputGeom=t||null},br={MaxPointDistanceFilter:{configurable:!0},MaxMidpointDistanceFilter:{configurable:!0}};vr.prototype.computeMaxMidpointDistance=function(t){var e=new wr(this._inputGeom);t.apply(e),this._maxPtDist.setMaximum(e.getMaxPointDistance())},vr.prototype.computeMaxVertexDistance=function(t){var e=new xr(this._inputGeom);t.apply(e),this._maxPtDist.setMaximum(e.getMaxPointDistance())},vr.prototype.findDistance=function(t){return this.computeMaxVertexDistance(t),this.computeMaxMidpointDistance(t),this._maxPtDist.getDistance()},vr.prototype.getDistancePoints=function(){return this._maxPtDist},vr.prototype.interfaces_=function(){return[]},vr.prototype.getClass=function(){return vr},br.MaxPointDistanceFilter.get=function(){return xr},br.MaxMidpointDistanceFilter.get=function(){return wr},Object.defineProperties(vr,br);var xr=function(t){this._maxPtDist=new mr,this._minPtDist=new mr,this._geom=t||null};xr.prototype.filter=function(t){this._minPtDist.initialize(),_r.computeDistance(this._geom,t,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},xr.prototype.getMaxPointDistance=function(){return this._maxPtDist},xr.prototype.interfaces_=function(){return[ht]},xr.prototype.getClass=function(){return xr};var wr=function(t){this._maxPtDist=new mr,this._minPtDist=new mr,this._geom=t||null};wr.prototype.filter=function(t,e){if(0===e)return null;var n=t.getCoordinate(e-1),r=t.getCoordinate(e),i=new N((n.x+r.x)/2,(n.y+r.y)/2);this._minPtDist.initialize(),_r.computeDistance(this._geom,i,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},wr.prototype.isDone=function(){return!1},wr.prototype.isGeometryChanged=function(){return!1},wr.prototype.getMaxPointDistance=function(){return this._maxPtDist},wr.prototype.interfaces_=function(){return[Bt]},wr.prototype.getClass=function(){return wr};var Er=function(t){this._comps=t||null};Er.prototype.filter=function(t){t instanceof Qt&&this._comps.add(t)},Er.prototype.interfaces_=function(){return[Gt]},Er.prototype.getClass=function(){return Er},Er.getPolygons=function(){if(1===arguments.length){var t=arguments[0];return Er.getPolygons(t,new Et)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e instanceof Qt?n.add(e):e instanceof qt&&e.apply(new Er(n)),n}};var Nr=function(){if(this._lines=null,this._isForcedToLineString=!1,1===arguments.length){var t=arguments[0];this._lines=t}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this._lines=e,this._isForcedToLineString=n}};Nr.prototype.filter=function(t){if(this._isForcedToLineString&&t instanceof ee){var e=t.getFactory().createLineString(t.getCoordinateSequence());return this._lines.add(e),null}t instanceof $t&&this._lines.add(t)},Nr.prototype.setForceToLineString=function(t){this._isForcedToLineString=t},Nr.prototype.interfaces_=function(){return[lt]},Nr.prototype.getClass=function(){return Nr},Nr.getGeometry=function(){if(1===arguments.length){var t=arguments[0];return t.getFactory().buildGeometry(Nr.getLines(t))}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e.getFactory().buildGeometry(Nr.getLines(e,n))}},Nr.getLines=function(){if(1===arguments.length){var t=arguments[0];return Nr.getLines(t,!1)}if(2===arguments.length){if(O(arguments[0],bt)&&O(arguments[1],bt)){for(var e=arguments[1],n=arguments[0].iterator();n.hasNext();){var r=n.next();Nr.getLines(r,e)}return e}if(arguments[0]instanceof ct&&"boolean"==typeof arguments[1]){var i=arguments[0],o=arguments[1],a=new Et;return i.apply(new Nr(a,o)),a}if(arguments[0]instanceof ct&&O(arguments[1],bt)){var s=arguments[0],u=arguments[1];return s instanceof $t?u.add(s):s.apply(new Nr(u)),u}}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&O(arguments[0],bt)&&O(arguments[1],bt)){for(var l=arguments[1],c=arguments[2],p=arguments[0].iterator();p.hasNext();){var f=p.next();Nr.getLines(f,l,c)}return l}if("boolean"==typeof arguments[2]&&arguments[0]instanceof ct&&O(arguments[1],bt)){var h=arguments[1],d=arguments[2];return arguments[0].apply(new Nr(h,d)),h}}};var Ir=function(){if(this._boundaryRule=dt.OGC_SFS_BOUNDARY_RULE,this._isIn=null,this._numBoundaries=null,0===arguments.length);else if(1===arguments.length){var t=arguments[0];if(null===t)throw new _("Rule must be non-null");this._boundaryRule=t}};Ir.prototype.locateInternal=function(){if(arguments[0]instanceof N&&arguments[1]instanceof Qt){var t=arguments[0],e=arguments[1];if(e.isEmpty())return L.EXTERIOR;var n=e.getExteriorRing(),r=this.locateInPolygonRing(t,n);if(r===L.EXTERIOR)return L.EXTERIOR;if(r===L.BOUNDARY)return L.BOUNDARY;for(var i=0;i<e.getNumInteriorRing();i++){var o=e.getInteriorRingN(i),a=this.locateInPolygonRing(t,o);if(a===L.INTERIOR)return L.EXTERIOR;if(a===L.BOUNDARY)return L.BOUNDARY}return L.INTERIOR}if(arguments[0]instanceof N&&arguments[1]instanceof $t){var s=arguments[0],u=arguments[1];if(!u.getEnvelopeInternal().intersects(s))return L.EXTERIOR;var l=u.getCoordinates();return u.isClosed()||!s.equals(l[0])&&!s.equals(l[l.length-1])?st.isOnLine(s,l)?L.INTERIOR:L.EXTERIOR:L.BOUNDARY}if(arguments[0]instanceof N&&arguments[1]instanceof Jt){var c=arguments[0];return arguments[1].getCoordinate().equals2D(c)?L.INTERIOR:L.EXTERIOR}},Ir.prototype.locateInPolygonRing=function(t,e){return e.getEnvelopeInternal().intersects(t)?st.locatePointInRing(t,e.getCoordinates()):L.EXTERIOR},Ir.prototype.intersects=function(t,e){return this.locate(t,e)!==L.EXTERIOR},Ir.prototype.updateLocationInfo=function(t){t===L.INTERIOR&&(this._isIn=!0),t===L.BOUNDARY&&this._numBoundaries++},Ir.prototype.computeLocation=function(t,e){if(e instanceof Jt&&this.updateLocationInfo(this.locateInternal(t,e)),e instanceof $t)this.updateLocationInfo(this.locateInternal(t,e));else if(e instanceof Qt)this.updateLocationInfo(this.locateInternal(t,e));else if(e instanceof Ut)for(var n=e,r=0;r<n.getNumGeometries();r++){var i=n.getGeometryN(r);this.updateLocationInfo(this.locateInternal(t,i))}else if(e instanceof ne)for(var o=e,a=0;a<o.getNumGeometries();a++){var s=o.getGeometryN(a);this.updateLocationInfo(this.locateInternal(t,s))}else if(e instanceof qt)for(var u=new Bn(e);u.hasNext();){var l=u.next();l!==e&&this.computeLocation(t,l)}},Ir.prototype.locate=function(t,e){return e.isEmpty()?L.EXTERIOR:e instanceof $t||e instanceof Qt?this.locateInternal(t,e):(this._isIn=!1,this._numBoundaries=0,this.computeLocation(t,e),this._boundaryRule.isInBoundary(this._numBoundaries)?L.BOUNDARY:this._numBoundaries>0||this._isIn?L.INTERIOR:L.EXTERIOR)},Ir.prototype.interfaces_=function(){return[]},Ir.prototype.getClass=function(){return Ir};var Cr=function t(){if(this._component=null,this._segIndex=null,this._pt=null,2===arguments.length)t.call(this,arguments[0],t.INSIDE_AREA,arguments[1]);else if(3===arguments.length){var e=arguments[0],n=arguments[1],r=arguments[2];this._component=e,this._segIndex=n,this._pt=r}},Sr={INSIDE_AREA:{configurable:!0}};Cr.prototype.isInsideArea=function(){return this._segIndex===Cr.INSIDE_AREA},Cr.prototype.getCoordinate=function(){return this._pt},Cr.prototype.getGeometryComponent=function(){return this._component},Cr.prototype.getSegmentIndex=function(){return this._segIndex},Cr.prototype.interfaces_=function(){return[]},Cr.prototype.getClass=function(){return Cr},Sr.INSIDE_AREA.get=function(){return-1},Object.defineProperties(Cr,Sr);var Lr=function(t){this._pts=t||null};Lr.prototype.filter=function(t){t instanceof Jt&&this._pts.add(t)},Lr.prototype.interfaces_=function(){return[Gt]},Lr.prototype.getClass=function(){return Lr},Lr.getPoints=function(){if(1===arguments.length){var t=arguments[0];return t instanceof Jt?Qe.singletonList(t):Lr.getPoints(t,new Et)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e instanceof Jt?n.add(e):e instanceof qt&&e.apply(new Lr(n)),n}};var Mr=function(){this._locations=null;var t=arguments[0];this._locations=t};Mr.prototype.filter=function(t){(t instanceof Jt||t instanceof $t||t instanceof Qt)&&this._locations.add(new Cr(t,0,t.getCoordinate()))},Mr.prototype.interfaces_=function(){return[Gt]},Mr.prototype.getClass=function(){return Mr},Mr.getLocations=function(t){var e=new Et;return t.apply(new Mr(e)),e};var Or=function(){if(this._geom=null,this._terminateDistance=0,this._ptLocator=new Ir,this._minDistanceLocation=null,this._minDistance=v.MAX_VALUE,2===arguments.length){var t=arguments[0],e=arguments[1];this._geom=[t,e],this._terminateDistance=0}else if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];this._geom=new Array(2).fill(null),this._geom[0]=n,this._geom[1]=r,this._terminateDistance=i}};Or.prototype.computeContainmentDistance=function(){if(0===arguments.length){var t=new Array(2).fill(null);if(this.computeContainmentDistance(0,t),this._minDistance<=this._terminateDistance)return null;this.computeContainmentDistance(1,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1],r=1-e,i=Er.getPolygons(this._geom[e]);if(i.size()>0){var o=Mr.getLocations(this._geom[r]);if(this.computeContainmentDistance(o,i,n),this._minDistance<=this._terminateDistance)return this._minDistanceLocation[r]=n[0],this._minDistanceLocation[e]=n[1],null}}else if(3===arguments.length)if(arguments[2]instanceof Array&&O(arguments[0],wt)&&O(arguments[1],wt)){for(var a=arguments[0],s=arguments[1],u=arguments[2],l=0;l<a.size();l++)for(var c=a.get(l),p=0;p<s.size();p++)if(this.computeContainmentDistance(c,s.get(p),u),this._minDistance<=this._terminateDistance)return null}else if(arguments[2]instanceof Array&&arguments[0]instanceof Cr&&arguments[1]instanceof Qt){var f=arguments[0],h=arguments[1],d=arguments[2],g=f.getCoordinate();if(L.EXTERIOR!==this._ptLocator.locate(g,h))return this._minDistance=0,d[0]=f,d[1]=new Cr(h,g),null}},Or.prototype.computeMinDistanceLinesPoints=function(t,e,n){for(var r=0;r<t.size();r++)for(var i=t.get(r),o=0;o<e.size();o++){var a=e.get(o);if(this.computeMinDistance(i,a,n),this._minDistance<=this._terminateDistance)return null}},Or.prototype.computeFacetDistance=function(){var t=new Array(2).fill(null),e=Nr.getLines(this._geom[0]),n=Nr.getLines(this._geom[1]),r=Lr.getPoints(this._geom[0]),i=Lr.getPoints(this._geom[1]);return this.computeMinDistanceLines(e,n,t),this.updateMinDistance(t,!1),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistanceLinesPoints(e,i,t),this.updateMinDistance(t,!1),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistanceLinesPoints(n,r,t),this.updateMinDistance(t,!0),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistancePoints(r,i,t),void this.updateMinDistance(t,!1))))},Or.prototype.nearestLocations=function(){return this.computeMinDistance(),this._minDistanceLocation},Or.prototype.updateMinDistance=function(t,e){if(null===t[0])return null;e?(this._minDistanceLocation[0]=t[1],this._minDistanceLocation[1]=t[0]):(this._minDistanceLocation[0]=t[0],this._minDistanceLocation[1]=t[1])},Or.prototype.nearestPoints=function(){return this.computeMinDistance(),[this._minDistanceLocation[0].getCoordinate(),this._minDistanceLocation[1].getCoordinate()]},Or.prototype.computeMinDistance=function(){if(0===arguments.length){if(null!==this._minDistanceLocation)return null;if(this._minDistanceLocation=new Array(2).fill(null),this.computeContainmentDistance(),this._minDistance<=this._terminateDistance)return null;this.computeFacetDistance()}else if(3===arguments.length)if(arguments[2]instanceof Array&&arguments[0]instanceof $t&&arguments[1]instanceof Jt){var t=arguments[0],e=arguments[1],n=arguments[2];if(t.getEnvelopeInternal().distance(e.getEnvelopeInternal())>this._minDistance)return null;for(var r=t.getCoordinates(),i=e.getCoordinate(),o=0;o<r.length-1;o++){var a=st.distancePointLine(i,r[o],r[o+1]);if(a<this._minDistance){this._minDistance=a;var s=new gn(r[o],r[o+1]).closestPoint(i);n[0]=new Cr(t,o,s),n[1]=new Cr(e,0,i)}if(this._minDistance<=this._terminateDistance)return null}}else if(arguments[2]instanceof Array&&arguments[0]instanceof $t&&arguments[1]instanceof $t){var u=arguments[0],l=arguments[1],c=arguments[2];if(u.getEnvelopeInternal().distance(l.getEnvelopeInternal())>this._minDistance)return null;for(var p=u.getCoordinates(),f=l.getCoordinates(),h=0;h<p.length-1;h++)for(var d=0;d<f.length-1;d++){var g=st.distanceLineLine(p[h],p[h+1],f[d],f[d+1]);if(g<this._minDistance){this._minDistance=g;var y=new gn(p[h],p[h+1]),m=new gn(f[d],f[d+1]),_=y.closestPoints(m);c[0]=new Cr(u,h,_[0]),c[1]=new Cr(l,d,_[1])}if(this._minDistance<=this._terminateDistance)return null}}},Or.prototype.computeMinDistancePoints=function(t,e,n){for(var r=0;r<t.size();r++)for(var i=t.get(r),o=0;o<e.size();o++){var a=e.get(o),s=i.getCoordinate().distance(a.getCoordinate());if(s<this._minDistance&&(this._minDistance=s,n[0]=new Cr(i,0,i.getCoordinate()),n[1]=new Cr(a,0,a.getCoordinate())),this._minDistance<=this._terminateDistance)return null}},Or.prototype.distance=function(){if(null===this._geom[0]||null===this._geom[1])throw new _("null geometries are not supported");return this._geom[0].isEmpty()||this._geom[1].isEmpty()?0:(this.computeMinDistance(),this._minDistance)},Or.prototype.computeMinDistanceLines=function(t,e,n){for(var r=0;r<t.size();r++)for(var i=t.get(r),o=0;o<e.size();o++){var a=e.get(o);if(this.computeMinDistance(i,a,n),this._minDistance<=this._terminateDistance)return null}},Or.prototype.interfaces_=function(){return[]},Or.prototype.getClass=function(){return Or},Or.distance=function(t,e){return new Or(t,e).distance()},Or.isWithinDistance=function(t,e,n){return new Or(t,e,n).distance()<=n},Or.nearestPoints=function(t,e){return new Or(t,e).nearestPoints()};var Pr=function(){this._pt=[new N,new N],this._distance=v.NaN,this._isNull=!0};Pr.prototype.getCoordinates=function(){return this._pt},Pr.prototype.getCoordinate=function(t){return this._pt[t]},Pr.prototype.setMinimum=function(){if(1===arguments.length){var t=arguments[0];this.setMinimum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var r=e.distance(n);r<this._distance&&this.initialize(e,n,r)}},Pr.prototype.initialize=function(){if(0===arguments.length)this._isNull=!0;else if(2===arguments.length){var t=arguments[0],e=arguments[1];this._pt[0].setCoordinate(t),this._pt[1].setCoordinate(e),this._distance=t.distance(e),this._isNull=!1}else if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];this._pt[0].setCoordinate(n),this._pt[1].setCoordinate(r),this._distance=i,this._isNull=!1}},Pr.prototype.toString=function(){return K.toLineString(this._pt[0],this._pt[1])},Pr.prototype.getDistance=function(){return this._distance},Pr.prototype.setMaximum=function(){if(1===arguments.length){var t=arguments[0];this.setMaximum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var r=e.distance(n);r>this._distance&&this.initialize(e,n,r)}},Pr.prototype.interfaces_=function(){return[]},Pr.prototype.getClass=function(){return Pr};var Rr=function(){};Rr.prototype.interfaces_=function(){return[]},Rr.prototype.getClass=function(){return Rr},Rr.computeDistance=function(){if(arguments[2]instanceof Pr&&arguments[0]instanceof $t&&arguments[1]instanceof N)for(var t=arguments[0],e=arguments[1],n=arguments[2],r=new gn,i=t.getCoordinates(),o=0;o<i.length-1;o++){r.setCoordinates(i[o],i[o+1]);var a=r.closestPoint(e);n.setMinimum(a,e)}else if(arguments[2]instanceof Pr&&arguments[0]instanceof Qt&&arguments[1]instanceof N){var s=arguments[0],u=arguments[1],l=arguments[2];Rr.computeDistance(s.getExteriorRing(),u,l);for(var c=0;c<s.getNumInteriorRing();c++)Rr.computeDistance(s.getInteriorRingN(c),u,l)}else if(arguments[2]instanceof Pr&&arguments[0]instanceof ct&&arguments[1]instanceof N){var p=arguments[0],f=arguments[1],h=arguments[2];if(p instanceof $t)Rr.computeDistance(p,f,h);else if(p instanceof Qt)Rr.computeDistance(p,f,h);else if(p instanceof qt)for(var d=p,g=0;g<d.getNumGeometries();g++){var y=d.getGeometryN(g);Rr.computeDistance(y,f,h)}else h.setMinimum(p.getCoordinate(),f)}else if(arguments[2]instanceof Pr&&arguments[0]instanceof gn&&arguments[1]instanceof N){var m=arguments[1],_=arguments[2],v=arguments[0].closestPoint(m);_.setMinimum(v,m)}};var Tr=function(){this._g0=null,this._g1=null,this._ptDist=new Pr,this._densifyFrac=0;var t=arguments[0],e=arguments[1];this._g0=t,this._g1=e},Ar={MaxPointDistanceFilter:{configurable:!0},MaxDensifiedByFractionDistanceFilter:{configurable:!0}};Tr.prototype.getCoordinates=function(){return this._ptDist.getCoordinates()},Tr.prototype.setDensifyFraction=function(t){if(t>1||t<=0)throw new _("Fraction is not in range (0.0 - 1.0]");this._densifyFrac=t},Tr.prototype.compute=function(t,e){this.computeOrientedDistance(t,e,this._ptDist),this.computeOrientedDistance(e,t,this._ptDist)},Tr.prototype.distance=function(){return this.compute(this._g0,this._g1),this._ptDist.getDistance()},Tr.prototype.computeOrientedDistance=function(t,e,n){var r=new Dr(e);if(t.apply(r),n.setMaximum(r.getMaxPointDistance()),this._densifyFrac>0){var i=new kr(e,this._densifyFrac);t.apply(i),n.setMaximum(i.getMaxPointDistance())}},Tr.prototype.orientedDistance=function(){return this.computeOrientedDistance(this._g0,this._g1,this._ptDist),this._ptDist.getDistance()},Tr.prototype.interfaces_=function(){return[]},Tr.prototype.getClass=function(){return Tr},Tr.distance=function(){if(2===arguments.length)return new Tr(arguments[0],arguments[1]).distance();if(3===arguments.length){var t=arguments[2],e=new Tr(arguments[0],arguments[1]);return e.setDensifyFraction(t),e.distance()}},Ar.MaxPointDistanceFilter.get=function(){return Dr},Ar.MaxDensifiedByFractionDistanceFilter.get=function(){return kr},Object.defineProperties(Tr,Ar);var Dr=function(){this._maxPtDist=new Pr,this._minPtDist=new Pr,this._euclideanDist=new Rr,this._geom=null;var t=arguments[0];this._geom=t};Dr.prototype.filter=function(t){this._minPtDist.initialize(),Rr.computeDistance(this._geom,t,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},Dr.prototype.getMaxPointDistance=function(){return this._maxPtDist},Dr.prototype.interfaces_=function(){return[ht]},Dr.prototype.getClass=function(){return Dr};var kr=function(){this._maxPtDist=new Pr,this._minPtDist=new Pr,this._geom=null,this._numSubSegs=0;var t=arguments[0],e=arguments[1];this._geom=t,this._numSubSegs=Math.trunc(Math.round(1/e))};kr.prototype.filter=function(t,e){if(0===e)return null;for(var n=t.getCoordinate(e-1),r=t.getCoordinate(e),i=(r.x-n.x)/this._numSubSegs,o=(r.y-n.y)/this._numSubSegs,a=0;a<this._numSubSegs;a++){var s=n.x+a*i,u=n.y+a*o,l=new N(s,u);this._minPtDist.initialize(),Rr.computeDistance(this._geom,l,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)}},kr.prototype.isDone=function(){return!1},kr.prototype.isGeometryChanged=function(){return!1},kr.prototype.getMaxPointDistance=function(){return this._maxPtDist},kr.prototype.interfaces_=function(){return[Bt]},kr.prototype.getClass=function(){return kr};var Fr=function(t,e,n){this._minValidDistance=null,this._maxValidDistance=null,this._minDistanceFound=null,this._maxDistanceFound=null,this._isValid=!0,this._errMsg=null,this._errorLocation=null,this._errorIndicator=null,this._input=t||null,this._bufDistance=e||null,this._result=n||null},jr={VERBOSE:{configurable:!0},MAX_DISTANCE_DIFF_FRAC:{configurable:!0}};Fr.prototype.checkMaximumDistance=function(t,e,n){var r=new Tr(e,t);if(r.setDensifyFraction(.25),this._maxDistanceFound=r.orientedDistance(),this._maxDistanceFound>n){this._isValid=!1;var i=r.getCoordinates();this._errorLocation=i[1],this._errorIndicator=t.getFactory().createLineString(i),this._errMsg="Distance between buffer curve and input is too large ("+this._maxDistanceFound+" at "+K.toLineString(i[0],i[1])+")"}},Fr.prototype.isValid=function(){var t=Math.abs(this._bufDistance),e=Fr.MAX_DISTANCE_DIFF_FRAC*t;return this._minValidDistance=t-e,this._maxValidDistance=t+e,!(!this._input.isEmpty()&&!this._result.isEmpty())||(this._bufDistance>0?this.checkPositiveValid():this.checkNegativeValid(),Fr.VERBOSE&&V.out.println("Min Dist= "+this._minDistanceFound+"  err= "+(1-this._minDistanceFound/this._bufDistance)+"  Max Dist= "+this._maxDistanceFound+"  err= "+(this._maxDistanceFound/this._bufDistance-1)),this._isValid)},Fr.prototype.checkNegativeValid=function(){if(!(this._input instanceof Qt||this._input instanceof ne||this._input instanceof qt))return null;var t=this.getPolygonLines(this._input);if(this.checkMinimumDistance(t,this._result,this._minValidDistance),!this._isValid)return null;this.checkMaximumDistance(t,this._result,this._maxValidDistance)},Fr.prototype.getErrorIndicator=function(){return this._errorIndicator},Fr.prototype.checkMinimumDistance=function(t,e,n){var r=new Or(t,e,n);if(this._minDistanceFound=r.distance(),this._minDistanceFound<n){this._isValid=!1;var i=r.nearestPoints();this._errorLocation=r.nearestPoints()[1],this._errorIndicator=t.getFactory().createLineString(i),this._errMsg="Distance between buffer curve and input is too small ("+this._minDistanceFound+" at "+K.toLineString(i[0],i[1])+" )"}},Fr.prototype.checkPositiveValid=function(){var t=this._result.getBoundary();if(this.checkMinimumDistance(this._input,t,this._minValidDistance),!this._isValid)return null;this.checkMaximumDistance(this._input,t,this._maxValidDistance)},Fr.prototype.getErrorLocation=function(){return this._errorLocation},Fr.prototype.getPolygonLines=function(t){for(var e=new Et,n=new Nr(e),r=Er.getPolygons(t).iterator();r.hasNext();)r.next().apply(n);return t.getFactory().buildGeometry(e)},Fr.prototype.getErrorMessage=function(){return this._errMsg},Fr.prototype.interfaces_=function(){return[]},Fr.prototype.getClass=function(){return Fr},jr.VERBOSE.get=function(){return!1},jr.MAX_DISTANCE_DIFF_FRAC.get=function(){return.012},Object.defineProperties(Fr,jr);var zr=function(t,e,n){this._isValid=!0,this._errorMsg=null,this._errorLocation=null,this._errorIndicator=null,this._input=t||null,this._distance=e||null,this._result=n||null},Gr={VERBOSE:{configurable:!0},MAX_ENV_DIFF_FRAC:{configurable:!0}};zr.prototype.isValid=function(){return this.checkPolygonal(),this._isValid?(this.checkExpectedEmpty(),this._isValid?(this.checkEnvelope(),this._isValid?(this.checkArea(),this._isValid?(this.checkDistance(),this._isValid):this._isValid):this._isValid):this._isValid):this._isValid},zr.prototype.checkEnvelope=function(){if(this._distance<0)return null;var t=this._distance*zr.MAX_ENV_DIFF_FRAC;0===t&&(t=.001);var e=new X(this._input.getEnvelopeInternal());e.expandBy(this._distance);var n=new X(this._result.getEnvelopeInternal());n.expandBy(t),n.contains(e)||(this._isValid=!1,this._errorMsg="Buffer envelope is incorrect",this._errorIndicator=this._input.getFactory().toGeometry(n)),this.report("Envelope")},zr.prototype.checkDistance=function(){var t=new Fr(this._input,this._distance,this._result);t.isValid()||(this._isValid=!1,this._errorMsg=t.getErrorMessage(),this._errorLocation=t.getErrorLocation(),this._errorIndicator=t.getErrorIndicator()),this.report("Distance")},zr.prototype.checkArea=function(){var t=this._input.getArea(),e=this._result.getArea();this._distance>0&&t>e&&(this._isValid=!1,this._errorMsg="Area of positive buffer is smaller than input",this._errorIndicator=this._result),this._distance<0&&t<e&&(this._isValid=!1,this._errorMsg="Area of negative buffer is larger than input",this._errorIndicator=this._result),this.report("Area")},zr.prototype.checkPolygonal=function(){this._result instanceof Qt||this._result instanceof ne||(this._isValid=!1),this._errorMsg="Result is not polygonal",this._errorIndicator=this._result,this.report("Polygonal")},zr.prototype.getErrorIndicator=function(){return this._errorIndicator},zr.prototype.getErrorLocation=function(){return this._errorLocation},zr.prototype.checkExpectedEmpty=function(){return this._input.getDimension()>=2||this._distance>0?null:(this._result.isEmpty()||(this._isValid=!1,this._errorMsg="Result is non-empty",this._errorIndicator=this._result),void this.report("ExpectedEmpty"))},zr.prototype.report=function(t){if(!zr.VERBOSE)return null;V.out.println("Check "+t+": "+(this._isValid?"passed":"FAILED"))},zr.prototype.getErrorMessage=function(){return this._errorMsg},zr.prototype.interfaces_=function(){return[]},zr.prototype.getClass=function(){return zr},zr.isValidMsg=function(t,e,n){var r=new zr(t,e,n);return r.isValid()?null:r.getErrorMessage()},zr.isValid=function(t,e,n){return!!new zr(t,e,n).isValid()},Gr.VERBOSE.get=function(){return!1},Gr.MAX_ENV_DIFF_FRAC.get=function(){return.012},Object.defineProperties(zr,Gr);var Br=function(){this._pts=null,this._data=null;var t=arguments[0],e=arguments[1];this._pts=t,this._data=e};Br.prototype.getCoordinates=function(){return this._pts},Br.prototype.size=function(){return this._pts.length},Br.prototype.getCoordinate=function(t){return this._pts[t]},Br.prototype.isClosed=function(){return this._pts[0].equals(this._pts[this._pts.length-1])},Br.prototype.getSegmentOctant=function(t){return t===this._pts.length-1?-1:pn.octant(this.getCoordinate(t),this.getCoordinate(t+1))},Br.prototype.setData=function(t){this._data=t},Br.prototype.getData=function(){return this._data},Br.prototype.toString=function(){return K.toLineString(new ue(this._pts))},Br.prototype.interfaces_=function(){return[fn]},Br.prototype.getClass=function(){return Br};var qr=function(){this._findAllIntersections=!1,this._isCheckEndSegmentsOnly=!1,this._li=null,this._interiorIntersection=null,this._intSegments=null,this._intersections=new Et,this._intersectionCount=0,this._keepIntersections=!0;var t=arguments[0];this._li=t,this._interiorIntersection=null};qr.prototype.getInteriorIntersection=function(){return this._interiorIntersection},qr.prototype.setCheckEndSegmentsOnly=function(t){this._isCheckEndSegmentsOnly=t},qr.prototype.getIntersectionSegments=function(){return this._intSegments},qr.prototype.count=function(){return this._intersectionCount},qr.prototype.getIntersections=function(){return this._intersections},qr.prototype.setFindAllIntersections=function(t){this._findAllIntersections=t},qr.prototype.setKeepIntersections=function(t){this._keepIntersections=t},qr.prototype.processIntersections=function(t,e,n,r){if(!this._findAllIntersections&&this.hasIntersection())return null;if(t===n&&e===r)return null;if(this._isCheckEndSegmentsOnly&&!this.isEndSegment(t,e)&&!this.isEndSegment(n,r))return null;var i=t.getCoordinates()[e],o=t.getCoordinates()[e+1],a=n.getCoordinates()[r],s=n.getCoordinates()[r+1];this._li.computeIntersection(i,o,a,s),this._li.hasIntersection()&&this._li.isInteriorIntersection()&&(this._intSegments=new Array(4).fill(null),this._intSegments[0]=i,this._intSegments[1]=o,this._intSegments[2]=a,this._intSegments[3]=s,this._interiorIntersection=this._li.getIntersection(0),this._keepIntersections&&this._intersections.add(this._interiorIntersection),this._intersectionCount++)},qr.prototype.isEndSegment=function(t,e){return 0===e||e>=t.size()-2},qr.prototype.hasIntersection=function(){return null!==this._interiorIntersection},qr.prototype.isDone=function(){return!this._findAllIntersections&&null!==this._interiorIntersection},qr.prototype.interfaces_=function(){return[Wn]},qr.prototype.getClass=function(){return qr},qr.createAllIntersectionsFinder=function(t){var e=new qr(t);return e.setFindAllIntersections(!0),e},qr.createAnyIntersectionFinder=function(t){return new qr(t)},qr.createIntersectionCounter=function(t){var e=new qr(t);return e.setFindAllIntersections(!0),e.setKeepIntersections(!1),e};var Ur=function(){this._li=new it,this._segStrings=null,this._findAllIntersections=!1,this._segInt=null,this._isValid=!0;var t=arguments[0];this._segStrings=t};Ur.prototype.execute=function(){if(null!==this._segInt)return null;this.checkInteriorIntersections()},Ur.prototype.getIntersections=function(){return this._segInt.getIntersections()},Ur.prototype.isValid=function(){return this.execute(),this._isValid},Ur.prototype.setFindAllIntersections=function(t){this._findAllIntersections=t},Ur.prototype.checkInteriorIntersections=function(){this._isValid=!0,this._segInt=new qr(this._li),this._segInt.setFindAllIntersections(this._findAllIntersections);var t=new wn;if(t.setSegmentIntersector(this._segInt),t.computeNodes(this._segStrings),this._segInt.hasIntersection())return this._isValid=!1,null},Ur.prototype.checkValid=function(){if(this.execute(),!this._isValid)throw new Le(this.getErrorMessage(),this._segInt.getInteriorIntersection())},Ur.prototype.getErrorMessage=function(){if(this._isValid)return"no intersections found";var t=this._segInt.getIntersectionSegments();return"found non-noded intersection between "+K.toLineString(t[0],t[1])+" and "+K.toLineString(t[2],t[3])},Ur.prototype.interfaces_=function(){return[]},Ur.prototype.getClass=function(){return Ur},Ur.computeIntersections=function(t){var e=new Ur(t);return e.setFindAllIntersections(!0),e.isValid(),e.getIntersections()};var Vr=function t(){this._nv=null;var e=arguments[0];this._nv=new Ur(t.toSegmentStrings(e))};Vr.prototype.checkValid=function(){this._nv.checkValid()},Vr.prototype.interfaces_=function(){return[]},Vr.prototype.getClass=function(){return Vr},Vr.toSegmentStrings=function(t){for(var e=new Et,n=t.iterator();n.hasNext();){var r=n.next();e.add(new Br(r.getCoordinates(),r))}return e},Vr.checkValid=function(t){new Vr(t).checkValid()};var Yr=function(t){this._mapOp=t};Yr.prototype.map=function(t){for(var e=new Et,n=0;n<t.getNumGeometries();n++){var r=this._mapOp.map(t.getGeometryN(n));r.isEmpty()||e.add(r)}return t.getFactory().createGeometryCollection(me.toGeometryArray(e))},Yr.prototype.interfaces_=function(){return[]},Yr.prototype.getClass=function(){return Yr},Yr.map=function(t,e){return new Yr(e).map(t)};var Xr=function(){this._op=null,this._geometryFactory=null,this._ptLocator=null,this._lineEdgesList=new Et,this._resultLineList=new Et;var t=arguments[0],e=arguments[1],n=arguments[2];this._op=t,this._geometryFactory=e,this._ptLocator=n};Xr.prototype.collectLines=function(t){for(var e=this._op.getGraph().getEdgeEnds().iterator();e.hasNext();){var n=e.next();this.collectLineEdge(n,t,this._lineEdgesList),this.collectBoundaryTouchEdge(n,t,this._lineEdgesList)}},Xr.prototype.labelIsolatedLine=function(t,e){var n=this._ptLocator.locate(t.getCoordinate(),this._op.getArgGeometry(e));t.getLabel().setLocation(e,n)},Xr.prototype.build=function(t){return this.findCoveredLineEdges(),this.collectLines(t),this.buildLines(t),this._resultLineList},Xr.prototype.collectLineEdge=function(t,e,n){var r=t.getLabel(),i=t.getEdge();t.isLineEdge()&&(t.isVisited()||!Ci.isResultOfOp(r,e)||i.isCovered()||(n.add(i),t.setVisitedEdge(!0)))},Xr.prototype.findCoveredLineEdges=function(){for(var t=this._op.getGraph().getNodes().iterator();t.hasNext();)t.next().getEdges().findCoveredLineEdges();for(var e=this._op.getGraph().getEdgeEnds().iterator();e.hasNext();){var n=e.next(),r=n.getEdge();if(n.isLineEdge()&&!r.isCoveredSet()){var i=this._op.isCoveredByA(n.getCoordinate());r.setCovered(i)}}},Xr.prototype.labelIsolatedLines=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next(),r=n.getLabel();n.isIsolated()&&(r.isNull(0)?this.labelIsolatedLine(n,0):this.labelIsolatedLine(n,1))}},Xr.prototype.buildLines=function(t){for(var e=this._lineEdgesList.iterator();e.hasNext();){var n=e.next(),r=this._geometryFactory.createLineString(n.getCoordinates());this._resultLineList.add(r),n.setInResult(!0)}},Xr.prototype.collectBoundaryTouchEdge=function(t,e,n){var r=t.getLabel();return t.isLineEdge()||t.isVisited()||t.isInteriorAreaEdge()||t.getEdge().isInResult()?null:(et.isTrue(!(t.isInResult()||t.getSym().isInResult())||!t.getEdge().isInResult()),void(Ci.isResultOfOp(r,e)&&e===Ci.INTERSECTION&&(n.add(t.getEdge()),t.setVisitedEdge(!0))))},Xr.prototype.interfaces_=function(){return[]},Xr.prototype.getClass=function(){return Xr};var Hr=function(){this._op=null,this._geometryFactory=null,this._resultPointList=new Et;var t=arguments[0],e=arguments[1];this._op=t,this._geometryFactory=e};Hr.prototype.filterCoveredNodeToPoint=function(t){var e=t.getCoordinate();if(!this._op.isCoveredByLA(e)){var n=this._geometryFactory.createPoint(e);this._resultPointList.add(n)}},Hr.prototype.extractNonCoveredResultNodes=function(t){for(var e=this._op.getGraph().getNodes().iterator();e.hasNext();){var n=e.next();if(!(n.isInResult()||n.isIncidentEdgeInResult()||0!==n.getEdges().getDegree()&&t!==Ci.INTERSECTION)){var r=n.getLabel();Ci.isResultOfOp(r,t)&&this.filterCoveredNodeToPoint(n)}}},Hr.prototype.build=function(t){return this.extractNonCoveredResultNodes(t),this._resultPointList},Hr.prototype.interfaces_=function(){return[]},Hr.prototype.getClass=function(){return Hr};var Wr=function(){this._inputGeom=null,this._factory=null,this._pruneEmptyGeometry=!0,this._preserveGeometryCollectionType=!0,this._preserveCollections=!1,this._preserveType=!1};Wr.prototype.transformPoint=function(t,e){return this._factory.createPoint(this.transformCoordinates(t.getCoordinateSequence(),t))},Wr.prototype.transformPolygon=function(t,e){var n=!0,r=this.transformLinearRing(t.getExteriorRing(),t);null!==r&&r instanceof ee&&!r.isEmpty()||(n=!1);for(var i=new Et,o=0;o<t.getNumInteriorRing();o++){var a=this.transformLinearRing(t.getInteriorRingN(o),t);null===a||a.isEmpty()||(a instanceof ee||(n=!1),i.add(a))}if(n)return this._factory.createPolygon(r,i.toArray([]));var s=new Et;return null!==r&&s.add(r),s.addAll(i),this._factory.buildGeometry(s)},Wr.prototype.createCoordinateSequence=function(t){return this._factory.getCoordinateSequenceFactory().create(t)},Wr.prototype.getInputGeometry=function(){return this._inputGeom},Wr.prototype.transformMultiLineString=function(t,e){for(var n=new Et,r=0;r<t.getNumGeometries();r++){var i=this.transformLineString(t.getGeometryN(r),t);null!==i&&(i.isEmpty()||n.add(i))}return this._factory.buildGeometry(n)},Wr.prototype.transformCoordinates=function(t,e){return this.copy(t)},Wr.prototype.transformLineString=function(t,e){return this._factory.createLineString(this.transformCoordinates(t.getCoordinateSequence(),t))},Wr.prototype.transformMultiPoint=function(t,e){for(var n=new Et,r=0;r<t.getNumGeometries();r++){var i=this.transformPoint(t.getGeometryN(r),t);null!==i&&(i.isEmpty()||n.add(i))}return this._factory.buildGeometry(n)},Wr.prototype.transformMultiPolygon=function(t,e){for(var n=new Et,r=0;r<t.getNumGeometries();r++){var i=this.transformPolygon(t.getGeometryN(r),t);null!==i&&(i.isEmpty()||n.add(i))}return this._factory.buildGeometry(n)},Wr.prototype.copy=function(t){return t.copy()},Wr.prototype.transformGeometryCollection=function(t,e){for(var n=new Et,r=0;r<t.getNumGeometries();r++){var i=this.transform(t.getGeometryN(r));null!==i&&(this._pruneEmptyGeometry&&i.isEmpty()||n.add(i))}return this._preserveGeometryCollectionType?this._factory.createGeometryCollection(me.toGeometryArray(n)):this._factory.buildGeometry(n)},Wr.prototype.transform=function(t){if(this._inputGeom=t,this._factory=t.getFactory(),t instanceof Jt)return this.transformPoint(t,null);if(t instanceof te)return this.transformMultiPoint(t,null);if(t instanceof ee)return this.transformLinearRing(t,null);if(t instanceof $t)return this.transformLineString(t,null);if(t instanceof Ut)return this.transformMultiLineString(t,null);if(t instanceof Qt)return this.transformPolygon(t,null);if(t instanceof ne)return this.transformMultiPolygon(t,null);if(t instanceof qt)return this.transformGeometryCollection(t,null);throw new _("Unknown Geometry subtype: "+t.getClass().getName())},Wr.prototype.transformLinearRing=function(t,e){var n=this.transformCoordinates(t.getCoordinateSequence(),t);if(null===n)return this._factory.createLinearRing(null);var r=n.size();return r>0&&r<4&&!this._preserveType?this._factory.createLineString(n):this._factory.createLinearRing(n)},Wr.prototype.interfaces_=function(){return[]},Wr.prototype.getClass=function(){return Wr};var $r=function t(){if(this._snapTolerance=0,this._srcPts=null,this._seg=new gn,this._allowSnappingToSourceVertices=!1,this._isClosed=!1,arguments[0]instanceof $t&&"number"==typeof arguments[1]){var e=arguments[1];t.call(this,arguments[0].getCoordinates(),e)}else if(arguments[0]instanceof Array&&"number"==typeof arguments[1]){var n=arguments[0],r=arguments[1];this._srcPts=n,this._isClosed=t.isClosed(n),this._snapTolerance=r}};$r.prototype.snapVertices=function(t,e){for(var n=this._isClosed?t.size()-1:t.size(),r=0;r<n;r++){var i=t.get(r),o=this.findSnapForVertex(i,e);null!==o&&(t.set(r,new N(o)),0===r&&this._isClosed&&t.set(t.size()-1,new N(o)))}},$r.prototype.findSnapForVertex=function(t,e){for(var n=0;n<e.length;n++){if(t.equals2D(e[n]))return null;if(t.distance(e[n])<this._snapTolerance)return e[n]}return null},$r.prototype.snapTo=function(t){var e=new It(this._srcPts);return this.snapVertices(e,t),this.snapSegments(e,t),e.toCoordinateArray()},$r.prototype.snapSegments=function(t,e){if(0===e.length)return null;var n=e.length;e[0].equals2D(e[e.length-1])&&(n=e.length-1);for(var r=0;r<n;r++){var i=e[r],o=this.findSegmentIndexToSnap(i,t);o>=0&&t.add(o+1,new N(i),!1)}},$r.prototype.findSegmentIndexToSnap=function(t,e){for(var n=v.MAX_VALUE,r=-1,i=0;i<e.size()-1;i++){if(this._seg.p0=e.get(i),this._seg.p1=e.get(i+1),this._seg.p0.equals2D(t)||this._seg.p1.equals2D(t)){if(this._allowSnappingToSourceVertices)continue;return-1}var o=this._seg.distance(t);o<this._snapTolerance&&o<n&&(n=o,r=i)}return r},$r.prototype.setAllowSnappingToSourceVertices=function(t){this._allowSnappingToSourceVertices=t},$r.prototype.interfaces_=function(){return[]},$r.prototype.getClass=function(){return $r},$r.isClosed=function(t){return!(t.length<=1)&&t[0].equals2D(t[t.length-1])};var Zr=function(t){this._srcGeom=t||null},Jr={SNAP_PRECISION_FACTOR:{configurable:!0}};Zr.prototype.snapTo=function(t,e){var n=this.extractTargetCoordinates(t);return new Kr(e,n).transform(this._srcGeom)},Zr.prototype.snapToSelf=function(t,e){var n=this.extractTargetCoordinates(this._srcGeom),r=new Kr(t,n,!0).transform(this._srcGeom),i=r;return e&&O(i,Kt)&&(i=r.buffer(0)),i},Zr.prototype.computeSnapTolerance=function(t){return this.computeMinimumSegmentLength(t)/10},Zr.prototype.extractTargetCoordinates=function(t){for(var e=new h,n=t.getCoordinates(),r=0;r<n.length;r++)e.add(n[r]);return e.toArray(new Array(0).fill(null))},Zr.prototype.computeMinimumSegmentLength=function(t){for(var e=v.MAX_VALUE,n=0;n<t.length-1;n++){var r=t[n].distance(t[n+1]);r<e&&(e=r)}return e},Zr.prototype.interfaces_=function(){return[]},Zr.prototype.getClass=function(){return Zr},Zr.snap=function(t,e,n){var r=new Array(2).fill(null),i=new Zr(t);r[0]=i.snapTo(e,n);var o=new Zr(e);return r[1]=o.snapTo(r[0],n),r},Zr.computeOverlaySnapTolerance=function(){if(1===arguments.length){var t=arguments[0],e=Zr.computeSizeBasedSnapTolerance(t),n=t.getPrecisionModel();if(n.getType()===he.FIXED){var r=1/n.getScale()*2/1.415;r>e&&(e=r)}return e}if(2===arguments.length){var i=arguments[0],o=arguments[1];return Math.min(Zr.computeOverlaySnapTolerance(i),Zr.computeOverlaySnapTolerance(o))}},Zr.computeSizeBasedSnapTolerance=function(t){var e=t.getEnvelopeInternal();return Math.min(e.getHeight(),e.getWidth())*Zr.SNAP_PRECISION_FACTOR},Zr.snapToSelf=function(t,e,n){return new Zr(t).snapToSelf(e,n)},Jr.SNAP_PRECISION_FACTOR.get=function(){return 1e-9},Object.defineProperties(Zr,Jr);var Kr=function(t){function e(e,n,r){t.call(this),this._snapTolerance=e||null,this._snapPts=n||null,this._isSelfSnap=void 0!==r&&r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.snapLine=function(t,e){var n=new $r(t,this._snapTolerance);return n.setAllowSnappingToSourceVertices(this._isSelfSnap),n.snapTo(e)},e.prototype.transformCoordinates=function(t,e){var n=t.toCoordinateArray(),r=this.snapLine(n,this._snapPts);return this._factory.getCoordinateSequenceFactory().create(r)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Wr),Qr=function(){this._isFirst=!0,this._commonMantissaBitsCount=53,this._commonBits=0,this._commonSignExp=null};Qr.prototype.getCommon=function(){return v.longBitsToDouble(this._commonBits)},Qr.prototype.add=function(t){var e=v.doubleToLongBits(t);return this._isFirst?(this._commonBits=e,this._commonSignExp=Qr.signExpBits(this._commonBits),this._isFirst=!1,null):Qr.signExpBits(e)!==this._commonSignExp?(this._commonBits=0,null):(this._commonMantissaBitsCount=Qr.numCommonMostSigMantissaBits(this._commonBits,e),void(this._commonBits=Qr.zeroLowerBits(this._commonBits,64-(12+this._commonMantissaBitsCount))))},Qr.prototype.toString=function(){if(1===arguments.length){var t=arguments[0],e=v.longBitsToDouble(t),n="0000000000000000000000000000000000000000000000000000000000000000"+v.toBinaryString(t),r=n.substring(n.length-64);return r.substring(0,1)+"  "+r.substring(1,12)+"(exp) "+r.substring(12)+" [ "+e+" ]"}},Qr.prototype.interfaces_=function(){return[]},Qr.prototype.getClass=function(){return Qr},Qr.getBit=function(t,e){return 0!=(t&1<<e)?1:0},Qr.signExpBits=function(t){return t>>52},Qr.zeroLowerBits=function(t,e){return t&~((1<<e)-1)},Qr.numCommonMostSigMantissaBits=function(t,e){for(var n=0,r=52;r>=0;r--){if(Qr.getBit(t,r)!==Qr.getBit(e,r))return n;n++}return 52};var ti=function(){this._commonCoord=null,this._ccFilter=new ni},ei={CommonCoordinateFilter:{configurable:!0},Translater:{configurable:!0}};ti.prototype.addCommonBits=function(t){var e=new ri(this._commonCoord);t.apply(e),t.geometryChanged()},ti.prototype.removeCommonBits=function(t){if(0===this._commonCoord.x&&0===this._commonCoord.y)return t;var e=new N(this._commonCoord);e.x=-e.x,e.y=-e.y;var n=new ri(e);return t.apply(n),t.geometryChanged(),t},ti.prototype.getCommonCoordinate=function(){return this._commonCoord},ti.prototype.add=function(t){t.apply(this._ccFilter),this._commonCoord=this._ccFilter.getCommonCoordinate()},ti.prototype.interfaces_=function(){return[]},ti.prototype.getClass=function(){return ti},ei.CommonCoordinateFilter.get=function(){return ni},ei.Translater.get=function(){return ri},Object.defineProperties(ti,ei);var ni=function(){this._commonBitsX=new Qr,this._commonBitsY=new Qr};ni.prototype.filter=function(t){this._commonBitsX.add(t.x),this._commonBitsY.add(t.y)},ni.prototype.getCommonCoordinate=function(){return new N(this._commonBitsX.getCommon(),this._commonBitsY.getCommon())},ni.prototype.interfaces_=function(){return[ht]},ni.prototype.getClass=function(){return ni};var ri=function(){this.trans=null;var t=arguments[0];this.trans=t};ri.prototype.filter=function(t,e){var n=t.getOrdinate(e,0)+this.trans.x,r=t.getOrdinate(e,1)+this.trans.y;t.setOrdinate(e,0,n),t.setOrdinate(e,1,r)},ri.prototype.isDone=function(){return!1},ri.prototype.isGeometryChanged=function(){return!0},ri.prototype.interfaces_=function(){return[Bt]},ri.prototype.getClass=function(){return ri};var ii=function(t,e){this._geom=new Array(2).fill(null),this._snapTolerance=null,this._cbr=null,this._geom[0]=t,this._geom[1]=e,this.computeSnapTolerance()};ii.prototype.selfSnap=function(t){return new Zr(t).snapTo(t,this._snapTolerance)},ii.prototype.removeCommonBits=function(t){this._cbr=new ti,this._cbr.add(t[0]),this._cbr.add(t[1]);var e=new Array(2).fill(null);return e[0]=this._cbr.removeCommonBits(t[0].copy()),e[1]=this._cbr.removeCommonBits(t[1].copy()),e},ii.prototype.prepareResult=function(t){return this._cbr.addCommonBits(t),t},ii.prototype.getResultGeometry=function(t){var e=this.snap(this._geom),n=Ci.overlayOp(e[0],e[1],t);return this.prepareResult(n)},ii.prototype.checkValid=function(t){t.isValid()||V.out.println("Snapped geometry is invalid")},ii.prototype.computeSnapTolerance=function(){this._snapTolerance=Zr.computeOverlaySnapTolerance(this._geom[0],this._geom[1])},ii.prototype.snap=function(t){var e=this.removeCommonBits(t);return Zr.snap(e[0],e[1],this._snapTolerance)},ii.prototype.interfaces_=function(){return[]},ii.prototype.getClass=function(){return ii},ii.overlayOp=function(t,e,n){return new ii(t,e).getResultGeometry(n)},ii.union=function(t,e){return ii.overlayOp(t,e,Ci.UNION)},ii.intersection=function(t,e){return ii.overlayOp(t,e,Ci.INTERSECTION)},ii.symDifference=function(t,e){return ii.overlayOp(t,e,Ci.SYMDIFFERENCE)},ii.difference=function(t,e){return ii.overlayOp(t,e,Ci.DIFFERENCE)};var oi=function(t,e){this._geom=new Array(2).fill(null),this._geom[0]=t,this._geom[1]=e};oi.prototype.getResultGeometry=function(t){var e=null,n=!1,r=null;try{e=Ci.overlayOp(this._geom[0],this._geom[1],t),n=!0}catch(t){if(!(t instanceof Q))throw t;r=t}if(!n)try{e=ii.overlayOp(this._geom[0],this._geom[1],t)}catch(t){throw t instanceof Q?r:t}return e},oi.prototype.interfaces_=function(){return[]},oi.prototype.getClass=function(){return oi},oi.overlayOp=function(t,e,n){return new oi(t,e).getResultGeometry(n)},oi.union=function(t,e){return oi.overlayOp(t,e,Ci.UNION)},oi.intersection=function(t,e){return oi.overlayOp(t,e,Ci.INTERSECTION)},oi.symDifference=function(t,e){return oi.overlayOp(t,e,Ci.SYMDIFFERENCE)},oi.difference=function(t,e){return oi.overlayOp(t,e,Ci.DIFFERENCE)};var ai=function(){this.mce=null,this.chainIndex=null;var t=arguments[0],e=arguments[1];this.mce=t,this.chainIndex=e};ai.prototype.computeIntersections=function(t,e){this.mce.computeIntersectsForChain(this.chainIndex,t.mce,t.chainIndex,e)},ai.prototype.interfaces_=function(){return[]},ai.prototype.getClass=function(){return ai};var si=function t(){if(this._label=null,this._xValue=null,this._eventType=null,this._insertEvent=null,this._deleteEventIndex=null,this._obj=null,2===arguments.length){var e=arguments[0],n=arguments[1];this._eventType=t.DELETE,this._xValue=e,this._insertEvent=n}else if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2];this._eventType=t.INSERT,this._label=r,this._xValue=i,this._obj=o}},ui={INSERT:{configurable:!0},DELETE:{configurable:!0}};si.prototype.isDelete=function(){return this._eventType===si.DELETE},si.prototype.setDeleteEventIndex=function(t){this._deleteEventIndex=t},si.prototype.getObject=function(){return this._obj},si.prototype.compareTo=function(t){var e=t;return this._xValue<e._xValue?-1:this._xValue>e._xValue?1:this._eventType<e._eventType?-1:this._eventType>e._eventType?1:0},si.prototype.getInsertEvent=function(){return this._insertEvent},si.prototype.isInsert=function(){return this._eventType===si.INSERT},si.prototype.isSameLabel=function(t){return null!==this._label&&this._label===t._label},si.prototype.getDeleteEventIndex=function(){return this._deleteEventIndex},si.prototype.interfaces_=function(){return[x]},si.prototype.getClass=function(){return si},ui.INSERT.get=function(){return 1},ui.DELETE.get=function(){return 2},Object.defineProperties(si,ui);var li=function(){};li.prototype.interfaces_=function(){return[]},li.prototype.getClass=function(){return li};var ci=function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._properIntersectionPoint=null,this._li=null,this._includeProper=null,this._recordIsolated=null,this._isSelfIntersection=null,this._numIntersections=0,this.numTests=0,this._bdyNodes=null,this._isDone=!1,this._isDoneWhenProperInt=!1;var t=arguments[0],e=arguments[1],n=arguments[2];this._li=t,this._includeProper=e,this._recordIsolated=n};ci.prototype.isTrivialIntersection=function(t,e,n,r){if(t===n&&1===this._li.getIntersectionNum()){if(ci.isAdjacentSegments(e,r))return!0;if(t.isClosed()){var i=t.getNumPoints()-1;if(0===e&&r===i||0===r&&e===i)return!0}}return!1},ci.prototype.getProperIntersectionPoint=function(){return this._properIntersectionPoint},ci.prototype.setIsDoneIfProperInt=function(t){this._isDoneWhenProperInt=t},ci.prototype.hasProperInteriorIntersection=function(){return this._hasProperInterior},ci.prototype.isBoundaryPointInternal=function(t,e){for(var n=e.iterator();n.hasNext();){var r=n.next().getCoordinate();if(t.isIntersection(r))return!0}return!1},ci.prototype.hasProperIntersection=function(){return this._hasProper},ci.prototype.hasIntersection=function(){return this._hasIntersection},ci.prototype.isDone=function(){return this._isDone},ci.prototype.isBoundaryPoint=function(t,e){return!(null===e||!this.isBoundaryPointInternal(t,e[0])&&!this.isBoundaryPointInternal(t,e[1]))},ci.prototype.setBoundaryNodes=function(t,e){this._bdyNodes=new Array(2).fill(null),this._bdyNodes[0]=t,this._bdyNodes[1]=e},ci.prototype.addIntersections=function(t,e,n,r){if(t===n&&e===r)return null;this.numTests++;var i=t.getCoordinates()[e],o=t.getCoordinates()[e+1],a=n.getCoordinates()[r],s=n.getCoordinates()[r+1];this._li.computeIntersection(i,o,a,s),this._li.hasIntersection()&&(this._recordIsolated&&(t.setIsolated(!1),n.setIsolated(!1)),this._numIntersections++,this.isTrivialIntersection(t,e,n,r)||(this._hasIntersection=!0,!this._includeProper&&this._li.isProper()||(t.addIntersections(this._li,e,0),n.addIntersections(this._li,r,1)),this._li.isProper()&&(this._properIntersectionPoint=this._li.getIntersection(0).copy(),this._hasProper=!0,this._isDoneWhenProperInt&&(this._isDone=!0),this.isBoundaryPoint(this._li,this._bdyNodes)||(this._hasProperInterior=!0))))},ci.prototype.interfaces_=function(){return[]},ci.prototype.getClass=function(){return ci},ci.isAdjacentSegments=function(t,e){return 1===Math.abs(t-e)};var pi=function(t){function e(){t.call(this),this.events=new Et,this.nOverlaps=null}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.prepareEvents=function(){Qe.sort(this.events);for(var t=0;t<this.events.size();t++){var e=this.events.get(t);e.isDelete()&&e.getInsertEvent().setDeleteEventIndex(t)}},e.prototype.computeIntersections=function(){if(1===arguments.length){var t=arguments[0];this.nOverlaps=0,this.prepareEvents();for(var e=0;e<this.events.size();e++){var n=this.events.get(e);if(n.isInsert()&&this.processOverlaps(e,n.getDeleteEventIndex(),n,t),t.isDone())break}}else if(3===arguments.length)if(arguments[2]instanceof ci&&O(arguments[0],wt)&&O(arguments[1],wt)){var r=arguments[0],i=arguments[1],o=arguments[2];this.addEdges(r,r),this.addEdges(i,i),this.computeIntersections(o)}else if("boolean"==typeof arguments[2]&&O(arguments[0],wt)&&arguments[1]instanceof ci){var a=arguments[0],s=arguments[1];arguments[2]?this.addEdges(a,null):this.addEdges(a),this.computeIntersections(s)}},e.prototype.addEdge=function(t,e){for(var n=t.getMonotoneChainEdge(),r=n.getStartIndexes(),i=0;i<r.length-1;i++){var o=new ai(n,i),a=new si(e,n.getMinX(i),o);this.events.add(a),this.events.add(new si(n.getMaxX(i),a))}},e.prototype.processOverlaps=function(t,e,n,r){for(var i=n.getObject(),o=t;o<e;o++){var a=this.events.get(o);if(a.isInsert()){var s=a.getObject();n.isSameLabel(a)||(i.computeIntersections(s,r),this.nOverlaps++)}}},e.prototype.addEdges=function(){if(1===arguments.length)for(var t=arguments[0].iterator();t.hasNext();){var e=t.next();this.addEdge(e,e)}else if(2===arguments.length)for(var n=arguments[1],r=arguments[0].iterator();r.hasNext();){var i=r.next();this.addEdge(i,n)}},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(li),fi=function(){this._min=v.POSITIVE_INFINITY,this._max=v.NEGATIVE_INFINITY},hi={NodeComparator:{configurable:!0}};fi.prototype.getMin=function(){return this._min},fi.prototype.intersects=function(t,e){return!(this._min>e||this._max<t)},fi.prototype.getMax=function(){return this._max},fi.prototype.toString=function(){return K.toLineString(new N(this._min,0),new N(this._max,0))},fi.prototype.interfaces_=function(){return[]},fi.prototype.getClass=function(){return fi},hi.NodeComparator.get=function(){return di},Object.defineProperties(fi,hi);var di=function(){};di.prototype.compare=function(t,e){var n=t,r=e,i=(n._min+n._max)/2,o=(r._min+r._max)/2;return i<o?-1:i>o?1:0},di.prototype.interfaces_=function(){return[E]},di.prototype.getClass=function(){return di};var gi=function(t){function e(){t.call(this),this._item=null;var e=arguments[0],n=arguments[1],r=arguments[2];this._min=e,this._max=n,this._item=r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.query=function(t,e,n){if(!this.intersects(t,e))return null;n.visitItem(this._item)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(fi),yi=function(t){function e(){t.call(this),this._node1=null,this._node2=null;var e=arguments[0],n=arguments[1];this._node1=e,this._node2=n,this.buildExtent(this._node1,this._node2)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.buildExtent=function(t,e){this._min=Math.min(t._min,e._min),this._max=Math.max(t._max,e._max)},e.prototype.query=function(t,e,n){if(!this.intersects(t,e))return null;null!==this._node1&&this._node1.query(t,e,n),null!==this._node2&&this._node2.query(t,e,n)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(fi),mi=function(){this._leaves=new Et,this._root=null,this._level=0};mi.prototype.buildTree=function(){Qe.sort(this._leaves,new fi.NodeComparator);for(var t=this._leaves,e=null,n=new Et;;){if(this.buildLevel(t,n),1===n.size())return n.get(0);e=t,t=n,n=e}},mi.prototype.insert=function(t,e,n){if(null!==this._root)throw new Error("Index cannot be added to once it has been queried");this._leaves.add(new gi(t,e,n))},mi.prototype.query=function(t,e,n){this.init(),this._root.query(t,e,n)},mi.prototype.buildRoot=function(){if(null!==this._root)return null;this._root=this.buildTree()},mi.prototype.printNode=function(t){V.out.println(K.toLineString(new N(t._min,this._level),new N(t._max,this._level)))},mi.prototype.init=function(){if(null!==this._root)return null;this.buildRoot()},mi.prototype.buildLevel=function(t,e){this._level++,e.clear();for(var n=0;n<t.size();n+=2){var r=t.get(n);if(null===(n+1<t.size()?t.get(n):null))e.add(r);else{var i=new yi(t.get(n),t.get(n+1));e.add(i)}}},mi.prototype.interfaces_=function(){return[]},mi.prototype.getClass=function(){return mi};var _i=function(){this._items=new Et};_i.prototype.visitItem=function(t){this._items.add(t)},_i.prototype.getItems=function(){return this._items},_i.prototype.interfaces_=function(){return[$e]},_i.prototype.getClass=function(){return _i};var vi=function(){this._index=null;var t=arguments[0];if(!O(t,Kt))throw new _("Argument must be Polygonal");this._index=new wi(t)},bi={SegmentVisitor:{configurable:!0},IntervalIndexedGeometry:{configurable:!0}};vi.prototype.locate=function(t){var e=new at(t),n=new xi(e);return this._index.query(t.y,t.y,n),e.getLocation()},vi.prototype.interfaces_=function(){return[Gn]},vi.prototype.getClass=function(){return vi},bi.SegmentVisitor.get=function(){return xi},bi.IntervalIndexedGeometry.get=function(){return wi},Object.defineProperties(vi,bi);var xi=function(){this._counter=null;var t=arguments[0];this._counter=t};xi.prototype.visitItem=function(t){var e=t;this._counter.countSegment(e.getCoordinate(0),e.getCoordinate(1))},xi.prototype.interfaces_=function(){return[$e]},xi.prototype.getClass=function(){return xi};var wi=function(){this._index=new mi;var t=arguments[0];this.init(t)};wi.prototype.init=function(t){for(var e=Nr.getLines(t).iterator();e.hasNext();){var n=e.next().getCoordinates();this.addLine(n)}},wi.prototype.addLine=function(t){for(var e=1;e<t.length;e++){var n=new gn(t[e-1],t[e]),r=Math.min(n.p0.y,n.p1.y),i=Math.max(n.p0.y,n.p1.y);this._index.insert(r,i,n)}},wi.prototype.query=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=new _i;return this._index.query(t,e,n),n.getItems()}if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2];this._index.query(r,i,o)}},wi.prototype.interfaces_=function(){return[]},wi.prototype.getClass=function(){return wi};var Ei=function(t){function e(){if(t.call(this),this._parentGeom=null,this._lineEdgeMap=new fe,this._boundaryNodeRule=null,this._useBoundaryDeterminationRule=!0,this._argIndex=null,this._boundaryNodes=null,this._hasTooFewPoints=!1,this._invalidPoint=null,this._areaPtLocator=null,this._ptLocator=new Ir,2===arguments.length){var e=arguments[0],n=arguments[1],r=dt.OGC_SFS_BOUNDARY_RULE;this._argIndex=e,this._parentGeom=n,this._boundaryNodeRule=r,null!==n&&this.add(n)}else if(3===arguments.length){var i=arguments[0],o=arguments[1],a=arguments[2];this._argIndex=i,this._parentGeom=o,this._boundaryNodeRule=a,null!==o&&this.add(o)}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.insertBoundaryPoint=function(t,n){var r=this._nodes.addNode(n).getLabel(),i=1;L.NONE,r.getLocation(t,Ie.ON)===L.BOUNDARY&&i++;var o=e.determineBoundary(this._boundaryNodeRule,i);r.setLocation(t,o)},e.prototype.computeSelfNodes=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return this.computeSelfNodes(t,e,!1)}if(3===arguments.length){var n=arguments[1],r=arguments[2],i=new ci(arguments[0],!0,!1);i.setIsDoneIfProperInt(r);var o=this.createEdgeSetIntersector(),a=this._parentGeom instanceof ee||this._parentGeom instanceof Qt||this._parentGeom instanceof ne,s=n||!a;return o.computeIntersections(this._edges,i,s),this.addSelfIntersectionNodes(this._argIndex),i}},e.prototype.computeSplitEdges=function(t){for(var e=this._edges.iterator();e.hasNext();)e.next().eiList.addSplitEdges(t)},e.prototype.computeEdgeIntersections=function(t,e,n){var r=new ci(e,n,!0);return r.setBoundaryNodes(this.getBoundaryNodes(),t.getBoundaryNodes()),this.createEdgeSetIntersector().computeIntersections(this._edges,t._edges,r),r},e.prototype.getGeometry=function(){return this._parentGeom},e.prototype.getBoundaryNodeRule=function(){return this._boundaryNodeRule},e.prototype.hasTooFewPoints=function(){return this._hasTooFewPoints},e.prototype.addPoint=function(){if(arguments[0]instanceof Jt){var t=arguments[0].getCoordinate();this.insertPoint(this._argIndex,t,L.INTERIOR)}else if(arguments[0]instanceof N){var e=arguments[0];this.insertPoint(this._argIndex,e,L.INTERIOR)}},e.prototype.addPolygon=function(t){this.addPolygonRing(t.getExteriorRing(),L.EXTERIOR,L.INTERIOR);for(var e=0;e<t.getNumInteriorRing();e++){var n=t.getInteriorRingN(e);this.addPolygonRing(n,L.INTERIOR,L.EXTERIOR)}},e.prototype.addEdge=function(t){this.insertEdge(t);var e=t.getCoordinates();this.insertPoint(this._argIndex,e[0],L.BOUNDARY),this.insertPoint(this._argIndex,e[e.length-1],L.BOUNDARY)},e.prototype.addLineString=function(t){var e=Ct.removeRepeatedPoints(t.getCoordinates());if(e.length<2)return this._hasTooFewPoints=!0,this._invalidPoint=e[0],null;var n=new nr(e,new Re(this._argIndex,L.INTERIOR));this._lineEdgeMap.put(t,n),this.insertEdge(n),et.isTrue(e.length>=2,"found LineString with single point"),this.insertBoundaryPoint(this._argIndex,e[0]),this.insertBoundaryPoint(this._argIndex,e[e.length-1])},e.prototype.getInvalidPoint=function(){return this._invalidPoint},e.prototype.getBoundaryPoints=function(){for(var t=this.getBoundaryNodes(),e=new Array(t.size()).fill(null),n=0,r=t.iterator();r.hasNext();){var i=r.next();e[n++]=i.getCoordinate().copy()}return e},e.prototype.getBoundaryNodes=function(){return null===this._boundaryNodes&&(this._boundaryNodes=this._nodes.getBoundaryNodes(this._argIndex)),this._boundaryNodes},e.prototype.addSelfIntersectionNode=function(t,e,n){if(this.isBoundaryNode(t,e))return null;n===L.BOUNDARY&&this._useBoundaryDeterminationRule?this.insertBoundaryPoint(t,e):this.insertPoint(t,e,n)},e.prototype.addPolygonRing=function(t,e,n){if(t.isEmpty())return null;var r=Ct.removeRepeatedPoints(t.getCoordinates());if(r.length<4)return this._hasTooFewPoints=!0,this._invalidPoint=r[0],null;var i=e,o=n;st.isCCW(r)&&(i=n,o=e);var a=new nr(r,new Re(this._argIndex,L.BOUNDARY,i,o));this._lineEdgeMap.put(t,a),this.insertEdge(a),this.insertPoint(this._argIndex,r[0],L.BOUNDARY)},e.prototype.insertPoint=function(t,e,n){var r=this._nodes.addNode(e),i=r.getLabel();null===i?r._label=new Re(t,n):i.setLocation(t,n)},e.prototype.createEdgeSetIntersector=function(){return new pi},e.prototype.addSelfIntersectionNodes=function(t){for(var e=this._edges.iterator();e.hasNext();)for(var n=e.next(),r=n.getLabel().getLocation(t),i=n.eiList.iterator();i.hasNext();){var o=i.next();this.addSelfIntersectionNode(t,o.coord,r)}},e.prototype.add=function(){if(1!==arguments.length)return t.prototype.add.apply(this,arguments);var e=arguments[0];if(e.isEmpty())return null;if(e instanceof ne&&(this._useBoundaryDeterminationRule=!1),e instanceof Qt)this.addPolygon(e);else if(e instanceof $t)this.addLineString(e);else if(e instanceof Jt)this.addPoint(e);else if(e instanceof te)this.addCollection(e);else if(e instanceof Ut)this.addCollection(e);else if(e instanceof ne)this.addCollection(e);else{if(!(e instanceof qt))throw new Error(e.getClass().getName());this.addCollection(e)}},e.prototype.addCollection=function(t){for(var e=0;e<t.getNumGeometries();e++){var n=t.getGeometryN(e);this.add(n)}},e.prototype.locate=function(t){return O(this._parentGeom,Kt)&&this._parentGeom.getNumGeometries()>50?(null===this._areaPtLocator&&(this._areaPtLocator=new vi(this._parentGeom)),this._areaPtLocator.locate(t)):this._ptLocator.locate(t,this._parentGeom)},e.prototype.findEdge=function(){if(1===arguments.length){var e=arguments[0];return this._lineEdgeMap.get(e)}return t.prototype.findEdge.apply(this,arguments)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.determineBoundary=function(t,e){return t.isInBoundary(e)?L.BOUNDARY:L.INTERIOR},e}(Ve),Ni=function(){if(this._li=new it,this._resultPrecisionModel=null,this._arg=null,1===arguments.length){var t=arguments[0];this.setComputationPrecision(t.getPrecisionModel()),this._arg=new Array(1).fill(null),this._arg[0]=new Ei(0,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1],r=dt.OGC_SFS_BOUNDARY_RULE;e.getPrecisionModel().compareTo(n.getPrecisionModel())>=0?this.setComputationPrecision(e.getPrecisionModel()):this.setComputationPrecision(n.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new Ei(0,e,r),this._arg[1]=new Ei(1,n,r)}else if(3===arguments.length){var i=arguments[0],o=arguments[1],a=arguments[2];i.getPrecisionModel().compareTo(o.getPrecisionModel())>=0?this.setComputationPrecision(i.getPrecisionModel()):this.setComputationPrecision(o.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new Ei(0,i,a),this._arg[1]=new Ei(1,o,a)}};Ni.prototype.getArgGeometry=function(t){return this._arg[t].getGeometry()},Ni.prototype.setComputationPrecision=function(t){this._resultPrecisionModel=t,this._li.setPrecisionModel(this._resultPrecisionModel)},Ni.prototype.interfaces_=function(){return[]},Ni.prototype.getClass=function(){return Ni};var Ii=function(){};Ii.prototype.interfaces_=function(){return[]},Ii.prototype.getClass=function(){return Ii},Ii.map=function(){if(arguments[0]instanceof ct&&O(arguments[1],Ii.MapOp)){for(var t=arguments[0],e=arguments[1],n=new Et,r=0;r<t.getNumGeometries();r++){var i=e.map(t.getGeometryN(r));null!==i&&n.add(i)}return t.getFactory().buildGeometry(n)}if(O(arguments[0],bt)&&O(arguments[1],Ii.MapOp)){for(var o=arguments[0],a=arguments[1],s=new Et,u=o.iterator();u.hasNext();){var l=u.next(),c=a.map(l);null!==c&&s.add(c)}return s}},Ii.MapOp=function(){};var Ci=function(t){function e(){var e=arguments[0],n=arguments[1];t.call(this,e,n),this._ptLocator=new Ir,this._geomFact=null,this._resultGeom=null,this._graph=null,this._edgeList=new Hn,this._resultPolyList=new Et,this._resultLineList=new Et,this._resultPointList=new Et,this._graph=new Ve(new Yn),this._geomFact=e.getFactory()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.insertUniqueEdge=function(t){var e=this._edgeList.findEqualEdge(t);if(null!==e){var n=e.getLabel(),r=t.getLabel();e.isPointwiseEqual(t)||(r=new Re(t.getLabel())).flip();var i=e.getDepth();i.isNull()&&i.add(n),i.add(r),n.merge(r)}else this._edgeList.add(t)},e.prototype.getGraph=function(){return this._graph},e.prototype.cancelDuplicateResultEdges=function(){for(var t=this._graph.getEdgeEnds().iterator();t.hasNext();){var e=t.next(),n=e.getSym();e.isInResult()&&n.isInResult()&&(e.setInResult(!1),n.setInResult(!1))}},e.prototype.isCoveredByLA=function(t){return!!this.isCovered(t,this._resultLineList)||!!this.isCovered(t,this._resultPolyList)},e.prototype.computeGeometry=function(t,n,r,i){var o=new Et;return o.addAll(t),o.addAll(n),o.addAll(r),o.isEmpty()?e.createEmptyResult(i,this._arg[0].getGeometry(),this._arg[1].getGeometry(),this._geomFact):this._geomFact.buildGeometry(o)},e.prototype.mergeSymLabels=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();)t.next().getEdges().mergeSymLabels()},e.prototype.isCovered=function(t,e){for(var n=e.iterator();n.hasNext();){var r=n.next();if(this._ptLocator.locate(t,r)!==L.EXTERIOR)return!0}return!1},e.prototype.replaceCollapsedEdges=function(){for(var t=new Et,e=this._edgeList.iterator();e.hasNext();){var n=e.next();n.isCollapsed()&&(e.remove(),t.add(n.getCollapsedEdge()))}this._edgeList.addAll(t)},e.prototype.updateNodeLabelling=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();){var e=t.next(),n=e.getEdges().getLabel();e.getLabel().merge(n)}},e.prototype.getResultGeometry=function(t){return this.computeOverlay(t),this._resultGeom},e.prototype.insertUniqueEdges=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();this.insertUniqueEdge(n)}},e.prototype.computeOverlay=function(t){this.copyPoints(0),this.copyPoints(1),this._arg[0].computeSelfNodes(this._li,!1),this._arg[1].computeSelfNodes(this._li,!1),this._arg[0].computeEdgeIntersections(this._arg[1],this._li,!0);var e=new Et;this._arg[0].computeSplitEdges(e),this._arg[1].computeSplitEdges(e),this.insertUniqueEdges(e),this.computeLabelsFromDepths(),this.replaceCollapsedEdges(),Vr.checkValid(this._edgeList.getEdges()),this._graph.addEdges(this._edgeList.getEdges()),this.computeLabelling(),this.labelIncompleteNodes(),this.findResultAreaEdges(t),this.cancelDuplicateResultEdges();var n=new Ye(this._geomFact);n.add(this._graph),this._resultPolyList=n.getPolygons();var r=new Xr(this,this._geomFact,this._ptLocator);this._resultLineList=r.build(t);var i=new Hr(this,this._geomFact,this._ptLocator);this._resultPointList=i.build(t),this._resultGeom=this.computeGeometry(this._resultPointList,this._resultLineList,this._resultPolyList,t)},e.prototype.labelIncompleteNode=function(t,e){var n=this._ptLocator.locate(t.getCoordinate(),this._arg[e].getGeometry());t.getLabel().setLocation(e,n)},e.prototype.copyPoints=function(t){for(var e=this._arg[t].getNodeIterator();e.hasNext();){var n=e.next();this._graph.addNode(n.getCoordinate()).setLabel(t,n.getLabel().getLocation(t))}},e.prototype.findResultAreaEdges=function(t){for(var n=this._graph.getEdgeEnds().iterator();n.hasNext();){var r=n.next(),i=r.getLabel();i.isArea()&&!r.isInteriorAreaEdge()&&e.isResultOfOp(i.getLocation(0,Ie.RIGHT),i.getLocation(1,Ie.RIGHT),t)&&r.setInResult(!0)}},e.prototype.computeLabelsFromDepths=function(){for(var t=this._edgeList.iterator();t.hasNext();){var e=t.next(),n=e.getLabel(),r=e.getDepth();if(!r.isNull()){r.normalize();for(var i=0;i<2;i++)n.isNull(i)||!n.isArea()||r.isNull(i)||(0===r.getDelta(i)?n.toLine(i):(et.isTrue(!r.isNull(i,Ie.LEFT),"depth of LEFT side has not been initialized"),n.setLocation(i,Ie.LEFT,r.getLocation(i,Ie.LEFT)),et.isTrue(!r.isNull(i,Ie.RIGHT),"depth of RIGHT side has not been initialized"),n.setLocation(i,Ie.RIGHT,r.getLocation(i,Ie.RIGHT))))}}},e.prototype.computeLabelling=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();)t.next().getEdges().computeLabelling(this._arg);this.mergeSymLabels(),this.updateNodeLabelling()},e.prototype.labelIncompleteNodes=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();){var e=t.next(),n=e.getLabel();e.isIsolated()&&(n.isNull(0)?this.labelIncompleteNode(e,0):this.labelIncompleteNode(e,1)),e.getEdges().updateLabelling(n)}},e.prototype.isCoveredByA=function(t){return!!this.isCovered(t,this._resultPolyList)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Ni);Ci.overlayOp=function(t,e,n){return new Ci(t,e).getResultGeometry(n)},Ci.intersection=function(t,e){if(t.isEmpty()||e.isEmpty())return Ci.createEmptyResult(Ci.INTERSECTION,t,e,t.getFactory());if(t.isGeometryCollection()){var n=e;return Yr.map(t,{interfaces_:function(){return[Ii.MapOp]},map:function(t){return t.intersection(n)}})}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),oi.overlayOp(t,e,Ci.INTERSECTION)},Ci.symDifference=function(t,e){if(t.isEmpty()||e.isEmpty()){if(t.isEmpty()&&e.isEmpty())return Ci.createEmptyResult(Ci.SYMDIFFERENCE,t,e,t.getFactory());if(t.isEmpty())return e.copy();if(e.isEmpty())return t.copy()}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),oi.overlayOp(t,e,Ci.SYMDIFFERENCE)},Ci.resultDimension=function(t,e,n){var r=e.getDimension(),i=n.getDimension(),o=-1;switch(t){case Ci.INTERSECTION:o=Math.min(r,i);break;case Ci.UNION:o=Math.max(r,i);break;case Ci.DIFFERENCE:o=r;break;case Ci.SYMDIFFERENCE:o=Math.max(r,i)}return o},Ci.createEmptyResult=function(t,e,n,r){var i=null;switch(Ci.resultDimension(t,e,n)){case-1:i=r.createGeometryCollection(new Array(0).fill(null));break;case 0:i=r.createPoint();break;case 1:i=r.createLineString();break;case 2:i=r.createPolygon()}return i},Ci.difference=function(t,e){return t.isEmpty()?Ci.createEmptyResult(Ci.DIFFERENCE,t,e,t.getFactory()):e.isEmpty()?t.copy():(t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),oi.overlayOp(t,e,Ci.DIFFERENCE))},Ci.isResultOfOp=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=t.getLocation(0),r=t.getLocation(1);return Ci.isResultOfOp(n,r,e)}if(3===arguments.length){var i=arguments[0],o=arguments[1],a=arguments[2];switch(i===L.BOUNDARY&&(i=L.INTERIOR),o===L.BOUNDARY&&(o=L.INTERIOR),a){case Ci.INTERSECTION:return i===L.INTERIOR&&o===L.INTERIOR;case Ci.UNION:return i===L.INTERIOR||o===L.INTERIOR;case Ci.DIFFERENCE:return i===L.INTERIOR&&o!==L.INTERIOR;case Ci.SYMDIFFERENCE:return i===L.INTERIOR&&o!==L.INTERIOR||i!==L.INTERIOR&&o===L.INTERIOR}return!1}},Ci.INTERSECTION=1,Ci.UNION=2,Ci.DIFFERENCE=3,Ci.SYMDIFFERENCE=4;var Si=function(){this._g=null,this._boundaryDistanceTolerance=null,this._linework=null,this._ptLocator=new Ir,this._seg=new gn;var t=arguments[0],e=arguments[1];this._g=t,this._boundaryDistanceTolerance=e,this._linework=this.extractLinework(t)};Si.prototype.isWithinToleranceOfBoundary=function(t){for(var e=0;e<this._linework.getNumGeometries();e++)for(var n=this._linework.getGeometryN(e).getCoordinateSequence(),r=0;r<n.size()-1;r++)if(n.getCoordinate(r,this._seg.p0),n.getCoordinate(r+1,this._seg.p1),this._seg.distance(t)<=this._boundaryDistanceTolerance)return!0;return!1},Si.prototype.getLocation=function(t){return this.isWithinToleranceOfBoundary(t)?L.BOUNDARY:this._ptLocator.locate(t,this._g)},Si.prototype.extractLinework=function(t){var e=new Li;t.apply(e);var n=e.getLinework(),r=me.toLineStringArray(n);return t.getFactory().createMultiLineString(r)},Si.prototype.interfaces_=function(){return[]},Si.prototype.getClass=function(){return Si};var Li=function(){this._linework=null,this._linework=new Et};Li.prototype.getLinework=function(){return this._linework},Li.prototype.filter=function(t){if(t instanceof Qt){var e=t;this._linework.add(e.getExteriorRing());for(var n=0;n<e.getNumInteriorRing();n++)this._linework.add(e.getInteriorRingN(n))}},Li.prototype.interfaces_=function(){return[Gt]},Li.prototype.getClass=function(){return Li};var Mi=function(){this._g=null,this._doLeft=!0,this._doRight=!0;var t=arguments[0];this._g=t};Mi.prototype.extractPoints=function(t,e,n){for(var r=t.getCoordinates(),i=0;i<r.length-1;i++)this.computeOffsetPoints(r[i],r[i+1],e,n)},Mi.prototype.setSidesToGenerate=function(t,e){this._doLeft=t,this._doRight=e},Mi.prototype.getPoints=function(t){for(var e=new Et,n=Nr.getLines(this._g).iterator();n.hasNext();){var r=n.next();this.extractPoints(r,t,e)}return e},Mi.prototype.computeOffsetPoints=function(t,e,n,r){var i=e.x-t.x,o=e.y-t.y,a=Math.sqrt(i*i+o*o),s=n*i/a,u=n*o/a,l=(e.x+t.x)/2,c=(e.y+t.y)/2;if(this._doLeft){var p=new N(l-u,c+s);r.add(p)}if(this._doRight){var f=new N(l+u,c-s);r.add(f)}},Mi.prototype.interfaces_=function(){return[]},Mi.prototype.getClass=function(){return Mi};var Oi=function t(){this._geom=null,this._locFinder=null,this._location=new Array(3).fill(null),this._invalidLocation=null,this._boundaryDistanceTolerance=t.TOLERANCE,this._testCoords=new Et;var e=arguments[0],n=arguments[1],r=arguments[2];this._boundaryDistanceTolerance=t.computeBoundaryDistanceTolerance(e,n),this._geom=[e,n,r],this._locFinder=[new Si(this._geom[0],this._boundaryDistanceTolerance),new Si(this._geom[1],this._boundaryDistanceTolerance),new Si(this._geom[2],this._boundaryDistanceTolerance)]},Pi={TOLERANCE:{configurable:!0}};Oi.prototype.reportResult=function(t,e,n){V.out.println("Overlay result invalid - A:"+L.toLocationSymbol(e[0])+" B:"+L.toLocationSymbol(e[1])+" expected:"+(n?"i":"e")+" actual:"+L.toLocationSymbol(e[2]))},Oi.prototype.isValid=function(t){return this.addTestPts(this._geom[0]),this.addTestPts(this._geom[1]),this.checkValid(t)},Oi.prototype.checkValid=function(){if(1===arguments.length){for(var t=arguments[0],e=0;e<this._testCoords.size();e++){var n=this._testCoords.get(e);if(!this.checkValid(t,n))return this._invalidLocation=n,!1}return!0}if(2===arguments.length){var r=arguments[0],i=arguments[1];return this._location[0]=this._locFinder[0].getLocation(i),this._location[1]=this._locFinder[1].getLocation(i),this._location[2]=this._locFinder[2].getLocation(i),!!Oi.hasLocation(this._location,L.BOUNDARY)||this.isValidResult(r,this._location)}},Oi.prototype.addTestPts=function(t){var e=new Mi(t);this._testCoords.addAll(e.getPoints(5*this._boundaryDistanceTolerance))},Oi.prototype.isValidResult=function(t,e){var n=Ci.isResultOfOp(e[0],e[1],t),r=!(n^e[2]===L.INTERIOR);return r||this.reportResult(t,e,n),r},Oi.prototype.getInvalidLocation=function(){return this._invalidLocation},Oi.prototype.interfaces_=function(){return[]},Oi.prototype.getClass=function(){return Oi},Oi.hasLocation=function(t,e){for(var n=0;n<3;n++)if(t[n]===e)return!0;return!1},Oi.computeBoundaryDistanceTolerance=function(t,e){return Math.min(Zr.computeSizeBasedSnapTolerance(t),Zr.computeSizeBasedSnapTolerance(e))},Oi.isValid=function(t,e,n,r){return new Oi(t,e,r).isValid(n)},Pi.TOLERANCE.get=function(){return 1e-6},Object.defineProperties(Oi,Pi);var Ri=function t(e){this._geomFactory=null,this._skipEmpty=!1,this._inputGeoms=null,this._geomFactory=t.extractFactory(e),this._inputGeoms=e};Ri.prototype.extractElements=function(t,e){if(null===t)return null;for(var n=0;n<t.getNumGeometries();n++){var r=t.getGeometryN(n);this._skipEmpty&&r.isEmpty()||e.add(r)}},Ri.prototype.combine=function(){for(var t=new Et,e=this._inputGeoms.iterator();e.hasNext();){var n=e.next();this.extractElements(n,t)}return 0===t.size()?null!==this._geomFactory?this._geomFactory.createGeometryCollection(null):null:this._geomFactory.buildGeometry(t)},Ri.prototype.interfaces_=function(){return[]},Ri.prototype.getClass=function(){return Ri},Ri.combine=function(){if(1===arguments.length)return new Ri(arguments[0]).combine();if(2===arguments.length){var t=arguments[0],e=arguments[1];return new Ri(Ri.createList(t,e)).combine()}if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];return new Ri(Ri.createList(n,r,i)).combine()}},Ri.extractFactory=function(t){return t.isEmpty()?null:t.iterator().next().getFactory()},Ri.createList=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=new Et;return n.add(t),n.add(e),n}if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2],a=new Et;return a.add(r),a.add(i),a.add(o),a}};var Ti=function(){this._inputPolys=null,this._geomFactory=null;var t=arguments[0];this._inputPolys=t,null===this._inputPolys&&(this._inputPolys=new Et)},Ai={STRTREE_NODE_CAPACITY:{configurable:!0}};Ti.prototype.reduceToGeometries=function(t){for(var e=new Et,n=t.iterator();n.hasNext();){var r=n.next(),i=null;O(r,wt)?i=this.unionTree(r):r instanceof ct&&(i=r),e.add(i)}return e},Ti.prototype.extractByEnvelope=function(t,e,n){for(var r=new Et,i=0;i<e.getNumGeometries();i++){var o=e.getGeometryN(i);o.getEnvelopeInternal().intersects(t)?r.add(o):n.add(o)}return this._geomFactory.buildGeometry(r)},Ti.prototype.unionOptimized=function(t,e){var n=t.getEnvelopeInternal(),r=e.getEnvelopeInternal();if(!n.intersects(r))return Ri.combine(t,e);if(t.getNumGeometries()<=1&&e.getNumGeometries()<=1)return this.unionActual(t,e);var i=n.intersection(r);return this.unionUsingEnvelopeIntersection(t,e,i)},Ti.prototype.union=function(){if(null===this._inputPolys)throw new Error("union() method cannot be called twice");if(this._inputPolys.isEmpty())return null;this._geomFactory=this._inputPolys.iterator().next().getFactory();for(var t=new an(Ti.STRTREE_NODE_CAPACITY),e=this._inputPolys.iterator();e.hasNext();){var n=e.next();t.insert(n.getEnvelopeInternal(),n)}this._inputPolys=null;var r=t.itemsTree();return this.unionTree(r)},Ti.prototype.binaryUnion=function(){if(1===arguments.length){var t=arguments[0];return this.binaryUnion(t,0,t.size())}if(3===arguments.length){var e=arguments[0],n=arguments[1],r=arguments[2];if(r-n<=1){var i=Ti.getGeometry(e,n);return this.unionSafe(i,null)}if(r-n==2)return this.unionSafe(Ti.getGeometry(e,n),Ti.getGeometry(e,n+1));var o=Math.trunc((r+n)/2),a=this.binaryUnion(e,n,o),s=this.binaryUnion(e,o,r);return this.unionSafe(a,s)}},Ti.prototype.repeatedUnion=function(t){for(var e=null,n=t.iterator();n.hasNext();){var r=n.next();e=null===e?r.copy():e.union(r)}return e},Ti.prototype.unionSafe=function(t,e){return null===t&&null===e?null:null===t?e.copy():null===e?t.copy():this.unionOptimized(t,e)},Ti.prototype.unionActual=function(t,e){return Ti.restrictToPolygons(t.union(e))},Ti.prototype.unionTree=function(t){var e=this.reduceToGeometries(t);return this.binaryUnion(e)},Ti.prototype.unionUsingEnvelopeIntersection=function(t,e,n){var r=new Et,i=this.extractByEnvelope(n,t,r),o=this.extractByEnvelope(n,e,r),a=this.unionActual(i,o);return r.add(a),Ri.combine(r)},Ti.prototype.bufferUnion=function(){if(1===arguments.length){var t=arguments[0];return t.get(0).getFactory().buildGeometry(t).buffer(0)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e.getFactory().createGeometryCollection([e,n]).buffer(0)}},Ti.prototype.interfaces_=function(){return[]},Ti.prototype.getClass=function(){return Ti},Ti.restrictToPolygons=function(t){if(O(t,Kt))return t;var e=Er.getPolygons(t);return 1===e.size()?e.get(0):t.getFactory().createMultiPolygon(me.toPolygonArray(e))},Ti.getGeometry=function(t,e){return e>=t.size()?null:t.get(e)},Ti.union=function(t){return new Ti(t).union()},Ai.STRTREE_NODE_CAPACITY.get=function(){return 4},Object.defineProperties(Ti,Ai);var Di=function(){};Di.prototype.interfaces_=function(){return[]},Di.prototype.getClass=function(){return Di},Di.union=function(t,e){if(t.isEmpty()||e.isEmpty()){if(t.isEmpty()&&e.isEmpty())return Ci.createEmptyResult(Ci.UNION,t,e,t.getFactory());if(t.isEmpty())return e.copy();if(e.isEmpty())return t.copy()}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),oi.overlayOp(t,e,Ci.UNION)},t.GeoJSONReader=Ee,t.GeoJSONWriter=Ne,t.OverlayOp=Ci,t.UnionOp=Di,t.BufferOp=gr,Object.defineProperty(t,"__esModule",{value:!0})})(Ac.exports);var Dc=Ac.exports;function kc(t){if(!t)throw new Error("geojson is required");switch(t.type){case"Feature":return Fc(t);case"FeatureCollection":return function(t){var e={type:"FeatureCollection"};return Object.keys(t).forEach((function(n){switch(n){case"type":case"features":return;default:e[n]=t[n]}})),e.features=t.features.map((function(t){return Fc(t)})),e}(t);case"Point":case"LineString":case"Polygon":case"MultiPoint":case"MultiLineString":case"MultiPolygon":case"GeometryCollection":return zc(t);default:throw new Error("unknown GeoJSON type")}}function Fc(t){var e={type:"Feature"};return Object.keys(t).forEach((function(n){switch(n){case"type":case"properties":case"geometry":return;default:e[n]=t[n]}})),e.properties=jc(t.properties),e.geometry=zc(t.geometry),e}function jc(t){var e={};return t?(Object.keys(t).forEach((function(n){var r=t[n];"object"==typeof r?null===r?e[n]=null:Array.isArray(r)?e[n]=r.map((function(t){return t})):e[n]=jc(r):e[n]=r})),e):e}function zc(t){var e={type:t.type};return t.bbox&&(e.bbox=t.bbox),"GeometryCollection"===t.type?(e.geometries=t.geometries.map((function(t){return zc(t)})),e):(e.coordinates=Gc(t.coordinates),e)}function Gc(t){var e=t;return"object"!=typeof e[0]?e.slice():e.map((function(t){return Gc(t)}))}function Bc(t,e,n){void 0===n&&(n={});var r,i=(n=n||{}).mutate;if(!t)throw new Error("geojson is required");return!Array.isArray(t)||(r=t[0],isNaN(r)||null===r||Array.isArray(r))?(!0!==i&&(t=kc(t)),Lc(t,(function(t){var n="mercator"===e?qc(t):Uc(t);t[0]=n[0],t[1]=n[1]}))):t="mercator"===e?qc(t):Uc(t),t}function qc(t){var e,n=Math.PI/180,r=6378137,i=20037508.342789244,o=[r*(Math.abs(t[0])<=180?t[0]:t[0]-360*((e=t[0])<0?-1:e>0?1:0))*n,r*Math.log(Math.tan(.25*Math.PI+.5*t[1]*n))];return o[0]>i&&(o[0]=i),o[0]<-i&&(o[0]=-i),o[1]>i&&(o[1]=i),o[1]<-i&&(o[1]=-i),o}function Uc(t){var e=180/Math.PI,n=6378137;return[t[0]*e/n,(.5*Math.PI-2*Math.atan(Math.exp(-t[1]/n)))*e]}var Vc=6371008.8,Yc={meters:Vc,metres:Vc,millimeters:1e3*Vc,millimetres:1e3*Vc,centimeters:100*Vc,centimetres:100*Vc,kilometers:Vc/1e3,kilometres:Vc/1e3,miles:Vc/1609.344,nauticalmiles:Vc/1852,inches:39.37*Vc,yards:Vc/1.0936,feet:3.28084*Vc,radians:1,degrees:Vc/111325};function Xc(t,e){if(!Hc(e=e||{}))throw new Error("options is invalid");var n=e.bbox,r=e.id;if(!t)throw new Error("No features passed");if(!Array.isArray(t))throw new Error("features must be an Array");n&&Wc(n),r&&$c(r);var i={type:"FeatureCollection"};return r&&(i.id=r),n&&(i.bbox=n),i.features=t,i}function Hc(t){return!!t&&t.constructor===Object}function Wc(t){if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be an Array");if(4!==t.length&&6!==t.length)throw new Error("bbox must be an Array of 4 or 6 numbers");t.forEach((function(t){if(!function(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)}(t))throw new Error("bbox must only contain numbers")}))}function $c(t){if(!t)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof t))throw new Error("id must be a number or a string")}function Zc(t,e){if("Feature"===t.type)e(t,0);else if("FeatureCollection"===t.type)for(var n=0;n<t.features.length&&!1!==e(t.features[n],n);n++);}function Jc(t,e){var n,r,i,o,a,s,u,l,c,p,f=0,h="FeatureCollection"===t.type,d="Feature"===t.type,g=h?t.features.length:1;for(n=0;n<g;n++){for(s=h?t.features[n].geometry:d?t.geometry:t,l=h?t.features[n].properties:d?t.properties:{},c=h?t.features[n].bbox:d?t.bbox:void 0,p=h?t.features[n].id:d?t.id:void 0,a=(u=!!s&&"GeometryCollection"===s.type)?s.geometries.length:1,i=0;i<a;i++)if(null!==(o=u?s.geometries[i]:s))switch(o.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===e(o,f,l,c,p))return!1;break;case"GeometryCollection":for(r=0;r<o.geometries.length;r++)if(!1===e(o.geometries[r],f,l,c,p))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===e(null,f,l,c,p))return!1;f++}}class Kc{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const e=this._partials;let n=0;for(let r=0;r<this._n&&r<32;r++){const i=e[r],o=t+i,a=Math.abs(t)<Math.abs(i)?t-(o-i):i-(o-t);a&&(e[n++]=a),t=o}return e[n]=t,this._n=n+1,this}valueOf(){const t=this._partials;let e,n,r,i=this._n,o=0;if(i>0){for(o=t[--i];i>0&&(e=o,n=t[--i],o=e+n,r=n-(o-e),!r););i>0&&(r<0&&t[i-1]<0||r>0&&t[i-1]>0)&&(n=2*r,e=o+n,n==e-o&&(o=e))}return o}}function Qc(t){return Array.from(function*(t){for(const e of t)yield*e}(t))}function tp(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=0|Math.max(0,Math.ceil((e-t)/n)),o=new Array(i);++r<i;)o[r]=t+r*n;return o}var ep=1e-6,np=1e-12,rp=Math.PI,ip=rp/2,op=rp/4,ap=2*rp,sp=180/rp,up=rp/180,lp=Math.abs,cp=Math.atan,pp=Math.atan2,fp=Math.cos,hp=Math.ceil,dp=Math.exp,gp=Math.log,yp=Math.sin,mp=Math.sign||function(t){return t>0?1:t<0?-1:0},_p=Math.sqrt,vp=Math.tan;function bp(t){return t>1?ip:t<-1?-ip:Math.asin(t)}function xp(){}function wp(t,e){t&&Np.hasOwnProperty(t.type)&&Np[t.type](t,e)}var Ep={Feature:function(t,e){wp(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,r=-1,i=n.length;++r<i;)wp(n[r].geometry,e)}},Np={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)t=n[r],e.point(t[0],t[1],t[2])},LineString:function(t,e){Ip(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)Ip(n[r],e,0)},Polygon:function(t,e){Cp(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)Cp(n[r],e)},GeometryCollection:function(t,e){for(var n=t.geometries,r=-1,i=n.length;++r<i;)wp(n[r],e)}};function Ip(t,e,n){var r,i=-1,o=t.length-n;for(e.lineStart();++i<o;)r=t[i],e.point(r[0],r[1],r[2]);e.lineEnd()}function Cp(t,e){var n=-1,r=t.length;for(e.polygonStart();++n<r;)Ip(t[n],e,1);e.polygonEnd()}function Sp(t,e){t&&Ep.hasOwnProperty(t.type)?Ep[t.type](t,e):wp(t,e)}function Lp(t){return[pp(t[1],t[0]),bp(t[2])]}function Mp(t){var e=t[0],n=t[1],r=fp(n);return[r*fp(e),r*yp(e),yp(n)]}function Op(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function Pp(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function Rp(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function Tp(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function Ap(t){var e=_p(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}function Dp(t,e){function n(n,r){return n=t(n,r),e(n[0],n[1])}return t.invert&&e.invert&&(n.invert=function(n,r){return(n=e.invert(n,r))&&t.invert(n[0],n[1])}),n}function kp(t,e){return lp(t)>rp&&(t-=Math.round(t/ap)*ap),[t,e]}function Fp(t,e,n){return(t%=ap)?e||n?Dp(zp(t),Gp(e,n)):zp(t):e||n?Gp(e,n):kp}function jp(t){return function(e,n){return lp(e+=t)>rp&&(e-=Math.round(e/ap)*ap),[e,n]}}function zp(t){var e=jp(t);return e.invert=jp(-t),e}function Gp(t,e){var n=fp(t),r=yp(t),i=fp(e),o=yp(e);function a(t,e){var a=fp(e),s=fp(t)*a,u=yp(t)*a,l=yp(e),c=l*n+s*r;return[pp(u*i-c*o,s*n-l*r),bp(c*i+u*o)]}return a.invert=function(t,e){var a=fp(e),s=fp(t)*a,u=yp(t)*a,l=yp(e),c=l*i-u*o;return[pp(u*i+l*o,s*n+c*r),bp(c*n-s*r)]},a}function Bp(t,e){(e=Mp(e))[0]-=t,Ap(e);var n,r=(n=-e[1])>1?0:n<-1?rp:Math.acos(n);return((-e[2]<0?-r:r)+ap-ep)%ap}function qp(){var t,e=[];return{point:function(e,n,r){t.push([e,n,r])},lineStart:function(){e.push(t=[])},lineEnd:xp,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function Up(t,e){return lp(t[0]-e[0])<ep&&lp(t[1]-e[1])<ep}function Vp(t,e,n,r){this.x=t,this.z=e,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function Yp(t,e,n,r,i){var o,a,s=[],u=[];if(t.forEach((function(t){if(!((e=t.length-1)<=0)){var e,n,r=t[0],a=t[e];if(Up(r,a)){if(!r[2]&&!a[2]){for(i.lineStart(),o=0;o<e;++o)i.point((r=t[o])[0],r[1]);return void i.lineEnd()}a[0]+=2*ep}s.push(n=new Vp(r,t,null,!0)),u.push(n.o=new Vp(r,null,n,!1)),s.push(n=new Vp(a,t,null,!1)),u.push(n.o=new Vp(a,null,n,!0))}})),s.length){for(u.sort(e),Xp(s),Xp(u),o=0,a=u.length;o<a;++o)u[o].e=n=!n;for(var l,c,p=s[0];;){for(var f=p,h=!0;f.v;)if((f=f.n)===p)return;l=f.z,i.lineStart();do{if(f.v=f.o.v=!0,f.e){if(h)for(o=0,a=l.length;o<a;++o)i.point((c=l[o])[0],c[1]);else r(f.x,f.n.x,1,i);f=f.n}else{if(h)for(l=f.p.z,o=l.length-1;o>=0;--o)i.point((c=l[o])[0],c[1]);else r(f.x,f.p.x,-1,i);f=f.p}l=(f=f.o).z,h=!h}while(!f.v);i.lineEnd()}}}function Xp(t){if(e=t.length){for(var e,n,r=0,i=t[0];++r<e;)i.n=n=t[r],n.p=i,i=n;i.n=n=t[0],n.p=i}}function Hp(t){return lp(t[0])<=rp?t[0]:mp(t[0])*((lp(t[0])+rp)%ap-rp)}function Wp(t,e,n,r){return function(i){var o,a,s,u=e(i),l=qp(),c=e(l),p=!1,f={point:h,lineStart:g,lineEnd:y,polygonStart:function(){f.point=m,f.lineStart=_,f.lineEnd=v,a=[],o=[]},polygonEnd:function(){f.point=h,f.lineStart=g,f.lineEnd=y,a=Qc(a);var t=function(t,e){var n=Hp(e),r=e[1],i=yp(r),o=[yp(n),-fp(n),0],a=0,s=0,u=new Kc;1===i?r=ip+ep:-1===i&&(r=-ip-ep);for(var l=0,c=t.length;l<c;++l)if(f=(p=t[l]).length)for(var p,f,h=p[f-1],d=Hp(h),g=h[1]/2+op,y=yp(g),m=fp(g),_=0;_<f;++_,d=b,y=w,m=E,h=v){var v=p[_],b=Hp(v),x=v[1]/2+op,w=yp(x),E=fp(x),N=b-d,I=N>=0?1:-1,C=I*N,S=C>rp,L=y*w;if(u.add(pp(L*I*yp(C),m*E+L*fp(C))),a+=S?N+I*ap:N,S^d>=n^b>=n){var M=Pp(Mp(h),Mp(v));Ap(M);var O=Pp(o,M);Ap(O);var P=(S^N>=0?-1:1)*bp(O[2]);(r>P||r===P&&(M[0]||M[1]))&&(s+=S^N>=0?1:-1)}}return(a<-ep||a<ep&&u<-np)^1&s}(o,r);a.length?(p||(i.polygonStart(),p=!0),Yp(a,Zp,t,n,i)):t&&(p||(i.polygonStart(),p=!0),i.lineStart(),n(null,null,1,i),i.lineEnd()),p&&(i.polygonEnd(),p=!1),a=o=null},sphere:function(){i.polygonStart(),i.lineStart(),n(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function h(e,n){t(e,n)&&i.point(e,n)}function d(t,e){u.point(t,e)}function g(){f.point=d,u.lineStart()}function y(){f.point=h,u.lineEnd()}function m(t,e){s.push([t,e]),c.point(t,e)}function _(){c.lineStart(),s=[]}function v(){m(s[0][0],s[0][1]),c.lineEnd();var t,e,n,r,u=c.clean(),f=l.result(),h=f.length;if(s.pop(),o.push(s),s=null,h)if(1&u){if((e=(n=f[0]).length-1)>0){for(p||(i.polygonStart(),p=!0),i.lineStart(),t=0;t<e;++t)i.point((r=n[t])[0],r[1]);i.lineEnd()}}else h>1&&2&u&&f.push(f.pop().concat(f.shift())),a.push(f.filter($p))}return f}}function $p(t){return t.length>1}function Zp(t,e){return((t=t.x)[0]<0?t[1]-ip-ep:ip-t[1])-((e=e.x)[0]<0?e[1]-ip-ep:ip-e[1])}kp.invert=kp;var Jp=Wp((function(){return!0}),(function(t){var e,n=NaN,r=NaN,i=NaN;return{lineStart:function(){t.lineStart(),e=1},point:function(o,a){var s=o>0?rp:-rp,u=lp(o-n);lp(u-rp)<ep?(t.point(n,r=(r+a)/2>0?ip:-ip),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(s,r),t.point(o,r),e=0):i!==s&&u>=rp&&(lp(n-i)<ep&&(n-=i*ep),lp(o-s)<ep&&(o-=s*ep),r=function(t,e,n,r){var i,o,a=yp(t-n);return lp(a)>ep?cp((yp(e)*(o=fp(r))*yp(n)-yp(r)*(i=fp(e))*yp(t))/(i*o*a)):(e+r)/2}(n,r,o,a),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(s,r),e=0),t.point(n=o,r=a),i=s},lineEnd:function(){t.lineEnd(),n=r=NaN},clean:function(){return 2-e}}}),(function(t,e,n,r){var i;if(null==t)i=n*ip,r.point(-rp,i),r.point(0,i),r.point(rp,i),r.point(rp,0),r.point(rp,-i),r.point(0,-i),r.point(-rp,-i),r.point(-rp,0),r.point(-rp,i);else if(lp(t[0]-e[0])>ep){var o=t[0]<e[0]?rp:-rp;i=n*o/2,r.point(-o,i),r.point(0,i),r.point(o,i)}else r.point(e[0],e[1])}),[-rp,-ip]);function Kp(t){var e=fp(t),n=6*up,r=e>0,i=lp(e)>ep;function o(t,n){return fp(t)*fp(n)>e}function a(t,n,r){var i=[1,0,0],o=Pp(Mp(t),Mp(n)),a=Op(o,o),s=o[0],u=a-s*s;if(!u)return!r&&t;var l=e*a/u,c=-e*s/u,p=Pp(i,o),f=Tp(i,l);Rp(f,Tp(o,c));var h=p,d=Op(f,h),g=Op(h,h),y=d*d-g*(Op(f,f)-1);if(!(y<0)){var m=_p(y),_=Tp(h,(-d-m)/g);if(Rp(_,f),_=Lp(_),!r)return _;var v,b=t[0],x=n[0],w=t[1],E=n[1];x<b&&(v=b,b=x,x=v);var N=x-b,I=lp(N-rp)<ep;if(!I&&E<w&&(v=w,w=E,E=v),I||N<ep?I?w+E>0^_[1]<(lp(_[0]-b)<ep?w:E):w<=_[1]&&_[1]<=E:N>rp^(b<=_[0]&&_[0]<=x)){var C=Tp(h,(-d+m)/g);return Rp(C,f),[_,Lp(C)]}}}function s(e,n){var i=r?t:rp-t,o=0;return e<-i?o|=1:e>i&&(o|=2),n<-i?o|=4:n>i&&(o|=8),o}return Wp(o,(function(t){var e,n,u,l,c;return{lineStart:function(){l=u=!1,c=1},point:function(p,f){var h,d=[p,f],g=o(p,f),y=r?g?0:s(p,f):g?s(p+(p<0?rp:-rp),f):0;if(!e&&(l=u=g)&&t.lineStart(),g!==u&&(!(h=a(e,d))||Up(e,h)||Up(d,h))&&(d[2]=1),g!==u)c=0,g?(t.lineStart(),h=a(d,e),t.point(h[0],h[1])):(h=a(e,d),t.point(h[0],h[1],2),t.lineEnd()),e=h;else if(i&&e&&r^g){var m;y&n||!(m=a(d,e,!0))||(c=0,r?(t.lineStart(),t.point(m[0][0],m[0][1]),t.point(m[1][0],m[1][1]),t.lineEnd()):(t.point(m[1][0],m[1][1]),t.lineEnd(),t.lineStart(),t.point(m[0][0],m[0][1],3)))}!g||e&&Up(e,d)||t.point(d[0],d[1]),e=d,u=g,n=y},lineEnd:function(){u&&t.lineEnd(),e=null},clean:function(){return c|(l&&u)<<1}}}),(function(e,r,i,o){!function(t,e,n,r,i,o){if(n){var a=fp(e),s=yp(e),u=r*n;null==i?(i=e+r*ap,o=e-u/2):(i=Bp(a,i),o=Bp(a,o),(r>0?i<o:i>o)&&(i+=r*ap));for(var l,c=i;r>0?c>o:c<o;c-=u)l=Lp([a,-s*fp(c),-s*yp(c)]),t.point(l[0],l[1])}}(o,t,n,i,e,r)}),r?[0,-t]:[-rp,t-rp])}var Qp=1e9,tf=-Qp;function ef(t,e,n,r){function i(i,o){return t<=i&&i<=n&&e<=o&&o<=r}function o(i,o,s,l){var c=0,p=0;if(null==i||(c=a(i,s))!==(p=a(o,s))||u(i,o)<0^s>0)do{l.point(0===c||3===c?t:n,c>1?r:e)}while((c=(c+s+4)%4)!==p);else l.point(o[0],o[1])}function a(r,i){return lp(r[0]-t)<ep?i>0?0:3:lp(r[0]-n)<ep?i>0?2:1:lp(r[1]-e)<ep?i>0?1:0:i>0?3:2}function s(t,e){return u(t.x,e.x)}function u(t,e){var n=a(t,1),r=a(e,1);return n!==r?n-r:0===n?e[1]-t[1]:1===n?t[0]-e[0]:2===n?t[1]-e[1]:e[0]-t[0]}return function(a){var u,l,c,p,f,h,d,g,y,m,_,v=a,b=qp(),x={point:w,lineStart:function(){x.point=E,l&&l.push(c=[]);m=!0,y=!1,d=g=NaN},lineEnd:function(){u&&(E(p,f),h&&y&&b.rejoin(),u.push(b.result()));x.point=w,y&&v.lineEnd()},polygonStart:function(){v=b,u=[],l=[],_=!0},polygonEnd:function(){var e=function(){for(var e=0,n=0,i=l.length;n<i;++n)for(var o,a,s=l[n],u=1,c=s.length,p=s[0],f=p[0],h=p[1];u<c;++u)o=f,a=h,f=(p=s[u])[0],h=p[1],a<=r?h>r&&(f-o)*(r-a)>(h-a)*(t-o)&&++e:h<=r&&(f-o)*(r-a)<(h-a)*(t-o)&&--e;return e}(),n=_&&e,i=(u=Qc(u)).length;(n||i)&&(a.polygonStart(),n&&(a.lineStart(),o(null,null,1,a),a.lineEnd()),i&&Yp(u,s,e,o,a),a.polygonEnd());v=a,u=l=c=null}};function w(t,e){i(t,e)&&v.point(t,e)}function E(o,a){var s=i(o,a);if(l&&c.push([o,a]),m)p=o,f=a,h=s,m=!1,s&&(v.lineStart(),v.point(o,a));else if(s&&y)v.point(o,a);else{var u=[d=Math.max(tf,Math.min(Qp,d)),g=Math.max(tf,Math.min(Qp,g))],b=[o=Math.max(tf,Math.min(Qp,o)),a=Math.max(tf,Math.min(Qp,a))];!function(t,e,n,r,i,o){var a,s=t[0],u=t[1],l=0,c=1,p=e[0]-s,f=e[1]-u;if(a=n-s,p||!(a>0)){if(a/=p,p<0){if(a<l)return;a<c&&(c=a)}else if(p>0){if(a>c)return;a>l&&(l=a)}if(a=i-s,p||!(a<0)){if(a/=p,p<0){if(a>c)return;a>l&&(l=a)}else if(p>0){if(a<l)return;a<c&&(c=a)}if(a=r-u,f||!(a>0)){if(a/=f,f<0){if(a<l)return;a<c&&(c=a)}else if(f>0){if(a>c)return;a>l&&(l=a)}if(a=o-u,f||!(a<0)){if(a/=f,f<0){if(a>c)return;a>l&&(l=a)}else if(f>0){if(a<l)return;a<c&&(c=a)}return l>0&&(t[0]=s+l*p,t[1]=u+l*f),c<1&&(e[0]=s+c*p,e[1]=u+c*f),!0}}}}}(u,b,t,e,n,r)?s&&(v.lineStart(),v.point(o,a),_=!1):(y||(v.lineStart(),v.point(u[0],u[1])),v.point(b[0],b[1]),s||v.lineEnd(),_=!1)}d=o,g=a,y=s}return x}}function nf(t,e,n){var r=tp(t,e-ep,n).concat(e);return function(t){return r.map((function(e){return[t,e]}))}}function rf(t,e,n){var r=tp(t,e-ep,n).concat(e);return function(t){return r.map((function(e){return[e,t]}))}}var of,af,sf,uf,lf=t=>t,cf=new Kc,pf=new Kc,ff={point:xp,lineStart:xp,lineEnd:xp,polygonStart:function(){ff.lineStart=hf,ff.lineEnd=yf},polygonEnd:function(){ff.lineStart=ff.lineEnd=ff.point=xp,cf.add(lp(pf)),pf=new Kc},result:function(){var t=cf/2;return cf=new Kc,t}};function hf(){ff.point=df}function df(t,e){ff.point=gf,of=sf=t,af=uf=e}function gf(t,e){pf.add(uf*t-sf*e),sf=t,uf=e}function yf(){gf(of,af)}var mf=ff,_f=1/0,vf=_f,bf=-_f,xf=bf,wf={point:function(t,e){t<_f&&(_f=t);t>bf&&(bf=t);e<vf&&(vf=e);e>xf&&(xf=e)},lineStart:xp,lineEnd:xp,polygonStart:xp,polygonEnd:xp,result:function(){var t=[[_f,vf],[bf,xf]];return bf=xf=-(vf=_f=1/0),t}};var Ef,Nf,If,Cf,Sf=wf,Lf=0,Mf=0,Of=0,Pf=0,Rf=0,Tf=0,Af=0,Df=0,kf=0,Ff={point:jf,lineStart:zf,lineEnd:qf,polygonStart:function(){Ff.lineStart=Uf,Ff.lineEnd=Vf},polygonEnd:function(){Ff.point=jf,Ff.lineStart=zf,Ff.lineEnd=qf},result:function(){var t=kf?[Af/kf,Df/kf]:Tf?[Pf/Tf,Rf/Tf]:Of?[Lf/Of,Mf/Of]:[NaN,NaN];return Lf=Mf=Of=Pf=Rf=Tf=Af=Df=kf=0,t}};function jf(t,e){Lf+=t,Mf+=e,++Of}function zf(){Ff.point=Gf}function Gf(t,e){Ff.point=Bf,jf(If=t,Cf=e)}function Bf(t,e){var n=t-If,r=e-Cf,i=_p(n*n+r*r);Pf+=i*(If+t)/2,Rf+=i*(Cf+e)/2,Tf+=i,jf(If=t,Cf=e)}function qf(){Ff.point=jf}function Uf(){Ff.point=Yf}function Vf(){Xf(Ef,Nf)}function Yf(t,e){Ff.point=Xf,jf(Ef=If=t,Nf=Cf=e)}function Xf(t,e){var n=t-If,r=e-Cf,i=_p(n*n+r*r);Pf+=i*(If+t)/2,Rf+=i*(Cf+e)/2,Tf+=i,Af+=(i=Cf*t-If*e)*(If+t),Df+=i*(Cf+e),kf+=3*i,jf(If=t,Cf=e)}var Hf=Ff;function Wf(t){this._context=t}Wf.prototype={_radius:4.5,pointRadius:function(t){return this._radius=t,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(t,e){switch(this._point){case 0:this._context.moveTo(t,e),this._point=1;break;case 1:this._context.lineTo(t,e);break;default:this._context.moveTo(t+this._radius,e),this._context.arc(t,e,this._radius,0,ap)}},result:xp};var $f,Zf,Jf,Kf,Qf,th=new Kc,eh={point:xp,lineStart:function(){eh.point=nh},lineEnd:function(){$f&&rh(Zf,Jf),eh.point=xp},polygonStart:function(){$f=!0},polygonEnd:function(){$f=null},result:function(){var t=+th;return th=new Kc,t}};function nh(t,e){eh.point=rh,Zf=Kf=t,Jf=Qf=e}function rh(t,e){Kf-=t,Qf-=e,th.add(_p(Kf*Kf+Qf*Qf)),Kf=t,Qf=e}var ih,oh,ah,sh,uh=eh;function lh(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}let ch,ph,fh,hh;class dh{constructor(t){this._append=null==t?gh:function(t){const e=Math.floor(t);if(!(e>=0))throw new RangeError("invalid digits: ".concat(t));if(e>15)return gh;if(e!==ch){const t=10**e;ch=e,ph=function(e){let n=1;this._+=e[0];for(const r=e.length;n<r;++n)this._+=Math.round(arguments[n]*t)/t+e[n]}}return ph}(t),this._radius=4.5,this._=""}pointRadius(t){return this._radius=+t,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){0===this._line&&(this._+="Z"),this._point=NaN}point(t,e){switch(this._point){case 0:this._append(ih||(ih=lh(["M",",",""])),t,e),this._point=1;break;case 1:this._append(oh||(oh=lh(["L",",",""])),t,e);break;default:if(this._append(ah||(ah=lh(["M",",",""])),t,e),this._radius!==fh||this._append!==ph){const t=this._radius,e=this._;this._="",this._append(sh||(sh=lh(["m0,","a",","," 0 1,1 0,","a",","," 0 1,1 0,","z"])),t,t,t,-2*t,t,t,2*t),fh=t,ph=this._append,hh=this._,this._=e}this._+=hh}}result(){const t=this._;return this._="",t.length?t:null}}function gh(t){let e=1;this._+=t[0];for(const n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function yh(t,e){let n,r,i=3,o=4.5;function a(t){return t&&("function"==typeof o&&r.pointRadius(+o.apply(this,arguments)),Sp(t,n(r))),r.result()}return a.area=function(t){return Sp(t,n(mf)),mf.result()},a.measure=function(t){return Sp(t,n(uh)),uh.result()},a.bounds=function(t){return Sp(t,n(Sf)),Sf.result()},a.centroid=function(t){return Sp(t,n(Hf)),Hf.result()},a.projection=function(e){return arguments.length?(n=null==e?(t=null,lf):(t=e).stream,a):t},a.context=function(t){return arguments.length?(r=null==t?(e=null,new dh(i)):new Wf(e=t),"function"!=typeof o&&r.pointRadius(o),a):e},a.pointRadius=function(t){return arguments.length?(o="function"==typeof t?t:(r.pointRadius(+t),+t),a):o},a.digits=function(t){if(!arguments.length)return i;if(null==t)i=null;else{const e=Math.floor(t);if(!(e>=0))throw new RangeError("invalid digits: ".concat(t));i=e}return null===e&&(r=new dh(i)),a},a.projection(t).digits(i).context(e)}function mh(t){return function(e){var n=new _h;for(var r in t)n[r]=t[r];return n.stream=e,n}}function _h(){}function vh(t,e,n){var r=t.clipExtent&&t.clipExtent();return t.scale(150).translate([0,0]),null!=r&&t.clipExtent(null),Sp(n,t.stream(Sf)),e(Sf.result()),null!=r&&t.clipExtent(r),t}function bh(t,e,n){return vh(t,(function(n){var r=e[1][0]-e[0][0],i=e[1][1]-e[0][1],o=Math.min(r/(n[1][0]-n[0][0]),i/(n[1][1]-n[0][1])),a=+e[0][0]+(r-o*(n[1][0]+n[0][0]))/2,s=+e[0][1]+(i-o*(n[1][1]+n[0][1]))/2;t.scale(150*o).translate([a,s])}),n)}_h.prototype={constructor:_h,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var xh=16,wh=fp(30*up);function Eh(t,e){return+e?function(t,e){function n(r,i,o,a,s,u,l,c,p,f,h,d,g,y){var m=l-r,_=c-i,v=m*m+_*_;if(v>4*e&&g--){var b=a+f,x=s+h,w=u+d,E=_p(b*b+x*x+w*w),N=bp(w/=E),I=lp(lp(w)-1)<ep||lp(o-p)<ep?(o+p)/2:pp(x,b),C=t(I,N),S=C[0],L=C[1],M=S-r,O=L-i,P=_*M-m*O;(P*P/v>e||lp((m*M+_*O)/v-.5)>.3||a*f+s*h+u*d<wh)&&(n(r,i,o,a,s,u,S,L,I,b/=E,x/=E,w,g,y),y.point(S,L),n(S,L,I,b,x,w,l,c,p,f,h,d,g,y))}}return function(e){var r,i,o,a,s,u,l,c,p,f,h,d,g={point:y,lineStart:m,lineEnd:v,polygonStart:function(){e.polygonStart(),g.lineStart=b},polygonEnd:function(){e.polygonEnd(),g.lineStart=m}};function y(n,r){n=t(n,r),e.point(n[0],n[1])}function m(){c=NaN,g.point=_,e.lineStart()}function _(r,i){var o=Mp([r,i]),a=t(r,i);n(c,p,l,f,h,d,c=a[0],p=a[1],l=r,f=o[0],h=o[1],d=o[2],xh,e),e.point(c,p)}function v(){g.point=y,e.lineEnd()}function b(){m(),g.point=x,g.lineEnd=w}function x(t,e){_(r=t,e),i=c,o=p,a=f,s=h,u=d,g.point=_}function w(){n(c,p,l,f,h,d,i,o,r,a,s,u,xh,e),g.lineEnd=v,v()}return g}}(t,e):function(t){return mh({point:function(e,n){e=t(e,n),this.stream.point(e[0],e[1])}})}(t)}var Nh=mh({point:function(t,e){this.stream.point(t*up,e*up)}});function Ih(t,e,n,r,i,o){if(!o)return function(t,e,n,r,i){function o(o,a){return[e+t*(o*=r),n-t*(a*=i)]}return o.invert=function(o,a){return[(o-e)/t*r,(n-a)/t*i]},o}(t,e,n,r,i);var a=fp(o),s=yp(o),u=a*t,l=s*t,c=a/t,p=s/t,f=(s*n-a*e)/t,h=(s*e+a*n)/t;function d(t,o){return[u*(t*=r)-l*(o*=i)+e,n-l*t-u*o]}return d.invert=function(t,e){return[r*(c*t-p*e+f),i*(h-p*t-c*e)]},d}function Ch(t){return Sh((function(){return t}))()}function Sh(t){var e,n,r,i,o,a,s,u,l,c,p=150,f=480,h=250,d=0,g=0,y=0,m=0,_=0,v=0,b=1,x=1,w=null,E=Jp,N=null,I=lf,C=.5;function S(t){return u(t[0]*up,t[1]*up)}function L(t){return(t=u.invert(t[0],t[1]))&&[t[0]*sp,t[1]*sp]}function M(){var t=Ih(p,0,0,b,x,v).apply(null,e(d,g)),r=Ih(p,f-t[0],h-t[1],b,x,v);return n=Fp(y,m,_),s=Dp(e,r),u=Dp(n,s),a=Eh(s,C),O()}function O(){return l=c=null,S}return S.stream=function(t){return l&&c===t?l:l=Nh(function(t){return mh({point:function(e,n){var r=t(e,n);return this.stream.point(r[0],r[1])}})}(n)(E(a(I(c=t)))))},S.preclip=function(t){return arguments.length?(E=t,w=void 0,O()):E},S.postclip=function(t){return arguments.length?(I=t,N=r=i=o=null,O()):I},S.clipAngle=function(t){return arguments.length?(E=+t?Kp(w=t*up):(w=null,Jp),O()):w*sp},S.clipExtent=function(t){return arguments.length?(I=null==t?(N=r=i=o=null,lf):ef(N=+t[0][0],r=+t[0][1],i=+t[1][0],o=+t[1][1]),O()):null==N?null:[[N,r],[i,o]]},S.scale=function(t){return arguments.length?(p=+t,M()):p},S.translate=function(t){return arguments.length?(f=+t[0],h=+t[1],M()):[f,h]},S.center=function(t){return arguments.length?(d=t[0]%360*up,g=t[1]%360*up,M()):[d*sp,g*sp]},S.rotate=function(t){return arguments.length?(y=t[0]%360*up,m=t[1]%360*up,_=t.length>2?t[2]%360*up:0,M()):[y*sp,m*sp,_*sp]},S.angle=function(t){return arguments.length?(v=t%360*up,M()):v*sp},S.reflectX=function(t){return arguments.length?(b=t?-1:1,M()):b<0},S.reflectY=function(t){return arguments.length?(x=t?-1:1,M()):x<0},S.precision=function(t){return arguments.length?(a=Eh(s,C=t*t),O()):_p(C)},S.fitExtent=function(t,e){return bh(S,t,e)},S.fitSize=function(t,e){return function(t,e,n){return bh(t,[[0,0],e],n)}(S,t,e)},S.fitWidth=function(t,e){return function(t,e,n){return vh(t,(function(n){var r=+e,i=r/(n[1][0]-n[0][0]),o=(r-i*(n[1][0]+n[0][0]))/2,a=-i*n[0][1];t.scale(150*i).translate([o,a])}),n)}(S,t,e)},S.fitHeight=function(t,e){return function(t,e,n){return vh(t,(function(n){var r=+e,i=r/(n[1][1]-n[0][1]),o=-i*n[0][0],a=(r-i*(n[1][1]+n[0][1]))/2;t.scale(150*i).translate([o,a])}),n)}(S,t,e)},function(){return e=t.apply(this,arguments),S.invert=e.invert&&L,M()}}var Lh,Mh,Oh=(Lh=function(t){return _p(2/(1+t))},function(t,e){var n=fp(t),r=fp(e),i=Lh(n*r);return i===1/0?[2,0]:[i*r*yp(t),i*yp(e)]});function Ph(){return Ch(Oh).scale(124.75).clipAngle(179.999)}function Rh(t,e){return[t,gp(vp((ip+e)/2))]}function Th(t){var e,n,r,i=Ch(t),o=i.center,a=i.scale,s=i.translate,u=i.clipExtent,l=null;function c(){var o=rp*a(),s=i(function(t){function e(e){return(e=t(e[0]*up,e[1]*up))[0]*=sp,e[1]*=sp,e}return t=Fp(t[0]*up,t[1]*up,t.length>2?t[2]*up:0),e.invert=function(e){return(e=t.invert(e[0]*up,e[1]*up))[0]*=sp,e[1]*=sp,e},e}(i.rotate()).invert([0,0]));return u(null==l?[[s[0]-o,s[1]-o],[s[0]+o,s[1]+o]]:t===Rh?[[Math.max(s[0]-o,l),e],[Math.min(s[0]+o,n),r]]:[[l,Math.max(s[1]-o,e)],[n,Math.min(s[1]+o,r)]])}return i.scale=function(t){return arguments.length?(a(t),c()):a()},i.translate=function(t){return arguments.length?(s(t),c()):s()},i.center=function(t){return arguments.length?(o(t),c()):o()},i.clipExtent=function(t){return arguments.length?(null==t?l=e=n=r=null:(l=+t[0][0],e=+t[0][1],n=+t[1][0],r=+t[1][1]),c()):null==l?null:[[l,e],[n,r]]},c()}function Ah(t,e){return[gp(vp((ip+e)/2)),-t]}function Dh(t,e,n){var r=(n=n||{}).units,i=n.steps||64;if(!t)throw new Error("geojson is required");if("object"!=typeof n)throw new Error("options must be an object");if("number"!=typeof i)throw new Error("steps must be an number");if(void 0===e)throw new Error("radius is required");if(i<=0)throw new Error("steps must be greater than 0");i=i||64,r=r||"kilometers";var o=[];switch(t.type){case"GeometryCollection":return Jc(t,(function(t){var n=kh(t,e,r);n&&o.push(n)})),Xc(o);case"FeatureCollection":return Zc(t,(function(t){var n=kh(t,e,r);n&&Zc(n,(function(t){t&&o.push(t)}))})),Xc(o)}return kh(t,e,r)}function kh(t,e,n,r){var i,o=t.properties||{},a="Feature"===t.type?t.geometry:t;if("GeometryCollection"===a.type){var s=[];return Jc(t,(function(t){var r=kh(t,e,n);r&&s.push(r)})),Xc(s)}var u=Mc(t),l=u[1]>50&&u[3]>50;i=l?{type:a.type,coordinates:jh(a.coordinates,Gh(a))}:function(t,e){return void 0===e&&(e={}),Bc(t,"mercator",e)}(a);var c,p=(new Dc.GeoJSONReader).read(i),f=function(t,e){if(null==t)throw new Error("radians is required");if(e&&"string"!=typeof e)throw new Error("units must be a string");var n=Yc[e||"kilometers"];if(!n)throw new Error(e+" units is invalid");return t*n}(function(t,e){if(null==t)throw new Error("distance is required");if(e&&"string"!=typeof e)throw new Error("units must be a string");var n=Yc[e||"kilometers"];if(!n)throw new Error(e+" units is invalid");return t/n}(e,n),"meters"),h=Dc.BufferOp.bufferOp(p,f);if(!Fh((h=(new Dc.GeoJSONWriter).write(h)).coordinates))return c=l?{type:h.type,coordinates:zh(h.coordinates,Gh(a))}:function(t,e){return void 0===e&&(e={}),Bc(t,"wgs84",e)}(h),c.geometry?c:function(t,e,n){if(!Hc(n=n||{}))throw new Error("options is invalid");var r=n.bbox,i=n.id;if(void 0===t)throw new Error("geometry is required");if(e&&e.constructor!==Object)throw new Error("properties must be an Object");r&&Wc(r),i&&$c(i);var o={type:"Feature"};return i&&(o.id=i),r&&(o.bbox=r),o.properties=e||{},o.geometry=t,o}(c,o)}function Fh(t){return Array.isArray(t[0])?Fh(t[0]):isNaN(t[0])}function jh(t,e){return"object"!=typeof t[0]?e(t):t.map((function(t){return jh(t,e)}))}function zh(t,e){return"object"!=typeof t[0]?e.invert(t):t.map((function(t){return zh(t,e)}))}function Gh(t){var e=Tc(t).geometry.coordinates.reverse(),n=e.map((function(t){return-t}));return function(){var t=Th(Ah),e=t.center,n=t.rotate;return t.center=function(t){return arguments.length?e([-t[1],t[0]]):[(t=e())[1],-t[0]]},t.rotate=function(t){return arguments.length?n([t[0],t[1],t.length>2?t[2]+90:90]):[(t=n())[0],t[1],t[2]-90]},n([0,0,90]).scale(159.155)}().center(e).rotate(n).scale(Vc)}function Bh(t){if(!t)throw new Error("geojson is required");switch(t.type){case"Feature":return qh(t);case"FeatureCollection":return function(t){var e={type:"FeatureCollection"};return Object.keys(t).forEach((function(n){switch(n){case"type":case"features":return;default:e[n]=t[n]}})),e.features=t.features.map((function(t){return qh(t)})),e}(t);case"Point":case"LineString":case"Polygon":case"MultiPoint":case"MultiLineString":case"MultiPolygon":case"GeometryCollection":return Vh(t);default:throw new Error("unknown GeoJSON type")}}function qh(t){var e={type:"Feature"};return Object.keys(t).forEach((function(n){switch(n){case"type":case"properties":case"geometry":return;default:e[n]=t[n]}})),e.properties=Uh(t.properties),e.geometry=Vh(t.geometry),e}function Uh(t){var e={};return t?(Object.keys(t).forEach((function(n){var r=t[n];"object"==typeof r?null===r?e[n]=null:r.length?e[n]=r.map((function(t){return t})):e[n]=Uh(r):e[n]=r})),e):e}function Vh(t){var e={type:t.type};return t.bbox&&(e.bbox=t.bbox),"GeometryCollection"===t.type?(e.geometries=t.geometries.map((function(t){return Vh(t)})),e):(e.coordinates=Yh(t.coordinates),e)}function Yh(t){return"object"!=typeof t[0]?t.slice():t.map((function(t){return Yh(t)}))}function Xh(t){if(!t)throw new Error("line is required");var e=t.geometry?t.geometry.type:t.type;if(!Array.isArray(t)&&"LineString"!==e)throw new Error("geometry must be a LineString");for(var n,r,i=function(t){if(!t)throw new Error("coords is required");if("Feature"===t.type&&null!==t.geometry)return t.geometry.coordinates;if(t.coordinates)return t.coordinates;if(Array.isArray(t))return t;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}(t),o=0,a=1;a<i.length;)n=r||i[0],o+=((r=i[a])[0]-n[0])*(r[1]+n[1]),a++;return o>0}function Hh(t,e){if(!Wh(e=e||{}))throw new Error("options is invalid");var n=e.bbox,r=e.id;if(!t)throw new Error("No features passed");if(!Array.isArray(t))throw new Error("features must be an Array");n&&function(t){if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be an Array");if(4!==t.length&&6!==t.length)throw new Error("bbox must be an Array of 4 or 6 numbers");t.forEach((function(t){if(!function(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)}(t))throw new Error("bbox must only contain numbers")}))}(n),r&&function(t){if(!t)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof t))throw new Error("id must be a number or a string")}(r);var i={type:"FeatureCollection"};return r&&(i.id=r),n&&(i.bbox=n),i.features=t,i}function Wh(t){return!!t&&t.constructor===Object}function $h(t,e){if("Feature"===t.type)e(t,0);else if("FeatureCollection"===t.type)for(var n=0;n<t.features.length&&!1!==e(t.features[n],n);n++);}function Zh(t,e){var n,r,i,o,a,s,u,l,c,p,f=0,h="FeatureCollection"===t.type,d="Feature"===t.type,g=h?t.features.length:1;for(n=0;n<g;n++){for(s=h?t.features[n].geometry:d?t.geometry:t,l=h?t.features[n].properties:d?t.properties:{},c=h?t.features[n].bbox:d?t.bbox:void 0,p=h?t.features[n].id:d?t.id:void 0,a=(u=!!s&&"GeometryCollection"===s.type)?s.geometries.length:1,i=0;i<a;i++)if(null!==(o=u?s.geometries[i]:s))switch(o.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===e(o,f,l,c,p))return!1;break;case"GeometryCollection":for(r=0;r<o.geometries.length;r++)if(!1===e(o.geometries[r],f,l,c,p))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===e(null,f,l,c,p))return!1;f++}}function Jh(t){if(!t)throw new Error("coords is required");if("Feature"===t.type&&null!==t.geometry)return t.geometry.coordinates;if(t.coordinates)return t.coordinates;if(Array.isArray(t))return t;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}function Kh(t,e){if(!Wh(e=e||{}))throw new Error("options is invalid");var n=e.reverse||!1,r=e.mutate||!1;if(!t)throw new Error("<geojson> is required");if("boolean"!=typeof n)throw new Error("<reverse> must be a boolean");if("boolean"!=typeof r)throw new Error("<mutate> must be a boolean");!1===r&&(t=Bh(t));var i=[];switch(t.type){case"GeometryCollection":return Zh(t,(function(t){Qh(t,n)})),t;case"FeatureCollection":return $h(t,(function(t){$h(Qh(t,n),(function(t){i.push(t)}))})),Hh(i)}return Qh(t,n)}function Qh(t,e){switch("Feature"===t.type?t.geometry.type:t.type){case"GeometryCollection":return Zh(t,(function(t){Qh(t,e)})),t;case"LineString":return td(Jh(t),e),t;case"Polygon":return ed(Jh(t),e),t;case"MultiLineString":return Jh(t).forEach((function(t){td(t,e)})),t;case"MultiPolygon":return Jh(t).forEach((function(t){ed(t,e)})),t;case"Point":case"MultiPoint":return t}}function td(t,e){Xh(t)===e&&t.reverse()}function ed(t,e){Xh(t[0])!==e&&t[0].reverse();for(var n=1;n<t.length;n++)Xh(t[n])===e&&t[n].reverse()}function nd(){for(var t=new Dc.GeoJSONReader,e=t.read(JSON.stringify(arguments[0].geometry)),n=1;n<arguments.length;n++)e=Dc.UnionOp.union(e,t.read(JSON.stringify(arguments[n].geometry)));return{type:"Feature",geometry:e=(new Dc.GeoJSONWriter).write(e),properties:arguments[0].properties}}Oh.invert=(Mh=function(t){return 2*bp(t/2)},function(t,e){var n=_p(t*t+e*e),r=Mh(n),i=yp(r),o=fp(r);return[pp(t*i,n*o),bp(n&&e*i/n)]}),Rh.invert=function(t,e){return[t,2*cp(dp(e))-ip]},Ah.invert=function(t,e){return[-e,2*cp(dp(t))-ip]};var rd=function(t,e,n,r){for(var i=-1,o=null==t?0:t.length;++i<o;){var a=t[i];e(r,a,n(a),t)}return r},id=kn,od=Wo;var ad=function(t,e){return t&&id(t,e,od)},sd=mr;var ud=function(t,e){return function(n,r){if(null==n)return n;if(!sd(n))return t(n,r);for(var i=n.length,o=e?i:-1,a=Object(n);(e?o--:++o<i)&&!1!==r(a[o],o,a););return n}}(ad);var ld=rd,cd=function(t,e,n,r){return ud(t,(function(t,i,o){e(r,t,n(t),o)})),r},pd=pu,fd=hr;var hd=function(t,e){return function(n,r){var i=fd(n)?ld:cd,o=e?e():{};return i(n,t,pd(r),o)}},dd=Pn,gd=hd,yd=Object.prototype.hasOwnProperty,md=ft(gd((function(t,e,n){yd.call(t,n)?t[n].push(e):dd(t,n,[e])}))),_d=Math.ceil,vd=Math.max;var bd=function(t,e,n,r){for(var i=-1,o=vd(_d((e-t)/(n||1)),0),a=Array(o);o--;)a[r?o:++i]=t,t+=n;return a},xd=Ki,wd=Ou;var Ed=ft(function(t){return function(e,n,r){return r&&"number"!=typeof r&&xd(e,n,r)&&(n=r=void 0),e=wd(e),void 0===n?(n=e,e=0):n=wd(n),r=void 0===r?e<n?1:-1:wd(r),bd(e,n,r,t)}}());var Nd=yu,Id=function(t){return t!=t},Cd=function(t,e,n){for(var r=n-1,i=t.length;++r<i;)if(t[r]===e)return r;return-1};var Sd=function(t,e,n){return e==e?Cd(t,e,n):Nd(t,Id,n)};var Ld=function(t,e){return!!(null==t?0:t.length)&&Sd(t,e,0)>-1};var Md=function(t,e,n){for(var r=-1,i=null==t?0:t.length;++r<i;)if(n(e,t[r]))return!0;return!1};var Od=ia,Pd=function(){},Rd=Od&&1/bo(new Od([,-0]))[1]==1/0?function(t){return new Od(t)}:Pd,Td=ho,Ad=Ld,Dd=Md,kd=go,Fd=Rd,jd=bo;var zd=function(t,e,n){var r=-1,i=Ad,o=t.length,a=!0,s=[],u=s;if(n)a=!1,i=Dd;else if(o>=200){var l=e?null:Fd(t);if(l)return jd(l);a=!1,i=kd,u=new Td}else u=e?[]:s;t:for(;++r<o;){var c=t[r],p=e?e(c):c;if(c=n||0!==c?c:0,a&&p==p){for(var f=u.length;f--;)if(u[f]===p)continue t;e&&u.push(p),s.push(c)}else i(u,p,n)||(u!==s&&u.push(p),s.push(c))}return s},Gd=zd;var Bd=ft((function(t){return t&&t.length?Gd(t):[]})),qd=za;var Ud=ft((function(t,e){return qd(t,e)}));function Vd(t){let{map:e,images:n,prevIds:r}=t;const i=new Set;for(const{id:t,...r}of n)e.hasImage(t)?e.updateImage(t,r):e.addImage(t,r),i.add(t);for(const t of r)!i.has(t)&&e.hasImage(t)&&e.removeImage(t);return i}function Yd(t){let{map:e,sources:n,prevIds:r}=t;const i=new Set;for(const{id:t,...r}of n){const n=e.getSource(t);n?n.setData(r.data):e.addSource(t,r),i.add(t)}for(const t of r)if(!i.has(t)&&e.getSource(t)){const n=e.getStyle().layers.filter((e=>e.source===t));for(const t of n)e.removeLayer(t.id);e.removeSource(t)}return i}function Xd(t){return null==t?arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0:void 0!==t.from?void 0!==t.from.name?t.from.name:t.from:void 0!==t.r&&void 0!==t.g&&void 0!==t.b?t.toString():t}function Hd(t,e,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0;const i=t.getLayer(e);return Xd(i&&i.layout&&i.layout._values[n],r)}function Wd(t,e,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0;const o=t.getLayer(e);return Xd(o&&o.layout&&o.layout._values[n]&&o.layout._values[n].evaluate(r),i)}function $d(t,e,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0;const i=t.getLayer(e);return Xd(i&&i.paint&&i.paint._values[n],r)}function Zd(t,e,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0;const o=t.getLayer(e);return Xd(o&&o.paint&&o.paint._values[n]&&o.paint._values[n].evaluate(r),i)}const Jd=new Map;function Kd(t,e){return!!t.layout&&void 0!==t.layout[e]}function Qd(t,e){return!!t.paint&&void 0!==t.paint[e]}function tg(t,e){const n=t.getLayer(e);return!!n&&"none"!==n.visibility}function eg(t){switch(t.type){case"Feature":return t;case"FeatureCollection":return{type:"Feature",geometry:{type:"GeometryCollection",geometries:t.features.map((t=>t.geometry))},properties:t.properties};default:return{type:"Feature",geometry:t,properties:{}}}}function ng(t){return"GeometryCollection"===t.geometry.type?t.geometry.geometries.map((e=>({...t,geometry:e}))):[t]}function rg(t){return t.properties.osm_id||t.properties.dw_id||t.properties.marker_id||t.id}function ig(t,e){return t.properties.osm_id&&t.properties.osm_id===e.properties.osm_id||t.properties.dw_id&&t.properties.dw_id===e.properties.dw_id||t.properties.marker_id&&t.properties.marker_id===e.properties.marker_id||t.id&&t.id===e.id||t.properties.name&&t.properties.name===e.properties.name}function og(t,e,n){const r=function(t,e,n){const r=[];return Ed(0,1,.05).forEach((t=>r.push([e*t,0]))),Ed(0,1,.05).forEach((t=>r.push([e,n*t]))),Ed(0,1,.05).forEach((t=>r.push([e*(1-t),n]))),Ed(0,1,.05).forEach((t=>r.push([0,n*(1-t)]))),r.map((e=>t.unproject(e)))}(t,e,n);return r.push(r[0]),{type:"Feature",properties:{},geometry:{type:"Polygon",coordinates:[r.map((t=>[t.lng,t.lat]))]}}}function ag(t){return t&&"transparent"!==t&&Ec(t).alpha()>0}function sg(t){return t>10?.7:.5}function ug(t,e,n){return Wd(t,e,"text-size",n,16)}function lg(t,e,n){const r=Wd(t,e,"text-field",n).slice(1,-1),i=n.properties[r];return i?"uppercase"===Wd(t,e,"text-transform",n)?i.toUpperCase():i:""}async function cg(t){let{map:e,container:r,width:i,height:o,style:a,theme:s}=t;const u=e.getZoom(),{highResMap:l,highResContainer:c,highResZoom:p}=await function(t){let{map:e,container:r,width:i,height:o,style:a,lowResZoom:s}=t;return new Promise((t=>{const u=function(t,e){const n=t*e,r={25e4:4,5e5:2};for(const t in r)if(n<=t)return r[t];return 1}(i,o);if(1===u)return void t({});const l=r.insert("div#high-res-map-container").st({width:i*u,height:o*u,visibility:"hidden",left:"-100000000px",position:"absolute"}),c=s+Math.log(u)/Math.LN2,p=new n.default.Map({attributionControl:!0,container:l.node(),style:a,center:e.getCenter(),zoom:c,bearing:e.getBearing(),pitch:e.getPitch(),preserveDrawingBuffer:!0});p.on("load",(()=>t({highResMap:p,highResContainer:l,highResZoom:c})))}))}({map:e,container:r,width:i,height:o,style:a,lowResZoom:u}),f=r.select(".mapboxgl-canvas-container").insert("svg.basemap",":first-child").at({width:i,height:o,viewBox:"0 0 ".concat(i," ").concat(o)}).st({position:"absolute",top:0,left:0,overflow:"hidden"}),h=f.append("defs"),d=new Map,g=uo(s,2===s.version?"fontFamilies":"typography.fontFamilies",{}),y=Object.fromEntries(Object.entries(g).flatMap((t=>{let[e,n]=t;return n.map((t=>[t.name,{...t,fontFamily:e}]))}))),m=Th(Rh).scale(961/ap).precision(0).angle([e.getBearing()]).rotate([-1*e.getCenter().lng,0]).fitExtent([[0,0],[i,o]],og(e,i,o)),_=yh().projection(m);e.getStyle().layers.forEach((t=>{const n=t.id;if("building3d"===n)return;if(!tg(e,n))return;const r=t.type,a="symbol"===r,s=t.source,c=!["boundaries","country-borders","openmaptiles","terrain"].includes(s);if("background"===r)return void f.append("rect").attr("id",n).attr("width",i).attr("height",o).attr("fill",$d(e,n,"background-color")||$d(e,n,"fill-color"));const g=e.queryRenderedFeatures({layers:[n]});if(!g.length)return;let v,b,x;if(l&&l.style._layers[n]&&function(t){let{layerId:e,lowResZoom:n,highResZoom:r,isSymbol:i}=t;return!(i||n<=9&&["waterway","water","building"].includes(e)||n>=13&&n<=14&&"building"===e||n<6&&"landuse_residential"===e||r>=12&&e.includes("mountains"))}({layerId:n,lowResZoom:u,highResZoom:p,isSymbol:a})){const e=l.queryRenderedFeatures({layers:[n]});if(c)v=e;else{v=[];for(const r of g){const i=!(!rg(r)&&!r.properties.name)&&e.filter((t=>ig(r,t)));if(null!=i&&i.length)v.push(...i);else{if(!n.startsWith("landcover_")&&"transportation"!==t["source-layer"]){v=e;break}v.push(r)}}}}else v=g;if(v=function(t,e,n){const r=[];return t.forEach((t=>{("fill"!==e&&"line"!==e||"Point"!==t.geometry.type)&&r.push(t)})),"boundary_country"===n&&1===r.length&&5===r[0]._geometry.coordinates[0].length?[]:r}(v,r,n),v.length){if(c){const t=function(t,e){const n=t.getLayer(e).source,r=t.getSource(n);return"geojson"===r.type?r._data:{}}(e,n),r=function(t){switch(t.type){case"Feature":return[t];case"FeatureCollection":return t.features;default:return[{type:"Feature",geometry:t,properties:{}}]}}(t),i=r.map((t=>{try{return t.geometry&&Array.isArray(t.geometry.geometries)&&(t.geometry.geometries=t.geometry.geometries.filter(Boolean)),Kh(t,{reverse:!0})}catch(e){return console.warn("Failed to rewind feature",t),t}})),o=v.map((t=>i.find((e=>ig(e,t)))||t));b=Bd(o).flatMap(ng)}else if("landuse_residential"===n||"boundaries"===s||Qd(t,"fill-outline-color")&&!n.includes("mountains")){const t=md(v,rg);b=Object.entries(t).flatMap((t=>{let[e,r]=t;if("undefined"===e)return r;const i=[];return[r.reduce(((t,r)=>{if(!t)return r;try{return function(t,e){try{return nd(t,e)}catch(n){const r={units:"kilometers"},i=Dh(t,.001,r),o=Dh(e,.001,r);return Kh(Dh(nd(i,o),-.001,r),{reverse:!0})}}(t,r)}catch(o){return console.warn("merging not working on layer",n,e,o),i.push(r),t}})),...i]}))}else b=v;if(a){x=f.append("g").attr("id",n);const r="line-center"===Hd(e,n,"symbol-placement");r&&x.appendMany("path",b).attr("d",(function(t){const e=function(t){const e=t.split(/(?=[LMC])/).map((function(t){var e=t.slice(1,t.length).split(","),n=[];for(let t=0;t<e.length;t+=2)n.push([+e[t],+e[t+1]]);return n})),n=e[0][0],r=e[e.length-1][0],i=r[1]-n[1],o=r[0]-n[0];let a=Math.atan2(i,o);return a*=180/Math.PI,a}(_(t));if(e>=90||e<=-90){const e=t.geometry.coordinates.reverse();t.geometry.coordinates=e}return _(t)})).attr("id",(function(t){return t._vectorTileFeature._geometry})).attr("fill","none").attr("stroke","none").attr("stroke-width","1px");const i="map-label",o=x.selectAll(i).data(b).enter().append("text");if(r?o.append("textPath").attr("class","textpath").attr("xlink:href",(function(t){return"#"+t._vectorTileFeature._geometry})).attr("font-size",(function(t){return ug(e,n,t)})).attr("text-anchor","middle").attr("startOffset","50%").attr("dominant-baseline","central").text((function(t){return lg(e,n,t)})):o.each((function(r){const i=lt(this),o=ug(e,n,r);i.attr("font-size",o);const a=function(t,e,n){return function(t,e){const n=[],r=/\s/,i=t.split(r);i[0].length&&n.push(i[0]);for(let t=1;t<i.length;t++)i[t].replace(" ","").length+n[n.length-1].replace(" ","").length<e?n[n.length-1]="".concat(n[n.length-1]," ").concat(i[t]):n.push(i[t]);return n}(lg(t,e,n).replace("/","/ "),11)}(e,n,r);i.attr("dominant-baseline",1===a.length?"middle":"ideographic");let s=0,u=0;if(Kd(t,"text-offset")){const t=Wd(e,n,"text-offset",r);s=10*t[0],u=10*t[1]}const l=m(r.geometry.coordinates),c={10:0,12:1,14:2}[o]||0,p=l[0]+s+c,f=l[1]+u;i.attr("transform","translate(".concat(p,", ").concat(f,")")),i.tspans(a,o+2)})),o.each((function(t){const r=lt(this),i=Wd(e,n,"text-font",t,["Roboto"])[0],o=y[i];r.attr("font-family",o&&o.fontFamily||i),o&&(o.weight&&r.attr("font-weight",o.weight),o.style&&r.attr("font-style",o.style))})),o.attr("text-anchor",(function(t){return function(t){switch(t){case"left":return"start";case"right":return"end";default:return"middle"}}(Wd(e,n,"text-anchor",t))})),o.attr("font-size",(function(t){return ug(e,n,t)})),o.attr("fill",(function(t){return Zd(e,n,"text-color",t,"#000")})),o.each((function(t){const r=Zd(e,n,"text-halo-width",t,2);if(r>0){const i=Zd(e,n,"text-halo-color",t);if(ag(i)){const t=function(t){const e=t.cloneNode();return Array.from(t.children).forEach((t=>{const n=t.cloneNode();n.textContent=t.textContent,e.appendChild(n)})),e}(this);t.setAttribute("class","buffer"),t.setAttribute("stroke",i),t.setAttribute("stroke-width",r),t.setAttribute("stroke-linejoin","round"),t.setAttribute("stroke-linecap","round"),this.parentNode.insertBefore(t,this)}}})),Kd(t,"icon-image")){const t=e.getBounds().toArray();x.selectAll(i+"icon").data(b).enter().each((function(r){const i=Wd(e,n,"icon-image",r),o=e.style.imageManager.getImage(i);if(!o)return;const a=Wd(e,n,"icon-size",r,1),s=function(t){var e,n;return"Point"===t.geometry.type?null!==(e=t.geometry.coordinates)&&void 0!==e&&e.length?[t.geometry.coordinates]:[]:"LineString"===t.geometry.type?t.geometry.coordinates||[]:"MultiLineString"===t.geometry.type&&(null===(n=t.geometry.coordinates)||void 0===n?void 0:n.flat())||[]}(r).filter((e=>function(t,e){return t[0]>=e[0][0]&&t[0]<=e[1][0]&&t[1]>=e[0][1]&&t[1]<=e[1][1]}(e,t)));if(!s.length)return void console.warn("Failed to get the points that make up feature",r);const u=s[Math.floor(s.length/2)],l=m(u),c=lt(this);let p;if("https://tiles.dwcdn.net/sprites/dwsprites"===e.getStyle().sprite){const t=[9*a,9*a];"circle-12"===i?p=c.append("circle").attr("transform","translate(".concat(l[0],", ").concat(l[1],")")).attr("r",t[0]/2).attr("fill","#444").attr("stroke","none"):"square-12"===i&&(p=c.append("rect").attr("transform","translate(".concat(l[0]-t[0]/2,", ").concat(l[1]-t[1]/2,")")).attr("width",t[0]).attr("height",t[1]).attr("fill","#444").attr("stroke","none"))}if(!p){const t=[o.data.width*a,o.data.height*a];p=c.append("image").attr("href",function(t,e,n){if(Jd.has(e))return Jd.get(e);const r=function(t,e){const n=t.createElement("canvas"),r=n.getContext("2d");return n.width=e.width,n.height=e.height,r.putImageData(e,0,0),n.toDataURL()}(n,new ImageData(new Uint8ClampedArray(t.data.data),t.data.width,t.data.height));return Jd.set(e,r),r}(o,i,this.ownerDocument)).attr("transform","translate(".concat(l[0]-t[0]/2,", ").concat(l[1]-t[1]/2,")")).attr("width",t[0]).attr("height",t[1])}const f=Zd(e,n,"icon-opacity",r,1);1!==f&&p.style("opacity",f)}))}}else x=c?f.append("g").attr("id",n).appendMany("path",b):f.append("path").attr("id",n).data([{type:"FeatureCollection",features:b}]),x.attr("d",_).attr("transform","translate(0.5, 0)"),"line"===r?(x.attr("fill","none"),x.attr("stroke-width",(function(t){return Zd(e,n,"line-floorwidth",t)}))):x.attr("stroke-width","0"),"ocean"===n&&tg(e,"ocean-outline")&&(x.attr("stroke",(function(t){if(ag(Zd(e,"ocean-outline","line-color",t)))return Zd(e,n,"fill-color",t)||Zd(e,n,"background-color",t)})),x.attr("stroke-width",(function(t){if(Zd(e,"ocean-outline","line-width",t)>0)return sg(u)}))),Qd(t,"fill-outline-color")&&(x.attr("stroke",(function(t){return Zd(e,n,"fill-outline-color",t)})),x.attr("stroke-width",sg(u))),Qd(t,"line-color")&&x.attr("stroke",(function(t){return Zd(e,n,"line-color",t)})),Qd(t,"line-width")&&x.attr("stroke-width",(function(t){return Zd(e,n,"line-width",t)})),Qd(t,"line-dasharray")&&x.attr("stroke-dasharray",(function(t){let r=$d(e,n,"line-dasharray");if(r[0]>=1e5)return;if(1===r[0]&&1===r[1])switch(Hd(e,n,"line-cap")){case"butt":r=[1.5,1.5];break;case"round":r=[2,1];break;default:r=[.8,2]}else if(1===r[0]&&2.2===r[1])switch(Hd(e,n,"line-cap")){case"butt":r=[1.8,4];break;case"round":r=[2.4,3.3];break;default:r=[.8,4.8]}const i=Zd(e,n,"line-floorwidth",t);return r.map((t=>t*i)).join(" ")})),Qd(t,"line-opacity")&&x.attr("stroke-opacity",(function(t){return Zd(e,n,"line-opacity",t)})),Qd(t,"fill-opacity")&&x.attr("fill-opacity",(function(t){return Zd(e,n,"fill-opacity",t)})),Qd(t,"fill-color")&&x.attr("fill",(function(t){return Zd(e,n,"fill-color",t)})),Qd(t,"fill-pattern")&&x.attr("fill",(function(t){const r=Zd(e,n,"fill-pattern",t);let i=d.get(r);if(!i){const t=JSON.parse(r);i="pattern-".concat(Math.round(1e5*Math.random())),d.set(r,i),Ic({defs:h,id:i,stroke:t.color,strokeWidth:t.stroke,lineGap:t.spacing,patternType:t.pattern,rotation:e.getBearing(),scale:1,flipV:!0})}return"url(#".concat(i,")")})),Qd(t,"line-gap-width")&&x.attr("stroke-width",(function(t){return 2*Zd(e,n,"line-width",t)+Zd(e,n,"line-gap-width",t)})),Kd(t,"line-cap")&&x.attr("stroke-linecap",Hd(e,n,"line-cap")),Kd(t,"line-join")&&x.attr("stroke-linejoin",(function(t){return Wd(e,n,"line-join",t)}))}})),r.select(".mapboxgl-canvas").remove(),c&&c.remove()}var pg={init(t){let e;function r(){if(!e)return;const t=e._container.innerHTML.trim();e._container.innerHTML=function(t){const[,e,n]=/([\d,.]+)(.*)/g.exec(t),r=1===parseFloat(e);return"mi"===n?"".concat(e," ").concat(r?"mile":"miles"):"ft"===n?"".concat(e," ").concat(r?"foot":"feet"):"".concat(e," ").concat(n)}(t)}function i(){if(!e)return;const t=e._container;t&&(t.classList.add("export-rect"),t.innerHTML='<span class="export-text" style="position: relative; z-index: 2;">'.concat(t.textContent,"</span>"))}return{render(o){o.scale&&!e&&(e=new n.default.ScaleControl({maxWidth:80,unit:o.scaleUnit}),t.addControl(e),r(),t.on("move",(()=>{r(),i()})),i())},initEditor(i){const o=i.chart;o.observeDeep("metadata.visualize.scale",((i,a)=>{void 0!==a&&(i&&!e?(e=new n.default.ScaleControl({unit:o.getMetadata("visualize.scaleUnit"),maxWidth:80}),t.addControl(e),r(),t.on("move",(()=>{r()}))):e&&(t.removeControl(e),e=void 0))})),o.observeDeep("metadata.visualize.scaleUnit",((t,n)=>{n&&e&&(e.setUnit(t),r())}))}}}},fg={init(t,e){function n(n){if(t.select(".mapboxgl-ctrl-dw-compass").remove(),n.compass||n.view.bearing>40||n.view.bearing<-40){const r=t.select(".mapboxgl-ctrl-bottom-left").append("div.mapboxgl-ctrl.mapboxgl-ctrl-dw-compass").append("svg.compass"),i=r.append("g");i.append("path").attr("transform","rotate("+(-1*n.view.bearing-90)+")").attr("d","M-10,0 l0,0 l -11.8,3.2 l2,-3.2 l-2,-3.2 l 11.8,3.2 z").attr("stroke","black").attr("fill","black").attr("shape-rendering","geometricPrecision"),i.append("text").style("dominant-baseline","central").style("text-anchor","middle").style("font-size","12px").text("N");const o=e.getElementBounds(r.node()),a=e.getElementBounds(i.node()),s={top:a.top-o.top,left:a.left-o.left,width:a.width,height:a.height};r.style("width",s.width+"px").style("height",s.height+"px").attr("viewBox",s.left+","+s.top+","+s.width+","+s.height)}}return{render(t){n(t)},initEditor(t){t.chart.observeDeep("metadata.visualize.compass",(function(t,r){void 0!==r&&n({...e.getMetadata("visualize"),compass:t})})),t.chart.observeDeep("metadata.visualize.view.bearing",(function(t,r){if(void 0===r)return;const i=e.getMetadata("visualize");n({...i,view:{...i.view,bearing:t}})}))}}}};function hg(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=Math.pow(10,e);return Math.round(t*n)/n}const dg=600;var gg=wt,yg=Dt,mg=function(){return gg.Date.now()},_g=Su,vg=Math.max,bg=Math.min;var xg=function(t,e,n){var r,i,o,a,s,u,l=0,c=!1,p=!1,f=!0;if("function"!=typeof t)throw new TypeError("Expected a function");function h(e){var n=r,o=i;return r=i=void 0,l=e,a=t.apply(o,n)}function d(t){var n=t-u;return void 0===u||n>=e||n<0||p&&t-l>=o}function g(){var t=mg();if(d(t))return y(t);s=setTimeout(g,function(t){var n=e-(t-u);return p?bg(n,o-(t-l)):n}(t))}function y(t){return s=void 0,f&&r?h(t):(r=i=void 0,a)}function m(){var t=mg(),n=d(t);if(r=arguments,i=this,u=t,n){if(void 0===s)return function(t){return l=t,s=setTimeout(g,e),c?h(t):a}(u);if(p)return clearTimeout(s),s=setTimeout(g,e),h(u)}return void 0===s&&(s=setTimeout(g,e)),a}return e=_g(e)||0,yg(n)&&(c=!!n.leading,o=(p="maxWait"in n)?vg(_g(n.maxWait)||0,e):o,f="trailing"in n?!!n.trailing:f),m.cancel=function(){void 0!==s&&clearTimeout(s),l=0,r=u=i=s=void 0},m.flush=function(){return void 0===s?a:y(mg())},m},wg=ft(xg),Eg=xg,Ng=Dt;var Ig=ft((function(t,e,n){var r=!0,i=!0;if("function"!=typeof t)throw new TypeError("Expected a function");return Ng(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),Eg(t,e,{leading:r,maxWait:e,trailing:i})}));function Cg(t,e){const n=function(t){const e=t.getContainer().clientWidth,n=t.getContainer().clientHeight,r=[[.5*e,0],[e,.5*n],[.5*e,n],[0,.5*n]].map((e=>{let[n,r]=e;return t.unproject([n,r]).toArray()}));return{top:r[0],right:r[1],bottom:r[2],left:r[3]}}(e);if(!t)return n;const r=["top","right","bottom","left"].map((n=>e.project(t[n]))),i=["top","right","bottom","left"].map((t=>e.project(n[t])));return r.some(((t,e)=>Math.abs(t.x-i[e].x)>=1||Math.abs(t.y-i[e].y)>=1))?n:t}var Sg={init(t,e,n,r){const i=r.svgonly||r.fitchart;return{render(){},initEditor(a,s){const u=a.chart;function l(){return u.getMetadata("visualize.locked")}o(!l());const c={...u.getMetadata("visualize.view")},p=t=>{for(const e in t)c[e]=t[e]},f=t=>{p(t),d()};let h;const d=wg((()=>{const e={...c,fit:Cg(c.fit,t)};h=e,u.setMetadata("visualize.view",e)}),100);if(r.svgonly)return;u.observeDeep("metadata.visualize.view",((n,r)=>{if(void 0===r||Ud(n,h))return;p(n);const o=e.node().clientWidth,a=n.zoom+Math.log(o/dg)/Math.LN2;if(t.jumpTo({bearing:n.bearing,center:n.center,pitch:n.pitch,zoom:a}),!i){const r=o*n.height/100;e.style("height",r+"px"),t.resize()}})),u.observeDeep("metadata.visualize.locked",(()=>{o(!l()),e.classed("resizable",a.newFrontend&&!l())}));let g=!1;t.on("moveend",(()=>{g||y()})),t.on("mousedown",(()=>{g=!0})),t.on("mouseup",(()=>{g=!1})),t.on("wheel",Ig((()=>{a.onMapWheelEvent&&a.onMapWheelEvent()}),500)),t.on("zoom",wg((()=>{if(g)return;const n=u.getMetadata("visualize.view.zoom"),r=t.getZoom(),i=e.node().clientWidth,o=hg(r-Math.log(i/dg)/Math.LN2,2);n!==o&&f({zoom:o}),f({center:t.getCenter().toArray()})}),100)),t.on("pitch",(()=>{const e=t.getPitch();f({pitch:e}),mc(t)})),t.on("rotate",(()=>{const e=t.getBearing();f({bearing:e})}));const y=function(){const e=t.getCenter().toArray();f({center:e})};let m=!1;if(!i&&a.newFrontend){let n,r;e.select(".resize-controls").remove(),e.classed("resizable",!l()),e.select(".aspect-resizer").remove(),e.append("div.aspect-resizer").html("").on("mousedown",(()=>{l()||(m=!0,r=K.clientY,n=e.node().clientHeight)})),window.addEventListener("mouseup",(()=>{if(m){m=!1;const{clientWidth:t,clientHeight:n}=e.node(),r=hg(n/t*100,1);f({height:r})}g&&(g=!1,y())}),{passive:!0}),window.addEventListener("mousemove",(i=>{m&&(e.st({height:n+(i.clientY-r)}),t.resize())}),{passive:!0})}window.addEventListener("resize",(()=>{var r,o;if(!m)if(i){const r=n.getMaxChartHeight()-s.getMapKeyHeight();e.st({height:r}),t.resize(),s.fitPoints()}else{const n=(o=70,c[r="height"]||u.getMetadata("visualize.view.".concat(r),o)),i=e.node().clientWidth*n/100;e.st({height:i}),t.resize();const a=u.getMetadata("visualize.view.zoom"),s=e.node().clientWidth,l=a+Math.log(s/dg)/Math.LN2;t.setZoom(l)}}),{passive:!0})}};function o(n){n?(t.keyboard.enable(),t.scrollZoom.enable(),t.boxZoom.enable(),t.dragRotate.enable(),t.dragPan.enable(),t.keyboard.enable(),t.doubleClickZoom.enable(),t.touchZoomRotate.enable(),e.select(".mapboxgl-canvas-container").classed("mapboxgl-interactive",!0)):(t.keyboard.disable(),t.scrollZoom.disable(),t.boxZoom.disable(),t.dragRotate.disable(),t.dragPan.disable(),t.keyboard.disable(),t.doubleClickZoom.disable(),t.touchZoomRotate.disable(),e.select(".mapboxgl-canvas-container").classed("mapboxgl-interactive",!1))}}},Lg={init(t,e,n){function r(r){const i=r.get().language,o=r.getMetadata("visualize"),a=t.getStyle();gc(o,i,e,n,a,(e=>{t.setStyle(e),t.style.stylesheet.metadata=e.metadata}))}return{initEditor(t){const e=t.chart;e.observeDeep("language",((t,n)=>{void 0!==n&&r(e)})),e.observeDeep("metadata.visualize.mapLabel",((t,n)=>{void 0!==n&&r(e)}))}}}},Mg={init:(t,e,n)=>({initEditor(r){const i=r.chart;Object.keys(i.getMetadata("visualize.visibility")).forEach((r=>{i.observeDeep("metadata.visualize.visibility.".concat(r),((r,o)=>{if(void 0===o)return;const a=i.get().language,s=i.getMetadata("visualize"),u=t.getStyle();gc(s,a,e,n,u,(e=>{t.setStyle(e),t.style.stylesheet.metadata=e.metadata}))}))}))}})},Og={init(t,e,n,r,i,o){return{initEditor(o){const s=o.chart;s.observeDeep("metadata.visualize.style",((e,o)=>{if(void 0===o)return;const u=s.get().language,l=s.getMetadata("visualize");lt(i).classed(o,!1).classed(e,!0);const c=t.getStyle();gc(l,u,n,r,c,a)})),s.observeDeep("darkMode",(()=>{setTimeout((()=>{const i=s.getMetadata("visualize"),o=t.getStyle();gc(i,e,n,r,o,a)}))}))}};function a(e){const r=e.metadata.styleIsDark;i.classList.toggle("is-dark-map-style",r);const a=t.getStyle().metadata.styleIsDark;t.setStyle(e),t.style.stylesheet.metadata=e.metadata,a!==r&&n.get().key&&o.render(n.get().key,e)}}};function Pg(t,e,n){let r,i;return 2===arguments.length&&"function"==typeof e?(i=e,r="include"):1===arguments.length?(i=void 0,r="include"):(i=n,r=e),function(t,e,n,r,i){const o={method:e,body:r,mode:"cors",credentials:n};return window.fetch(t,o).then((t=>{if(!t.ok)throw new Error(t.statusText);return t.text()})).then((t=>{try{return JSON.parse(t)}catch(e){return console.warn("malformed json input",t),t}})).then((t=>(i&&i(t),t))).catch((t=>{if(!i)throw t;console.error(t)}))}(t,"GET",r,null,i)}var Rg=Math.atan2,Tg=Math.cos,Ag=Math.sin,Dg=Math.PI,kg=Dg/2,Fg=180/Dg,jg=Dg/180;function zg(t){return t>1?kg:t<-1?-kg:Math.asin(t)}function Gg(t){return t>0?Math.sqrt(t):0}function Bg(t,e){var n=function(t){function e(e,n){var r=Tg(n),i=(t-1)/(t-r*Tg(e));return[i*r*Ag(e),i*Ag(n)]}return e.invert=function(e,n){var r=e*e+n*n,i=Gg(r),o=(t-Gg(1-r*(t+1)/(t-1)))/((t-1)/i+i/(t-1));return[Rg(e*o,i*Gg(1-o*o)),i?zg(n*o/i):0]},e}(t);if(!e)return n;var r=Tg(e),i=Ag(e);function o(e,o){var a=n(e,o),s=a[1],u=s*i/(t-1)+r;return[a[0]*r/u,s/u]}return o.invert=function(e,o){var a=(t-1)/(t-1-o*i);return n.invert(a*e,a*o*r)},o}function qg(){var t,e=2,n=0,r=Sh(Bg),i=r(e,n);return i.distance=function(t){return arguments.length?r(e=+t,n):e},i.tilt=function(t){return arguments.length?r(e,n=t*jg):n*Fg},i.scale(432.147).clipAngle(((t=1/e)>1?0:t<-1?Dg:Math.acos(t))*Fg-1e-6)}function Ug(t){return t}function Vg(t,e){return"string"==typeof e&&(e=t.objects[e]),"GeometryCollection"===e.type?{type:"FeatureCollection",features:e.geometries.map((function(e){return Yg(t,e)}))}:Yg(t,e)}function Yg(t,e){var n=e.id,r=e.bbox,i=null==e.properties?{}:e.properties,o=function(t,e){var n=function(t){if(null==t)return Ug;var e,n,r=t.scale[0],i=t.scale[1],o=t.translate[0],a=t.translate[1];return function(t,s){s||(e=n=0);var u=2,l=t.length,c=new Array(l);for(c[0]=(e+=t[0])*r+o,c[1]=(n+=t[1])*i+a;u<l;)c[u]=t[u],++u;return c}}(t.transform),r=t.arcs;function i(t,e){e.length&&e.pop();for(var i=r[t<0?~t:t],o=0,a=i.length;o<a;++o)e.push(n(i[o],o));t<0&&function(t,e){for(var n,r=t.length,i=r-e;i<--r;)n=t[i],t[i++]=t[r],t[r]=n}(e,a)}function o(t){return n(t)}function a(t){for(var e=[],n=0,r=t.length;n<r;++n)i(t[n],e);return e.length<2&&e.push(e[0]),e}function s(t){for(var e=a(t);e.length<4;)e.push(e[0]);return e}function u(t){return t.map(s)}function l(t){var e,n=t.type;switch(n){case"GeometryCollection":return{type:n,geometries:t.geometries.map(l)};case"Point":e=o(t.coordinates);break;case"MultiPoint":e=t.coordinates.map(o);break;case"LineString":e=a(t.arcs);break;case"MultiLineString":e=t.arcs.map(a);break;case"Polygon":e=u(t.arcs);break;case"MultiPolygon":e=t.arcs.map(u);break;default:return null}return{type:n,coordinates:e}}return l(e)}(t,e);return null==n&&null==r?{type:"Feature",properties:i,geometry:o}:null==r?{type:"Feature",id:n,properties:i,geometry:o}:{type:"Feature",id:n,bbox:r,properties:i,geometry:o}}function Xg(t,e){e=Object.assign({dx:0,dy:0,blur:3,strength:0,knockout:!1,alpha:.2,color:[0,0,0],outline:!1},e);let n=t.node();for(;"svg"!==n.nodeName;)n=n.parentNode;const r=lt(n);let i=r.select("defs");i.node()||(i=r.append("defs"));const o="filter-".concat((1e9*Math.random()).toFixed()),a=i.append("filter#".concat(o));a.append("feOffset").at({in:"SourceAlpha",dx:e.dx,dy:e.dy,result:"shadow"});const s=e.color;a.append("feColorMatrix").at({in:"shadow",type:"matrix",values:[0,0,0,0,s[0]/255,0,0,0,0,s[1]/255,0,0,0,0,s[2]/255,0,0,0,e.alpha,0].join(" "),result:"shadow"}),e.strength>0&&a.append("feMorphology").at({in:"shadow",radius:e.strength,operator:"dilate",result:"shadow"}),e.blur>0&&a.append("feGaussianBlur").at({in:"shadow",result:"shadow"}).attr("stdDeviation",e.blur),e.outline?(a.append("feColorMatrix").at({in:"SourceAlpha",type:"matrix",values:[0,0,0,0,s[0]/255,0,0,0,0,s[1]/255,0,0,0,0,s[2]/255,0,0,0,.4,0].join(" "),result:"outline"}),a.append("feMorphology").at({in:"outline",radius:1,operator:"dilate",result:"outline"}),a.append("feBlend").at({in:"SourceGraphic",in2:"outline",result:"sourceOutline",mode:"normal"}),a.append("feBlend").at({in:"sourceOutline",in2:"shadow",mode:"normal"})):a.append("feBlend").at({in:"SourceGraphic",in2:"shadow",mode:"normal"}),t.attr("filter","url(#".concat(o,")"))}function Hg(t){return t.push(t[0]),{type:"Feature",geometry:{type:"Polygon",coordinates:[t.map((t=>[t.lng,t.lat]))]}}}let Wg;function $g(t,e,n){function r(){const r=[e.width/2,e.height/2],i=(Math.min(e.width,e.height)-10)/2,o=qg().scale(1.7*i).translate(r).rotate([-e.center[0],-e.center[1]]).precision(.1),a=yh().projection(o),s=function(){var t,e,n,r,i,o,a,s,u,l,c,p,f=10,h=f,d=90,g=360,y=2.5;function m(){return{type:"MultiLineString",coordinates:_()}}function _(){return tp(hp(r/d)*d,n,d).map(c).concat(tp(hp(s/g)*g,a,g).map(p)).concat(tp(hp(e/f)*f,t,f).filter((function(t){return lp(t%d)>ep})).map(u)).concat(tp(hp(o/h)*h,i,h).filter((function(t){return lp(t%g)>ep})).map(l))}return m.lines=function(){return _().map((function(t){return{type:"LineString",coordinates:t}}))},m.outline=function(){return{type:"Polygon",coordinates:[c(r).concat(p(a).slice(1),c(n).reverse().slice(1),p(s).reverse().slice(1))]}},m.extent=function(t){return arguments.length?m.extentMajor(t).extentMinor(t):m.extentMinor()},m.extentMajor=function(t){return arguments.length?(r=+t[0][0],n=+t[1][0],s=+t[0][1],a=+t[1][1],r>n&&(t=r,r=n,n=t),s>a&&(t=s,s=a,a=t),m.precision(y)):[[r,s],[n,a]]},m.extentMinor=function(n){return arguments.length?(e=+n[0][0],t=+n[1][0],o=+n[0][1],i=+n[1][1],e>t&&(n=e,e=t,t=n),o>i&&(n=o,o=i,i=n),m.precision(y)):[[e,o],[t,i]]},m.step=function(t){return arguments.length?m.stepMajor(t).stepMinor(t):m.stepMinor()},m.stepMajor=function(t){return arguments.length?(d=+t[0],g=+t[1],m):[d,g]},m.stepMinor=function(t){return arguments.length?(f=+t[0],h=+t[1],m):[f,h]},m.precision=function(f){return arguments.length?(y=+f,u=nf(o,i,90),l=rf(e,t,y),c=nf(s,a,90),p=rf(r,n,y),m):y},m.extentMajor([[-180,-90+ep],[180,90-ep]]).extentMinor([[-180,-80-ep],[180,80+ep]])}(),u=Vg(Wg,Wg.objects.world);"none"!==uo(n,"globe.background")&&t.append("circle.water-outline").translate(r).attr("r",i+1.2).style("fill",uo(n,"globe.background"));const l=t.append("circle.water").translate(r).attr("r",i).style("fill",uo(n,"globe.water")).style("stroke",uo(n,"globe.globeOutline.color")).style("stroke-width",uo(n,"globe.globeOutline.width")).style("stroke-dasharray",uo(n,"globe.globeOutline.strokeDashArray"));if(uo(n,"globe.outerBlur",!0)&&Xg(l,{strength:0,blur:6,alpha:.15}),t.append("path.graticule").datum(s).attr("d",a).style("stroke",uo(n,"globe.graticule.color")).style("stroke-width",uo(n,"globe.graticule.width")).style("stroke-dasharray",uo(n,"globe.graticule.strokeDashArray")),t.append("path.land").attr("d",a(u)).style("fill",uo(n,"globe.land")).style("stroke",uo(n,"globe.landOutline.color")).style("stroke-width",uo(n,"globe.landOutline.width")).style("stroke-dasharray",uo(n,"globe.landOutline.strokeDashArray")),!e.viewPoints)return;const c=Hg(e.viewPoints),p=function(t,e,n){return"locator-maps"===t.visType&&t.zoom?t.zoom<6?"box":"circle":e.area(n)>30?"box":"circle "}(e,a,c);"box"===p?t.append("path.view").attr("d",a(Hg(e.viewPoints))).style("stroke",uo(n,"view.color")).style("stroke-width",uo(n,"view.strokeWidth")).style("stroke-dasharray",uo(n,"view.strokeDashArray")):t.append("circle.view").translate(r).attr("r",3).style("fill",uo(n,"view.color")).style("stroke-width",uo(n,"view.strokeDashArray")),t.append("circle.outline").translate(r).attr("r",i).style("fill","none").style("stroke",uo(n,"globe.globeOutline.color"))}Wg?r():Pg("https://tiles.dwcdn.net/topojson/world.json",void 0,(t=>{Wg=t,r()}))}function Zg(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}var Jg,Kg,Qg,ty,ey,ny,ry,iy,oy,ay,sy,uy,ly,cy;const py=Math.PI,fy=2*py,hy=1e-6,dy=fy-hy;function gy(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}class yy{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=null==t?gy:function(t){let e=Math.floor(t);if(!(e>=0))throw new Error("invalid digits: ".concat(t));if(e>15)return gy;const n=10**e;return function(t){this._+=t[0];for(let e=1,r=t.length;e<r;++e)this._+=Math.round(arguments[e]*n)/n+t[e]}}(t)}moveTo(t,e){this._append(Jg||(Jg=Zg(["M",",",""])),this._x0=this._x1=+t,this._y0=this._y1=+e)}closePath(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._append(Kg||(Kg=Zg(["Z"]))))}lineTo(t,e){this._append(Qg||(Qg=Zg(["L",",",""])),this._x1=+t,this._y1=+e)}quadraticCurveTo(t,e,n,r){this._append(ty||(ty=Zg(["Q",",",",",",",""])),+t,+e,this._x1=+n,this._y1=+r)}bezierCurveTo(t,e,n,r,i,o){this._append(ey||(ey=Zg(["C",",",",",",",",",",",""])),+t,+e,+n,+r,this._x1=+i,this._y1=+o)}arcTo(t,e,n,r,i){if(t=+t,e=+e,n=+n,r=+r,(i=+i)<0)throw new Error("negative radius: ".concat(i));let o=this._x1,a=this._y1,s=n-t,u=r-e,l=o-t,c=a-e,p=l*l+c*c;if(null===this._x1)this._append(ny||(ny=Zg(["M",",",""])),this._x1=t,this._y1=e);else if(p>hy)if(Math.abs(c*s-u*l)>hy&&i){let f=n-o,h=r-a,d=s*s+u*u,g=f*f+h*h,y=Math.sqrt(d),m=Math.sqrt(p),_=i*Math.tan((py-Math.acos((d+p-g)/(2*y*m)))/2),v=_/m,b=_/y;Math.abs(v-1)>hy&&this._append(iy||(iy=Zg(["L",",",""])),t+v*l,e+v*c),this._append(oy||(oy=Zg(["A",",",",0,0,",",",",",""])),i,i,+(c*f>l*h),this._x1=t+b*s,this._y1=e+b*u)}else this._append(ry||(ry=Zg(["L",",",""])),this._x1=t,this._y1=e);else;}arc(t,e,n,r,i,o){if(t=+t,e=+e,o=!!o,(n=+n)<0)throw new Error("negative radius: ".concat(n));let a=n*Math.cos(r),s=n*Math.sin(r),u=t+a,l=e+s,c=1^o,p=o?r-i:i-r;null===this._x1?this._append(ay||(ay=Zg(["M",",",""])),u,l):(Math.abs(this._x1-u)>hy||Math.abs(this._y1-l)>hy)&&this._append(sy||(sy=Zg(["L",",",""])),u,l),n&&(p<0&&(p=p%fy+fy),p>dy?this._append(uy||(uy=Zg(["A",",",",0,1,",",",",","A",",",",0,1,",",",",",""])),n,n,c,t-a,e-s,n,n,c,this._x1=u,this._y1=l):p>hy&&this._append(ly||(ly=Zg(["A",",",",0,",",",",",",",""])),n,n,+(p>=py),c,this._x1=t+n*Math.cos(i),this._y1=e+n*Math.sin(i)))}rect(t,e,n,r){this._append(cy||(cy=Zg(["M",",","h","v","h","Z"])),this._x0=this._x1=+t,this._y0=this._y1=+e,n=+n,+r,-n)}toString(){return this._}}function my(){return new yy}function _y(t,e,n,r,i){const o=function(t){let e;const n=t;if(n&&"FeatureCollection"===n.type)e=n;else{if(!n||!n.objects)return void console.warn("No boundary geom");try{e=Vg(n,n.objects.geom)}catch(t){return void console.warn("TopoJSON conversion not working ",t)}}return e}(r.boundaryGeom);if(!o)return{};const a=function(t,e){const{width:n,height:r,projection:i,fitMap:o}=e,a=yh().projection(null),s=a.centroid(t),u=i||Ph().rotate([-s[0],-s[1]]).fitSize([n,r],t);a.projection(u),o&&u.fitSize([n,r],t);return a}(o,r),s=r.customUpload||r.hasInnerBorders,u={stroke:uo(i,"region.landOutline","#494949"),strokeWidth:uo(i,"region.outline.width",.7)/(s?2:1),strokeDasharray:uo(i,"region.outline.strokeDashArray")};s||n.append("path").datum(o).attr("d",a).style("fill","transparent").st(u);const l=n.append("path").datum(o).attr("d",a).style("fill",uo(i,"region.land"));s&&l.st(u),uo(i,"region.outerBlur")&&Xg(l,{strength:0,blur:6,alpha:.15});const c=e.getElementBounds(l.node()),p=uo(i,"region.inBox",!1),f=p||!r.fitMap?0:(r.width-c.width)/2,h=p||!r.fitMap?0:(r.height-c.height)/2;function d(t){n.select(".view").remove();const s=Hg(t),u=a.bounds(o),c=u[1][0]-u[0][0],p=u[1][1]-u[0][1],d=e.getElementBounds(l.node());if(a.area(s)<=c*p*.8)if(a.area(s)<10){const t=n.append("circle.view").translate(a.centroid(s)).attr("r",3).style("fill",uo(i,"view.color")).style("stroke-width",uo(i,"view.strokeWidth")),r=e.getElementBounds(t.node()),o=4;(r.left+o<d.left||r.bottom-o>d.bottom||r.top+o<d.top||r.right-o>d.right)&&t.style("opacity",0)}else if(r.clampViewbox){const[t,e]=a.bounds(s);t[0]=Math.max(f+1,t[0]),t[1]=Math.max(h,t[1]),e[0]=Math.min(r.width-f,e[0]),e[1]=Math.min(r.height-h,e[1]);const o=my();o.rect(t[0],t[1],e[0]-t[0],e[1]-t[1]),n.append("path.view").attr("d",o.toString()).style("opacity",1).style("stroke",uo(i,"view.color")).style("stroke-width",uo(i,"view.strokeWidth")).style("stroke-dasharray",uo(i,"view.strokeDashArray"))}else{const t=n.append("path.view").attr("d",a(s)).style("opacity",1).style("stroke",uo(i,"view.color")).style("stroke-width",uo(i,"view.strokeWidth")).style("stroke-dasharray",uo(i,"view.strokeDashArray")),o=e.getElementBounds(t.node()),u="object"==typeof r.viewBuffer?r.viewBuffer:{left:r.viewBuffer,right:r.viewBuffer,top:r.viewBuffer,bottom:r.viewBuffer};(o.left<d.left-u.left||o.bottom>d.bottom+u.bottom||o.top<d.top-u.top||o.right>d.right+u.right)&&t.style("opacity",0)}}return n.translate([f*(r.position.indexOf("left")>-1?-1:1),h*(r.position.indexOf("top")>-1?-1:1)]),r.viewPoints&&d(r.viewPoints),{centroidPx:a.centroid(o),dx:f,dy:h,setView:d}}my.prototype=yy.prototype;var vy,by={exports:{}};
/*! @license DOMPurify 3.0.6 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.0.6/LICENSE */function xy(){return vy||(vy=1,function(t,e){t.exports=function(){const{entries:t,setPrototypeOf:e,isFrozen:n,getPrototypeOf:r,getOwnPropertyDescriptor:i}=Object;let{freeze:o,seal:a,create:s}=Object,{apply:u,construct:l}="undefined"!=typeof Reflect&&Reflect;o||(o=function(t){return t}),a||(a=function(t){return t}),u||(u=function(t,e,n){return t.apply(e,n)}),l||(l=function(t,e){return new t(...e)});const c=x(Array.prototype.forEach),p=x(Array.prototype.pop),f=x(Array.prototype.push),h=x(String.prototype.toLowerCase),d=x(String.prototype.toString),g=x(String.prototype.match),y=x(String.prototype.replace),m=x(String.prototype.indexOf),_=x(String.prototype.trim),v=x(RegExp.prototype.test),b=w(TypeError);function x(t){return function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return u(t,e,r)}}function w(t){return function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return l(t,n)}}function E(t,r){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:h;e&&e(t,null);let o=r.length;for(;o--;){let e=r[o];if("string"==typeof e){const t=i(e);t!==e&&(n(r)||(r[o]=t),e=t)}t[e]=!0}return t}function N(e){const n=s(null);for(const[r,o]of t(e))void 0!==i(e,r)&&(n[r]=o);return n}function I(t,e){for(;null!==t;){const n=i(t,e);if(n){if(n.get)return x(n.get);if("function"==typeof n.value)return x(n.value)}t=r(t)}function n(t){return console.warn("fallback value for",t),null}return n}const C=o(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),S=o(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),L=o(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),M=o(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),O=o(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),P=o(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),R=o(["#text"]),T=o(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),A=o(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),D=o(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),k=o(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),F=a(/\{\{[\w\W]*|[\w\W]*\}\}/gm),j=a(/<%[\w\W]*|[\w\W]*%>/gm),z=a(/\${[\w\W]*}/gm),G=a(/^data-[\-\w.\u00B7-\uFFFF]/),B=a(/^aria-[\-\w]+$/),q=a(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),U=a(/^(?:\w+script|data):/i),V=a(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),Y=a(/^html$/i);var X=Object.freeze({__proto__:null,MUSTACHE_EXPR:F,ERB_EXPR:j,TMPLIT_EXPR:z,DATA_ATTR:G,ARIA_ATTR:B,IS_ALLOWED_URI:q,IS_SCRIPT_OR_DATA:U,ATTR_WHITESPACE:V,DOCTYPE_NAME:Y});const H=function(){return"undefined"==typeof window?null:window},W=function(t,e){if("object"!=typeof t||"function"!=typeof t.createPolicy)return null;let n=null;const r="data-tt-policy-suffix";e&&e.hasAttribute(r)&&(n=e.getAttribute(r));const i="dompurify"+(n?"#"+n:"");try{return t.createPolicy(i,{createHTML:t=>t,createScriptURL:t=>t})}catch(t){return console.warn("TrustedTypes policy "+i+" could not be created."),null}};function $(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:H();const n=t=>$(t);if(n.version="3.0.6",n.removed=[],!e||!e.document||9!==e.document.nodeType)return n.isSupported=!1,n;let{document:r}=e;const i=r,a=i.currentScript,{DocumentFragment:u,HTMLTemplateElement:l,Node:x,Element:w,NodeFilter:F,NamedNodeMap:j=e.NamedNodeMap||e.MozNamedAttrMap,HTMLFormElement:z,DOMParser:G,trustedTypes:B}=e,U=w.prototype,V=I(U,"cloneNode"),Z=I(U,"nextSibling"),J=I(U,"childNodes"),K=I(U,"parentNode");if("function"==typeof l){const t=r.createElement("template");t.content&&t.content.ownerDocument&&(r=t.content.ownerDocument)}let Q,tt="";const{implementation:et,createNodeIterator:nt,createDocumentFragment:rt,getElementsByTagName:it}=r,{importNode:ot}=i;let at={};n.isSupported="function"==typeof t&&"function"==typeof K&&et&&void 0!==et.createHTMLDocument;const{MUSTACHE_EXPR:st,ERB_EXPR:ut,TMPLIT_EXPR:lt,DATA_ATTR:ct,ARIA_ATTR:pt,IS_SCRIPT_OR_DATA:ft,ATTR_WHITESPACE:ht}=X;let{IS_ALLOWED_URI:dt}=X,gt=null;const yt=E({},[...C,...S,...L,...O,...R]);let mt=null;const _t=E({},[...T,...A,...D,...k]);let vt=Object.seal(s(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),bt=null,xt=null,wt=!0,Et=!0,Nt=!1,It=!0,Ct=!1,St=!1,Lt=!1,Mt=!1,Ot=!1,Pt=!1,Rt=!1,Tt=!0,At=!1;const Dt="user-content-";let kt=!0,Ft=!1,jt={},zt=null;const Gt=E({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let Bt=null;const qt=E({},["audio","video","img","source","image","track"]);let Ut=null;const Vt=E({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Yt="http://www.w3.org/1998/Math/MathML",Xt="http://www.w3.org/2000/svg",Ht="http://www.w3.org/1999/xhtml";let Wt=Ht,$t=!1,Zt=null;const Jt=E({},[Yt,Xt,Ht],d);let Kt=null;const Qt=["application/xhtml+xml","text/html"],te="text/html";let ee=null,ne=null;const re=r.createElement("form"),ie=function(t){return t instanceof RegExp||t instanceof Function},oe=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!ne||ne!==t){if(t&&"object"==typeof t||(t={}),t=N(t),Kt=Kt=-1===Qt.indexOf(t.PARSER_MEDIA_TYPE)?te:t.PARSER_MEDIA_TYPE,ee="application/xhtml+xml"===Kt?d:h,gt="ALLOWED_TAGS"in t?E({},t.ALLOWED_TAGS,ee):yt,mt="ALLOWED_ATTR"in t?E({},t.ALLOWED_ATTR,ee):_t,Zt="ALLOWED_NAMESPACES"in t?E({},t.ALLOWED_NAMESPACES,d):Jt,Ut="ADD_URI_SAFE_ATTR"in t?E(N(Vt),t.ADD_URI_SAFE_ATTR,ee):Vt,Bt="ADD_DATA_URI_TAGS"in t?E(N(qt),t.ADD_DATA_URI_TAGS,ee):qt,zt="FORBID_CONTENTS"in t?E({},t.FORBID_CONTENTS,ee):Gt,bt="FORBID_TAGS"in t?E({},t.FORBID_TAGS,ee):{},xt="FORBID_ATTR"in t?E({},t.FORBID_ATTR,ee):{},jt="USE_PROFILES"in t&&t.USE_PROFILES,wt=!1!==t.ALLOW_ARIA_ATTR,Et=!1!==t.ALLOW_DATA_ATTR,Nt=t.ALLOW_UNKNOWN_PROTOCOLS||!1,It=!1!==t.ALLOW_SELF_CLOSE_IN_ATTR,Ct=t.SAFE_FOR_TEMPLATES||!1,St=t.WHOLE_DOCUMENT||!1,Ot=t.RETURN_DOM||!1,Pt=t.RETURN_DOM_FRAGMENT||!1,Rt=t.RETURN_TRUSTED_TYPE||!1,Mt=t.FORCE_BODY||!1,Tt=!1!==t.SANITIZE_DOM,At=t.SANITIZE_NAMED_PROPS||!1,kt=!1!==t.KEEP_CONTENT,Ft=t.IN_PLACE||!1,dt=t.ALLOWED_URI_REGEXP||q,Wt=t.NAMESPACE||Ht,vt=t.CUSTOM_ELEMENT_HANDLING||{},t.CUSTOM_ELEMENT_HANDLING&&ie(t.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(vt.tagNameCheck=t.CUSTOM_ELEMENT_HANDLING.tagNameCheck),t.CUSTOM_ELEMENT_HANDLING&&ie(t.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(vt.attributeNameCheck=t.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),t.CUSTOM_ELEMENT_HANDLING&&"boolean"==typeof t.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements&&(vt.allowCustomizedBuiltInElements=t.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Ct&&(Et=!1),Pt&&(Ot=!0),jt&&(gt=E({},[...R]),mt=[],!0===jt.html&&(E(gt,C),E(mt,T)),!0===jt.svg&&(E(gt,S),E(mt,A),E(mt,k)),!0===jt.svgFilters&&(E(gt,L),E(mt,A),E(mt,k)),!0===jt.mathMl&&(E(gt,O),E(mt,D),E(mt,k))),t.ADD_TAGS&&(gt===yt&&(gt=N(gt)),E(gt,t.ADD_TAGS,ee)),t.ADD_ATTR&&(mt===_t&&(mt=N(mt)),E(mt,t.ADD_ATTR,ee)),t.ADD_URI_SAFE_ATTR&&E(Ut,t.ADD_URI_SAFE_ATTR,ee),t.FORBID_CONTENTS&&(zt===Gt&&(zt=N(zt)),E(zt,t.FORBID_CONTENTS,ee)),kt&&(gt["#text"]=!0),St&&E(gt,["html","head","body"]),gt.table&&(E(gt,["tbody"]),delete bt.tbody),t.TRUSTED_TYPES_POLICY){if("function"!=typeof t.TRUSTED_TYPES_POLICY.createHTML)throw b('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if("function"!=typeof t.TRUSTED_TYPES_POLICY.createScriptURL)throw b('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');Q=t.TRUSTED_TYPES_POLICY,tt=Q.createHTML("")}else void 0===Q&&(Q=W(B,a)),null!==Q&&"string"==typeof tt&&(tt=Q.createHTML(""));o&&o(t),ne=t}},ae=E({},["mi","mo","mn","ms","mtext"]),se=E({},["foreignobject","desc","title","annotation-xml"]),ue=E({},["title","style","font","a","script"]),le=E({},S);E(le,L),E(le,M);const ce=E({},O);E(ce,P);const pe=function(t){let e=K(t);e&&e.tagName||(e={namespaceURI:Wt,tagName:"template"});const n=h(t.tagName),r=h(e.tagName);return!!Zt[t.namespaceURI]&&(t.namespaceURI===Xt?e.namespaceURI===Ht?"svg"===n:e.namespaceURI===Yt?"svg"===n&&("annotation-xml"===r||ae[r]):Boolean(le[n]):t.namespaceURI===Yt?e.namespaceURI===Ht?"math"===n:e.namespaceURI===Xt?"math"===n&&se[r]:Boolean(ce[n]):t.namespaceURI===Ht?!(e.namespaceURI===Xt&&!se[r])&&!(e.namespaceURI===Yt&&!ae[r])&&!ce[n]&&(ue[n]||!le[n]):!("application/xhtml+xml"!==Kt||!Zt[t.namespaceURI]))},fe=function(t){f(n.removed,{element:t});try{t.parentNode.removeChild(t)}catch(e){t.remove()}},he=function(t,e){try{f(n.removed,{attribute:e.getAttributeNode(t),from:e})}catch(t){f(n.removed,{attribute:null,from:e})}if(e.removeAttribute(t),"is"===t&&!mt[t])if(Ot||Pt)try{fe(e)}catch(t){}else try{e.setAttribute(t,"")}catch(t){}},de=function(t){let e=null,n=null;if(Mt)t="<remove></remove>"+t;else{const e=g(t,/^[\r\n\t ]+/);n=e&&e[0]}"application/xhtml+xml"===Kt&&Wt===Ht&&(t='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+t+"</body></html>");const i=Q?Q.createHTML(t):t;if(Wt===Ht)try{e=(new G).parseFromString(i,Kt)}catch(t){}if(!e||!e.documentElement){e=et.createDocument(Wt,"template",null);try{e.documentElement.innerHTML=$t?tt:i}catch(t){}}const o=e.body||e.documentElement;return t&&n&&o.insertBefore(r.createTextNode(n),o.childNodes[0]||null),Wt===Ht?it.call(e,St?"html":"body")[0]:St?e.documentElement:o},ge=function(t){return nt.call(t.ownerDocument||t,t,F.SHOW_ELEMENT|F.SHOW_COMMENT|F.SHOW_TEXT,null)},ye=function(t){return t instanceof z&&("string"!=typeof t.nodeName||"string"!=typeof t.textContent||"function"!=typeof t.removeChild||!(t.attributes instanceof j)||"function"!=typeof t.removeAttribute||"function"!=typeof t.setAttribute||"string"!=typeof t.namespaceURI||"function"!=typeof t.insertBefore||"function"!=typeof t.hasChildNodes)},me=function(t){return"function"==typeof x&&t instanceof x},_e=function(t,e,r){at[t]&&c(at[t],(t=>{t.call(n,e,r,ne)}))},ve=function(t){let e=null;if(_e("beforeSanitizeElements",t,null),ye(t))return fe(t),!0;const r=ee(t.nodeName);if(_e("uponSanitizeElement",t,{tagName:r,allowedTags:gt}),t.hasChildNodes()&&!me(t.firstElementChild)&&v(/<[/\w]/g,t.innerHTML)&&v(/<[/\w]/g,t.textContent))return fe(t),!0;if(!gt[r]||bt[r]){if(!bt[r]&&xe(r)){if(vt.tagNameCheck instanceof RegExp&&v(vt.tagNameCheck,r))return!1;if(vt.tagNameCheck instanceof Function&&vt.tagNameCheck(r))return!1}if(kt&&!zt[r]){const e=K(t)||t.parentNode,n=J(t)||t.childNodes;if(n&&e)for(let r=n.length-1;r>=0;--r)e.insertBefore(V(n[r],!0),Z(t))}return fe(t),!0}return t instanceof w&&!pe(t)?(fe(t),!0):"noscript"!==r&&"noembed"!==r&&"noframes"!==r||!v(/<\/no(script|embed|frames)/i,t.innerHTML)?(Ct&&3===t.nodeType&&(e=t.textContent,c([st,ut,lt],(t=>{e=y(e,t," ")})),t.textContent!==e&&(f(n.removed,{element:t.cloneNode()}),t.textContent=e)),_e("afterSanitizeElements",t,null),!1):(fe(t),!0)},be=function(t,e,n){if(Tt&&("id"===e||"name"===e)&&(n in r||n in re))return!1;if(Et&&!xt[e]&&v(ct,e));else if(wt&&v(pt,e));else if(!mt[e]||xt[e]){if(!(xe(t)&&(vt.tagNameCheck instanceof RegExp&&v(vt.tagNameCheck,t)||vt.tagNameCheck instanceof Function&&vt.tagNameCheck(t))&&(vt.attributeNameCheck instanceof RegExp&&v(vt.attributeNameCheck,e)||vt.attributeNameCheck instanceof Function&&vt.attributeNameCheck(e))||"is"===e&&vt.allowCustomizedBuiltInElements&&(vt.tagNameCheck instanceof RegExp&&v(vt.tagNameCheck,n)||vt.tagNameCheck instanceof Function&&vt.tagNameCheck(n))))return!1}else if(Ut[e]);else if(v(dt,y(n,ht,"")));else if("src"!==e&&"xlink:href"!==e&&"href"!==e||"script"===t||0!==m(n,"data:")||!Bt[t])if(Nt&&!v(ft,y(n,ht,"")));else if(n)return!1;return!0},xe=function(t){return t.indexOf("-")>0},we=function(t){_e("beforeSanitizeAttributes",t,null);const{attributes:e}=t;if(!e)return;const r={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:mt};let i=e.length;for(;i--;){const o=e[i],{name:a,namespaceURI:s,value:u}=o,l=ee(a);let f="value"===a?u:_(u);if(r.attrName=l,r.attrValue=f,r.keepAttr=!0,r.forceKeepAttr=void 0,_e("uponSanitizeAttribute",t,r),f=r.attrValue,r.forceKeepAttr)continue;if(he(a,t),!r.keepAttr)continue;if(!It&&v(/\/>/i,f)){he(a,t);continue}Ct&&c([st,ut,lt],(t=>{f=y(f,t," ")}));const h=ee(t.nodeName);if(be(h,l,f)){if(!At||"id"!==l&&"name"!==l||(he(a,t),f=Dt+f),Q&&"object"==typeof B&&"function"==typeof B.getAttributeType)if(s);else switch(B.getAttributeType(h,l)){case"TrustedHTML":f=Q.createHTML(f);break;case"TrustedScriptURL":f=Q.createScriptURL(f)}try{s?t.setAttributeNS(s,a,f):t.setAttribute(a,f),p(n.removed)}catch(t){}}}_e("afterSanitizeAttributes",t,null)},Ee=function t(e){let n=null;const r=ge(e);for(_e("beforeSanitizeShadowDOM",e,null);n=r.nextNode();)_e("uponSanitizeShadowNode",n,null),ve(n)||(n.content instanceof u&&t(n.content),we(n));_e("afterSanitizeShadowDOM",e,null)};return n.sanitize=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=null,o=null,a=null,s=null;if($t=!t,$t&&(t="\x3c!--\x3e"),"string"!=typeof t&&!me(t)){if("function"!=typeof t.toString)throw b("toString is not a function");if("string"!=typeof(t=t.toString()))throw b("dirty is not a string, aborting")}if(!n.isSupported)return t;if(Lt||oe(e),n.removed=[],"string"==typeof t&&(Ft=!1),Ft){if(t.nodeName){const e=ee(t.nodeName);if(!gt[e]||bt[e])throw b("root node is forbidden and cannot be sanitized in-place")}}else if(t instanceof x)r=de("\x3c!----\x3e"),o=r.ownerDocument.importNode(t,!0),1===o.nodeType&&"BODY"===o.nodeName||"HTML"===o.nodeName?r=o:r.appendChild(o);else{if(!Ot&&!Ct&&!St&&-1===t.indexOf("<"))return Q&&Rt?Q.createHTML(t):t;if(r=de(t),!r)return Ot?null:Rt?tt:""}r&&Mt&&fe(r.firstChild);const l=ge(Ft?t:r);for(;a=l.nextNode();)ve(a)||(a.content instanceof u&&Ee(a.content),we(a));if(Ft)return t;if(Ot){if(Pt)for(s=rt.call(r.ownerDocument);r.firstChild;)s.appendChild(r.firstChild);else s=r;return(mt.shadowroot||mt.shadowrootmode)&&(s=ot.call(i,s,!0)),s}let p=St?r.outerHTML:r.innerHTML;return St&&gt["!doctype"]&&r.ownerDocument&&r.ownerDocument.doctype&&r.ownerDocument.doctype.name&&v(Y,r.ownerDocument.doctype.name)&&(p="<!DOCTYPE "+r.ownerDocument.doctype.name+">\n"+p),Ct&&c([st,ut,lt],(t=>{p=y(p,t," ")})),Q&&Rt?Q.createHTML(p):p},n.setConfig=function(){oe(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),Lt=!0},n.clearConfig=function(){ne=null,Lt=!1},n.isValidAttribute=function(t,e,n){ne||oe({});const r=ee(t),i=ee(e);return be(r,i,n)},n.addHook=function(t,e){"function"==typeof e&&(at[t]=at[t]||[],f(at[t],e))},n.removeHook=function(t){if(at[t])return p(at[t])},n.removeHooks=function(t){at[t]&&(at[t]=[])},n.removeAllHooks=function(){at={}},n}var Z=$();return Z}()}(by)),by.exports}var wy=ft(window.DOMPurify||(window.DOMPurify=xy().default||xy()));const Ey=function(t,e){let{maxsize:n}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new Map;return{get:function(i){if(arguments.length>1&&void 0!==arguments[1]&&arguments[1]&&1===r.size)return r.values().next().value;const o=t(i);if(r.has(o))return r.get(o);const a=e(i);return n&&r.size>=n&&(r=new Map),r.set(o,a),a}}},Ny=["a","span","b","br","i","strong","sup","sub","strike","u","em","tt"].sort(),Iy=1e5,Cy=Ey((t=>t.version),(t=>(t.addHook("afterSanitizeElements",(function(t){"a"===t.nodeName.toLowerCase()&&("_self"!==t.getAttribute("target")&&t.setAttribute("target","_blank"),t.setAttribute("rel","nofollow noopener noreferrer"))})),Ey((t=>String(t)),(e=>{const n={ALLOWED_TAGS:void 0===e?Ny:"string"==typeof e?e.toLowerCase().slice(1,-1).split("><"):e,ADD_ATTR:["target"],FORCE_BODY:!0};return Ey((t=>t),(e=>t.sanitize(e,n)),{maxsize:Iy})}),{maxsize:Iy}))));function Sy(t,e){return function(t){return function(e,n){return e?Cy.get(t,!0).get(n).get(e):e}}(wy)(t,e)}const Ly=(t,e)=>e,My=t=>({inBox:!1,globe:{globeOutline:{width:2,strokeDashArray:!1,color:t?"#323232":"#ffffff"},landOutline:{width:.5,strokeDashArray:!1,color:null},graticule:{width:.5,strokeDashArray:!1,color:t?"#4b4b4b":"#dedede"},outerBlur:!0,land:t?"#565656":"#d7d7d7",water:t?"#000000":"#ffffff",background:t?"#000000":"#00000055"},region:{outerBlur:!0,outline:{width:.7,strokeDashArray:!1},land:t?"#555555":"#ffffff",landOutline:t?"#000000":"#494949"},view:{strokeWidth:2,strokeDashArray:!1,color:t?"#c91e1e":"#d00"},label:{color:"#bababa",fontSize:!1,letterSpacing:1,lineHeight:1.2,fontWeight:!1,textTransform:!1,typeface:"inherit"},padding:{"bottom-right":"30px 15px 15px 15px","bottom-left":"15px 30px 15px 15px","top-right":"15px 15px 15px 30px","top-left":"15px 30px 15px 15px"}});const Oy=(t,e)=>e;function Py(){let t=arguments.length>1?arguments[1]:void 0,e={type:"region",width:250,height:250,center:[0,0],position:"top-right",boundaryGeom:void 0,viewPoints:void 0,labelText:"",customUpload:!1,clampViewbox:!1,darkMode:!1,fitMap:!0,viewBuffer:15};if(e=ac(e,arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{arrayMerge:Oy}),"region"===e.type&&!e.boundaryGeom&&0===Object.keys(e.boundaryGeom).length)throw new Error("you need to pass geometry for type region");if(!e.themeData)throw new Error("you need to pass themeData");let n=()=>{};const r=function(t,e){const n=uo(t,"vis.base.insetMap",{});return ac.all([My(e),n],{arrayMerge:Ly})}(e.themeData,e.darkMode);return{render:function(i){e=ac(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{arrayMerge:Oy}),i.html("");const o=i.classed("inset-map-container",!0).classed("inset-map-".concat(e.type),!0),a=o.append("svg").style("overflow","visible").at({width:e.width,height:e.height}).append("g.inset-map");if("globe"===e.type)$g(a,e,r);else if("region"===e.type){const{centroidPx:i,dx:s,dy:u,setView:l}=_y(0,t,a,e,r);""!==e.labelText&&function(t,e,n,r,i,o,a){t.append("div.label.outline"),t.append("div.label");const s=t.selectAll("div.label").style("width",n.width+"px"),u=Sy(n.labelText,"<b><i><br><strong><em><img>");s.append("span").html(u.replace(/\n/g,"<br>")).st({color:uo(r,"label.color")});const l=e.getElementBounds(s.node()),c=uo(r,"region.land");t.selectAll("div.label.outline span").st({"text-shadow":"0 1px 0 ".concat(c,", 1px 0 0 ").concat(c,", 0 -1px 0 ").concat(c,", -1px 0 0 ").concat(c,",1px 1px 0 ").concat(c,", 1px -1px 0 ").concat(c,", -1px -1px 0 ").concat(c,", -1px 1px 0 ").concat(c,",0 2px 1px ").concat(c,", 2px 0 1px ").concat(c,", 0 -2px 1px ").concat(c,", -2px 0 1px ").concat(c,",-1px 2px 0px ").concat(c,", 2px -1px 0px ").concat(c,", -1px -2px 0px ").concat(c,", -2px -1px 0px ").concat(c,",1px 2px 0px ").concat(c,", 2px 1px 0px ").concat(c,", 1px -2px 0px ").concat(c,", -2px 1px 0px ").concat(c)}),t.selectAll("div.label:not(.outline) span").st({color:uo(r,"label.color")});const p=t.st("padding")||r.padding[n.position],f=Number(p.split("px")[3]),h=Number(p.split("px")[0]);s.st({left:"".concat(f+o*(n.position.indexOf("left")>-1?-1:1)+i[0]-.5*l.width,"px"),top:"".concat(h+a*(n.position.indexOf("top")>-1?-1:1)+i[1]-.5*l.height,"px"),"letter-spacing":"".concat(uo(r,"label.letterSpacing"),"px"),"line-height":"".concat(function(){const t=uo(r,"label.lineHeight");return t>3?"".concat(t,"px"):String(t)}()),"font-size":uo(r,"label.fontSize"),"font-weight":uo(r,"label.fontWeight"),"text-transform":uo(r,"label.textTransform"),"font-family":uo(r,"label.typeface")})}(o,t,e,r,i,s,u),n=l}else console.warn("this type doesn't exist");return o},setView:function(){n(...arguments)}}}var Ry={init(t,e,n,r){function i(i){if(!r.querySelector(".mapboxgl-canvas"))return;const{miniMap:a}=i;let s;if("globe"!==a.opt){const t=n.chart().asset("minimap-geometry.json");if(t)try{s=JSON.parse(t)}catch(t){}}t.html(""),function(t,e){let{opt:n,enabled:r}=t;return!(!r||"globe"!==n&&!(["boundary","custom"].includes(n)&&e&&e.objects))}(a,s)&&function(i,a){const s=i.miniMap,u=n.__theme,l=r.querySelector(".mapboxgl-canvas").clientHeight,c=r.querySelector(".mapboxgl-canvas").clientWidth,p=void 0!==s.offsetX||void 0!==s.offsetX,f=Math.min(1,c/i.defaultMapSize),h=uo(u,"vis.locator-maps.miniMap.distFromEdge",p?0:5),d=((s.size||165)-45)*f,g=d,y="globe"===s.opt?"globe":"region",m={"bottom-right":uo(u,"vis.base.insetMap.padding.bottom-right",uo(u,"vis.locator-maps.miniMap.padding.bottom-right","30px 15px 15px 30px")),"bottom-left":uo(u,"vis.base.insetMap.padding.bottom-left",uo(u,"vis.locator-maps.miniMap.padding.bottom-left","10px 35px 15px 10px")),"top-right":uo(u,"vis.base.insetMap.padding.top-right",uo(u,"vis.locator-maps.miniMap.padding.top-right","10px 5px 15px 35px")),"top-left":uo(u,"vis.base.insetMap.padding.top-left",uo(u,"vis.locator-maps.miniMap.padding.top-left","10px 35px 15px 15px"))};let _=0,v=0;if(p){const t=-1!==s.position.indexOf("right")?Number(m[s.position].split("px")[1]):Number(m[s.position].split("px")[3]),e=-1!==s.position.indexOf("top")?Number(m[s.position].split("px")[0]):Number(m[s.position].split("px")[2]);_=(c-d)*(s.offsetX/100)-t,v=(l-g)*(s.offsetY/100)-e}t.style("height",g+"px").style("bottom",(function(){return("bottom-left"===s.position&&i.scale?28:0)+v+"px"})).style("top",-1===s.position.indexOf("bottom")?h+v+"px":"unset").style("left","unset").style("right","unset").attr("class",s.position).style(-1===s.position.indexOf("right")?"left":"right",h+_+"px").style("padding",m[s.position]),u.vis["locator-maps"]||(u.vis["locator-maps"]={});u.vis["locator-maps"].insetMap||(u.vis["locator-maps"].insetMap={});u.vis["locator-maps"].insetMap.padding=m;const b=e.getStyle(),x=uo(b,"metadata.style.colors.land","#f2f3f0"),w=uo(b,"metadata.styleIsDark",!1),E={globe:{globeOutline:{color:uo(b,"metadata.style.colors.miniMap.globe.globeOutline",w?fl(x).darker(-1).formatHex():"#ffffff")},landOutline:{color:uo(b,"metadata.style.colors.miniMap.globe.landOutline")},graticule:{color:uo(b,"metadata.style.colors.miniMap.globe.graticule","hsla(0,0%,100%,".concat(w?.2:.5,")"))},land:uo(b,"metadata.style.colors.miniMap.globe.land",w?"#000000":"#ffffff"),water:uo(b,"metadata.style.colors.miniMap.globe.water",ku(b.layers,{id:"ocean"}).paint["fill-color"]),background:uo(b,"metadata.style.colors.miniMap.globe.background","#00000055")},region:{land:uo(b,"metadata.style.colors.miniMap.region.land",w?fl(x).darker(-1).hex():"#ffffff"),landOutline:uo(b,"metadata.style.colors.miniMap.region.landOutline",w?"#000000":"#494949")},view:{color:uo(b,"metadata.style.colors.miniMap.view",w?"#c91e1e":"#d00")},label:{color:uo(b,"metadata.style.colors.miniMap.region.label",w?"#a8a8a8":"#bababa")}},N=(t,e)=>e;Xl(u,"vis.base.insetMap",ac.all([uo(u,"vis.base.insetMap",{}),uo(u,"vis.base.locator-maps.insetMap",{}),E],{arrayMerge:N}));const I={type:y,viewPoints:o(c,l),visType:"locator-maps",width:d,height:d,center:e.getCenter().toArray(),position:s.position,boundaryGeom:a,labelText:s.label,customUpload:s.bounds&&s.bounds.imported,hasInnerBorders:!(!s.bounds||!s.bounds.hasInnerBorders),themeData:u,zoom:e.getZoom(),viewBuffer:{top:15,bottom:10,left:15,right:15}},C=Py(I,n.chart());t.call(C.render)}(i,s)}function o(t,n){const r=[];return Ed(0,1,.05).forEach((e=>r.push([t*e,0]))),Ed(0,1,.05).forEach((e=>r.push([t,n*e]))),Ed(0,1,.05).forEach((e=>r.push([t*(1-e),n]))),Ed(0,1,.05).forEach((t=>r.push([0,n*(1-t)]))),r.map((t=>e.unproject(t)))}return{render:i,initEditor(t){let{chart:e}=t;["metadata.visualize.miniMap","metadata.visualize.view","metadata.visualize.style","darkMode"].forEach((t=>{e.observeDeep(t,((n,r)=>{setTimeout((()=>{if(void 0===r&&"darkMode"!==t)return;i(e.getMetadata("visualize"))}))}))}))}}}};var Ty=function(t,e){for(var n=-1,r=null==t?0:t.length;++n<r&&!1!==e(t[n],n,t););return t},Ay=Kr,Dy=Wo;var ky=function(t,e){return t&&Ay(e,Dy(e),t)},Fy=Kr,jy=_i;var zy=function(t,e){return t&&Fy(e,jy(e),t)},Gy=Kr,By=zo;var qy=function(t,e){return Gy(t,By(t),e)},Uy=Mo,Vy=Zn,Yy=zo,Xy=To,Hy=Object.getOwnPropertySymbols?function(t){for(var e=[];t;)Uy(e,Yy(t)),t=Vy(t);return e}:Xy,Wy=Kr,$y=Hy;var Zy=function(t,e){return Wy(t,$y(t),e)},Jy=Ro,Ky=Hy,Qy=_i;var tm=function(t){return Jy(t,Qy,Ky)},em=Object.prototype.hasOwnProperty;var nm=function(t){var e=t.length,n=new t.constructor(e);return e&&"string"==typeof t[0]&&em.call(t,"index")&&(n.index=t.index,n.input=t.input),n},rm=Bn;var im=function(t,e){var n=e?rm(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)},om=/\w*$/;var am=function(t){var e=new t.constructor(t.source,om.exec(t));return e.lastIndex=t.lastIndex,e},sm=Et?Et.prototype:void 0,um=sm?sm.valueOf:void 0;var lm=Bn,cm=im,pm=am,fm=function(t){return um?Object(um.call(t)):{}},hm=Un;var dm=function(t,e,n){var r=t.constructor;switch(e){case"[object ArrayBuffer]":return lm(t);case"[object Boolean]":case"[object Date]":return new r(+t);case"[object DataView]":return cm(t,n);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return hm(t,n);case"[object Map]":case"[object Set]":return new r;case"[object Number]":case"[object String]":return new r(t);case"[object RegExp]":return pm(t);case"[object Symbol]":return fm(t)}},gm=Ea,ym=rr;var mm=function(t){return ym(t)&&"[object Map]"==gm(t)},_m=jr,vm=Gr&&Gr.isMap,bm=vm?_m(vm):mm,xm=Ea,wm=rr;var Em=function(t){return wm(t)&&"[object Set]"==xm(t)},Nm=jr,Im=Gr&&Gr.isSet,Cm=Im?Nm(Im):Em,Sm=Mn,Lm=Ty,Mm=$r,Om=ky,Pm=zy,Rm=jn,Tm=Vn,Am=qy,Dm=Zy,km=Ko,Fm=tm,jm=Ea,zm=nm,Gm=dm,Bm=nr,qm=hr,Um=Er,Vm=bm,Ym=Dt,Xm=Cm,Hm=Wo,Wm=_i,$m="[object Arguments]",Zm="[object Function]",Jm="[object Object]",Km={};Km[$m]=Km["[object Array]"]=Km["[object ArrayBuffer]"]=Km["[object DataView]"]=Km["[object Boolean]"]=Km["[object Date]"]=Km["[object Float32Array]"]=Km["[object Float64Array]"]=Km["[object Int8Array]"]=Km["[object Int16Array]"]=Km["[object Int32Array]"]=Km["[object Map]"]=Km["[object Number]"]=Km[Jm]=Km["[object RegExp]"]=Km["[object Set]"]=Km["[object String]"]=Km["[object Symbol]"]=Km["[object Uint8Array]"]=Km["[object Uint8ClampedArray]"]=Km["[object Uint16Array]"]=Km["[object Uint32Array]"]=!0,Km["[object Error]"]=Km[Zm]=Km["[object WeakMap]"]=!1;var Qm=function t(e,n,r,i,o,a){var s,u=1&n,l=2&n,c=4&n;if(r&&(s=o?r(e,i,o,a):r(e)),void 0!==s)return s;if(!Ym(e))return e;var p=qm(e);if(p){if(s=zm(e),!u)return Tm(e,s)}else{var f=jm(e),h=f==Zm||"[object GeneratorFunction]"==f;if(Um(e))return Rm(e,u);if(f==Jm||f==$m||h&&!o){if(s=l||h?{}:Bm(e),!u)return l?Dm(e,Pm(s,e)):Am(e,Om(s,e))}else{if(!Km[f])return o?e:{};s=Gm(e,f,u)}}a||(a=new Sm);var d=a.get(e);if(d)return d;a.set(e,s),Xm(e)?e.forEach((function(i){s.add(t(i,n,r,i,e,a))})):Vm(e)&&e.forEach((function(i,o){s.set(o,t(i,n,r,o,e,a))}));var g=p?void 0:(c?l?Fm:km:l?Wm:Hm)(e);return Lm(g||e,(function(i,o){g&&(i=e[o=i]),Mm(s,o,t(i,n,r,o,e,a))})),s};var t_=Os,e_=function(t,e,n){var r=-1,i=t.length;e<0&&(e=-e>i?0:i+e),(n=n>i?i:n)<0&&(n+=i),i=e>n?0:n-e>>>0,e>>>=0;for(var o=Array(i);++r<i;)o[r]=t[r+e];return o};var n_=function(t,e){return e.length<2?t:t_(t,e_(e,0,-1))},r_=Is,i_=function(t){var e=null==t?0:t.length;return e?t[e-1]:void 0},o_=n_,a_=Ss;var s_=function(t,e){return e=r_(e,t),null==(t=o_(t,e))||delete t[a_(i_(e))]},u_=Rr;var l_=function(t){return u_(t)?void 0:t},c_=fr,p_=hr,f_=Et?Et.isConcatSpreadable:void 0;var h_=Mo,d_=function(t){return p_(t)||c_(t)||!!(f_&&t&&t[f_])};var g_=function t(e,n,r,i,o){var a=-1,s=e.length;for(r||(r=d_),o||(o=[]);++a<s;){var u=e[a];n>0&&r(u)?n>1?t(u,n-1,r,i,o):h_(o,u):i||(o[o.length]=u)}return o},y_=g_;var m_=function(t){return(null==t?0:t.length)?y_(t,1):[]},__=mt,v_=he;var b_=hs,x_=Qm,w_=s_,E_=Is,N_=Kr,I_=l_,C_=tm,S_=function(t){return v_(__(t,void 0,m_),t+"")}((function(t,e){var n={};if(null==t)return n;var r=!1;e=b_(e,(function(e){return e=E_(e,t),r||(r=e.length>1),e})),N_(t,C_(t),n),r&&(n=x_(n,7,I_));for(var i=e.length;i--;)w_(n,e[i]);return n})),L_=ft(S_),M_=ft(hd((function(t,e,n){t[n?0:1].push(e)}),(function(){return[[],[]]})));function O_(t){return function(t,n,r){return[t,n,r]=function(t){return t.length>=3?[].slice.call(t):t[0]}(arguments),t=e(t),n=e(n),r=e(r),.2126*t+.7152*n+.0722*r}(function(t){var e;if(t.match(/^#?([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/))return 4!==t.length&&7!==t.length||(t=t.substr(1)),3===t.length&&(t=(t=t.split(""))[0]+t[0]+t[1]+t[1]+t[2]+t[2]),[(e=parseInt(t,16))>>16,e>>8&255,255&e,1];if(t.match(/^#?([A-Fa-f0-9]{8})$/))return 9===t.length&&(t=t.substr(1)),[(e=parseInt(t,16))>>24&255,e>>16&255,e>>8&255,Math.round((255&e)/255*100)/100];throw new Error("unknown color: "+t)}(t));function e(t){return(t/=255)<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)}}function P_(t,e,n,r){const i=uo(t,"metadata.defaultColors",{}),o=uo(t,"metadata.styleIsDark",!1);return function(t){const a="point"===e.type?e:e.properties;if(!o)return n(uo(a,t),{noInvert:!0});const s=R_(i,t,e),u=(l=s,c=uo(a,t),Ec.valid(l)&&Ec.valid(c)&&Ec(l).hex()===Ec(c).hex());var l,c;if(u&&r){const n=R_(i.darkMode,t,e);if(n)return n}return n(uo(a,t),{forceInvert:u})}}function R_(t,e,n){const r="point"===n.type?"defaultPointMarker":"mapStyle.colors.".concat("line"===n.type?"lineMarker":n.highlight?"highlightRegion":"areaMarker");return uo(t,"".concat(r,".").concat(e))}function T_(t){const e=t.match(/<a(.*?)>/g);return e?(e.forEach((e=>{let n=e;e.includes("target")||(n=n.replace("<a",'<a target="_blank"')),e.includes("noopener")||(n=n.replace("<a",'<a rel="noopener"')),e.includes("href")&&e.includes("www")&&!e.includes("http://")&&!e.includes("https://")&&(n=n.replace("www","http://www")),t=t.replace(e,n)})),t):t}function A_(t,e){const n=t.replace("M","").replace("Q","").trim().replace(/ /g,",").split(",");let r=Math.max(Math.abs(Number(n[0])),Math.abs(Number(n[1])))-e;return isNaN(r)&&(r=0),r}const D_={circle:1,square:1,locator:1,certificate:1,heart:1,"round-square":1},k_=Ny.concat("img"),F_=k_.concat(["table","thead","tbody","tfoot","caption","colgroup","col","tr","td","th"]),j_=Math.cos(.25*Math.PI),z_=Math.sin(.25*Math.PI);function G_(t){let[e,n]=t;return[e*j_-n*z_,e*z_+n*j_]}function B_(t){let[e,n]=t;return[e*j_+n*z_,n*j_-e*z_]}function q_(t,e,n){let r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];const i=r?1:0,o=(n-t[i])/(e[i]-t[i]);if(o<0||o>1)return null;const a=r?0:1;return t[a]+o*(e[a]-t[a])}function U_(t,e,n,r,i,o,a){if(r!==o&&i!==a)throw new Error("only horizontal and vertical lines are supported");const s=i===a,u=function(t,e,n,r){let i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];const o=i?1:0;let a=t[o]-2*e[o]+n[o];a||(a=.1);const s=2*(e[o]-t[o]),u=t[o]-r,l=(-s+Math.sqrt(s*s-4*a*u))/(2*a),c=(-s-Math.sqrt(s*s-4*a*u))/(2*a),p=i?0:1,f=[];if(l>=0&&l<=1){const o=Math.pow(1-l,2)*t[p]+2*(1-l)*l*e[p]+l*l*n[p];f.push(i?[o,r,l]:[r,o,l])}if(c>=0&&c<=1){const o=Math.pow(1-c,2)*t[p]+2*(1-c)*c*e[p]+c*c*n[p];f.push(i?[o,r,c]:[r,o,c])}return f}(t,e,n,s?i:r,s);return u.filter((t=>{let[e,n]=t;return s?e>=r&&e<=o:n>=i&&n<=a}))}function V_(t,e,n,r){const i=Math.pow(1-r,2)*t[0]+2*(1-r)*r*e[0]+r*r*n[0],o=Math.pow(1-r,2)*t[1]+2*(1-r)*r*e[1]+r*r*n[1];return[t,[(1-r)*t[0]+r*e[0],(1-r)*t[1]+r*e[1]],[i,o],[i,o],[(1-r)*e[0]+r*n[0],(1-r)*e[1]+r*n[1]],n]}function Y_(){let t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return function(e){let{source:n,sourcePadding:r,targetPadding:i,circle:o,circleRadius:a}=e;return e=>{o&&a&&(i+=a),r>0&&(n={...n},n.x-=r,n.y-=r,n.width+=2*r,n.height+=2*r);let s=n.x+.5*n.width,u=n.y+.5*n.height,l=0,c=0,[p,f]=function(t,e,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.25,o=!(arguments.length>5&&void 0!==arguments[5])||arguments[5];const a=n-t,s=r-e,u=s,l=-a,c=.5*(t+n),p=.5*(e+r),f=Math.sqrt(u*u+l*l),h=Math.sqrt(a*a+s*s)*i/f*(o?-1:1);return[c+u*h,p+l*h]}(s,u,l,c,.3,t);const h=function(t,e,n,r,i,o,a){const s=[[r,i,r+o,i],[r+o,i,r+o,i+a],[r,i+a,r+o,i+a],[r,i,r,i+a]],u=[];for(const r of s){const i=U_(t,e,n,...r);for(const t of i)u.push(t)}return u}([s,u],[p,f],[l,c],n.x,n.y,n.width,n.height);if(h.length>0){const t=h.map((t=>{let[,,e]=t;return e})).sort(((t,e)=>e-t)),[,,,e,n]=V_([s,u],[p,f],[l,c],t[0]);[s,u]=e,[p,f]=n}if(i>0){const t=function(t,e,n,r){let i,o,a=0,s=1,u=20;do{if(i=.5*(a+s),o=l(i),Math.abs(o-r)<.1)return i;o>r?a=i:s=i}while(u-- >0);return i;function l(r){const i=(1-r)**2*t[0]+2*(1-r)*r*e[0]+r*r*n[0],o=(1-r)**2*t[1]+2*(1-r)*r*e[1]+r*r*n[1];return Math.sqrt((i-n[0])**2+(o-n[1])**2)}}([s,u],[p,f],[l,c],i),[,e,n]=V_([s,u],[p,f],[l,c],t);[p,f]=e,[l,c]=n}e.attr("d","M ".concat(s,",").concat(u," Q ").concat(p,",").concat(f," ").concat(l,",").concat(c))}}}const X_=function(t){let{source:e,sourcePadding:n,targetPadding:r,circle:i,circleRadius:o}=t;return t=>{i&&o&&(r+=o),n&&(e={...e},e.x-=n,e.y-=n,e.width+=2*n,e.height+=2*n);let a=e.x+.5*e.width,s=e.y+.5*e.height,u=0,l=0,c=!0,p=-a,f=-s;const h=e.height/e.width;if(2*Math.abs(a)<e.width)a=0,u=0,l=r*(s>0?1:-1),s+=.5*e.height*(s<0?1:-1),c=!1;else if(2*Math.abs(s)<e.height)s=0,l=0,u=r*(a>0?1:-1),a+=.5*e.width*(a<0?1:-1),c=!1;else{const[t,n]=G_([-.5*e.width,0]),[r,i]=G_([.5*e.width,0]),[o,u]=G_([0,-.5*e.height]),[l,c]=G_([0,.5*e.height]),[d,g]=G_([-a,-s]);let y,m;if(a>0&&s>0&&d>=t&&d<=o){const[r,i]=G_([-.5*e.width,-.5*e.height]),a=q_(d<r?[t,n]:[o,u],[r,i],d,!1);[y,m]=B_([d,a])}else if(a<0&&s<0&&d>=l&&d<=r){const[t,n]=G_([.5*e.width,.5*e.height]),o=q_(d<t?[l,c]:[r,i],[t,n],d,!1);[y,m]=B_([d,o])}else if(a>0&&s<0&&g>=n&&g<=c){const[r,i]=G_([-.5*e.width,.5*e.height]),o=q_(g<i?[t,n]:[l,c],[r,i],g,!0);[y,m]=B_([o,g])}else if(a<0&&s>0&&g>=u&&g<=i){const[t,n]=G_([.5*e.width,-.5*e.height]),a=q_(g<n?[o,u]:[r,i],[t,n],g,!0);[y,m]=B_([a,g])}else Math.abs(f/p)<h?(y=.5*e.width*(p>0?1:-1),m=.5*e.width*f/p*(p>0?1:-1)):(y=.5*e.height*p/f*(f>0?1:-1),m=.5*e.height*(f>0?1:-1));a+=y,s+=m}if(r>0&&c){p=-a,f=-s;const t=Math.atan2(f,p);u=-Math.cos(t)*r,l=-Math.sin(t)*r}t.attr("d","M ".concat(a,",").concat(s," L ").concat(u,",").concat(l)),t.classed("crisp",a.toFixed(1)===u.toFixed(1)||s.toFixed(1)===l.toFixed(1))}},H_=Y_(!0),W_=Y_(!1);var $_=Object.freeze({__proto__:null,straight:X_,curveLeft:H_,curveRight:W_});function Z_(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t={sourcePadding:0,targetPadding:4,arrowHead:!1,type:"straight",circle:!1,circleRadius:15,strokeWidth:1,color:"black",...t},function(e){return e.each((function(e){const n={...t,...e},r=lt(this).append("g.callout-line").attr("aria-hidden",!0);n.arrowHead&&(n.targetPadding+=n.strokeWidth,n.circleRadius+=n.strokeWidth);const i=r.append("path").style("stroke-width",n.strokeWidth).style("stroke",n.color).call($_[n.type](n));var o;n.arrowHead&&function(t,e,n,r,i){const o=J_[n];if(!e.getTotalLength)return;const a=e.getTotalLength();if(0===a)return;const s=e.getPointAtLength(a),u=e.getPointAtLength(a-10),l=Math.min(1,a/o.minLen/r),[c,p]=[s.x-u.x,s.y-u.y],f=Math.atan2(p,c)/Math.PI*180,h=t.append("path.callout-line-arrow-head").attr("d",o.path).attr("transform","translate(".concat(s.x,", ").concat(s.y,") rotate(").concat(f,") scale(").concat(r*l,") ")).classed("callout-line-arrow-head-stroke",o.strokes);o.strokes?h.style("stroke",i).style("fill","none").style("stroke-width",1/l):h.style("fill",i).style("stroke","none")}(r,i.node(),n.arrowHead,n.strokeWidth,n.color),n.circle&&r.append("circle").style("stroke",n.color).style("stroke-width",n.strokeWidth).style("stroke-dasharray","dashed"===n.circleStyle?(o=n.strokeWidth,"".concat(2+o,", ").concat(4+o)):void 0).attr("r",n.circleRadius-(n.arrowHead?n.strokeWidth:0))}))}}const J_={triangle:{viewBox:"-10 -10 20 20",markerWidth:20,markerHeight:20,minLen:20,path:"M-8.75,-3.75 L 1,0 L -8.75,3.75"},lines:{viewBox:"-10 -10 20 20",markerWidth:20,markerHeight:20,minLen:15,path:"M-4.75,-3.75 L 0,0 L -4.75,3.75",strokes:!0}};function K_(t,e,r,i,o){const a=JSON.parse(JSON.stringify(t));if(function(t){const e=[180,90];return t.slice(0,2).map(((t,n)=>{const r=!isNaN(t)&&t<=e[n]&&t>=-e[n];return{valid:r,...!r&&{issue:isNaN(t)?"NaN":"range-error"}}}))}(a.coordinates).find((t=>{let{valid:e}=t;return!e})))return void console.warn('Invalid coordinates "'.concat(a.coordinates,'" for marker ').concat(a.id));r?a.markerColor=function(t,e){return"number"==typeof t?e.colors.palette[t]:t}(a.markerColor,r):(console.warn("no theme found"),a.markerColor="#333333");const s=P_(e.getStyle(),a,o,i.vis().darkMode()),u=uo(r,"vis.locator-maps.tooltip.maxWidth",200)+"px",l=document.createElement("div"),c=a.visibility;lt(l).classed("mobile-only",c.mobile&&!c.desktop).classed("desktop-only",!c.mobile&&c.desktop);const p=lt(l).append("div").attr("id",a.id).classed("text-only","none"===a.icon.id).classed("m-wrapper",!0).classed(a.class,""!==a.class);let f;const h=()=>{f=p.append("div").classed("export-rotation",!0);const t=a.text,e="box"===a.labelStyle||"box-rounded"===a.labelStyle,n=s("text.color");f.append("div.marker-text.label").style("text-align",function(t){var e;e="top-left"===t||"middle-left"===t||"bottom-left"===t?"right":"top-right"===t||"middle-right"===t||"bottom-right"===t?"left":"center";return e}(a.anchor)).style("font-weight",t.bold?"700":"").style("font-style",t.italic?"italic":"").style("text-transform",t.uppercase?"uppercase":"").style("letter-spacing",t.space?"3px":"").style("color",n||"").style("font-size",t.fontSize+"px").style("text-shadow",e?"none":((t,e,n)=>{const r=[],i=Ed(-t,t+1);return i.forEach((t=>{i.forEach((i=>{(t||i)&&r.push(t+"px "+i+"px "+(t&&i?0:e)+"px "+n)}))})),r.join(", ")})(1,1,s("text.halo"))).html(T_(Sy(a.title,k_))).classed("label-style-box",e).classed("dw-italic",t.italic).classed("dw-bold",t.bold).classed("label-style-box-rounded","box-rounded"===a.labelStyle).style("background-color",e?O_(n)<.45?"white":"#222":"none")};"none"===t.icon.id&&h();const d=a.icon,g=0!==d.vCenter,y=""!==a.markerSymbol;"circle"!==d.id&&"square"!==d.id&&"round-square"!==d.id||y?"certificate"!==d.id||y?"heart"===d.id&&y&&(d.scale=1.3):d.scale=1:d.scale=.75,"circle"===d.id&&(d.scale*=1.2);const m=28*(d.scale||1)*(a.scale||1),_=m/1.4,v=p.append("svg.svg-marker").attr("width",m).attr("height",m),b=v.append("g#svg-id-".concat(a.id)).translate([-m/2,-m/2]),x=b.append("g.helper").style("display","none").translate([m/2,m/2]);x.append("path.helper-line").attr("d","M0,0"),x.append("circle.helper.from").attr("r",3),x.append("circle.helper.to").attr("r",3),x.append("text.dx"),x.append("text.dy"),a.helpers=x;let w=425;"locator"===d.id&&(w=1.65*d.textBaseline);const E=s("markerColor"),N=O_(E)<.45?"white":"#333333";if("none"!==d.id){d.width||(d.width=d["horiz-adv-x"],d.height=void 0!==d.vCenter?d.vCenter:425);const t=b.append("path.icon-"+d.id).attr("d",d.path).attr("transform","translate(".concat(m/2,",").concat(g?m/2:0,") scale(").concat(_/1e3,",-").concat(_/1e3,") translate(").concat(-d.width/2,",").concat(g?-d.height/2:.75*-d.height,")")).style("fill",E),e=b.append("path").attr("d",d.path).classed("icon-invis",!0).attr("transform","translate(".concat(m/2,",").concat(g?m/2:0,") scale(").concat(_/1e3,",-").concat(_/1e3,") translate(").concat(-d.width/2,",").concat(g?-d.height/2:.75*-d.height,")")).style("stroke","rgba(0,0,0,0)").style("fill","rgba(0,0,0,0)").style("vector-effect","non-scaling-stroke").style("stroke-width","10px");d.outline&&(t.st({fill:"none",stroke:E,"stroke-width":d.outline,"vector-effect":"non-scaling-stroke"}),e.st({fill:"none"}))}let I;if(y&&D_[d.id]){const t="tb-".concat((1e9*Math.random()).toFixed());b.append("rect.textbox#".concat(t)).st({fill:"#ff00ff44",opacity:0,"pointer-events":"none"}).at({width:m,height:m}),I=b.append("text").text(a.markerSymbol).at({x:m/2,y:m-m*(w/920),fill:N,"data-anchor":"middle-center","data-bbox":t,"font-size":14*(a.scale||1),"font-weight":700})}"none"!==a.icon.id&&h();const C=b.append("defs").append("filter").attr("id","glow");C.append("feGaussianBlur").attr("class","blur").attr("stdDeviation","4.5").attr("result","coloredBlur");const S=C.append("feMerge");S.append("feMergeNode").attr("in","coloredBlur"),S.append("feMergeNode").attr("in","SourceGraphic");const L=1.05*_;let M=String(uo(a,"tooltip.text",""));const O=M.trim().length>0;O&&(M=Sy(M,F_),M=T_(M));const P=new n.default.Popup({offset:10,closeButton:!1,maxWidth:u}).setHTML('<span class="tooltip-text-wrapper">'.concat(M,"</span>")),R=new n.default.Marker(l).setLngLat(a.coordinates||[0,0]).setPopup(!!O&&P).addTo(e);if(y&&D_[d.id]){const t="aceghijmnopqrsuvwxyz",e=a.markerSymbol,n=t.indexOf(e)>-1?-1:0;I.translate([0,-(w-425)/m*.15+n])}const T=new Promise((t=>{if(!a.title.includes("img"))return t();const e=lt(R._element).selectAll(".marker-text img").nodes().filter((t=>t));if(0===e.length)return t();const n=e.map((t=>new Promise((e=>{t.complete&&e(),t.onload=e,setTimeout(e,1e3)}))));Promise.all(n).then(t)})).catch((t=>{throw t}));return T.then((()=>{const t=function(t,e,n){const r=e.anchor,i=n.getElementBounds(lt(t._element).select(".marker-text").node()),o=e.icon,a="box"!==e.labelStyle&&"box-rounded"!==e.labelStyle||"none"!==o.id?30:0,s="none"===o.type?5:a*(o.scale||1)*(e.scale||1),u="none"===o.type?5:a*(o.scale||1)*(void 0!==o.textBaseline?1:e.scale||1),[l,c]=r.split("-"),p={left:1,center:.5,right:0}[c],f={top:1,middle:.5,bottom:0}[l];return[0+e.offsetX-i.width*p+s*(.5-p),0+e.offsetY-i.height*f+u*(.5-f),i]}(R,a,i),n=lt(R._element).select(".marker-text").style("left",t[0]+"px").style("top",t[1]+"px");if(uo(a,"connectorLine.enabled",!1)){const r=uo(e.getStyle(),"metadata.styleIsDark",!1),o=i.getElementBounds(n.node()),s="none"!==a.icon.id?L/2:0,u="circle-out-1"===a.icon.id||"circle-out-2"===a.icon.id?-1:0,l={source:{x:t[0],y:t[1],width:o.width,height:o.height},arrowHead:a.connectorLine.arrowHead,sourcePadding:"plain"===a.labelStyle?5:0,targetPadding:s+a.connectorLine.targetPadding+u,circle:!1,type:a.connectorLine.type,strokeWidth:a.connectorLine.stroke,color:r?"#f1f1f1":"#333333"};a.connectorLineOpts=l;const c=Z_(l);v.call(c);const p=v.select(".callout-line").select("path").attr("d");v.select(".callout-line").at("transform",(()=>0!==a.rotate?"rotate("+a.rotate+")":"")),a.connectorLine.lineLength=A_(p,a.connectorLine.targetPadding),a.connectorLine.lineLength<=10&&v.select(".callout-line").remove()}f.style("transform",(()=>0!==a.rotate?"rotate("+a.rotate+"deg)":"")).attr("data-rotate",a.rotate).attr("data-anchor",a.anchor).attr("data-offsetx",a.offsetX).attr("data-offsety",a.offsetY)})).catch((t=>{throw t})),{marker:R,markerSettings:a,renderComplete:T}}function Q_(t){return"string"==typeof t&&t.startsWith("#")?t.slice(0,7):t}function tv(t){let{marker:e,getColor:n,devicePixelRatio:r,zoomBetweenSteps:i}=t;if(!1===e.fill)return null;const{properties:o}=e;o.fill=Q_(o.fill);const a=n("fill");if(!a)return null;const s=o.pattern&&"solid"!==o.pattern?{stroke:o["pattern-line-width"],spacing:o["pattern-line-gap"],color:a,pattern:o.pattern,devicePixelRatio:r,zoomBetweenSteps:i}:null;return{fill_color:a,fill_opacity:1===o["fill-opacity"]?.99999:o["fill-opacity"],...s&&{fill_pattern:JSON.stringify(s),fill_pattern_props:s}}}function ev(t){let{marker:e,getColor:n}=t;if(!1===e.stroke)return null;const{properties:r}=e;r.stroke=Q_(r.stroke);const i=n("stroke");return i?{line_color:i,line_opacity:r["stroke-opacity"],line_width:r["stroke-width"],line_dasharray:r["stroke-dasharray"]}:null}function nv(t){let{shapeMarkers:e,colorMap:n,darkMode:r,devicePixelRatio:i,mapStyle:o,zoom:a}=t;const s=a.toFixed(3)-Math.floor(a.toFixed(3)),u={[!1]:{id:"shape-markers",type:"geojson",data:{type:"FeatureCollection",features:[]},tolerance:.375},[!0]:{id:"shape-markers-exact-shape",type:"geojson",data:{type:"FeatureCollection",features:[]},tolerance:0}};for(let t=0;t<e.length;t++){const a=e[t],l=P_(o,a,n,r),c=tv({marker:a,getColor:l,devicePixelRatio:i,zoomBetweenSteps:s}),p=ev({marker:a,getColor:l});if(!c&&!p)continue;const f=!!a.exactShape,h={...eg(a.feature),properties:{marker_id:a.id,highlight:a.highlight,order:t,...c,...p}};u[f].data.features.push(h)}return Object.values(u).filter((t=>t.data.features.length))}function rv(t){let{stroke:e,spacing:n,color:r,pattern:i,devicePixelRatio:o,zoomBetweenSteps:a}=t,s=e*o,u=n*o;s=Math.round(s-s*a/2),u=Math.round(u-u*a/2);const l={horizontal:{dx:1,dy:0},vertical:{dx:0,dy:1},"diagonal-up":{dx:-1,dy:1},"diagonal-down":{dx:1,dy:1}},c=l[i].dx,p=l[i].dy,f=s+u,h=new Uint8Array(f*f*4),d=new Map;let g=0,y=0;const m=Ec(r).rgba(),_=Ec("rgba(255,255,255,0)").rgba();for(let t=0;t<f;t++){for(let t=0;t<s;t++){const e=(g+f+(c?0:t))%f,n=(y+f+(c?t:0))%f;d.set("".concat(e,"/").concat(n),!0)}g+=c,y+=p}for(let t=0;t<f;t++)for(let e=0;e<f;e++){const n=4*(t*f+e),r=d.has("".concat(e,"/").concat(t));h[n+0]=r?m[0]:_[0],h[n+1]=r?m[1]:_[1],h[n+2]=r?m[2]:_[2],h[n+3]=255*(r?m[3]:_[3])}return{width:f,height:f,data:h}}function iv(t){const e={};for(const n of t)for(const{properties:t}of n.data.features)t.fill_pattern&&!e[t.fill_pattern]&&(e[t.fill_pattern]={id:t.fill_pattern,...rv(t.fill_pattern_props)});return Object.values(e)}function ov(t){return L_(t,["feature","data"])}var av={init(t,e,n,r){let i,o,a,s,u,l=!0,c=null,p=new Set,f=new Set,h=new Set;const d=r.chart();let g={};const y={editor:!1,postRender:!1};function m(){return r.size()[0]<400}function _(o){const a=r.colorMap()||(t=>t),s=d.vis().darkMode(),u=e.getStyle(),l=o.filter((t=>t.visible));l.reverse();const[_,v]=M_(l,(t=>"point"===t.type)),b=nv({shapeMarkers:v,colorMap:a,darkMode:s,devicePixelRatio:window.devicePixelRatio,mapStyle:u,zoom:e.getZoom()}),x=iv(b);p=Vd({map:e,images:x,prevIds:p}),h=Yd({map:e,sources:b,prevIds:h});const w=function(t){const e=[],n=t.flatMap((t=>t.data.features.map((e=>[e,t])))).sort(((t,e)=>{let[n]=t,[r]=e;return!!n.properties.highlight-!!r.properties.highlight||n.properties.order-r.properties.order}));for(const[{properties:t},r]of n)t.fill_color&&e.push({id:t.marker_id,type:"fill",source:r.id,filter:["==",["get","marker_id"],t.marker_id],paint:{"fill-color":["get","fill_color"],"fill-opacity":["get","fill_opacity"],"fill-outline-color":"rgba(0, 0, 0, 0)",...t.fill_pattern&&{"fill-pattern":["get","fill_pattern"]}},beforeId:t.highlight?"landuse_residential":"highway_name_other"}),t.line_color&&e.push({id:t.marker_id+"-line",type:"line",source:r.id,filter:["==",["get","marker_id"],t.marker_id],layout:{"line-join":"round",...t.line_dasharray&&{"line-cap":["100000","1,2.2"].includes(t.line_dasharray)?"round":"butt"}},paint:{"line-color":["get","line_color"],"line-opacity":["get","line_opacity"],"line-width":["get","line_width"],...t.line_dasharray&&{"line-dasharray":t.line_dasharray.split(",").map(Number)}},beforeId:"highway_name_other"});return e}(b);f=function(t){let{map:e,layers:n,prevIds:r}=t;const i=e.getStyle().layers.slice(),o=new Set,a={};for(const{beforeId:t,...r}of n.slice().reverse()){const{id:n}=r,s=i.findIndex((t=>{let{id:e}=t;return e===n}));void 0===a[t]&&(a[t]=t);const u=a[t];if(-1===s)e.addLayer(r,u);else{const{filter:t,layout:o={},paint:a={},source:l}=r,{filter:c,layout:p={},paint:f={},source:h}=i[s];if(l===h){Ud(t,c)||e.setFilter(n,t);for(const t of Object.keys(o))Ud(o[t],p[t])||e.setLayoutProperty(n,t,o[t]);for(const t of Object.keys(p))void 0===o[t]&&e.setLayoutProperty(n,t,void 0);for(const t of Object.keys(a))Ud(a[t],f[t])||e.setPaintProperty(n,t,a[t]);for(const t of Object.keys(f))void 0===a[t]&&e.setPaintProperty(n,t,void 0);e.moveLayer(n,u)}else e.removeLayer(n),e.addLayer(r,u)}o.add(n),a[t]=n}for(const t of r)!o.has(t)&&e.getLayer(t)&&e.removeLayer(t);return o}({map:e,layers:w,prevIds:f}),t.selectAll(".mapboxgl-marker").remove(),g=Object.fromEntries(_.map((t=>[t.id,K_(t,e,n,d,a)]))),t.selectAll(".marker-text").on("mousedown",(()=>e.boxZoom.disable())).on("mouseup",(()=>e.boxZoom.enable()));let E,N=!0;return t.selectAll(".svg-marker:first-child > *").on("click",(function(){const n=this.parentNode.parentNode,r=lt(n).attr("id");if(g[r].marker.getPopup()&&(K.stopPropagation(),K.preventDefault(),N=!1,m())){lt(n).classed("mob-active-marker",!0);const i=d.getElementBounds(t.node()).height,o=e.project(g[r].marker.getLngLat().toArray()).y,a=g[r].marker.getPopup()._container,s=d.getElementBounds(a.querySelector(".mapboxgl-popup-content")).height,u="translate(0px, "+(o+(i/2>o?20:-1*s))+"px)";lt(g[r].marker.getPopup()._container).style("transform",u).classed("mobile",!0).style("opacity",1)}if(void 0!==E&&E!==r){K.stopPropagation();const t=g[E].marker.getPopup();t&&t.remove(),lt(g[E].marker._element).selectAll(".m-wrapper").classed("mob-active-marker",!1)}E=r})).on("mouseover",(function(){if(lt(this).classed("callout-line"))return;const e=lt(this.parentNode.parentNode).attr("id");if(g[e].marker.getPopup()&&!g[e].marker.getPopup().isOpen()&&!i){const n=r.chart().getElementBounds(t.node()).height;g[e].marker.togglePopup(),lt(this).style("cursor","pointer");const i=g[e].marker._pos.y,o=i<n/2?n-i:i;lt(g[e].marker.getPopup()._container).style("max-height",o-10-15+"px"),lt(g[e].marker.getPopup()._container).select(".mapboxgl-popup-tip").clone().classed("mapboxgl-popup-tip-clone",!0)}"ontouchstart"in document&&m()&&g[e].marker.getPopup()&&lt(g[e].marker.getPopup()._container).style("opacity",0)})).on("mouseout",(function(){const t=lt(this.parentNode.parentNode).attr("id");g[t].marker.getPopup()&&N&&g[t].marker.getPopup().remove(),N=!0})),t.on("click",(function(){E=void 0,t.selectAll(".m-wrapper").classed("mob-active-marker",!1)})),y&&y.editor&&y.postRender&&y.postRender(),c&&e.off("zoom",c),c=wg((()=>{const t=nv({shapeMarkers:v,colorMap:a,darkMode:s,devicePixelRatio:window.devicePixelRatio,mapStyle:u,zoom:e.getZoom()}),n=iv(t);p=Vd({map:e,images:n,prevIds:p}),h=Yd({map:e,sources:t,prevIds:h})}),25),e.on("zoom",c),g}return{render:_,initEditor(n){y.editor=n;const c=n.chart;let p,f,h,d,m,v;x(),w(),e.on("mousemove",(function(n){if(i){a=!0;const r=s._pos;l&&(d=r.x-n.point.x,m=r.y-n.point.y),l=!1;const i={};i.x=n.point.x+d,i.y=n.point.y+m,v=e.unproject(i).wrap(),s.setLngLat(v),t.selectAll(".mapboxgl-popup").remove()}if(o&&(a=!0,f)){const t=n.point.x-f.x,e=n.point.y-f.y;if(lt(s._element).select(".marker-text").style("left",h.left+t+"px").style("top",h.top+e+"px"),u.offsetX=p.x+t,u.offsetY=p.y+e,uo(u,"connectorLine.enabled",!1)){lt(s._element).selectAll("g.callout-line").remove(),u.connectorLineOpts.source.x=h.left+t,u.connectorLineOpts.source.y=h.top+e;const n=Z_(u.connectorLineOpts);lt(s._element).select("svg").call(n);const r=lt(s._element).select(".callout-line").select("path").attr("d");u.connectorLine.lineLength=A_(r,u.connectorLine.targetPadding),u.connectorLine.lineLength<=10&&lt(s._element).selectAll("g.callout-line").remove()}else{const t=u.anchor,e=28*(u.icon.scale||1),n=e*(t.indexOf("-left")>-1?-.5:t.indexOf("-right")>-1?.5:0),r=e*(t.indexOf("top-")>-1?-.5:t.indexOf("bottom-")>-1?.5:0),i=u.offsetX,o=u.offsetY;u.helpers.select("path").attr("d",t.indexOf("-center")>-1?"M".concat(n,",").concat(r," h").concat(i," v").concat(o):"M".concat(n,",").concat(r," v").concat(o," h").concat(i)),u.helpers.select("circle.from").translate([n,r]),u.helpers.select("circle.to").translate([n+i,r+o]),u.helpers.select("text.dx").text(i).translate([n+.5*i,r+o]),u.helpers.select("text.dy").text(o).translate([n,r+.5*o]),u.helpers.style("display","block")}}})),n&&window.addEventListener("mouseup",(function(){if(a){if(i){const t={};t.id=u.id,t.coo=[v.lng,v.lat],n.onMarkerDrag(t)}if(o){const t={};t.id=u.id,t.offsetX=u.offsetX,t.offsetY=u.offsetY,t.connectorLine=u.connectorLine,n.onTextDrag(t),u.helpers&&u.helpers.style("display","none")}}i=!1,o=!1,c.getMetadata("visualize.locked")||(e.dragPan.enable(),e.boxZoom.enable()),l=!0,a=!1})),y.postRender=function(){x(),w()};let b=JSON.stringify(r.chart().dataset().markers.map(ov));function x(){const e=t.selectAll("svg.svg-marker").append("g.fake-marker.export-hide").translate([-2,-2]).style("display","markers"===n.getActiveStep()?"block":"none").style("pointer-events",(function(){const t=lt(this).parent().parent().classed("text-only");return"markers"===n.getActiveStep()&&t?"all":"none"}));e.append("rect.fake-marker").attr("width",5).attr("height",5).style("fill","#f0f"),e.append("rect.icon-invis").attr("width",5).attr("height",5).style("fill","rgba(0,0,0,0").style("stroke","rgba(0,0,0,0").style("stroke-width","12px")}function w(){t.selectAll(".marker-text").on("mousedown",(function(){const r=lt(this.parentNode.parentNode).attr("id");if(E(r),e.dragPan.disable(),e.boxZoom.disable(),"markers"===n.getActiveStep()&&!g[r].markerSettings.locked){o=!0,s=g[r].marker,u=g[r].markerSettings;const e=t.node().getBoundingClientRect();f={x:K.clientX-e.left,y:K.clientY-e.top},h={left:+lt(s._element).select(".marker-text").style("left").replace("px",""),top:+lt(s._element).select(".marker-text").style("top").replace("px","")},p={x:u.offsetX,y:u.offsetY}}})),t.selectAll(".marker-text").on("mouseover",(function(){const t=lt(this.parentNode.parentNode).attr("id");"markers"!==n.getActiveStep()||g[t].markerSettings.locked||lt(this).style("opacity",.8)})).style("pointer-events","markers"===n.getActiveStep()?"auto":"none"),t.selectAll(".marker-text").on("mouseout",(function(){lt(this).style("opacity",1)})),t.selectAll(".svg-marker .icon-invis").on("mousedown",(function(){const t=lt(this.parentNode.parentNode.parentNode).attr("id");E(t),"markers"!==n.getActiveStep()||g[t].markerSettings.locked||(e.dragPan.disable(),i=!0,s=g[t].marker,u=g[t].markerSettings)})),t.selectAll(".svg-marker").on("mouseover",(function(){const t=lt(this.parentNode).attr("id");"markers"!==n.getActiveStep()||g[t].markerSettings.locked||lt(this).style("opacity",.7)})),t.selectAll(".svg-marker").on("mouseout",(function(){lt(this).style("opacity",1)})),t.selectAll(".svg-marker .icon-invis, .marker-text").on("click",(function(){void 0!==lt(this.parentNode.parentNode.parentNode).attr("id")&&Object.keys(g).some((t=>g[t].marker.getPopup()))||K.stopPropagation()}))}function E(t){"markers"===n.getActiveStep()&&n.onMarkerClick({id:t})}c.observeDeep("dataset.markers",((t,e)=>{if(void 0===e)return;const n=JSON.stringify(t.map(ov));if(n!==b&&(_(t,b&&JSON.parse(b)),b=n),w(),s&&s.getPopup()&&s.getPopup().isOpen()){let t=String(uo(g[u.id].markerSettings,"tooltip.text",""));t=Sy(t,F_),t=T_(t),s.getPopup().setHTML(t)}})),c.observeDeep("theme",((t,e)=>{if(void 0===e)return;_(c.dataset().markers),w()})),["darkMode","metadata.visualize.dark-mode-invert"].forEach((t=>{c.observeDeep(t,(()=>{setTimeout((()=>{_(c.dataset().markers),w()}))}))}))}}}};var sv={init(t){let e,{mapContainer:n,mapkeyContainer:r,vis:i}=t;const o=i.colorMap()||(t=>t);function a(t,a){e=a,function(t){let{mapContainer:e,mapkeyContainer:n,mapStyle:r,settings:i,cm:o,darkMode:a}=t;if(n.classed("enabled",i.enabled),n.classed("mk-top","top"===i.position),n.classed("mk-bottom","top"!==i.position),n.html(""),!i.enabled)return;const s=i.items;i.title.length&&n.append("p.key-title.export-text").text(i.title);var u=n.parent().node();"top"===i.position?u.insertBefore(n.node(),e.node()):u.insertBefore(e.node(),n.node());const l=n.append("div.key-items").classed(i.style,!0);"grid"===i.style&&n.select(".key-items").style("grid-template-columns","repeat(auto-fit, minmax(".concat(i.columnWidth||200,"px, 1fr))"));for(var c=0;c<s.length;c++){const t=s[c],e=l.append("div.key-item"),n=t.icon,u=""!==t.markerSymbol;"circle"!==n.id&&"square"!==n.id||u?"certificate"!==n.id||u?"heart"===n.id&&u?n.scale=1.3:"circle-out-1"!==n.id&&"circle-out-2"!==n.id||(n.scale=1.3):n.scale=1:n.scale=.75,n.scale*=1;const d=28*(n.scale||1),g=d/1.4,y=void 0!==n.vCenter?n.vCenter:425,m=void 0!==n.textBaseline?n.textBaseline:425,_=g*("locator"===n.id?1.1:.7),v=e.append("div.svg-container").append("svg").attr("width",d).attr("height",d).style("overflow","visible"),b=t.markerPattern&&"solid"!==t.markerPattern,x="icon-pattern-".concat(t.id),w=P_(r,"area"===t.type?{properties:{...t,fill:t.markerColor},highlight:t.highlight}:"line"===t.type?{properties:{...t,stroke:t.markerColor}}:t,o,a),E=h(t,w);b&&Ic({defs:v.append("defs"),id:"icon-pattern-".concat(t.id),stroke:E,strokeWidth:10,lineGap:10,patternType:t.markerPattern,scale:10}),v.append("path").attr("d",n.path).attr("transform","translate(".concat(.7*g,",").concat(_,") scale(").concat(g/1e3,",-").concat(g/1e3,") translate(").concat(-n["horiz-adv-x"]/2,",-").concat(y,")")).style("fill",b?"url(#".concat(x,")"):E).style("stroke",p(t,w)).style("fill-opacity",t.fillOpacity).style("stroke-width",f(t)).style("vector-effect",n.outline?"non-scaling-stroke":"none"),u&&D_[n.id]&&v.append("text").text(t.markerSymbol).attr("x",d/2).attr("y",d-d*(m/900)).attr("font-size",14).attr("fill",O_(E)<.45?"white":"black").attr("text-anchor","middle").attr("font-weight","700");const N="grid"===i.style?Ny.concat("p"):Ny.filter((t=>"br"!==t));e.append("div").html('<p class="export-text">'+Sy(t.text,N)+"</p>")}function p(t,e){return["area","line"].includes(t.type)?e("stroke"):t.icon.outline?e("markerColor"):null}function f(t){return"area"===t.type?"none"!==t.stroke?t.icon.outline:null:t.icon.outline?t.icon.outline:null}function h(t,e){return"area"===t.type?e("fill"):t.icon.outline?"none":e("markerColor")}}({mapContainer:n,mapkeyContainer:r,mapStyle:e,settings:t,cm:o,darkMode:i.darkMode()})}return{render:a,initEditor(t){const n=t.chart;["metadata.visualize.key","metadata.visualize.dark-mode-invert"].forEach((t=>{n.observeDeep(t,((r,i)=>{"metadata.visualize.key"===t&&void 0===i||("metadata.visualize.key"!==t&&(r=n.getMetadata("visualize.key")),a(r,e))}))}))}}}},uv=Kr,lv=_i,cv=eo((function(t,e){uv(e,lv(e),t)})),pv=ft(cv);var fv=Object.prototype.hasOwnProperty;function hv(t,e,n,r,i,o){3===arguments.length&&(r=o=Array,i=null);for(var a=new r(t=1<<Math.max(4,Math.ceil(Math.log(t)/Math.LN2))),s=new o(t),u=t-1,l=0;l<t;++l)a[l]=i;return{set:function(r,o){for(var l=e(r)&u,c=a[l],p=0;c!=i;){if(n(c,r))return s[l]=o;if(++p>=t)throw new Error("full hashmap");c=a[l=l+1&u]}return a[l]=r,s[l]=o,o},maybeSet:function(r,o){for(var l=e(r)&u,c=a[l],p=0;c!=i;){if(n(c,r))return s[l];if(++p>=t)throw new Error("full hashmap");c=a[l=l+1&u]}return a[l]=r,s[l]=o,o},get:function(r,o){for(var l=e(r)&u,c=a[l],p=0;c!=i;){if(n(c,r))return s[l];if(++p>=t)break;c=a[l=l+1&u]}return o},keys:function(){for(var t=[],e=0,n=a.length;e<n;++e){var r=a[e];r!=i&&t.push(r)}return t}}}function dv(t,e){return t[0]===e[0]&&t[1]===e[1]}var gv=new ArrayBuffer(16),yv=new Float64Array(gv),mv=new Uint32Array(gv);function _v(t){yv[0]=t[0],yv[1]=t[1];var e=mv[0]^mv[1];return 2147483647&(e=e<<5^e>>7^mv[2]^mv[3])}function vv(t){var e,n,r,i,o=t.coordinates,a=t.lines,s=t.rings,u=function(){for(var t=hv(1.4*o.length,x,w,Int32Array,-1,Int32Array),e=new Int32Array(o.length),n=0,r=o.length;n<r;++n)e[n]=t.maybeSet(n,n);return e}(),l=new Int32Array(o.length),c=new Int32Array(o.length),p=new Int32Array(o.length),f=new Int8Array(o.length),h=0;for(e=0,n=o.length;e<n;++e)l[e]=c[e]=p[e]=-1;for(e=0,n=a.length;e<n;++e){var d=a[e],g=d[0],y=d[1];for(r=u[g],i=u[++g],++h,f[r]=1;++g<=y;)b(e,r,r=i,i=u[g]);++h,f[i]=1}for(e=0,n=o.length;e<n;++e)l[e]=-1;for(e=0,n=s.length;e<n;++e){var m=s[e],_=m[0]+1,v=m[1];for(b(e,u[v-1],r=u[_-1],i=u[_]);++_<=v;)b(e,r,r=i,i=u[_])}function b(t,e,n,r){if(l[n]!==t){l[n]=t;var i=c[n];if(i>=0){var o=p[n];i===e&&o===r||i===r&&o===e||(++h,f[n]=1)}else c[n]=e,p[n]=r}}function x(t){return _v(o[t])}function w(t,e){return dv(o[t],o[e])}l=c=p=null;var E,N=function(t,e,n,r,i){3===arguments.length&&(r=Array,i=null);for(var o=new r(t=1<<Math.max(4,Math.ceil(Math.log(t)/Math.LN2))),a=t-1,s=0;s<t;++s)o[s]=i;return{add:function(r){for(var s=e(r)&a,u=o[s],l=0;u!=i;){if(n(u,r))return!0;if(++l>=t)throw new Error("full hashset");u=o[s=s+1&a]}return o[s]=r,!0},has:function(r){for(var s=e(r)&a,u=o[s],l=0;u!=i;){if(n(u,r))return!0;if(++l>=t)break;u=o[s=s+1&a]}return!1},values:function(){for(var t=[],e=0,n=o.length;e<n;++e){var r=o[e];r!=i&&t.push(r)}return t}}}(1.4*h,_v,dv);for(e=0,n=o.length;e<n;++e)f[E=u[e]]&&N.add(o[E]);return N}function bv(t,e,n,r){xv(t,e,n),xv(t,e,e+r),xv(t,e+r,n)}function xv(t,e,n){for(var r,i=e+(n---e>>1);e<i;++e,--n)r=t[e],t[e]=t[n],t[n]=r}function wv(t){var e,n,r={};for(e in t)r[e]=null==(n=t[e])?{type:null}:("FeatureCollection"===n.type?Ev:"Feature"===n.type?Nv:Iv)(n);return r}function Ev(t){var e={type:"GeometryCollection",geometries:t.features.map(Nv)};return null!=t.bbox&&(e.bbox=t.bbox),e}function Nv(t){var e,n=Iv(t.geometry);for(e in null!=t.id&&(n.id=t.id),null!=t.bbox&&(n.bbox=t.bbox),t.properties){n.properties=t.properties;break}return n}function Iv(t){if(null==t)return{type:null};var e="GeometryCollection"===t.type?{type:"GeometryCollection",geometries:t.geometries.map(Iv)}:"Point"===t.type||"MultiPoint"===t.type?{type:t.type,coordinates:t.coordinates}:{type:t.type,arcs:t.coordinates};return null!=t.bbox&&(e.bbox=t.bbox),e}function Cv(t,e){var n=function(t){var e=1/0,n=1/0,r=-1/0,i=-1/0;function o(t){null!=t&&fv.call(a,t.type)&&a[t.type](t)}var a={GeometryCollection:function(t){t.geometries.forEach(o)},Point:function(t){s(t.coordinates)},MultiPoint:function(t){t.coordinates.forEach(s)},LineString:function(t){u(t.arcs)},MultiLineString:function(t){t.arcs.forEach(u)},Polygon:function(t){t.arcs.forEach(u)},MultiPolygon:function(t){t.arcs.forEach(l)}};function s(t){var o=t[0],a=t[1];o<e&&(e=o),o>r&&(r=o),a<n&&(n=a),a>i&&(i=a)}function u(t){t.forEach(s)}function l(t){t.forEach(u)}for(var c in t)o(t[c]);return r>=e&&i>=n?[e,n,r,i]:void 0}(t=wv(t)),r=e>0&&n&&function(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=o-r?(n-1)/(o-r):1,u=a-i?(n-1)/(a-i):1;function l(t){return[Math.round((t[0]-r)*s),Math.round((t[1]-i)*u)]}function c(t,e){for(var n,o,a,l,c,p=-1,f=0,h=t.length,d=new Array(h);++p<h;)n=t[p],l=Math.round((n[0]-r)*s),c=Math.round((n[1]-i)*u),l===o&&c===a||(d[f++]=[o=l,a=c]);for(d.length=f;f<e;)f=d.push([d[0][0],d[0][1]]);return d}function p(t){return c(t,2)}function f(t){return c(t,4)}function h(t){return t.map(f)}function d(t){null!=t&&fv.call(g,t.type)&&g[t.type](t)}var g={GeometryCollection:function(t){t.geometries.forEach(d)},Point:function(t){t.coordinates=l(t.coordinates)},MultiPoint:function(t){t.coordinates=t.coordinates.map(l)},LineString:function(t){t.arcs=p(t.arcs)},MultiLineString:function(t){t.arcs=t.arcs.map(p)},Polygon:function(t){t.arcs=h(t.arcs)},MultiPolygon:function(t){t.arcs=t.arcs.map(h)}};for(var y in t)d(t[y]);return{scale:[1/s,1/u],translate:[r,i]}}(t,n,e),i=function(t){var e,n,r,i,o=t.coordinates,a=t.lines,s=t.rings,u=a.length+s.length;for(delete t.lines,delete t.rings,r=0,i=a.length;r<i;++r)for(e=a[r];e=e.next;)++u;for(r=0,i=s.length;r<i;++r)for(n=s[r];n=n.next;)++u;var l=hv(2*u*1.4,_v,dv),c=t.arcs=[];for(r=0,i=a.length;r<i;++r){e=a[r];do{p(e)}while(e=e.next)}for(r=0,i=s.length;r<i;++r)if((n=s[r]).next)do{p(n)}while(n=n.next);else f(n);function p(t){var e,n,r,i,a,s,u,p;if(r=l.get(e=o[t[0]]))for(u=0,p=r.length;u<p;++u)if(h(i=r[u],t))return t[0]=i[0],void(t[1]=i[1]);if(a=l.get(n=o[t[1]]))for(u=0,p=a.length;u<p;++u)if(d(s=a[u],t))return t[1]=s[0],void(t[0]=s[1]);r?r.push(t):l.set(e,[t]),a?a.push(t):l.set(n,[t]),c.push(t)}function f(t){var e,n,r,i,a;if(n=l.get(o[t[0]]))for(i=0,a=n.length;i<a;++i){if(g(r=n[i],t))return t[0]=r[0],void(t[1]=r[1]);if(y(r,t))return t[0]=r[1],void(t[1]=r[0])}if(n=l.get(e=o[t[0]+m(t)]))for(i=0,a=n.length;i<a;++i){if(g(r=n[i],t))return t[0]=r[0],void(t[1]=r[1]);if(y(r,t))return t[0]=r[1],void(t[1]=r[0])}n?n.push(t):l.set(e,[t]),c.push(t)}function h(t,e){var n=t[0],r=e[0],i=t[1];if(n-i!=r-e[1])return!1;for(;n<=i;++n,++r)if(!dv(o[n],o[r]))return!1;return!0}function d(t,e){var n=t[0],r=e[0],i=t[1],a=e[1];if(n-i!=r-a)return!1;for(;n<=i;++n,--a)if(!dv(o[n],o[a]))return!1;return!0}function g(t,e){var n=t[0],r=e[0],i=t[1]-n;if(i!==e[1]-r)return!1;for(var a=m(t),s=m(e),u=0;u<i;++u)if(!dv(o[n+(u+a)%i],o[r+(u+s)%i]))return!1;return!0}function y(t,e){var n=t[0],r=e[0],i=t[1],a=e[1],s=i-n;if(s!==a-r)return!1;for(var u=m(t),l=s-m(e),c=0;c<s;++c)if(!dv(o[n+(c+u)%s],o[a-(c+l)%s]))return!1;return!0}function m(t){for(var e=t[0],n=t[1],r=e,i=r,a=o[r];++r<n;){var s=o[r];(s[0]<a[0]||s[0]===a[0]&&s[1]<a[1])&&(i=r,a=s)}return i-e}return t}(function(t){var e,n,r,i=vv(t),o=t.coordinates,a=t.lines,s=t.rings;for(n=0,r=a.length;n<r;++n)for(var u=a[n],l=u[0],c=u[1];++l<c;)i.has(o[l])&&(e={0:l,1:u[1]},u[1]=l,u=u.next=e);for(n=0,r=s.length;n<r;++n)for(var p=s[n],f=p[0],h=f,d=p[1],g=i.has(o[f]);++h<d;)i.has(o[h])&&(g?(e={0:h,1:p[1]},p[1]=h,p=p.next=e):(bv(o,f,d,d-h),o[d]=o[f],g=!0,h=f));return t}(function(t){var e=-1,n=[],r=[],i=[];function o(t){t&&fv.call(a,t.type)&&a[t.type](t)}var a={GeometryCollection:function(t){t.geometries.forEach(o)},LineString:function(t){t.arcs=s(t.arcs)},MultiLineString:function(t){t.arcs=t.arcs.map(s)},Polygon:function(t){t.arcs=t.arcs.map(u)},MultiPolygon:function(t){t.arcs=t.arcs.map(l)}};function s(t){for(var r=0,o=t.length;r<o;++r)i[++e]=t[r];var a={0:e-o+1,1:e};return n.push(a),a}function u(t){for(var n=0,o=t.length;n<o;++n)i[++e]=t[n];var a={0:e-o+1,1:e};return r.push(a),a}function l(t){return t.map(u)}for(var c in t)o(t[c]);return{type:"Topology",coordinates:i,lines:n,rings:r,objects:t}}(t))),o=i.coordinates,a=hv(1.4*i.arcs.length,Sv,Lv);function s(t){t&&fv.call(u,t.type)&&u[t.type](t)}t=i.objects,i.bbox=n,i.arcs=i.arcs.map((function(t,e){return a.set(t,e),o.slice(t[0],t[1]+1)})),delete i.coordinates,o=null;var u={GeometryCollection:function(t){t.geometries.forEach(s)},LineString:function(t){t.arcs=l(t.arcs)},MultiLineString:function(t){t.arcs=t.arcs.map(l)},Polygon:function(t){t.arcs=t.arcs.map(l)},MultiPolygon:function(t){t.arcs=t.arcs.map(c)}};function l(t){var e=[];do{var n=a.get(t);e.push(t[0]<t[1]?n:~n)}while(t=t.next);return e}function c(t){return t.map(l)}for(var p in t)s(t[p]);return r&&(i.transform=r,i.arcs=function(t){for(var e=-1,n=t.length;++e<n;){for(var r,i,o=t[e],a=0,s=1,u=o.length,l=o[0],c=l[0],p=l[1];++a<u;)r=(l=o[a])[0],i=l[1],r===c&&i===p||(o[s++]=[r-c,i-p],c=r,p=i);1===s&&(o[s++]=[0,0]),o.length=s}return t}(i.arcs)),i}function Sv(t){var e,n=t[0],r=t[1];return r<n&&(e=n,n=r,r=e),n+31*r}function Lv(t,e){var n,r=t[0],i=t[1],o=e[0],a=e[1];return i<r&&(n=r,r=i,i=n),a<o&&(n=o,o=a,a=n),r===o&&i===a}var Mv={148838:{extraRegions:["united_states_contiguous"]},382313:{bbox:[128,30,147,46]},295480:{bbox:[-10,37,-5,42.3],extraRegions:["iberian-peninsula"]},1311341:{bbox:[-12.19,34.58,5.61,45.01],extraRegions:["iberian-peninsula"]},108089:{bbox:[-82,-5,-74,2]},62149:{bbox:[-8.6,49.5,3,59.5],extraRegions:["british-isles"]},156393:{extraRegions:["ireland-island","british-isles"]},62273:{extraRegions:["ireland-island","british-isles"],label:"Ireland (country)"},62269:{extraRegions:["british-isles"]},62504:{extraRegions:["berlin-brandenburg"]},62422:{extraRegions:["berlin-brandenburg"]},167454:{bbox:[-77,-57,-65,-16]},2978650:{bbox:[4.37,57.86,31.45,71.22],useCachedBoundary:!0,extraRegions:["scandinavian-peninsula"]},412377:{extraRegions:["innlandet"]},407787:{extraRegions:["vestland"]},406389:{extraRegions:["troms-og-finnmark"]},412297:{extraRegions:["viken"]},406015:{extraRegions:["agder"]},52822:{extraRegions:["scandinavian-peninsula"]},304751:{extraRegions:["new-guinea"]},4521145:{extraChildren:["fakfak","kaimana","manokwari-city","manokwari-selatan1","manokwari-selatan2","manokwari","maybrat","raja-ampat","sorong-city","sorong-selatan","sorong","teluk-bintuni","teluk-wondama"]},4521144:{extraChildren:["deiyai","pegunungan-bintang"]},307866:{extraRegions:["new-guinea"]},72594:{useCachedBoundary:!0},2323309:{bbox:[2.92,50.96,7.43,53.85],useCachedBoundary:!0},62782:{bbox:[9.6322,53.3439,10.395,53.7844]},80500:{bbox:[111.35,-44.46,155.126,-8.581]},2369652:{useCachedBoundary:!0},2552485:{label:"Manhattan"},369518:{label:"Brooklyn"},369519:{label:"Queens"},8398123:{parent_id:8398124},8398122:{parent_id:8398124},8398120:{parent_id:8398124},8398119:{parent_id:8398124},8398118:{parent_id:8398124},8398115:{parent_id:8398124},8398114:{parent_id:8398124},8398113:{parent_id:8398124},8398108:{parent_id:8398124},8398107:{parent_id:8398124},8398121:{parent_id:8398124},8398117:{parent_id:8398124},8398116:{parent_id:8398124},8398112:{parent_id:8398124},8398111:{parent_id:8398124},8398110:{parent_id:8398124},8398109:{parent_id:8398124},8398106:{parent_id:8398124},8398105:{parent_id:8398124},8398104:{parent_id:8398124},8398103:{parent_id:8398124},8398102:{parent_id:8398124},8398101:{parent_id:8398124},8398100:{parent_id:8398124},8398099:{parent_id:8398124},8398098:{parent_id:8398124},8398097:{parent_id:8398124},8398096:{parent_id:8398124},8398094:{parent_id:8398124},8398093:{parent_id:8398124},8398092:{parent_id:8398124},8398091:{parent_id:8398124},8398090:{parent_id:8398124},8398089:{parent_id:8398124},8398088:{parent_id:8398124},8398087:{parent_id:8398124},8398086:{parent_id:8398124},8398085:{parent_id:8398124},8398084:{parent_id:8398124},8398083:{parent_id:8398124},8398082:{parent_id:8398124},8398080:{parent_id:8398124},8398071:{parent_id:8398124},8398070:{parent_id:8398124},556706:{bbox:[164.99,-47.484,179.05,-33.77]},192307:{useCachedBoundary:!0},1473946:{useCachedBoundary:!0,extraRegions:["israel-occupied-territories"]},72596:{useCachedBoundary:!0},443174:{bbox:[117.213,5.611,126.547,18.615]},2850940:{bbox:[117.213,5.611,126.547,18.615]},60189:{useCachedBoundary:!0,extraRegions:["russia-no-crimea"],label:"Russia and Crimea"},1059500:{extraRegions:["south-federal-district-no-crimea"],label:"South federal district with Crimea"},3795586:{extraRegions:["crimea"]},175905:{useCachedBoundary:!0},68841:{useCachedBoundary:!0},365307:{useCachedBoundary:!0},298285:{useCachedBoundary:!0},1320608:{extraRegions:["capital-region-denmark-no-bornholm"]},2192363:{extraRegions:["copenhagen-municipality-frederiksberg"]},1116270:{bbox:[-172,53,-130,72]},165789:{useCachedBoundary:!0},165471:{useCachedBoundary:!0},162109:{useCachedBoundary:!0},111968:{bbox:[-122.54,37.68,-122.35,37.84]},165466:{useCachedBoundary:!0},162061:{useCachedBoundary:!0},61320:{useCachedBoundary:!0},161816:{useCachedBoundary:!0},122586:{useCachedBoundary:!0}};async function Ov(t,e,n){mapshaper.applyCommands(e,t,(function(t,e){if(t)return n(t),void console.warn(t);const r=JSON.parse(new TextDecoder("utf-8").decode(e["out.json"]));n(null,r)}))}function Pv(t){const e={};let n="";t.forEach(((t,r)=>{const i="layer"+r+".geojson";e[i]=t,n+=i+" "}));const r="".concat(n,"combine-files -merge-layers -dissolve2 min-gap-area=0 -o format=geojson out.json");return{inputData:e,mapShaperCommand:r}}function Rv(t){let{oceans:e,boundaries:n}=t;return new Promise(((t,r)=>{if(0===e.length)return void t({oceans:e,boundaries:n});const{inputData:i,mapShaperCommand:o}=Pv(e);Ov(i,o,((i,o)=>{if(i)return r(i);e=o,t({oceans:e,boundaries:n})}))}))}function Tv(t){let{oceans:e,boundaries:n}=t;return new Promise(((t,r)=>{if(0===n.length)return void t({oceans:e,boundaries:n});const{inputData:i,mapShaperCommand:o}=Pv(n);Ov(i,o,((i,o)=>{if(i)return r(i);n=o,t({oceans:e,boundaries:n})}))}))}function Av(t){let{oceans:e,boundaries:n}=t;return new Promise(((t,r)=>{if(0===e.length)return void t(n);Ov({"inputLayer.geojson":n,"eraseLayer.geojson":e},"inputLayer.geojson -erase remove-slivers eraseLayer.geojson -simplify 100% keep-shapes -merge-layers -dissolve2 -o format=geojson out.json",((e,n)=>{if(e)return r(e);t(n)}))}))}function Dv(t){return"GeometryCollection"===t.type&&(t=t.geometries[0]),"FeatureCollection"===t.type&&(t=t.features[0].geometry),t}function kv(t,e){let{bbox:n,osmId:r,boundaryName:i,type:o,preview:a}=t;if(!n)return console.warn("no bbox here"),void e(new Error("no bbox here"));const s=r.toString().startsWith("extra-"),u=()=>{const t=s?r:"osm-".concat(r);Pg("https://static.dwcdn.net/regions/".concat(t,".json?c=").concat(Math.random()),"omit",(t=>{const n=Object.keys(t.objects);t.objects.geom=t.objects[n],delete t.objects[n];("highlight"===o||"area-marker"===o)&&(t=Dv(t=Vg(t,t.objects.geom))),e(null,t)}))},l=Mv[r];l&&l.useCachedBoundary||s?s&&a?a.getContext((t=>{const n=t.__dw.vis.getExistingExtraBoundaryGeom(r);n?e(null,n):u()})):u():a.getContext((t=>{const a=t.__dw.vis,s=["highlight","area-marker"].includes(o);a.getMapGeoms(n,i,r,s).then((t=>{const{boundaries:r,oceans:i}=t;if(0===r.length)return void e(new Error("no boundaries found"));const a=function(t,e){void 0===e&&(e={});var n=Number(t[0]),r=Number(t[1]),i=Number(t[2]),o=Number(t[3]);if(6===t.length)throw new Error("@turf/bbox-polygon does not support BBox with 6 positions");var a=[n,r];return Sc([[a,[i,r],[i,o],[n,o],a]],e.properties,{bbox:t,id:e.id})}(n).geometry;(function(t){let{oceans:e,boundaries:n,boundariesBBox:r}=t;return new Promise(((t,i)=>{n.forEach(((o,a)=>{Ov({"inputLayer.geojson":o,"clipLayer.geojson":r},"inputLayer.geojson -clean -clip clipLayer.geojson -o format=geojson out.json",((r,o)=>{if(r)return i(r);n[a]=o,a===n.length-1&&t({oceans:e,boundaries:n})}))}))}))})({oceans:i,boundaries:r,boundariesBBox:a}).then(Rv).then(Tv).then(Av).then((t=>{"minimap"===o&&(t=Cv({geom:t})),e(null,Dv(t))}))})).catch(console.error)}))}function Fv(t,e){var n,r,i,o,a,s,u;for(r=1;r<=8;r*=2){for(n=[],o=!(zv(i=t[t.length-1],e)&r),a=0;a<t.length;a++)(u=!(zv(s=t[a],e)&r))!==o&&n.push(jv(i,s,r,e)),u&&n.push(s),i=s,o=u;if(!(t=n).length)break}return n}function jv(t,e,n,r){return 8&n?[t[0]+(e[0]-t[0])*(r[3]-t[1])/(e[1]-t[1]),r[3]]:4&n?[t[0]+(e[0]-t[0])*(r[1]-t[1])/(e[1]-t[1]),r[1]]:2&n?[r[2],t[1]+(e[1]-t[1])*(r[2]-t[0])/(e[0]-t[0])]:1&n?[r[0],t[1]+(e[1]-t[1])*(r[0]-t[0])/(e[0]-t[0])]:null}function zv(t,e){var n=0;return t[0]<e[0]?n|=1:t[0]>e[2]&&(n|=2),t[1]<e[1]?n|=4:t[1]>e[3]&&(n|=8),n}function Gv(t,e){var n,r="Feature"===(n=t).type?n.geometry:n,i=r.type,o="Feature"===t.type?t.properties:{},a=r.coordinates;switch(i){case"LineString":case"MultiLineString":var s=[];return"LineString"===i&&(a=[a]),a.forEach((function(t){!function(t,e,n){var r,i,o,a,s,u=t.length,l=zv(t[0],e),c=[];for(n||(n=[]),r=1;r<u;r++){for(a=t[r-1],i=o=zv(s=t[r],e);;){if(!(l|i)){c.push(a),i!==o?(c.push(s),r<u-1&&(n.push(c),c=[])):r===u-1&&c.push(s);break}if(l&i)break;l?l=zv(a=jv(a,s,l,e),e):i=zv(s=jv(a,s,i,e),e)}l=o}c.length&&n.push(c)}(t,e,s)})),1===s.length?function(t,e,n){if(void 0===n&&(n={}),t.length<2)throw new Error("coordinates must be an array of two or more positions");return Cc({type:"LineString",coordinates:t},e,n)}(s[0],o):function(t,e,n){return void 0===n&&(n={}),Cc({type:"MultiLineString",coordinates:t},e,n)}(s,o);case"Polygon":return Sc(Bv(a,e),o);case"MultiPolygon":return function(t,e,n){return void 0===n&&(n={}),Cc({type:"MultiPolygon",coordinates:t},e,n)}(a.map((function(t){return Bv(t,e)})),o);default:throw new Error("geometry "+i+" not supported")}}function Bv(t,e){for(var n=[],r=0,i=t;r<i.length;r++){var o=Fv(i[r],e);o.length>0&&(o[0][0]===o[o.length-1][0]&&o[0][1]===o[o.length-1][1]||o.push(o[0]),o.length>=4&&n.push(o))}return n}var qv={version:8,name:"boundaries",sources:{openmaptiles:{type:"vector",minzoom:0,maxzoom:17},boundaries:{type:"vector",minzoom:0,maxzoom:14}},layers:[{id:"ocean",type:"fill",source:"openmaptiles","source-layer":"water",filter:["==","class","ocean"],layout:{visibility:"visible"},paint:{"fill-color":"blue","fill-antialias":!0}},{id:"boundaries",type:"fill",source:"boundaries","source-layer":"admin",paint:{"fill-color":"#c00","fill-opacity":.2},layout:{}}]};let Uv=null;function Vv(t,e){t()?e():setTimeout((()=>{Vv(t,e)}),100)}function Yv(t,e){return(t||0)+Math.log(e/dg)/Math.LN2}function Xv(t,e){t.loaded()?e&&e():setTimeout((()=>Xv(t,e)),40)}dw.visualization.register("locator-map","base",(function(t){let e,r,i,o,a=!1;function s(e){return lt(t.target.parentNode).select(e)}function u(t,o,a){const u=o.chart();if(!n.default.supported())return void function(t,e){const n=t.ownerDocument;if(!n)return;if(Hv.test(n.location.hostname)){const e=n.createElement("p");e.textContent="Failed to load the map. Make sure your browser supports WebGL.",t.appendChild(e)}else{const r=n.createElement("p");r.textContent="Showing a low-resolution version of the map. Make sure your browser supports WebGL to see the full version.",t.appendChild(r);const i=t.ownerDocument.createElement("img");i.src="../plain.png",i.style.width="100%",i.alt=e.get("title"),t.appendChild(i)}}(t,u);const p=o.theme(),f=u.flags(),h=f.svgonly||f.fitchart;"rtl"===o.textDirection&&n.default.setRTLTextPlugin(u.asset("mapboxgl-rtl-text.js"),(t=>{t&&console.error("Failed to load RTL text plugin: ".concat(t))}));let d=o.darkMode(),g=o.get()||{};if(f.isIframe&&lt("body").style("overflow","hidden"),g.defaultMapSize||(g.defaultMapSize=600),!uo(o,"dataset.markers"))return void console.warn("no marker data found");i=lt(t).style("position","relative").html("").append("div#map-container"),i.append("div.container-inner.export-group");const y=lt(t).append("div#mapkey"),m=sv.init({mapkeyContainer:y,mapContainer:i,vis:o});let _;o.get().key&&m.render(o.get().key),_=h?b():o.size()[1]||u.get("metadata.publish.embed-height"),i.style("height",_+"px");function v(){return y.empty()||"none"===y.style("display")?0:u.getElementBounds(y.node()).height}function b(){return o.size()[1]-v()}gc(g,u.get("language"),o,p,null,(function y(x){if(u.inEditor()){if(!u.getMetadata("visualize.view"))return void setTimeout((()=>y(x)),50);g=o.get()||{}}!function(y){const x=!g.view||!g.view.pitch&&(!g.visibility||!g.visibility.building3d)&&f.map2svg;t.classList.toggle("is-dark-map-style",y.metadata.styleIsDark),o.get().key&&m.render(o.get().key,y);h&&!x&&(window.devicePixelRatio=3.125);const w=o.size()[0];g.view&&!h&&(_=w*g.view.height/100,i.style("height",_+"px"));const E=new n.default.Map({container:i.select(".container-inner").node(),attributionControl:!0,style:y,center:g.view?g.view.center:[0,0],zoom:g.view?Yv(g.view.zoom,w):0,bearing:g.view?g.view.bearing:0,pitch:g.view?g.view.pitch:0,preserveDrawingBuffer:h&&!x,fadeDuration:0}),N=u.get("metadata.visualize.view");h&&(N.fit?(l(E,N),l(E,N)):N.bbox&&_c.call(E,N.bbox,{padding:0,duration:0}));const I=i.select(".container-inner").append("div#minimap-container").style("height","0px");s(".mapboxgl-canvas-container").style("pointer-events","none").classed("mapboxgl-interactive",!1),E.keyboard.disable(),E.scrollZoom.disable(),E.boxZoom.disable(),E.dragRotate.disable(),E.dragPan.disable(),E.keyboard.disable(),E.doubleClickZoom.disable(),E.touchZoomRotate.disable();const C=Sg.init(E,i,u,f),S=pg.init(E),L=fg.init(i,u),M=Lg.init(E,o,p),O=Mg.init(E,o,p),P=Og.init(E,u.get("language"),o,p,t,m),R=Ry.init(I,E,o,t),T=av.init(i,E,p,o);s(".mapboxgl-canvas-container").append("span.export-rect").classed("osm-attribution",!0).html("<span class='export-text'>© <a class='link-style-ignore' href='https://www.openstreetmap.org/copyright' target='_blank'> OpenStreetMap</a> contributors</span>"),E.on("click",(function(t){if(r&&"markers"===r.getActiveStep()){const e=E.queryRenderedFeatures(t.point);e[0]&&e[0].properties.marker_id&&r.onMarkerClick({id:e[0].properties.marker_id})}})),E.once("load",(function(){s(".mapboxgl-canvas-container").style("pointer-events","auto")}));let A=null,D=!1,k=w;function F(){let{width:e,dataset:n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const a=o.get(),s=JSON.stringify(a);f.isIframe&&lt("body").style("overflow","auto"),mc(E);const l=n?uo(n,"markers",[]):uo(o,"dataset.markers",[]),v=e||o.size()[0];function w(){const e=o.darkMode();A&&A===s&&e===d&&o._firstRenderComplete?o.renderingComplete():(A=s,Xv(E,(()=>{S.render(a),L.render(a),C.render(a);let n=[];d!==e?gc(g,u.get("language"),o,p,E.getStyle(),(e=>{E.setStyle(e),t.classList.toggle("is-dark-map-style",e.metadata.styleIsDark),E.style.stylesheet.metadata=e.metadata,m.render(a.key,e),R.render(a),n=T.render(l)})):(R.render(a),n=T.render(l)),g=a,d=e,Xv(E,(()=>{if(o._requestedReRender)return o._requestedReRender=!1,void o.render(t);const e=Object.values(n).map((t=>t.renderComplete));Promise.all(e).then((()=>{h&&x?(console.time("SVG rendered in"),cg({map:E,container:i,width:v,height:_,style:y,theme:p}).then((()=>{console.timeEnd("SVG rendered in"),N()}))):N()}))}))})))}function N(){if(o._requestedReRender)return o._requestedReRender=!1,void o.render(t);o.renderingComplete(),o._firstRenderComplete=!0,o._SVGExport={noPitch:0===g.view.pitch,noBuilding3d:!g.visibility.building3d},r&&j()}function I(){if(h)return;R.render(a),i.style("height",v*a.view.height/100+"px");const t=Yv(a.view.zoom,v);if(t>=0&&(E.setZoom(t),E.resize()),e)return;const n=Math.max(.8,Math.min(1,v/a.defaultMapSize));i.selectAll(".mapboxgl-marker.mapboxgl-marker-anchor-center > .m-wrapper").style("transform",(function(){let t="scale(".concat(n,")");const e=lt(this).style("transform");if(e&&"none"!==e){const n=e.match(/(rotate\()(.*)(\))/);n&&(t+=" ".concat(n[0]))}return t}))}v!==k&&(I(),k=v),h?setTimeout((()=>{const t=b();_!==t?(_=t,i.style("height",_+"px"),E.resize(),c(u,w)):w()}),200):w()}function j(){if(D)return;D=!0,r.onInit(),function(t,e,n){const r="boundaries",i={type:"vector",minzoom:0,maxzoom:14,__dwParentIdsNegative:!0},o={sources:{[r]:i}};so(o,e.defaultBoundariesStyle),dc(o,n),t.addSource(r,i),t.addLayer({id:"boundariesToQuery",type:"fill",source:r,"source-layer":"admin",paint:{"fill-color":"#c00","fill-opacity":0}},"landuse_residential")}(E,o.meta.__config,o.chart().get("id"));const t=[S,L,C,m,M,O,P,R,T];function n(){window.__dwUpdate&&window.__dwUpdate({chart:r.chart.serialize()})}r&&r.chart&&(t.forEach((t=>t.initEditor(r,e))),r.chart.observeDeep("title",n),r.chart.observeDeep("metadata",n))}Xv(E,(()=>{a({update:F,map:E,initEditor:j,getMapKeyHeight:v,calcMapHeightToFillDocument:b,fitPoints(){l(E,u.getMetadata("visualize.view"))}}),F()}))}(x)}))}function l(t,e){const n=t.getContainer().clientWidth,r=t.getContainer().clientHeight;t.setCenter(e.center),t.setBearing(e.bearing),t.setPitch(e.pitch);const i={};["top","right","bottom","left"].forEach((n=>i[n]=t.project([e.fit[n][0],e.fit[n][1]])));const{top:o,right:a,bottom:s,left:u}=i,l=a.x-u.x,c=s.y-o.y,p=t.getZoom()+Math.log2(Math.min(n/l,r/c));isFinite(p)&&t.setZoom(p)}function c(t,n){clearTimeout(o),p((()=>{o=setTimeout((function(){const r=t.getMetadata("visualize.view");r.fit?(l(e.map,r),l(e.map,r)):r.bbox&&_c.call(e.map,r.bbox,{padding:0,duration:0}),n&&n()}),1300)}))}function p(t){e&&(e.map.loaded()||e.map.isStyleLoaded()||e.map.areTilesLoaded())?t&&t():setTimeout((()=>p(t)),40)}function f(t,n){e&&e.map.getSource(t)&&e.map.isSourceLoaded(t)?n&&n():setTimeout((()=>f(t,n)),40)}let h=[];return{_firstRenderComplete:!1,_firstRenderStarted:!1,__rejectRenderedAfter:3e4,render(t){if(this._container=t,e){if(a)return;if(!r)return this._firstRenderStarted&&!this._firstRenderComplete?void(this._requestedRerender=!0):void e.update();this.renderingComplete()}else{if(this._firstRenderStarted)return void(this._requestedRerender=!0);this._firstRenderStarted=!0,u(t,this,(t=>{e=t}))}},updateMap(){let{width:t,dataset:n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e&&e.update({width:t,dataset:n})},getMap:()=>e?e.map:null,getCenter:()=>e.map.getCenter().toArray(),getRandomCenter(){const t=e.map.getCenter(),n=e.map.project(t);var r=Math.floor(10*Math.random())+10;r*=1===Math.floor(2*Math.random())?1:-1;var i=Math.floor(10*Math.random())+10;i*=1===Math.floor(2*Math.random())?1:-1,n.x+=r,n.y+=i;const o=e.map.unproject(n);return[o.lng,o.lat]},getZoom:()=>e.map.getZoom(),getBBox:()=>e.map.getBounds().toArray(),setEditor(t){const n=this;void 0===r&&(r={}),pv(r,t),n._firstRenderComplete&&e.initEditor(),t.debugTiles&&Vv((()=>e&&e.map),(()=>{t.debugTiles(e.map,lt(n.target()))}))},setView(t){e.map.dragPan.isActive()||(e.map.setBearing(t.bearing),e.map.setPitch(t.pitch),e.map.setZoom(Yv(t.zoom,i.node().clientWidth)))},setBearingAndPitch(t,n){e.map.setBearing(t),e.map.setPitch(n)},setBBox(t,n){a=!0;const r=()=>{e.map.off("moveend",r),a=!1,n&&n()};e.map.on("moveend",r),_c.call(e.map,t,{padding:50})},setCenter(t,n){a=!0;const r=()=>{e.map.off("moveend",r),a=!1,n&&n()};e.map.on("moveend",r),e.map.flyTo({center:t})},flyTo(t,n){a=!0;const r=()=>{e.map.off("moveend",r),a=!1,n&&n()};e.map.on("moveend",r),e.map.flyTo(t)},setCenterQuick(t){e.map.setCenter(t)},highlightMarker(t){s("#svg-id-"+t).style("filter","url(#glow)")},resetHighlightMarker(t){s("#svg-id-"+t).style("filter","")},getBoundariesNames(t){f("boundaries",(()=>{const n=e.map.getBounds().toArray(),r=e.map.project(n[1]).x,i=e.map.project(n[0]).y,o=100,a=e.map.getSource("boundaries"),s=e.map.queryRenderedFeatures([[o,o],[r-o,i-o]],{layers:["boundariesToQuery"]});s.forEach((t=>{const e=JSON.parse(t.properties.bbox).coordinates[0];t.properties.bbox=[e[0][0],e[0][1],e[2][0],e[2][1]],a._options.__dwParentIdsNegative&&(t.properties.parent_id*=-1)})),t(s.map((t=>t.properties)))}))},getExistingExtraBoundaryGeom:t=>h.find((e=>{let[n]=e;return n===t})),cleanUpExtraSources(){h.forEach((t=>{let[n]=t;e.map.removeLayer("".concat(n,"-fill")),e.map.removeLayer("".concat(n,"-line")),e.map.removeSource(n)})),h=[]},async focusOnBoundary(t,n,r,i,o){if(!e)return;const a=["line","fill","ocean"],s=h.map((t=>{let[e]=t;return e})),u="minimap"===n?[2,2]:[2e12],l="minimap"===n||"area-marker"===n?"highlight-preview-line":"landuse_residential";"minimap"===n&&(o="#c71e1d");const c=e.map.getLayer("ocean").getPaintProperty("fill-color"),f={fill:{"fill-color":r,"fill-opacity":i,"fill-outline-color":r},ocean:{"fill-color":c,"fill-antialias":!0},line:{"line-color":o,"line-opacity":1,"line-dasharray":u}},d=(t,e,n)=>{const r="ocean"===e,i="line"===e,o="fill"===e;return[{id:"".concat(t,"-").concat(e),type:i?"line":"fill",source:n||(r?"openmaptiles":"boundaries"),layout:{visibility:n?"visible":"none"},paint:f[e],...!n&&{"source-layer":r?"water":"admin"},...!!r&&{filter:["==","class","ocean"]}},o?l:"highway_name_other"]};if(a.forEach((t=>{e.map.getLayer("highlight-preview-".concat(t))||e.map.addLayer(...d("highlight-preview",t))})),null===t)e.map.setLayoutProperty("highlight-preview-ocean","visibility","none"),["highlight-preview",...s].forEach((t=>{e.map.getLayer("".concat(t,"-fill"))&&(e.map.setLayoutProperty("".concat(t,"-fill"),"visibility","none"),e.map.setLayoutProperty("".concat(t,"-line"),"visibility","none"))}));else{const l=t.result.osm_id?"osm_id":t.result.name?"name":"name_en";let f;if((String(t.result.osm_id)||"").match(/^extra-/)){const r=t.result.osm_id;f=r,e.map.getSource(r)||await new Promise((i=>{kv({bbox:t.result.bbox,osmId:t.result.osm_id,boundaryName:t.result.name,type:n},((t,o)=>{t||(h.push([r,o]),"minimap"===n&&(o=Dv(o=Vg(o,o.objects.geom))),e.map.addSource(r,{type:"geojson",data:o,tolerance:.375}),e.map.addLayer(...d(r,"fill",r)),e.map.addLayer(...d(r,"line",r)),i())}))})),a.forEach((t=>{e.map.setLayoutProperty("highlight-preview-".concat(t),"visibility","none")}))}else{e.map.setLayoutProperty("highlight-preview-ocean","visibility","visible"),["fill","line"].forEach((t=>{const n="highlight-preview-".concat(t);e.map.setLayoutProperty(n,"visibility","none")}));const n=String(t.result.osm_id);if(f=n,t.result.customisedProps&&t.result.customisedProps.bbox){if(!e.map.getSource(n)){const r=e.map.queryRenderedFeatures().filter((e=>e.properties[l]===t.result[l])),i=r.map((e=>{const n=Gv(e.geometry,t.result.bbox);return n.geometry.coordinates=n.geometry.coordinates.filter((t=>t.length>0)),n})),o={type:"FeatureCollection",features:[nd(...i)]};h.push([n,o]),e.map.addSource(n,{type:"geojson",data:o,tolerance:.375}),e.map.addLayer(...d(n,"fill",n)),e.map.addLayer(...d(n,"line",n))}}else["fill","line"].forEach((n=>{const r="highlight-preview-".concat(n);e.map.setFilter(r,["any",["==",l,t.result[l]]]),e.map.setLayoutProperty(r,"visibility","visible")}))}s.forEach((t=>{const n=t===f?"visible":"none";["fill","line"].forEach((r=>{e.map.setLayoutProperty("".concat(t,"-").concat(r),"visibility",n)}))})),p((()=>{e.map.setPaintProperty("highlight-preview-ocean","fill-color",c),["highlight-preview",...s].forEach((t=>{e.map.setPaintProperty("".concat(t,"-fill"),"fill-color",r),e.map.setPaintProperty("".concat(t,"-fill"),"fill-outline-color",r),e.map.setPaintProperty("".concat(t,"-fill"),"fill-opacity",i),e.map.setPaintProperty("".concat(t,"-line"),"line-color",o),e.map.setPaintProperty("".concat(t,"-line"),"line-dasharray",u)}))}))}},getMapGeoms(t,e,r,i){const o=this,a=lt(o.target()).append("div").style("visibility","hidden").style("left","-100000000px").style("top","-100000000px").style("position","absolute").style("width","200px").style("height","200px");if(i){const e=o.getMap(),{x:n,y:r}=e.project(t.slice(0,2)),{x:i,y:s}=e.project(t.slice(2)),u=Math.max(200,i-n,r-s);a.style("width",u+"px").style("height",u+"px")}n.default.accessToken="";const s=(u=o.meta.__config,Uv||(Uv=so(ct(qv),u.defaultMinimapStyle)),Uv);var u;const l=new n.default.Map({container:a.node(),attributionControl:!0,style:s});return l.fitBounds([t.slice(0,2),t.slice(2,4)],{padding:10,duration:0}),new Promise((t=>{l.once("load",(function(){const n=t=>{const n=[];return l.queryRenderedFeatures({layers:[t]}).forEach((i=>{(i.properties.osm_id===r||!i.properties.osm_id&&i.properties.name===e||"ocean"===t)&&n.push(i.geometry)})),n};a.remove(),t({boundaries:n("boundaries"),oceans:n("ocean")})}))}))},getExactBBox(){const t=s(".mapboxgl-canvas"),n=Number(t.style("width").replace("px","")),r=Number(t.style("height").replace("px","")),i=[];Ed(0,1,.05).forEach((t=>i.push([n*t,0]))),Ed(0,1,.05).forEach((t=>i.push([n,r*t]))),Ed(0,1,.05).forEach((t=>i.push([n*(1-t),r]))),Ed(0,1,.05).forEach((t=>i.push([0,r*(1-t)])));const o=i.map((t=>e.map.unproject(t)));o.push(o[0]);return{type:"Feature",geometry:{type:"Polygon",coordinates:[o.map((t=>[t.lng,t.lat]))]}}},getHighlightFeature(t){let e=dw.asset("minimap-geometry.json");var n;e?(e=Vg(e,e.objects.geom),"GeometryCollection"===(n=e).type&&(n=n.geometries[0]),"FeatureCollection"===n.type&&(n=n.features[0].geometry),e=n):e=!1,t(e)},setLocatorMapView(t){if(r){if(a=!0,t){const t=e.calcMapHeightToFillDocument();i.style("height",t+"px")}c(r.chart,(()=>{a=!1}))}},reset(){},supportsSmartRendering:()=>!0,exportCanvas:!0}}),...dw.visualization.hasVisHash?["13d97384","%%499431e9%%".slice(2,-2)]:[]);const Hv=/\.datawrapper\.(de|dev|local)$/}();

